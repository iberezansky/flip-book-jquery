/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _libs = __webpack_require__(2);

__webpack_require__(1);

exports.default = _libs.$;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/******/(function (modules) {
  // webpackBootstrap
  /******/ // The module cache
  /******/var installedModules = {};
  /******/
  /******/ // The require function
  /******/function __webpack_require__(moduleId) {
    /******/
    /******/ // Check if module is in cache
    /******/if (installedModules[moduleId])
      /******/return installedModules[moduleId].exports;
    /******/
    /******/ // Create a new module (and put it into the cache)
    /******/var module = installedModules[moduleId] = {
      /******/i: moduleId,
      /******/l: false,
      /******/exports: {}
      /******/ };
    /******/
    /******/ // Execute the module function
    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    /******/
    /******/ // Flag the module as loaded
    /******/module.l = true;
    /******/
    /******/ // Return the exports of the module
    /******/return module.exports;
    /******/
  }
  /******/
  /******/
  /******/ // expose the modules object (__webpack_modules__)
  /******/__webpack_require__.m = modules;
  /******/
  /******/ // expose the module cache
  /******/__webpack_require__.c = installedModules;
  /******/
  /******/ // identity function for calling harmony imports with the correct context
  /******/__webpack_require__.i = function (value) {
    return value;
  };
  /******/
  /******/ // define getter function for harmony exports
  /******/__webpack_require__.d = function (exports, name, getter) {
    /******/if (!__webpack_require__.o(exports, name)) {
      /******/Object.defineProperty(exports, name, {
        /******/configurable: false,
        /******/enumerable: true,
        /******/get: getter
        /******/ });
      /******/
    }
    /******/
  };
  /******/
  /******/ // getDefaultExport function for compatibility with non-harmony modules
  /******/__webpack_require__.n = function (module) {
    /******/var getter = module && module.__esModule ?
    /******/function getDefault() {
      return module['default'];
    } :
    /******/function getModuleExports() {
      return module;
    };
    /******/__webpack_require__.d(getter, 'a', getter);
    /******/return getter;
    /******/
  };
  /******/
  /******/ // Object.prototype.hasOwnProperty.call
  /******/__webpack_require__.o = function (object, property) {
    return Object.prototype.hasOwnProperty.call(object, property);
  };
  /******/
  /******/ // __webpack_public_path__
  /******/__webpack_require__.p = "";
  /******/
  /******/ // Load entry module and return exports
  /******/return __webpack_require__(__webpack_require__.s = 72);
  /******/
})(
/************************************************************************/
/******/[
/* 0 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  var _$ = true ? window.jQuery : require('jquery'),
      _html2canvas = true ? window.html2canvas : require('html2canvas'),
      _THREE = true ? window.THREE : require('three'),
      _React = true ? window.React : require('react'),
      _ReactDOM = true ? window.ReactDOM : require('react-dom'),
      _PDFJS = true ? window.PDFJS : require('pdfjs'),
      _tr = function _tr(s) {
    return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;
  };

  exports.$ = _$;
  exports.html2canvas = _html2canvas;
  exports.THREE = _THREE;
  exports.React = _React;
  exports.ReactDOM = _ReactDOM;
  exports.PDFJS = _PDFJS;
  exports.tr = _tr;

  /***/
},
/* 1 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _$ = true ? window.jQuery : require('jquery'),
      _html2canvas = true ? window.html2canvas : require('html2canvas'),
      _THREE = true ? window.THREE : require('three'),
      _PDFJS = true ? window.PDFJS : require('pdfjs'),
      _tr = function _tr(s) {
    return (window.iberezansky || {}).tr && window.iberezansky.tr(s) || s;
  };

  if (window.FB3D_LOCALE) {
    window.iberezansky = _extends({}, window.iberezansky, {
      tr: function tr(s) {
        return (FB3D_LOCALE.dictionary || {})[s] || s;
      }
    });
  }

  exports.$ = _$;
  exports.html2canvas = _html2canvas;
  exports.THREE = _THREE;
  exports.PDFJS = _PDFJS;
  exports.tr = _tr;

  /***/
},
/* 2 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BaseMathUtils = function () {
    function BaseMathUtils() {
      _classCallCheck(this, BaseMathUtils);
    }

    BaseMathUtils.sum1 = function sum1(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0]];
    };

    BaseMathUtils.sum2 = function sum2(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1]];
    };

    BaseMathUtils.sum3 = function sum3(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2]];
    };

    BaseMathUtils.sum4 = function sum4(ka, a, kb, b) {
      return [ka * a[0] + kb * b[0], ka * a[1] + kb * b[1], ka * a[2] + kb * b[2], ka * a[3] + kb * b[3]];
    };

    BaseMathUtils.rk4 = function rk4(dy, t, dt, y) {
      var sum = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : BaseMathUtils.sum[y.length - 1];

      var k1 = dy(t, y),
          k2 = dy(t + dt / 2, sum(1, y, dt / 2, k1)),
          k3 = dy(t + dt / 2, sum(1, y, dt / 2, k2)),
          k4 = dy(t + dt, sum(1, y, dt, k3));
      return sum(1, y, dt / 6, sum(1, sum(1, k1, 2, k2), 1, sum(2, k3, 1, k4)));
    };

    BaseMathUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {
      return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);
    };

    BaseMathUtils.interpolateLinear = function interpolateLinear(x, y, xi) {
      var yi = void 0;
      if (x[0] > x[1]) {
        x = x.reverse();
        y = y.reverse();
      }
      if (xi < x[0]) {
        yi = y[0];
      } else if (xi > x[1]) {
        yi = y[1];
      } else {
        yi = BaseMathUtils.extrapolateLinear(x, y, xi);
      }
      return yi;
    };

    BaseMathUtils.calcScale = function calcScale(srcW, srcH, dstW, dstH) {
      return Math.min(dstW / srcW, dstH / srcH);
    };

    BaseMathUtils.mulM = function mulM(a, b) {
      var r = [];
      for (var i = 0; i < a.length; ++i) {
        r.push([]);
        for (var j = 0; j < b[0].length; ++j) {
          r[i][j] = 0;
          for (var k = 0; k < b.length; ++k) {
            r[i][j] += a[i][k] * b[k][j];
          }
        }
      }
      return r;
    };

    BaseMathUtils.transM = function transM(m) {
      var r = [];
      for (var i = 0; i < m.length; ++i) {
        for (var j = 0; j < m[0].length; ++j) {
          if (!r[j]) {
            r[j] = [];
          }
          r[j][i] = m[i][j];
        }
      }
      return r;
    };

    BaseMathUtils.mat = function mat(data) {
      var s = 0;
      for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var x = _ref;

        s += x;
      }
      return s / data.length;
    };

    BaseMathUtils.disp = function disp(data) {
      var M = BaseMathUtils.mat(data);
      var s = 0;
      for (var _iterator2 = data, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var x = _ref2;

        s += (x - M) * (x - M);
      }
      return s / data.length;
    };

    BaseMathUtils.predict = function predict(data, num) {
      var r = [],
          l = data.length,
          D = BaseMathUtils.disp(data);
      if (D < l && l > 1) {
        var am = [],
            bm = [];
        for (var i = 0; i < l; ++i) {
          am.push([i, 1]);
          bm.push([data[i]]);
        }
        var ta = BaseMathUtils.transM(am),
            a = BaseMathUtils.mulM(ta, am),
            b = BaseMathUtils.mulM(ta, bm),
            d = a[0][0] * a[1][1] - a[1][0] * a[0][1],
            p = [-(a[0][1] * b[1][0] - b[0][0] * a[1][1]) / d, (a[0][0] * b[1][0] - a[1][0] * b[0][0]) / d];
        for (var _i3 = 0; _i3 < num; ++_i3) {
          var v = Math.round(p[0] * (_i3 + l) + p[1]);
          if (r.indexOf(v) === -1) {
            r.push(v);
          }
        }
      }
      return r;
    };

    BaseMathUtils.getUnique = function getUnique() {
      return Math.ceil(1e9 * Math.random());
    };

    BaseMathUtils.setSplinePoints = function setSplinePoints(spline, ps) {
      if (spline.points.length !== ps.x.length) {
        console.warn('setSplinePoints: bad points');
      }
      for (var i = 0; i < spline.points.length; ++i) {
        spline.points[i].set(ps.x[i], ps.y[i], ps.z ? ps.z[i] : 0);
      }
    };

    BaseMathUtils.mapl2L = function mapl2L(ls, len, n, f) {
      var dL = len / (n - 1);
      var L = 0;
      for (var i = 0, d = ls[0]; i < ls.length - 1 && L < len + 0.1 * dL; ++i, d += ls[i]) {
        if (Math.abs(L - d) < Math.abs(L - d - ls[i + 1])) {
          f(i, L);
          L += dL;
        }
      }
      if (L < len + 0.1 * dL) {
        console.warn('mapl2L: ls is not enought');
      }
    };

    BaseMathUtils.det2 = function det2(a, b, c, d) {
      return a * d - b * c;
    };

    BaseMathUtils.solve2Lin = function solve2Lin(a1, b1, a2, b2) {
      var res = void 0;
      var d = BaseMathUtils.det2(a1[0], a1[1], a2[0], a2[1]);
      if (Math.abs(d) > BaseMathUtils.eps) {
        var dx = BaseMathUtils.det2(b1, a1[1], b2, a2[1]),
            dy = BaseMathUtils.det2(a1[0], b1, a2[0], b2);
        res = {
          x: dx / d,
          y: dy / d
        };
      }
      return res;
    };

    BaseMathUtils.isInsidePoly = function isInsidePoly(ps, p) {
      var done = false,
          ct = void 0;
      for (var i = 0; i < ps.length; ++i) {
        if (BaseMathUtils.v2dist(p, ps[i]) < BaseMathUtils.eps) {
          ct = 1;
          done = true;
          break;
        }
      }
      while (!done) {
        done = true;
        ct = 0;
        var np = { x: p.x + Math.random() - 0.5, y: p.y + Math.random() - 0.5 },
            rn = { x: np.x - p.x, y: np.y - p.y },
            a1 = [rn.y, -rn.x],
            b1 = p.x * rn.y - p.y * rn.x;
        for (var _i4 = 0; _i4 < ps.length; ++_i4) {
          var p0 = ps[_i4],
              p1 = ps[(_i4 + 1) % ps.length],
              n = { x: p1.x - p0.x, y: p1.y - p0.y },
              a2 = [n.y, -n.x],
              b2 = p0.x * n.y - p0.y * n.x,
              ip = BaseMathUtils.solve2Lin(a1, b1, a2, b2);
          if (ip) {
            if (BaseMathUtils.v2dist(ip, p0) < BaseMathUtils.eps || BaseMathUtils.v2dist(ip, p1) < BaseMathUtils.eps) {
              done = false;
              break;
            } else if (ip.x > Math.min(p0.x, p1.x) - BaseMathUtils.eps && ip.x < Math.max(p0.x, p1.x) + BaseMathUtils.eps && ip.y > Math.min(p0.y, p1.y) - BaseMathUtils.eps && ip.y < Math.max(p0.y, p1.y) + BaseMathUtils.eps) {
              if (BaseMathUtils.v2dist(ip, p) < BaseMathUtils.eps) {
                ct = 1;
                break;
              } else {
                var tn = { x: ip.x - p.x, y: ip.y - p.y };
                ct += tn.x * rn.x + tn.y * rn.y > 0;
              }
            }
          }
        }
      }
      return ct % 2;
    };

    BaseMathUtils.isInsideConvPoly = function isInsideConvPoly(ps, p) {
      var sg = [0, 0];
      for (var i = 0; i < ps.length; ++i) {
        var p0 = ps[i],
            p1 = ps[(i + 1) % ps.length],
            a = { x: p0.x - p.x, y: p0.y - p.y },
            b = { x: p1.x - p.x, y: p1.y - p.y };
        ++sg[(a.x * b.y - a.y * b.x < 0) + 0];
      }
      return ~sg.indexOf(ps.length);
    };

    BaseMathUtils.v2len = function v2len(v2) {
      return Math.sqrt(v2.x * v2.x + v2.y * v2.y);
    };

    BaseMathUtils.v2dist = function v2dist(v21, v22) {
      return BaseMathUtils.v2len({
        x: v22.x - v21.x,
        y: v22.y - v21.y
      });
    };

    BaseMathUtils.computeSquare = function computeSquare(ps) {
      var a = [];
      var p = 0;
      for (var i = 0; i < ps.length; ++i) {
        a.push(BaseMathUtils.v2dist(ps[i], ps[(i + 1) % ps.length]));
        p += 0.5 * a[i];
      }
      return Math.sqrt(p * (p - a[0]) * (p - a[1]) * (p - a[2]));
    };

    BaseMathUtils.computeInterpCoefs = function computeInterpCoefs(tri, p) {
      var s = BaseMathUtils.computeSquare(tri),
          coefs = [],
          l = tri.length;
      for (var i = 0; i < l; ++i) {
        coefs[i] = BaseMathUtils.computeSquare([p, tri[(i + 1) % l], tri[(i + 2) % l]]) / s;
      }
      return coefs;
    };

    return BaseMathUtils;
  }();

  BaseMathUtils.sum = [BaseMathUtils.sum1, BaseMathUtils.sum2, BaseMathUtils.sum3, BaseMathUtils.sum4];
  BaseMathUtils.eps = 1e-4;
  exports.default = BaseMathUtils;

  /***/
},
/* 3 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _BaseMathUtils2 = __webpack_require__(2);

  var _BaseMathUtils3 = _interopRequireDefault(_BaseMathUtils2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var MathUtils = function (_BaseMathUtils) {
    _inherits(MathUtils, _BaseMathUtils);

    function MathUtils() {
      _classCallCheck(this, MathUtils);

      return _possibleConstructorReturn(this, _BaseMathUtils.apply(this, arguments));
    }

    MathUtils.splitSpline = function splitSpline(spline, N) {
      var o = { len: 0, ls: [0] },
          dl = 1 / N;
      for (var i = 0; i <= N; ++i) {
        var p = spline.getPoint(i * dl);
        if (i) {
          var d = MathUtils.v1.distanceTo(p);
          o.len += d;
          o.ls.push(d);
        }
        MathUtils.v1.copy(p);
      }
      return o;
    };

    MathUtils.getLinearIndeces = function getLinearIndeces(spline, n) {
      var del = 5000,
          dDel = 1 / del;
      var ls = [0];
      var l = 0;
      for (var i = 0; i <= del; ++i) {
        var p = spline.getPoint(i * dDel);
        if (i) {
          var d = MathUtils.v1.distanceTo(p);
          l += d;
          ls.push(d);
        }
        MathUtils.v1.copy(p);
      }
      ls.push(1e7);

      var res = [],
          dl = l / (n - 1);
      for (var _i = 0, L = 0, _d = ls[0]; _i < ls.length - 1; ++_i, _d += ls[_i]) {
        if (Math.abs(L - _d) < Math.abs(L - _d - ls[_i + 1])) {
          res.push(_i * dDel);
          L += dl;
        }
      }

      return res;
    };

    MathUtils.refinePoly = function refinePoly(poly, maxDl) {
      var res = [];
      for (var i = 0; i < poly.length; ++i) {
        var p0 = poly[i],
            p1 = poly[(i + 1) % poly.length],
            l = _BaseMathUtils3.default.v2dist(p0, p1),
            n = Math.ceil(l / maxDl),
            dl = l / n;
        res.push(p0);
        for (var j = 1; j < n; ++j) {
          res.push(new _libs.THREE.Vector2(p0.x + j * dl * (p1.x - p0.x) / l, p0.y + j * dl * (p1.y - p0.y) / l));
        }
      }
      return res;
    };

    return MathUtils;
  }(_BaseMathUtils3.default);

  MathUtils.v1 = new _libs.THREE.Vector3();
  exports.default = MathUtils;

  /***/
},
/* 4 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Utils = function () {
    function Utils() {
      _classCallCheck(this, Utils);
    }

    Utils.normalizeUrl = function normalizeUrl(url) {
      function split(s) {
        return s.replace(/\\/g, '/').split('/');
      }
      var base = split(window.location.href);
      url = split(url);
      if (base[2] === url[2]) {
        url[0] = base[0];
      }
      return url.join('/');
    };

    Utils.extends = function _extends(der, base) {
      for (var name in base) {
        if (!der.hasOwnProperty(name)) {
          der[name] = base[name];
        }
      }
    };

    Utils.defaultCmp = function defaultCmp(a, b) {
      return a - b;
    };

    Utils.lowerBound = function lowerBound(a, x, cmp) {
      cmp = cmp || Utils.defaultCmp;
      var l = 0,
          h = a.length - 1;
      while (h - l > 1) {
        var mid = Math.floor((l + h) / 2);
        if (cmp(x, a[mid]) < 0) {
          h = mid;
        } else {
          l = mid;
        }
      }
      return cmp(x, a[h]) >= 0 ? h : l;
    };

    return Utils;
  }();

  exports.default = Utils;

  /***/
},
/* 5 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ImageBase = function () {
    function ImageBase(context, width, height, color) {
      _classCallCheck(this, ImageBase);

      this.context = context;
      this.wnd = context.wnd;
      this.doc = context.doc;
      this.element = context.element || context.doc.body;
      this.c = context.renderCanvas || ImageBase.renderCanvas;
      this.ctx = context.renderCanvasCtx || ImageBase.renderCanvasCtx;
      this.resW = this.width = width;
      this.resH = this.height = height;
      this.color = color;
    }

    ImageBase.prototype.setResolution = function setResolution(res) {
      this.resW = res.width;
      this.resH = res.height;
    };

    ImageBase.prototype.dispose = function dispose() {};

    ImageBase.prototype.renderBlankPage = function renderBlankPage() {
      this.ctx.beginPath();
      this.ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.color, 1);
      this.ctx.rect(0, 0, this.c.width, this.c.height);
      this.ctx.fill();
    };

    ImageBase.prototype.renderImage = function renderImage(image) {
      this.pushCtx();
      this.ctx.drawImage(image, 0, 0);
      this.popCtx();
    };

    ImageBase.prototype.normToConv = function normToConv(p) {
      return {
        x: p.x * this.c.width,
        y: (1 - p.y) * this.c.height
      };
    };

    ImageBase.prototype.renderHit = function renderHit(poly) {
      var ctx = this.ctx;
      ctx.fillStyle = 'rgba(255,255,0,0.4)';
      ctx.beginPath();
      var p = this.normToConv(poly[0]);
      ctx.moveTo(p.x, p.y);
      for (var i = 1; i < poly.length; ++i) {
        p = this.normToConv(poly[i]);
        ctx.lineTo(p.x, p.y);
      }
      ctx.closePath();
      ctx.fill();
    };

    ImageBase.prototype.pushCtx = function pushCtx() {
      if (this.resW != this.c.width) {
        this.c.width = this.resW;
      }
      if (this.resH != this.c.height) {
        this.c.height = this.resH;
      }
      this.ctx.save();
      this.ctx.scale(this.c.width / this.width, this.c.height / this.height);
      return this.ctx;
    };

    ImageBase.prototype.popCtx = function popCtx() {
      this.ctx.restore();
    };

    ImageBase.prototype.renderNotFoundPage = function renderNotFoundPage() {
      this.renderBlankPage();
    };

    ImageBase.prototype.finishRender = function finishRender() {
      if (this.onChange) {
        this.onChange(this.c);
      }
    };

    ImageBase.prototype.finishLoad = function finishLoad() {
      if (this.onLoad) {
        this.onLoad();
      } else {
        this.startRender();
      }
    };

    ImageBase.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return undefined;
    };

    return ImageBase;
  }();

  ImageBase.renderCanvas = (0, _libs.$)('<canvas>')[0];
  ImageBase.renderCanvasCtx = ImageBase.renderCanvas.getContext('2d');
  exports.default = ImageBase;

  /***/
},
/* 6 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var EventConverter = function () {

    // virtuals
    // getObject(e, data);
    // getCallback(object);
    // test(object1, object1);

    function EventConverter(wnd, doc) {
      _classCallCheck(this, EventConverter);

      this.wnd = wnd;
      this.doc = doc;
      this.enabled = true;
    }

    EventConverter.prototype.setEnable = function setEnable(vl) {
      if (!vl) {
        if (this.mCapObject) {
          this.notify(this.mCapObject, _libs.$.Event('mouseup'), 'mouseup');
          this.mCapObject = undefined;
        }
        if (this.mHovObject) {
          this.notify(this.mHovObject, _libs.$.Event('mouseout'), 'mouseout');
          this.mHovObject = undefined;
        }
      }
      this.enabled = vl;
    };

    EventConverter.prototype.getCallback = function getCallback(object) {
      return undefined;
    };

    EventConverter.prototype.notify = function notify(object, e, type) {
      var callback = this.getCallback(object);
      if (callback) {
        var props = _extends({}, e, {
          type: type,
          view: this.wnd
        });
        var jE = _libs.$.Event(type, props);
        callback(jE, object);
      }
    };

    EventConverter.prototype.convert = function convert(e, data) {
      if (!this.enabled) return;

      if (this.filter) {
        e = this.filter(this.element, e);
      }

      var object = this.getObject(e, data),
          notify = ~e.type.indexOf('touch') ? this.convertTouch(e, data, object) : this.convertMouse(e, data, object);
      if (notify && object) {
        this.notify(object, e, e.type);
      }
    };

    EventConverter.prototype.convertTouch = function convertTouch(e, data, object) {
      var notify = true;
      switch (e.type) {
        case 'touchstart':
          {
            if (this.tCapObject) {
              this.notify(this.tCapObject, e, 'touchend');
            }
            this.tCapObject = object;
            break;
          }
        case 'touchend':
          {
            if (this.tCapObject && !this.test(this.tCapObject, object)) {
              this.notify(this.tCapObject, e, 'touchend');
              notify = false;
            } else if (object && this.test(this.tCapObject, object)) {
              this.notify(object, e, 'touchtap');
            }
            this.tCapObject = undefined;
            break;
          }
        case 'touchtap':
          {
            notify = false;
            break;
          }
      }
      return notify;
    };

    EventConverter.prototype.convertMouse = function convertMouse(e, data, object) {
      var notify = true;
      switch (e.type) {
        case 'mousedown':
          {
            if (this.mCapObject) {
              this.notify(this.mCapObject, e, 'mouseup');
            }
            this.mCapObject = object;
            break;
          }
        case 'mouseup':
          {
            if (this.mCapObject && !this.test(this.mCapObject, object)) {
              this.notify(this.mCapObject, e, 'mouseup');
              notify = false;
            }
            break;
          }
        case 'click':
          {
            notify = this.test(this.mCapObject, object);
            this.mCapObject = undefined;
            break;
          }
        case 'mouseenter':
        case 'mouseover':
        case 'mousemove':
          {
            if (!this.test(this.mHovObject, object) && this.mHovObject) {
              this.notify(this.mHovObject, e, 'mouseout');
              this.mHovObject = undefined;
            }
            if (!this.mHovObject && object) {
              this.notify(object, e, 'mouseover');
              this.mHovObject = object;
            }
            notify = e.type === 'mousemove';
            break;
          }
        case 'mouseleave':
        case 'mouseout':
          {
            if (this.mHovObject) {
              this.notify(this.mHovObject, e, 'mouseout');
              this.mHovObject = undefined;
            }
            notify = false;
            break;
          }
      }
      return notify;
    };

    return EventConverter;
  }();

  exports.default = EventConverter;

  /***/
},
/* 7 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var GraphUtils = function () {
    function GraphUtils() {
      _classCallCheck(this, GraphUtils);
    }

    GraphUtils.extrapolateLinear = function extrapolateLinear(x, y, xi) {
      return y[0] + (y[1] - y[0]) / (x[1] - x[0]) * (xi - x[0]);
    };

    GraphUtils.interpolate01 = function interpolate01(y1, y2, t) {
      return GraphUtils.extrapolateLinear([0, 1], [y1, y2], t);
    };

    GraphUtils.getColorBytes = function getColorBytes(color) {
      return [color >> 16 & 0xFF, color >> 8 & 0xFF, color & 0xFF];
    };

    GraphUtils.inverseColor = function inverseColor(color) {
      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      var bs = GraphUtils.getColorBytes(color),
          ibs = [0xFF - bs[0], 0xFF - bs[1], 0xFF - bs[2]],
          nbs = [Math.round(GraphUtils.interpolate01(bs[0], ibs[0], t)), Math.round(GraphUtils.interpolate01(bs[1], ibs[1], t)), Math.round(GraphUtils.interpolate01(bs[2], ibs[2], t))];
      return GraphUtils.bytes2Color(nbs);
    };

    GraphUtils.color2Rgba = function color2Rgba(color, a) {
      return GraphUtils.bytes2Rgba(GraphUtils.getColorBytes(color), a);
    };

    GraphUtils.bytes2Rgba = function bytes2Rgba(bs, a) {
      return 'rgba(' + bs.join(',') + ',' + a + ')';
    };

    GraphUtils.bytes2Color = function bytes2Color(bs) {
      return bs[2] | bs[1] << 8 | bs[0] << 16;
    };

    return GraphUtils;
  }();

  exports.default = GraphUtils;

  /***/
},
/* 8 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Cache = __webpack_require__(14);

  var _Cache2 = _interopRequireDefault(_Cache);

  var _BlankImage = __webpack_require__(43);

  var _BlankImage2 = _interopRequireDefault(_BlankImage);

  var _StaticImage = __webpack_require__(59);

  var _StaticImage2 = _interopRequireDefault(_StaticImage);

  var _PdfImage = __webpack_require__(57);

  var _PdfImage2 = _interopRequireDefault(_PdfImage);

  var _InteractiveImage = __webpack_require__(51);

  var _InteractiveImage2 = _interopRequireDefault(_InteractiveImage);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ImageFactory = function () {
    function ImageFactory(context, cache) {
      _classCallCheck(this, ImageFactory);

      this.context = context;
      this.cache = cache || new _Cache2.default();
    }

    ImageFactory.prototype.build = function build(info) {
      var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var widthTexels = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 210;
      var heightTexels = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 297;
      var color = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0xFFFFFF;
      var injector = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;

      var image = void 0;
      switch (info.type) {
        case 'html':
          {
            image = new _InteractiveImage2.default(this.context, widthTexels, heightTexels, color, info.src, this.cache, injector);
            break;
          }
        case 'image':
          {
            image = new _StaticImage2.default(this.context, widthTexels, heightTexels, color, info.src);
            break;
          }
        case 'pdf':
          {
            image = new _PdfImage2.default(this.context, widthTexels, heightTexels, color, info.src, n);
            break;
          }
        case 'blank':
        default:
          {
            image = new _BlankImage2.default(this.context, widthTexels, heightTexels, color);
            break;
          }
      }
      return image;
    };

    return ImageFactory;
  }();

  exports.default = ImageFactory;

  /***/
},
/* 9 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _book = __webpack_require__(11);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BookPropsBuilder = function () {
    function BookPropsBuilder(onReady) {
      _classCallCheck(this, BookPropsBuilder);

      this.onReady = onReady;
      this.defaults = (0, _book.props)();
    }

    BookPropsBuilder.prototype.dispose = function dispose() {};

    BookPropsBuilder.prototype.calcSize = function calcSize(width, height) {
      var scale = _BaseMathUtils2.default.calcScale(width, height, this.defaults.width, this.defaults.height);
      return {
        width: scale * width,
        height: scale * height
      };
    };

    BookPropsBuilder.prototype.calcTexels = function calcTexels(width, height) {
      var sheet = this.defaults.sheet,
          scale = _BaseMathUtils2.default.calcScale(width, height, sheet.widthTexels, sheet.heightTexels);
      return {
        widthTexels: scale * width,
        heightTexels: scale * height
      };
    };

    BookPropsBuilder.prototype.calcProps = function calcProps(width, height) {
      this.props = _extends({}, this.defaults, this.calcSize(width, height), {
        sheet: _extends({}, this.defaults.sheet, this.calcTexels(width, height)),
        cover: _extends({}, this.defaults.cover),
        page: _extends({}, this.defaults.page)
      });
    };

    BookPropsBuilder.prototype.calcSheets = function calcSheets(pages) {
      return this.sheets = Math.ceil(Math.max(0, pages - 4) / 2);
    };

    BookPropsBuilder.prototype.getSheets = function getSheets() {
      return this.sheets;
    };

    BookPropsBuilder.prototype.getProps = function getProps() {
      return this.props;
    };

    BookPropsBuilder.prototype.getPageCallback = function getPageCallback() {
      return this.binds.pageCallback;
    };

    BookPropsBuilder.prototype.ready = function ready() {
      if (this.onReady) {
        this.onReady(this.getProps(), this.getSheets(), this.getPageCallback());
      }
    };

    return BookPropsBuilder;
  }();

  exports.default = BookPropsBuilder;

  /***/
},
/* 10 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
    return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  };

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _sheetBlock = __webpack_require__(41);

  var _sheetBlock2 = _interopRequireDefault(_sheetBlock);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  var _ThreeUtils = __webpack_require__(20);

  var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  // import ThreeMarkup from './ThreeMarkup';

  var SheetBlock = function () {
    function SheetBlock(visual, p, first, last) {
      var angle = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

      var _this = this;

      var state = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 'closed';
      var height = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;

      _classCallCheck(this, SheetBlock);

      this.visual = visual;
      this.p = _extends({}, p, {
        first: first,
        last: last
      });
      var props = this.getProps();

      var loadedPoints = this.loadPoints();
      Object.keys(loadedPoints).map(function (k) {
        _this[k] = loadedPoints[k][props.shape] || loadedPoints[k][0];
      });

      this.pSpline = new _libs.THREE.Spline([]);
      for (var i = 0; i < this.interpolationPoints.x[0].length; ++i) {
        this.pSpline.points.push(new _libs.THREE.Vector3());
      }

      this.iSpline = new _libs.THREE.Spline([]);
      for (var _i = 0; _i < _sheetBlock2.default.resX; ++_i) {
        this.iSpline.points.push(new _libs.THREE.Vector3());
      }

      this.aSplines = [];

      //this.three = new THREE.Object3D();

      this.geometry = _sheetBlock2.default.geometry.clone();

      this.p.sideFaces = [{
        first: 0,
        last: _sheetBlock2.default.faces[0]
      }, {
        first: _sheetBlock2.default.faces[0],
        last: _sheetBlock2.default.faces[1]
      }];

      this.sideTexture = new _libs.THREE.Texture();
      this.sideTexture.wrapT = _libs.THREE.RepeatWrapping;
      this.sideTexture.repeat.set(0, last - first);
      this.sideTexture.image = props.sideTexture;
      this.sideTexture.needsUpdate = true;

      this.materials = [new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial(), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture }), new _libs.THREE.MeshPhongMaterial({ map: this.sideTexture })];

      this.p.setTexture(this.materials[0], 2 * first);
      this.p.setTexture(this.materials[1], 2 * last - 1);

      this.mesh = new _libs.THREE.Mesh(this.geometry, new _libs.THREE.MeshFaceMaterial(this.materials));
      this.mesh.castShadow = false;
      this.mesh.receiveShadow = false;
      // this.mesh.frustumCulled = true;

      //this.three.add(this.mesh);
      this.three = this.mesh;
      this.three.userData.self = this;

      this.markers = [];
      if (this.p.marker.use) {
        var l = this.geometry.vertices.length;
        var is = void 0;
        // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];
        is = Array.apply(0, Array(l)).map(function (_, i) {
          return i;
        });

        for (var _iterator = is, _isArray = Array.isArray(_iterator), _i2 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i2 >= _iterator.length) break;
            _ref = _iterator[_i2++];
          } else {
            _i2 = _iterator.next();
            if (_i2.done) break;
            _ref = _i2.value;
          }

          var _i3 = _ref;

          var marker = _ThreeUtils2.default.createMarker(this.geometry.vertices[_i3], _i3 < l / 2 ? 0xFF0000 : 0x00FF00, this.p.marker.size);
          this.markers.push({
            marker: marker,
            vertex: _i3
          });
          this.three.add(marker);
        }
      }

      this.corner = {
        use: true,
        height: 0,
        maxDistance: 0,
        points: [],
        OZ: new _libs.THREE.Vector3(0, 0, 1),
        axis: new _libs.THREE.Vector3()
      };
      this.set(0, 'closed', height, first, last); // calculate corner points

      this.set(angle, state, height, first, last); // init position

      // if(!SheetBlock.markup) {
      //   SheetBlock.markup=true;
      //   this.markup = new ThreeMarkup(this, 0, [{
      //     x: 0,
      //     y: 0,
      //   }, {
      //     x: 0.5,
      //     y: 1
      //   }, {
      //     x: 1,
      //     y: 0
      //   }].map((p)=>new THREE.Vector2(p.x, p.y)), {});
      // }
    }

    SheetBlock.prototype.dispose = function dispose() {
      for (var _iterator2 = this.materials, _isArray2 = Array.isArray(_iterator2), _i4 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i4 >= _iterator2.length) break;
          _ref2 = _iterator2[_i4++];
        } else {
          _i4 = _iterator2.next();
          if (_i4.done) break;
          _ref2 = _i4.value;
        }

        var m = _ref2;

        if (m.map) {
          m.map = null;
          m.needsUpdate = true;
        }
        m.dispose();
      }
      delete this.materials;
      this.geometry.dispose();
    };

    SheetBlock.prototype.getSize = function getSize() {
      return this.p.last - this.p.first;
    };

    SheetBlock.prototype.getProps = function getProps() {
      return _extends({}, this.p.page, {
        sheets: this.p.sheets
      });
    };

    SheetBlock.prototype.getTopCerners = function getTopCerners() {
      var off = this.angle > Math.PI / 2 ? this.geometry.vertices.length / 2 : 0;
      return [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];
    };

    SheetBlock.prototype.getTopSize = function getTopSize() {
      // const l=this.geometry.vertices.length, off = this.angle>Math.PI/2? l/2: 0,
      //   v0 = this.geometry.vertices[off], v1 = this.geometry.vertices[sheetBlock.resZ*sheetBlock.resX-1+off];
      // // is = [0, sheetBlock.resX-1, (sheetBlock.resZ-1)*sheetBlock.resX, sheetBlock.resZ*sheetBlock.resX-1];
      // return {
      //   width: Math.abs(v1.x-v0.x),
      //   height: Math.abs(v1.z-v0.z)
      // };
      var vs = this.getTopCerners();
      return {
        width: vs[0].distanceTo(vs[1]),
        height: vs[0].distanceTo(vs[2])
      };
    };

    SheetBlock.prototype.getTopWorldRotation = function getTopWorldRotation(q) {
      q.x = -Math.PI / 2;
      return q;
    };

    SheetBlock.prototype.getTopWorldPosition = function getTopWorldPosition(v) {
      var l = this.geometry.vertices.length,
          off = this.angle > Math.PI / 2 ? l / 2 : 0,
          vs = [this.geometry.vertices[off], this.geometry.vertices[_sheetBlock2.default.resX - 1 + off], this.geometry.vertices[(_sheetBlock2.default.resZ - 1) * _sheetBlock2.default.resX + off], this.geometry.vertices[_sheetBlock2.default.resZ * _sheetBlock2.default.resX - 1 + off]];
      v.set(0, 0, 0);
      for (var _iterator3 = vs, _isArray3 = Array.isArray(_iterator3), _i5 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i5 >= _iterator3.length) break;
          _ref3 = _iterator3[_i5++];
        } else {
          _i5 = _iterator3.next();
          if (_i5.done) break;
          _ref3 = _i5.value;
        }

        var vi = _ref3;

        v.x += 0.25 * vi.x;
        v.y += 0.25 * vi.y;
        v.z += 0.25 * vi.z;
      }
      this.three.localToWorld(v);
      return v;
    };

    SheetBlock.prototype.getInterpolationPoints = function getInterpolationPoints(inds, mod) {
      var ps = { x: [], y: [] },
          K = this.getProps().wave;
      for (var _iterator4 = inds, _isArray4 = Array.isArray(_iterator4), _i6 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i6 >= _iterator4.length) break;
          _ref4 = _iterator4[_i6++];
        } else {
          _i6 = _iterator4.next();
          if (_i6.done) break;
          _ref4 = _i6.value;
        }

        var i = _ref4;

        ps.x.push([].concat(this.interpolationPoints.x[i]));
        ps.y.push(~mod.indexOf(i) ? this.interpolationPoints.y[i].map(function (n) {
          return K * n;
        }) : [].concat(this.interpolationPoints.y[i]));
      }
      return ps;
    };

    SheetBlock.prototype.set = function set(angle) {
      var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.state;
      var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.corner.height;
      var first = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.p.first;
      var last = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.p.last;

      var PI = Math.PI;
      this.state = state;
      var closedAngle = void 0,
          binderTurn = void 0;
      if ((typeof angle === 'undefined' ? 'undefined' : _typeof(angle)) === 'object') {
        this.angle = angle.openedAngle;
        closedAngle = angle.closedAngle;
        binderTurn = angle.binderTurn > PI / 2 ? PI - angle.binderTurn : angle.binderTurn;
      } else {
        this.angle = angle;
      }
      this.corner.height = height;
      if (this.p.first !== first || this.p.last !== last) {
        this.sideTexture.repeat.set(0, last - first);
        this.sideTexture.needsUpdate = true;
        if (this.p.first !== first) {
          this.p.setTexture(this.materials[0], 2 * first);
        }
        if (this.p.last !== last) {
          this.p.setTexture(this.materials[1], 2 * last - 1);
        }
      }
      this.p.first = first;
      this.p.last = last;
      var points = void 0;
      var props = this.getProps();
      if (this.state === 'closed') {
        points = this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces);
      } else if (this.state === 'opened') {
        if (closedAngle !== undefined && Math.abs(closedAngle - PI / 2) > 1e-2) {
          points = this.getInterpolationPoints(this.flatInterpolationIndeces, []);
          var ps = this.getPointsAtAngle(this.getInterpolationPoints(this.closedInterpolationIndeces, this.closedInterpolationIndeces), closedAngle > PI / 2 ? PI - closedAngle : closedAngle);
          points.x = [ps.x].concat(points.x);
          points.y = [ps.y].concat(points.y);
          // console.log(ps);
        } else {
          points = this.getInterpolationPoints(this.openedInterpolationIndeces, this.closedInterpolationIndeces);
        }
      }
      var hl = void 0,
          hr = void 0,
          offset = 0.5 * props.sheets * props.depth;
      if (this.state === 'closed') {
        offset -= 7e-6 * this.p.scale;
      }
      if (this.angle <= PI / 2) {
        hl = (props.sheets - first) * props.depth;
        hr = (props.sheets - last) * props.depth;
      } else {
        hl = first * props.depth;
        hr = last * props.depth;
      }

      var inAngle = this.angle > PI / 2 ? PI - this.angle : this.angle,
          hAngle = this.state === 'closed' ? inAngle : binderTurn === undefined ? PI / 2 : binderTurn;

      var _getPointsAtAngleAndH = this.getPointsAtAngleAndHs(points, inAngle, hAngle, [hl / props.width, hr / props.width]),
          left = _getPointsAtAngleAndH[0],
          right = _getPointsAtAngleAndH[1];

      if (this.angle > PI / 2) {
        this.inverse(left);
        this.inverse(right);
        offset = -offset;
      }
      this.setPoints(left, right, offset);
    };

    SheetBlock.prototype.setPoints = function setPoints(left, right, offset) {
      var _this2 = this;

      var p = this.getProps();
      var i = 0;

      var ys = [right, left];
      for (var y = 0; y < _sheetBlock2.default.resY; ++y) {
        for (var z = 0; z < _sheetBlock2.default.resZ; ++z) {
          for (var x = 0; x < _sheetBlock2.default.resX; ++x) {
            this.geometry.vertices[i++].set(ys[y].x[x] * p.width + offset, ys[y].y[x] * p.width, z * p.height / (_sheetBlock2.default.resZ - 1) - 0.5 * p.height);
          }
        }
      }
      if (i !== this.geometry.vertices.length) {
        console.warn('setPoints: bad mapping!');
      }

      if (this.corner.use && !this.corner.points.length) {
        var plane = new _libs.THREE.Plane(),
            normal = plane.normal,
            planeOffset = (1 - this.getProps().flexibleCorner) * Math.min(p.width, p.height),
            proj = new _libs.THREE.Vector3();
        plane.setFromNormalAndCoplanarPoint(new _libs.THREE.Vector3(-1, 0, -1).normalize(), new _libs.THREE.Vector3(planeOffset + offset, 0, 0.5 * p.height));
        for (var _i7 = 0, l = this.geometry.vertices.length; _i7 < l; ++_i7) {
          plane.projectPoint(this.geometry.vertices[_i7], proj);
          proj.sub(this.geometry.vertices[_i7]);
          if (proj.x * normal.x + proj.y * normal.y + proj.z * normal.z > 0) {
            var d = proj.length() / planeOffset;
            this.corner.maxDistance = Math.max(this.corner.maxDistance, d);
            this.corner.points.push({ vertex: _i7, distance: d });
          }
        }
      }

      if (this.corner.use && Math.abs(this.corner.height) > 1e-3) {
        var d2Angle = function d2Angle(d) {
          return p.cornerDeviation * _this2.corner.height / (1 + Math.exp(-p.bending * (d - 0.5 * _this2.corner.maxDistance)));
        };
        this.corner.axis.set(-1, 0, 1).normalize();
        this.corner.axis.applyAxisAngle(this.corner.OZ, this.angle);
        for (var _iterator5 = this.corner.points, _isArray5 = Array.isArray(_iterator5), _i8 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
          var _ref5;

          if (_isArray5) {
            if (_i8 >= _iterator5.length) break;
            _ref5 = _iterator5[_i8++];
          } else {
            _i8 = _iterator5.next();
            if (_i8.done) break;
            _ref5 = _i8.value;
          }

          var point = _ref5;

          this.geometry.vertices[point.vertex].applyAxisAngle(this.corner.axis, d2Angle(point.distance));
        }
      }

      for (var _iterator6 = this.markers, _isArray6 = Array.isArray(_iterator6), _i9 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i9 >= _iterator6.length) break;
          _ref6 = _iterator6[_i9++];
        } else {
          _i9 = _iterator6.next();
          if (_i9.done) break;
          _ref6 = _i9.value;
        }

        var m = _ref6;

        m.marker.position.copy(this.geometry.vertices[m.vertex]);
      }

      this.geometry.computeVertexNormals();
      //this.geometry.computeFaceNormals();
      this.geometry.computeBoundingSphere();
      //this.geometry.computeBoundingBox();
      this.geometry.verticesNeedUpdate = true;

      if (this.markup) {
        this.markup.computeVertices();
      }
    };

    SheetBlock.prototype.inverse = function inverse(ps) {
      for (var i = 0; i < ps.x.length; ++i) {
        ps.x[i] = -ps.x[i];
      }
      return ps;
    };

    SheetBlock.prototype.getPointsAtHs = function getPointsAtHs(ps, angle, hs) {
      var _this3 = this;

      var N = 1000;
      _MathUtils2.default.setSplinePoints(this.pSpline, ps);
      var bl = _MathUtils2.default.splitSpline(this.pSpline, N),
          r = [];
      {
        var p1 = _extends({}, this.pSpline.getPoint((N - 1) / N)),
            p2 = _extends({}, this.pSpline.getPoint(1)),
            dp = { x: p2.x - p1.x, y: p2.y - p1.y },
            ln = Math.sqrt(dp.x * dp.x + dp.y * dp.y),
            sp = this.pSpline.points[this.pSpline.points.length - 1];
        sp.set(sp.x + 0.1 * dp.x / ln, sp.y + 0.1 * dp.y / ln, 0);
        bl = _MathUtils2.default.splitSpline(this.pSpline, N);
      }
      bl.ls.push(1e7);
      _MathUtils2.default.mapl2L(bl.ls, bl.len, _sheetBlock2.default.resX, function (i) {
        for (var j = 0; j < hs.length; ++j) {
          if (!i) {
            r[j] = { x: [-hs[j] * Math.sin(angle)], y: [hs[j] * Math.cos(angle)] };
          } else {
            var p0 = _extends({}, _this3.pSpline.getPoint((i - 1) / N)),
                _p = _this3.pSpline.getPoint(i / N),
                x = -(_p.y - p0.y),
                y = _p.x - p0.x,
                l = Math.sqrt(x * x + y * y);
            r[j].x.push(_p.x + x / l * hs[j]);
            r[j].y.push(_p.y + y / l * hs[j]);
          }
        }
      });

      var nps = [];

      var _loop = function _loop(j) {
        nps[j] = { x: [], y: [] };
        _MathUtils2.default.setSplinePoints(_this3.iSpline, r[j]);
        var l = _MathUtils2.default.splitSpline(_this3.iSpline, N);
        l.ls.push(1e7);
        _MathUtils2.default.mapl2L(l.ls, 1, _sheetBlock2.default.resX, function (i) {
          var p = _this3.iSpline.getPoint(i / N);
          nps[j].x.push(p.x);
          nps[j].y.push(p.y);
        });
      };

      for (var j = 0; j < hs.length; ++j) {
        _loop(j);
      }
      return nps;
    };

    SheetBlock.prototype.getPointsAtAngleAndHs = function getPointsAtAngleAndHs(points, angle, hAngle, hs) {
      var ps = this.getPointsAtAngle(points, angle);
      return this.getPointsAtHs(ps, hAngle, hs);
    };

    SheetBlock.prototype.getPointsAtAngle = function getPointsAtAngle(points, angle) {
      var ps = { x: [], y: [] },
          angles = [];
      angle /= Math.PI / 2;
      for (var j = 0; j < points.x.length; ++j) {
        angles.push(j / (points.x.length - 1));
      }
      for (var i = 0; i < points.x[0].length; ++i) {
        var xps = [],
            yps = [];
        for (var _j = 0; _j < points.x.length; ++_j) {
          xps.push(points.x[_j][i]);
          yps.push(points.y[_j][i]);
        }
        ps.x.push(this.interpolate(angles, xps, angle));
        ps.y.push(this.interpolate(angles, yps, angle));
      }
      return ps;
    };

    SheetBlock.prototype.interpolate = function interpolate(x, y, xi) {
      if (!this.aSplines[x.length]) {
        this.aSplines[x.length] = new _libs.THREE.Spline([]);
        var ps = this.aSplines[x.length].points;
        for (var i = 0; i < x.length; ++i) {
          ps.push(new _libs.THREE.Vector3());
        }
      }
      var spline = this.aSplines[x.length];
      for (var _i10 = 0; _i10 < x.length; ++_i10) {
        spline.points[_i10].set(x[_i10], y[_i10], 0);
      }
      return spline.getPoint(Math.min(1, Math.max(xi, 0))).y;
    };

    SheetBlock.prototype.loadPoints = function loadPoints() {
      var x = [],
          y = [];
      var _arr = [0, 0.2877, 0.6347, 0.8174, 1.0000];
      for (var _i11 = 0; _i11 < _arr.length; _i11++) {
        var r = _arr[_i11];
        x.push(r * Math.cos(0.9 * Math.PI / 4));
        y.push(r * Math.sin(0.9 * Math.PI / 4));
      }

      var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],
          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],
          flatInterpolationIndeces = [[5, 4], [7, 6]],
          interpolationPoints = [{
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.126, 0.411, 0.593, 0.774], [0, 0, 0, 0, 0], x],
        y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.259, 0.440, 0.446, 0.429], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]
      }, {
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0.000, 0.286, 0.632, 0.815, 0.997], [0.000, 0.279, 0.623, 0.806, 0.988], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0], x],
        y: [[0, 0, 0, 0, 0], [0.000, 0.030, 0.010, 0.002, 0.000], [0.000, 0.060, 0.017, 0.004, 0.000], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000], y]
      }];

      return {
        interpolationPoints: interpolationPoints,
        openedInterpolationIndeces: openedInterpolationIndeces,
        closedInterpolationIndeces: closedInterpolationIndeces,
        flatInterpolationIndeces: flatInterpolationIndeces
      };
    };

    return SheetBlock;
  }();

  exports.default = SheetBlock;

  /***/
},
/* 11 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.props = props;
  function props() {
    // const props = {
    //   height,
    //   width,
    //   gravity,
    //   injector,
    //   cachedPages,
    //   renderInactivePages,
    //   renderWhileFlipping,
    //   pagesForPredicting,
    //   preloadPages,
    //   sheet: {
    //     startVelocity,
    //     cornerDeviation,
    //     flexibility,
    //     flexibleCorner,
    //     bending,
    //     wave,
    //     shape,
    //     widthTexels,
    //     heightTexels,
    //     color,
    //     sideTexture
    //   },
    //   cover: {
    //     ...sheet,
    //     padding,
    //     binderTexture,
    //     depth,
    //     mass
    //   },
    //   page: {
    //     ...sheet,
    //     depth,
    //     mass
    //   }
    // };

    return {
      height: 0.297,
      width: 0.21,
      gravity: 1,
      cachedPages: 50,
      renderInactivePages: true,
      renderInactivePagesOnMobile: false,
      renderWhileFlipping: false,
      pagesForPredicting: 5,
      preloadPages: 5,
      rtl: false,
      sheet: {
        startVelocity: 0.9,
        cornerDeviation: 0.25,
        flexibility: 10,
        flexibleCorner: 0.5,
        bending: 11,
        wave: 0.5,
        shape: 0,
        widthTexels: 5 * 210,
        heightTexels: 5 * 297,
        color: 0xFFFFFF
      },
      cover: {
        binderTexture: '',
        depth: 0.0003,
        padding: 0,
        mass: 0.003
      },
      page: {
        depth: 0.0001,
        mass: 0.001
      },
      cssLayerProps: {
        width: 1024
      }
    };
  };

  /***/
},
/* 12 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.CSS3DSprite = exports.CSS3DObject = undefined;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  _libs.THREE.CSS3DObject = function (_THREE$Object3D) {
    _inherits(CSS3DObject, _THREE$Object3D);

    function CSS3DObject() {
      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;

      _classCallCheck(this, CSS3DObject);

      var _this = _possibleConstructorReturn(this, _THREE$Object3D.call(this));

      if (element) {
        _this.set(element);
      }
      return _this;
    }

    CSS3DObject.prototype.set = function set(element) {
      this.element = element;
      this.element.style.position = 'absolute';

      this.addEventListener('removed', function () {
        if (this.element.parentNode !== null) {
          this.element.parentNode.removeChild(this.element);
        }
      });
    };

    return CSS3DObject;
  }(_libs.THREE.Object3D);

  _libs.THREE.CSS3DSprite = function (_THREE$CSS3DObject) {
    _inherits(CSS3DSprite, _THREE$CSS3DObject);

    function CSS3DSprite(element) {
      _classCallCheck(this, CSS3DSprite);

      return _possibleConstructorReturn(this, _THREE$CSS3DObject.call(this, element));
    }

    return CSS3DSprite;
  }(_libs.THREE.CSS3DObject);

  _libs.THREE.CSS3DRenderer = function CSS3DRenderer() {
    _classCallCheck(this, CSS3DRenderer);

    var _width, _height;
    var _widthHalf, _heightHalf;

    var matrix = new _libs.THREE.Matrix4();

    var cache = {
      camera: { fov: 0, style: '' },
      objects: {}
    };

    var domElement = document.createElement('div');
    domElement.style.overflow = 'hidden';

    this.domElement = domElement;

    var cameraElement = document.createElement('div');

    cameraElement.style.WebkitTransformStyle = 'preserve-3d';
    cameraElement.style.MozTransformStyle = 'preserve-3d';
    cameraElement.style.transformStyle = 'preserve-3d';

    domElement.appendChild(cameraElement);

    var isIE = /Trident/i.test(navigator.userAgent);

    this.setClearColor = function () {};

    this.getSize = function () {

      return {
        width: _width,
        height: _height
      };
    };

    this.setSize = function (width, height) {

      _width = width;
      _height = height;
      _widthHalf = _width / 2;
      _heightHalf = _height / 2;

      domElement.style.width = width + 'px';
      domElement.style.height = height + 'px';

      cameraElement.style.width = width + 'px';
      cameraElement.style.height = height + 'px';
    };

    function epsilon(value) {

      return Math.abs(value) < 1e-10 ? 0 : value;
    }

    function getCameraCSSMatrix(matrix) {

      var elements = matrix.elements;

      return 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(-elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(elements[6]) + ',' + epsilon(elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(-elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(-elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';
    }

    function getObjectCSSMatrix(matrix, cameraCSSMatrix) {

      var elements = matrix.elements;
      var matrix3d = 'matrix3d(' + epsilon(elements[0]) + ',' + epsilon(elements[1]) + ',' + epsilon(elements[2]) + ',' + epsilon(elements[3]) + ',' + epsilon(-elements[4]) + ',' + epsilon(-elements[5]) + ',' + epsilon(-elements[6]) + ',' + epsilon(-elements[7]) + ',' + epsilon(elements[8]) + ',' + epsilon(elements[9]) + ',' + epsilon(elements[10]) + ',' + epsilon(elements[11]) + ',' + epsilon(elements[12]) + ',' + epsilon(elements[13]) + ',' + epsilon(elements[14]) + ',' + epsilon(elements[15]) + ')';

      if (isIE) {

        return 'translate(-50%,-50%)' + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)' + cameraCSSMatrix + matrix3d;
      }

      return 'translate(-50%,-50%)' + matrix3d;
    }

    function renderObject(object, camera, cameraCSSMatrix) {

      if (object instanceof _libs.THREE.CSS3DObject) {

        var style;

        if (object instanceof _libs.THREE.CSS3DSprite) {
          matrix.copy(camera.matrixWorldInverse);
          matrix.transpose();
          matrix.copyPosition(object.matrixWorld);
          matrix.scale(object.scale);

          matrix.elements[3] = 0;
          matrix.elements[7] = 0;
          matrix.elements[11] = 0;
          matrix.elements[15] = 1;

          style = getObjectCSSMatrix(matrix, cameraCSSMatrix);
        } else {

          style = getObjectCSSMatrix(object.matrixWorld, cameraCSSMatrix);
        }

        var element = object.element;
        var cachedStyle = cache.objects[object.id] && cache.objects[object.id].style;

        if (cachedStyle === undefined || cachedStyle !== style) {
          element.style.WebkitTransform = style;
          element.style.MozTransform = style;
          element.style.transform = style;

          cache.objects[object.id] = { style: style };
          if (isIE) {
            cache.objects[object.id].distanceToCameraSquared = getDistanceToSquared(camera, object);
          }
        }

        if (element.parentNode !== cameraElement) {
          cameraElement.appendChild(element);
        }
      }

      for (var i = 0, l = object.children.length; i < l; i++) {

        renderObject(object.children[i], camera, cameraCSSMatrix);
      }
    }

    var getDistanceToSquared = function () {

      var a = new _libs.THREE.Vector3();
      var b = new _libs.THREE.Vector3();

      return function (object1, object2) {

        a.setFromMatrixPosition(object1.matrixWorld);
        b.setFromMatrixPosition(object2.matrixWorld);

        return a.distanceToSquared(b);
      };
    }();

    function zOrder(scene) {

      var order = Object.keys(cache.objects).sort(function (a, b) {

        return cache.objects[a].distanceToCameraSquared - cache.objects[b].distanceToCameraSquared;
      });
      var zMax = order.length;

      scene.traverse(function (object) {

        var index = order.indexOf(object.id + '');

        if (index !== -1) {

          object.element.style.zIndex = zMax - index;
        }
      });
    }

    this.render = function (scene, camera) {

      var fov = camera.projectionMatrix.elements[5] * _heightHalf;

      if (cache.camera.fov !== fov) {

        domElement.style.WebkitPerspective = fov + 'px';
        domElement.style.MozPerspective = fov + 'px';
        domElement.style.perspective = fov + 'px';

        cache.camera.fov = fov;
      }

      scene.updateMatrixWorld();

      if (camera.parent === null) camera.updateMatrixWorld();

      var cameraCSSMatrix = 'translateZ(' + fov + 'px)' + getCameraCSSMatrix(camera.matrixWorldInverse);

      var style = cameraCSSMatrix + 'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';

      if (cache.camera.style !== style && !isIE) {

        cameraElement.style.WebkitTransform = style;
        cameraElement.style.MozTransform = style;
        cameraElement.style.transform = style;

        cache.camera.style = style;
      }

      renderObject(scene, camera, cameraCSSMatrix);

      if (isIE) {

        // IE10 and 11 does not support 'preserve-3d'.
        // Thus, z-order in 3D will not work.
        // We have to calc z-order manually and set CSS z-index for IE.
        // FYI: z-index can't handle object intersection
        zOrder(scene);
      }
    };
  };

  exports.default = _libs.THREE.CSS3DRenderer;

  var _CSS3DObject = _libs.THREE.CSS3DObject,
      _CSS3DSprite = _libs.THREE.CSS3DSprite;
  exports.CSS3DObject = _CSS3DObject;
  exports.CSS3DSprite = _CSS3DSprite;

  /***/
},
/* 13 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _CSS3DRenderer = __webpack_require__(12);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CSSLayer = function (_CSS3DObject) {
    _inherits(CSSLayer, _CSS3DObject);

    CSSLayer.init = function init(doc) {
      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 150;

      CSSLayer.delay = delay;
      CSSLayer.style = (0, _libs.$)('<style type=text/css>\n      .css-layer {\n    \t\topacity: 1;\n    \t\ttransition: opacity ' + delay + 'ms ease-out;\n        visibility: visible;\n        overflow: hidden;\n    \t}\n    \t.css-layer.hidden {\n    \t\ttransition: opacity ' + delay + 'ms ease-in, visibility ' + delay + 'ms step-end;\n    \t\topacity: 0;\n        visibility: hidden;\n      }\n    </style>').appendTo(doc.head);
    };

    CSSLayer.dispose = function dispose() {
      CSSLayer.style.remove();
    };

    function CSSLayer(width, height, props) {
      _classCallCheck(this, CSSLayer);

      var _this = _possibleConstructorReturn(this, _CSS3DObject.call(this));

      _this.props = props;
      _this.jContainer = (0, _libs.$)('<div class="hidden css-layer"></div>');
      var widthPxs = props.width,
          heightPxs = height / width * widthPxs;
      _this.jContainer.width(widthPxs).height(heightPxs);
      _this.scale.x /= widthPxs / width;
      _this.scale.y /= widthPxs / width;

      _this.setData();
      _this.set(_this.jContainer[0]);
      return _this;
    }

    CSSLayer.prototype.callInternal = function callInternal(name) {
      if (this.object && this.object[name]) {
        try {
          this.object[name]();
        } catch (e) {
          console.error(e);
        }
      }
    };

    CSSLayer.prototype.dispose = function dispose() {
      this.clearInternals();
    };

    CSSLayer.prototype.clearInternals = function clearInternals() {
      this.callInternal('dispose');
      !this.css || this.css.remove();
      !this.html || this.html.remove();
    };

    CSSLayer.prototype.setData = function setData() {
      var css = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var html = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var js = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

      this.clearInternals();

      this.css = (0, _libs.$)('<style type="text/css">' + css + '</style>').appendTo(this.jContainer);
      this.html = (0, _libs.$)(html).appendTo(this.jContainer);
      var init = eval(js);
      if (init) {
        this.object = init(this.jContainer, this.props) || {};
      }
    };

    CSSLayer.prototype.pendedCall = function pendedCall(clb) {
      var _this2 = this;

      var timestamp = this.timestamp = Date.now();
      setTimeout(function () {
        if (timestamp === _this2.timestamp) {
          clb();
        }
      }, CSSLayer.delay);
    };

    CSSLayer.prototype.isHidden = function isHidden() {
      return this.jContainer.hasClass('hidden');
    };

    CSSLayer.prototype.hide = function hide() {
      var _this3 = this;

      var res = void 0;
      if (!this.isHidden()) {
        this.jContainer.addClass('hidden');
        this.callInternal('hide');
        res = new Promise(function (resolve) {
          _this3.pendedCall(function () {
            _this3.callInternal('hidden');
            resolve();
          });
        });
      } else {
        res = Promise.resolve();
      }
      return res;
    };

    CSSLayer.prototype.show = function show() {
      var _this4 = this;

      var res = void 0;
      if (this.isHidden()) {
        this.jContainer.removeClass('hidden');
        this.callInternal('show');
        res = new Promise(function (resolve) {
          _this4.pendedCall(function () {
            _this4.callInternal('shown');
            resolve();
          });
        });
      } else {
        res = Promise.resolve();
      }
      return res;
    };

    return CSSLayer;
  }(_CSS3DRenderer.CSS3DObject);

  exports.default = CSSLayer;

  /***/
},
/* 14 */
/***/function (module, exports) {

  "use strict";
  "use strict";

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Cache = function () {
    function Cache() {
      var maxSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Infinity;
      var sizeof = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Cache.countSizeof;

      _classCallCheck(this, Cache);

      this.os = new Map();
      this.sizeof = sizeof;
      this.maxSize = maxSize;
      this.size = 0;
    }

    Cache.prototype.forEach = function forEach(clb) {
      this.os.forEach(function (v, k) {
        return clb([k, v]);
      });
    };

    Cache.countSizeof = function countSizeof(value) {
      return 1;
    };

    Cache.prototype.remove = function remove(k) {
      var res = false;
      var v = this.os.get(k);
      if (!v.locked || !v.locked(k)) {
        this.size -= this.sizeof(v);
        if (v.dispose) {
          v.dispose();
        }
        this.os.delete(k);
        res = true;
      }
      return res;
    };

    Cache.prototype.freeSpace = function freeSpace() {
      var arr = [];
      for (var _iterator = this.os, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var p = _ref;

        arr.push({ timestamp: p[1].timestamp, key: p[0] });
      }
      arr.sort(function (a, b) {
        return a.timestamp - b.timestamp;
      });
      for (var i = 0; i < arr.length && this.size > 3 * this.maxSize / 4; ++i) {
        this.remove(arr[i].key);
      }
    };

    Cache.prototype.dispose = function dispose() {
      var arr = [];
      for (var _iterator2 = this.os, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var p = _ref2;

        arr.push({ v: p[1], k: p[0] });
      }
      for (var _iterator3 = arr, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var o = _ref3;

        if (o.v.dispose) {
          o.v.dispose();
        }
        this.os.delete(o.k);
      }
    };

    Cache.recursionSizeof = function recursionSizeof(value) {
      var size = 0;
      if (value) {
        ++size;
        var len = value.length;
        if (len === undefined) {
          for (var p in value) {
            if (value.hasOwnProperty(p)) {
              size += Cache.recursionSizeof(value[p]);
            }
          }
        } else {
          size += len;
        }
      }
      return size;
    };

    Cache.prototype.getTimestamp = function getTimestamp() {
      return Date.now();
    };

    Cache.prototype.get = function get(key) {
      var value = this.os.get(key);
      if (value) {
        value.timestamp = this.getTimestamp();
      }
      return value;
    };

    Cache.prototype.put = function put(key, value) {
      value.timestamp = this.getTimestamp();
      this.os.set(key, value);
      this.size += this.sizeof(value);
      if (this.size > this.maxSize) {
        this.freeSpace();
      }
      return value;
    };

    return Cache;
  }();

  exports.default = Cache;

  /***/
},
/* 15 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Controller = function (_THREE$EventDispatche) {
    _inherits(Controller, _THREE$EventDispatche);

    function Controller() {
      _classCallCheck(this, Controller);

      return _possibleConstructorReturn(this, _THREE$EventDispatche.apply(this, arguments));
    }

    Controller.prototype.handleDefault = function handleDefault(id, e, data) {
      //console.log(id+'-'+e.type+'-'+data);
    };

    Controller.prototype.dispatchAsync = function dispatchAsync(e) {
      var _this2 = this;

      Promise.resolve().then(function () {
        return _this2.dispatchEvent(e);
      });
    };

    Controller.prototype.dispose = function dispose() {};

    return Controller;
  }(_libs.THREE.EventDispatcher);

  exports.default = Controller;

  /***/
},
/* 16 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CustomEventConverter = function (_EventConverter) {
    _inherits(CustomEventConverter, _EventConverter);

    // custom
    // testIntersection(e, data);
    // custom.object
    // test(object);

    function CustomEventConverter(wnd, doc) {
      var customTest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {
        return false;
      };
      var eDoc = arguments[3];

      _classCallCheck(this, CustomEventConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.eDoc = eDoc;
      _this.customTest = customTest;
      _this.customs = [];
      return _this;
    }

    CustomEventConverter.prototype.test = function test(object1, object2) {
      return object1 && object2 ? this.customTest(object1, object2) : false;
    };

    CustomEventConverter.prototype.getCallback = function getCallback(object) {
      return object.target.callback;
    };

    CustomEventConverter.prototype.addCustom = function addCustom(custom) {
      this.customs.push(custom);
    };

    CustomEventConverter.prototype.getObject = function getObject(e, data) {
      var object = void 0;
      if (data.doc === this.eDoc) {
        for (var _iterator = this.customs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var custom = _ref;

          object = custom.testIntersection(e, data);
          if (object) {
            break;
          }
        }
      }
      return object;
    };

    return CustomEventConverter;
  }(_EventConverter3.default);

  exports.default = CustomEventConverter;

  /***/
},
/* 17 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Finder = function () {
    Finder.isDelimetr = function isDelimetr(s) {
      return s === Finder.DELIMITER;
    };

    Finder.prototype.merge = function merge() {
      var as = [],
          map = [],
          strs = this.strs;
      var p = 0;
      for (var i = 0; i < strs.length; ++i) {
        if (strs[i].length) {
          map.push({
            base: i,
            offset: p
          });
          as.push(strs[i]);
          p += strs[i].length;
          if (i < strs.length - 1 && !Finder.isDelimetr(strs[i].charAt(strs[i].length - 1)) && !Finder.isDelimetr(strs[i + 1].charAt(0))) {
            as.push(Finder.DELIMITER);
            ++p;
          }
        }
      }
      this.map = map;
      this.str = as.join('');
    };

    Finder.prototype.addHits = function addHits(p) {
      var info = this.map[_Utils2.default.lowerBound(this.map, { offset: p }, function (a, b) {
        return a.offset - b.offset;
      })];
      var chars = this.pattern.length,
          i = info.base;
      p -= info.offset;
      while (chars) {
        if (this.strs[i].length) {
          var delimeter = i < this.strs.length - 1 && !Finder.isDelimetr(this.strs[i].charAt(this.strs[i].length - 1)) && !Finder.isDelimetr(this.strs[i + 1].charAt(0)),
              length = Math.min(this.strs[i].length + (delimeter ? 1 : 0) - p, chars);
          if (p < this.strs[i].length) {
            this.hits.push({
              index: i,
              offset: p,
              length: Math.min(length, this.strs[i].length - p)
            });
          }
          chars -= length;
          ++i;
          p = 0;
        }
      }
    };

    Finder.prototype.addContext = function addContext(p) {
      var f = p,
          l = p + this.pattern.length - 1,
          dels = this.props.contextLength,
          prevDels = dels + 1;
      while (dels && prevDels - dels) {
        prevDels = dels;
        if (dels % 2) {
          for (var i = f - 2; i >= 0; --i) {
            if (Finder.isDelimetr(this.str[i]) || i === 0) {
              f = i === 0 ? 0 : i + 1;
              --dels;
              break;
            }
          }
        } else {
          for (var _i = l + 2; _i < this.str.length; ++_i) {
            if (Finder.isDelimetr(this.str[_i]) || _i === this.str.length - 1) {
              l = _i === this.str.length - 1 ? _i === this.str.length - 1 : _i - 1;
              --dels;
              break;
            }
          }
        }
      }
      this.contexts.push(this.str.substr(f, l - f + 1));
    };

    Finder.prototype.getHits = function getHits() {
      return this.hits;
    };

    Finder.prototype.getContexts = function getContexts() {
      return this.contexts;
    };

    function Finder(strs, pattern, props) {
      _classCallCheck(this, Finder);

      this.props = _extends({}, Finder.defaults, props);
      this.strs = strs;
      var data = this.merge(strs);
      this.hits = [];
      this.contexts = [];
      this.pattern = pattern.toLowerCase();
      this.lstr = this.str.toLowerCase();
      var p = 0;
      while (true) {
        p = this.lstr.indexOf(this.pattern, p);
        if (p === -1) {
          break;
        } else {
          this.addHits(p);
          this.addContext(p);
          p += this.pattern.length;
        }
      }
    }

    return Finder;
  }();

  Finder.DELIMITER = ' ';
  Finder.defaults = {
    contextLength: 7,
    hits: true,
    contexts: true
  };
  exports.default = Finder;

  /***/
},
/* 18 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  _libs.PDFJS.workerSrc = (window.PDFJS_LOCALE ? PDFJS_LOCALE : { "pdfJsWorker": "js/pdf.worker.js", "pdfJsCMapUrl": "cmaps/" }).pdfJsWorker;
  _libs.PDFJS.cMapUrl = (window.PDFJS_LOCALE ? PDFJS_LOCALE : { "pdfJsWorker": "js/pdf.worker.js", "pdfJsCMapUrl": "cmaps/" }).pdfJsCMapUrl;
  _libs.PDFJS.cMapPacked = true;

  var Pdf = function () {
    function Pdf(src, loadingProgress) {
      var _this = this;

      _classCallCheck(this, Pdf);

      this.src = _Utils2.default.normalizeUrl(src);
      this.handlerQueue = [];
      this.progresData = { loaded: -1, total: 1 };
      this.loadingProgress = loadingProgress;

      _libs.PDFJS.getDocument({
        url: this.src,
        rangeChunkSize: 512 * 1024
      }, null, null, function (data) {
        if (_this.loadingProgress) {
          var cur = Math.floor(100 * data.loaded / data.total),
              old = Math.floor(100 * _this.progresData.loaded / _this.progresData.total);
          if (cur !== old) {
            cur = isNaN(cur) ? 0 : cur;
            cur = cur > 100 ? 100 : cur;
            _this.loadingProgress(cur);
          }
        }
        _this.progresData = data;
      }).then(function (handler) {
        if (handler.numPages > 1) {
          Promise.all([handler.getPage(1), handler.getPage(2)]).then(function (pages) {
            _this.init(handler, pages);
          });
        } else {
          _this.init(handler);
        }
      });
    }

    Pdf.prototype.init = function init(handler, pages) {
      this.handler = handler;
      this.doubledPages = pages ? Math.abs(2 * Pdf.getPageSize(pages[0]).width - Pdf.getPageSize(pages[1]).width) / Pdf.getPageSize(pages[0]).width < 1e-4 : false;
      var done = Promise.resolve(handler);

      var _loop = function _loop() {
        if (_isArray) {
          if (_i >= _iterator.length) return 'break';
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) return 'break';
          _ref = _i.value;
        }

        var clb = _ref;

        done = done.then(function (handler) {
          clb(handler);
          return handler;
        });
      };

      for (var _iterator = this.handlerQueue.reverse(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
    };

    Pdf.prototype.getPageType = function getPageType(n) {
      return !this.doubledPages || n === 0 || n === this.getPagesNum() - 1 ? 'full' : n & 1 ? 'left' : 'right';
    };

    Pdf.prototype.getPage = function getPage(n) {
      return this.handler.getPage(this.doubledPages ? Math.ceil(n / 2) + 1 : n + 1);
    };

    Pdf.prototype.dispose = function dispose() {
      this.handlerQueue.splice(0, this.handlerQueue.length);
      delete this.handler;
    };

    Pdf.prototype.setLoadingProgressClb = function setLoadingProgressClb(clb) {
      this.loadingProgress = clb;
    };

    Pdf.prototype.getPagesNum = function getPagesNum() {
      return this.handler ? this.doubledPages ? 2 * (this.handler.numPages - 1) : this.handler.numPages : undefined;
    };

    Pdf.getPageSize = function getPageSize(page) {
      return {
        width: page.view[2] - page.view[0],
        height: page.view[3] - page.view[1]
      };
    };

    //   if(pages>1) {
    //   handler.getPage(2).
    //   then((page)=> {
    //     const size1 = Pdf.getPageSize(page);
    //     this.props.doubledPages = 2*size0.width===size1.width;
    //     this.ready();
    //   }).
    //   catch(()=> this.ready());
    // }
    // else {

    Pdf.prototype.getHandler = function getHandler(clb) {
      if (this.handler) {
        clb(this.handler);
      } else {
        this.handlerQueue.push(clb);
      }
    };

    return Pdf;
  }();

  exports.default = Pdf;

  /***/
},
/* 19 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ThreeEventConverterFs = function () {
    ThreeEventConverterFs.objectsTest = function objectsTest(object1, object2) {
      return object1 && object2 ? object1.object === object2.object : false;
    };

    ThreeEventConverterFs.objectsAndFacesTest = function objectsAndFacesTest(object1, object2) {
      return object1 && object2 ? object1.object === object2.object && object1.face.materialIndex === object2.face.materialIndex : false;
    };

    function ThreeEventConverterFs(visualWorld) {
      var test = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ThreeEventConverterFs.objectsAndFacesTest;

      _classCallCheck(this, ThreeEventConverterFs);

      this.visual = visualWorld;
      this.coords = new _libs.THREE.Vector2();
      this.raycaster = this.visual.raycaster;
      this.camera = this.visual.camera;
      this.threes = [];
      this.test = test;
    }

    ThreeEventConverterFs.prototype.addThree = function addThree(three) {
      this.threes.push(three);
    };

    ThreeEventConverterFs.prototype.removeThree = function removeThree(three) {
      var i = this.threes.indexOf(three);
      if (~i) {
        this.threes.splice(i, 1);
      }
    };

    ThreeEventConverterFs.prototype.getObject = function getObject(e) {
      this.setCoordsFromEvent(e);
      this.raycaster.setFromCamera(this.coords, this.camera);
      var intersects = this.raycaster.intersectObjects(this.threes);
      return intersects[0];
    };

    return ThreeEventConverterFs;
  }();

  exports.default = ThreeEventConverterFs;

  /***/
},
/* 20 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var ThreeUtils = function () {
    function ThreeUtils() {
      _classCallCheck(this, ThreeUtils);
    }

    ThreeUtils.vertices2UVs = function vertices2UVs(vertices, indeces, first, last, converClb) {
      var r = [];
      for (var i = first; i < last; ++i) {
        var vis = [indeces[i].a, indeces[i].b, indeces[i].c];
        for (var j = 0; j < vis.length; ++j) {
          if (!r[vis[j]]) {
            r[vis[j]] = converClb(vertices[vis[j]]);
          }
        }
      }
      return r;
    };

    ThreeUtils.computeFaceVertexUvs = function computeFaceVertexUvs(geometry, faces) {
      var uvs = [ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, 0, faces[0], function (p) {
        return new THREE.Vector2(p.x, 1 - p.z);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[0], faces[1], function (p) {
        return new THREE.Vector2(1 - p.x, 1 - p.z);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[1], faces[2], function (p) {
        return new THREE.Vector2(p.x, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[2], faces[3], function (p) {
        return new THREE.Vector2(1 - p.x, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[3], faces[4], function (p) {
        return new THREE.Vector2(p.z, p.y);
      }), ThreeUtils.vertices2UVs(geometry.vertices, geometry.faces, faces[4], geometry.faces.length, function (p) {
        return new THREE.Vector2(1 - p.z, p.y);
      })];

      var uvsi = 0;
      for (var i = 0; i < geometry.faces.length; ++i) {
        uvsi += faces[uvsi] === i;
        var f = geometry.faces[i];
        f.materialIndex = uvsi;
        geometry.faceVertexUvs[0][i] = [uvs[uvsi][f.a], uvs[uvsi][f.b], uvs[uvsi][f.c]];
      }
    };

    ThreeUtils.createMarker = function createMarker(p, c, size) {
      var marker = new THREE.Mesh(new THREE.SphereGeometry(size), new THREE.MeshPhongMaterial({ color: c }));
      marker.position.set(p.x, p.y, p.z);
      return marker;
    };

    ThreeUtils.findUvTris = function findUvTris(geometry, ps, first, last) {
      var res = [];
      for (var _iterator = ps, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var p = _ref;

        var found = false;
        for (var i = first; i < last && !found; ++i) {
          var tri = geometry.faceVertexUvs[0][i];
          if (_BaseMathUtils2.default.isInsideConvPoly(tri, p)) {
            res.push({
              coefs: _BaseMathUtils2.default.computeInterpCoefs(tri, p),
              i: i
            });
            found = true;
          }
        }
        if (!found) {
          console.error('Bad point');
          res.push(undefined);
        }
      }
      return res;
    };

    ThreeUtils.findInternalVertices = function findInternalVertices(geometry, ps, first, last) {
      var res = {};
      for (var i = first; i < last; ++i) {
        var tri = geometry.faceVertexUvs[0][i],
            f = geometry.faces[i],
            vs = [f.a, f.b, f.c];
        for (var j = 0; j < tri.length; ++j) {
          if (res[vs[j]] === undefined && _BaseMathUtils2.default.isInsidePoly(ps, tri[j])) {
            res[vs[j]] = {
              p: tri[j],
              i: vs[j],
              n: f.vertexNormals[j]
            };
          }
        }
      }
      return Object.values(res);
    };

    return ThreeUtils;
  }();

  exports.default = ThreeUtils;

  /***/
},
/* 21 */
/***/function (module, exports) {

  "use strict";
  "use strict";

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Target = function () {
    function Target() {
      _classCallCheck(this, Target);
    }

    Target.test = function test(object1, object2) {
      return object1.target === object2.target;
    };

    return Target;
  }();

  exports.default = Target;

  /***/
},
/* 22 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Detector = __webpack_require__(45);

  var _Detector2 = _interopRequireDefault(_Detector);

  var _VisualWorld = __webpack_require__(66);

  var _VisualWorld2 = _interopRequireDefault(_VisualWorld);

  var _PdfLinksHandler = __webpack_require__(35);

  var _PdfLinksHandler2 = _interopRequireDefault(_PdfLinksHandler);

  var _Book = __webpack_require__(26);

  var _Book2 = _interopRequireDefault(_Book);

  var _BookView = __webpack_require__(29);

  var _BookView2 = _interopRequireDefault(_BookView);

  var _BookController = __webpack_require__(27);

  var _BookController2 = _interopRequireDefault(_BookController);

  var _PdfBookPropsBuilder = __webpack_require__(34);

  var _PdfBookPropsBuilder2 = _interopRequireDefault(_PdfBookPropsBuilder);

  var _ClbBookPropsBuilder = __webpack_require__(30);

  var _ClbBookPropsBuilder2 = _interopRequireDefault(_ClbBookPropsBuilder);

  var _LoadingController = __webpack_require__(53);

  var _LoadingController2 = _interopRequireDefault(_LoadingController);

  var _Search = __webpack_require__(58);

  var _Search2 = _interopRequireDefault(_Search);

  var _Bookmarks = __webpack_require__(44);

  var _Bookmarks2 = _interopRequireDefault(_Bookmarks);

  var _Thumbnails = __webpack_require__(63);

  var _Thumbnails2 = _interopRequireDefault(_Thumbnails);

  var _TocController = __webpack_require__(40);

  var _TocController2 = _interopRequireDefault(_TocController);

  var _BookPrinter = __webpack_require__(28);

  var _BookPrinter2 = _interopRequireDefault(_BookPrinter);

  var _AutoNavigator = __webpack_require__(24);

  var _AutoNavigator2 = _interopRequireDefault(_AutoNavigator);

  var _SoundsEnviroment = __webpack_require__(39);

  var _SoundsEnviroment2 = _interopRequireDefault(_SoundsEnviroment);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  _libs.$.fn.FlipBook = function (options) {
    var scene = {
      dispose: function dispose() {
        if (this.ready) {
          !scene.pdfLinksHandler || scene.pdfLinksHandler.dispose();
          delete scene.pdfLinksHandler;
          scene.sounds.dispose();
          delete scene.sounds;
          scene.tocCtrl.dispose();
          delete scene.tocCtrl;
          scene.thumbnails.dispose();
          delete scene.thumbnails;
          !scene.bookmarks || scene.bookmarks.dispose();
          delete scene.bookmarks;
          scene.ctrl.dispose();
          delete scene.ctrl;
          scene.bookPrinter.dispose();
          delete scene.bookPrinter;
          scene.book.dispose();
          delete scene.book;
          scene.propsBuilder.dispose();
          delete scene.propsBuilder;
          delete scene.bookBuilder;
          scene.visual.dispose();
          delete scene.visual;
          scene.view.dispose();
          delete scene.view;
          delete scene.dispose;
        } else {
          this.pendingDispose = true;
        }
      }
    };
    options = _extends({}, options);
    scene.view = new _BookView2.default(this.length ? this[0] : (0, _libs.$)('<div>').appendTo('body'), function () {
      if (!_Detector2.default.webgl) {
        _Detector2.default.addGetWebGLMessage({ parent: scene.view.getView() });
      } else {
        scene.loadingCtrl = new _LoadingController2.default(scene.view, true, function (progress) {
          return progress === 0 ? (0, _libs.tr)('Please wait... the Application is Loading') : (0, _libs.tr)('PDF is Loading:') + ' ' + progress + '%';
        });
        scene.visual = new _VisualWorld2.default(scene.view.getContainer().ownerDocument.defaultView, scene.view.getContainer().ownerDocument, scene.view.getView());
        scene.bookBuilder = function (props, sheets, pageCallback) {
          props.cssLayerProps = _extends({}, props.cssLayerProps, {
            scene: scene
          });
          if (options.propertiesCallback) {
            props = options.propertiesCallback(props);
          }
          scene.book = new _Book2.default(scene.visual, sheets, pageCallback, props);
          scene.bookPrinter = new _BookPrinter2.default(scene.visual, scene.book, (options.template || {}).printStyle);
          scene.loadingCtrl.dispose();
          delete scene.loadingCtrl;
          scene.ctrl = new _BookController2.default(scene.book, scene.view, options.controlsProps);
          scene.book.setInjector(function (w) {
            w.jQuery = w.$ = _libs.$;
            w.book = scene.book;
            w.bookCtrl = scene.ctrl;
            if (props.injector) {
              props.injector(w);
            }
          });
          scene.view.addHandler(scene.ctrl);
          scene.ctrl.setPrinter(scene.bookPrinter);
          var test = pageCallback(0);

          scene.search = new _Search2.default(scene.view.getSearchView(), scene.book.getPages());
          scene.search.onQuery = scene.book.setQuery.bind(scene.book);
          scene.book.addEventListener('searchResults', function (e) {
            scene.search.setResults(e.results, e.lastPage);
          });

          scene.thumbnails = new _Thumbnails2.default(scene.visual, scene.view.getThumbnailsView(), pageCallback, 2 * (sheets + 2), { kWtoH: props.width / props.height });
          scene.tocCtrl = new _TocController2.default(scene.view, scene.ctrl);
          scene.tocCtrl.setThumbnails(scene.thumbnails);
          scene.tocCtrl.setSearch(scene.search);
          scene.ctrl.setTocCtrl(scene.tocCtrl);
          scene.view.addHandler(scene.tocCtrl);

          if (test.type === 'pdf') {
            scene.pdfLinksHandler = new _PdfLinksHandler2.default(test.src, scene.ctrl, scene.visual.element);
            scene.book.addEventListener('pdfAnnotation', scene.pdfLinksHandler.handleEvent.bind(scene.pdfLinksHandler));
            test.src.getHandler(function (handler) {
              handler.getOutline().then(function (outline) {
                scene.bookmarks = new _Bookmarks2.default(scene.view.getBookmarksView(), outline);
                scene.tocCtrl.setBookmarks(scene.bookmarks, test.src);
              });
            });
            if (options.pdfLinks && options.pdfLinks.handler) {
              scene.pdfLinksHandler.setHandler(options.pdfLinks.handler);
            }
          }

          scene.sounds = new _SoundsEnviroment2.default(options.template);
          scene.ctrl.setSounds(scene.sounds);
          scene.sounds.subscribeFlips(scene.ctrl);

          scene.ready = true;
          new _AutoNavigator2.default(scene.visual, scene.ctrl, options.autoNavigation).dispose();
          if (options.ready) {
            options.ready(scene);
          }
          if (scene.pendingDispose) {
            scene.dispose();
          }
        };
        if (options.pdf) {
          scene.propsBuilder = new _PdfBookPropsBuilder2.default(options.pdf, scene.bookBuilder);
          scene.propsBuilder.pdf.setLoadingProgressClb(scene.loadingCtrl.setProgress.bind(scene.loadingCtrl));
        } else if (options.pageCallback) {
          scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, options.pageCallback, options.pages, scene.bookBuilder);
        } else {
          scene.propsBuilder = new _ClbBookPropsBuilder2.default(scene.visual, _Book2.default.pageCallback, 6, scene.bookBuilder);
        }
      }
    }, options.template);
    return scene;
  };

  (0, _libs.$)(function () {
    var containers = (0, _libs.$)('.flip-book-container');
    for (var i = 0; i < containers.length; ++i) {
      var jContainer = (0, _libs.$)(containers[i]),
          src = jContainer.attr('src');
      if (!!src) {
        jContainer.FlipBook({ pdf: src });
      }
    }
  });

  window.jQuery = window.$ = _libs.$;

  /***/
},
/* 23 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  if (!Array.prototype.fill) {
    Array.prototype.fill = function (value) {

      //  1-2.
      if (this == null) {
        throw new TypeError('this is null or not defined');
      }

      var O = Object(this);

      //  3-5.
      var len = O.length >>> 0;

      //  6-7.
      var start = arguments[1];
      var relativeStart = start >> 0;

      //  8.
      var k = relativeStart < 0 ? Math.max(len + relativeStart, 0) : Math.min(relativeStart, len);

      //  9-10.
      var end = arguments[2];
      var relativeEnd = end === undefined ? len : end >> 0;

      //  11.
      var final = relativeEnd < 0 ? Math.max(len + relativeEnd, 0) : Math.min(relativeEnd, len);

      //  12.
      while (k < final) {
        O[k] = value;
        k++;
      }

      //  13.
      return O;
    };
  }

  if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, 'find', {
      value: function value(predicate) {
        'use strict';

        if (this == null) {
          throw new TypeError('Array.prototype.find called on null or undefined');
        }
        if (typeof predicate !== 'function') {
          throw new TypeError('predicate must be a function');
        }
        var list = Object(this);
        var length = list.length >>> 0;
        var thisArg = arguments[1];
        var value;

        for (var i = 0; i < length; i++) {
          value = list[i];
          if (predicate.call(thisArg, value, i, list)) {
            return value;
          }
        }
        return undefined;
      }
    });
  }

  if (!Array.prototype.findIndex) {
    Array.prototype.findIndex = function (predicate) {
      if (this == null) {
        throw new TypeError('Array.prototype.findIndex called on null or undefined');
      }
      if (typeof predicate !== 'function') {
        throw new TypeError('predicate must be a function');
      }
      var list = Object(this);
      var length = list.length >>> 0;
      var thisArg = arguments[1];
      var value;

      for (var i = 0; i < length; i++) {
        value = list[i];
        if (predicate.call(thisArg, value, i, list)) {
          return i;
        }
      }
      return -1;
    };
  }

  if (!Object.values) {
    Object.values = function values(O) {
      return Object.keys(O).map(function (name) {
        return O[name];
      }) || [];
    };
  }

  /***/
},
/* 24 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var AutoNavigator = function () {
    function AutoNavigator(context, bookCtrl) {
      var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      _classCallCheck(this, AutoNavigator);

      props = _extends({}, props, {
        urlParam: props.urlParam || 'fb3d-page',
        navigates: props.navigates === undefined ? 1 : props.navigates
      });
      this.props = props;
      this.context = context;
      this.bookCtrl = bookCtrl;
      this.urlParam = props.urlParam;
      this.wnd = context.wnd;

      this.wnd.fb3d = _extends({}, this.wnd.fb3d);
      this.wnd.fb3d.navigator = _extends({}, this.wnd.fb3d.navigator);
      this.navigator = this.wnd.fb3d.navigator[this.urlParam] = _extends({}, this.wnd.fb3d.navigator[this.urlParam]);
      this.navigator.instances = (this.navigator.instances || 0) + 1;

      if (this.navigator.instances <= this.props.navigates) {
        this.bookCtrl.goToPage(this.getPageNumber());
      }
    }

    AutoNavigator.prototype.dispose = function dispose() {};

    AutoNavigator.prototype.getParameterByName = function getParameterByName(name, url) {
      if (!url) {
        url = window.location.href;
      }
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^]*)|&|#|$)'),
          results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    };

    AutoNavigator.prototype.getPageNumber = function getPageNumber() {
      var number = this.getParameterByName(this.urlParam);
      number = parseInt(number);
      if (isNaN(number)) {
        number = 1;
      }
      return number - 1;
    };

    return AutoNavigator;
  }();

  exports.default = AutoNavigator;

  /***/
},
/* 25 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Binder = function () {
    function Binder(visual, p) {
      var _this = this;

      _classCallCheck(this, Binder);

      this.visual = visual;
      this.p = _extends({}, p, {
        backSize: 2 * p.cover.depth + p.sheets * p.page.depth
      });
      this.OZ = new _libs.THREE.Vector3(0, 0, 1);

      this.backG = new _libs.THREE.BoxGeometry(p.cover.depth, this.p.backSize, p.cover.height);

      this.materials = [new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color }), new _libs.THREE.MeshPhongMaterial({ color: p.cover.color })];

      var backM = new _libs.THREE.Mesh(this.backG, new _libs.THREE.MeshFaceMaterial(this.materials));

      if (p.cover.binderTexture !== '') {
        this.visual.textureLoader.load(p.cover.binderTexture, function (texture) {
          _this.materials[1].color.setHex(0xFFFFFF);
          _this.materials[1].map = texture;
          texture.minFilter = _libs.THREE.LinearFilter;
          texture.needsUpdate = true;
          _this.materials[1].needsUpdate = true;
        });
      }

      this.three = new _libs.THREE.Object3D();
      this.back = new _libs.THREE.Object3D();
      this.backRT = new _libs.THREE.Object3D();
      this.backRR = new _libs.THREE.Object3D();
      this.backLT = new _libs.THREE.Object3D();
      this.backLR = new _libs.THREE.Object3D();
      this.leftPivot = new _libs.THREE.Object3D();
      this.rightPivot = new _libs.THREE.Object3D();

      this.back.add(backM);
      this.back.add(this.leftPivot);
      this.back.add(this.rightPivot);
      this.backRT.add(this.back);
      this.backRR.add(this.backRT);
      this.backLT.add(this.backRR);
      this.backLR.add(this.backLT);
      this.three.add(this.backLR);
    }

    Binder.prototype.dispose = function dispose() {
      for (var _iterator = this.materials, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var m = _ref;

        if (m.map) {
          m.map = null;
          m.needsUpdate = true;
        }
        m.dispose();
      }
      delete this.materials;
      this.backG.dispose();
    };

    Binder.prototype.set = function set(angle) {
      var right = void 0,
          left = void 0;
      if (angle > Math.PI / 2) {
        right = Math.PI / 2;
        left = angle - Math.PI / 2;
      } else {
        right = angle;
        left = 0;
      }
      var p = this.p,
          tr1 = { x: -0.5 * p.cover.depth, y: 0.5 * p.backSize - p.cover.depth };
      this.backRT.position.set(tr1.x, tr1.y, 0);
      this.backRR.position.set(-tr1.x, -tr1.y, 0);
      this.backRR.quaternion.setFromAxisAngle(this.OZ, right);

      var tr2 = { x: p.backSize - 2 * p.cover.depth - 0.5 * p.cover.depth, y: 0.5 * p.backSize - p.cover.depth };
      this.backLT.position.set(tr2.x, tr2.y, 0);
      this.backLR.position.set(-tr2.x, -tr2.y, 0);
      this.backLR.quaternion.setFromAxisAngle(this.OZ, left);
    };

    Binder.prototype.setLeft = function setLeft(angle) {
      var PI = Math.PI;
      this.leftPivot.position.set(_MathUtils2.default.interpolateLinear([-PI, -PI / 2], [0, this.p.cover.depth], angle), 0.5 * this.p.backSize - 0.5 * this.p.cover.depth, 0);
      this.leftPivot.quaternion.setFromAxisAngle(this.OZ, angle);
    };

    Binder.prototype.setRight = function setRight(angle) {
      var PI = Math.PI;
      this.rightPivot.position.set(_MathUtils2.default.interpolateLinear([-PI / 2, 0], [this.p.cover.depth, 0], angle), -0.5 * this.p.backSize + 0.5 * this.p.cover.depth, 0);
      this.rightPivot.quaternion.setFromAxisAngle(this.OZ, angle);
    };

    Binder.prototype.joinLeftCover = function joinLeftCover(cover) {
      cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);
      this.leftPivot.add(cover.three);
    };

    Binder.prototype.disconnectLeftCover = function disconnectLeftCover(cover) {
      this.leftPivot.remove(cover.three);
    };

    Binder.prototype.joinRightCover = function joinRightCover(cover) {
      cover.three.position.set(0, -0.5 * this.p.cover.depth, 0);
      this.rightPivot.add(cover.three);
    };

    Binder.prototype.disconnectRightCover = function disconnectRightCover(cover) {
      this.rightPivot.remove(cover.three);
    };

    return Binder;
  }();

  exports.default = Binder;

  /***/
},
/* 26 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _book = __webpack_require__(11);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  var _Binder = __webpack_require__(25);

  var _Binder2 = _interopRequireDefault(_Binder);

  var _Cover = __webpack_require__(31);

  var _Cover2 = _interopRequireDefault(_Cover);

  var _SheetBlock = __webpack_require__(10);

  var _SheetBlock2 = _interopRequireDefault(_SheetBlock);

  var _SheetPhysics = __webpack_require__(38);

  var _SheetPhysics2 = _interopRequireDefault(_SheetPhysics);

  var _PageManager = __webpack_require__(33);

  var _PageManager2 = _interopRequireDefault(_PageManager);

  var _CSSLayer = __webpack_require__(13);

  var _CSSLayer2 = _interopRequireDefault(_CSSLayer);

  var _CssLayersManager = __webpack_require__(32);

  var _CssLayersManager2 = _interopRequireDefault(_CssLayersManager);

  var _SearchEngine = __webpack_require__(36);

  var _SearchEngine2 = _interopRequireDefault(_SearchEngine);

  var _CustomEventConverter = __webpack_require__(16);

  var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);

  var _CircleTarget = __webpack_require__(68);

  var _CircleTarget2 = _interopRequireDefault(_CircleTarget);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Book = function (_THREE$EventDispatche) {
    _inherits(Book, _THREE$EventDispatche);

    // pageCallback samples

    // (n)=> ({
    //   type: 'image',
    //   src: 'sample.png',
    //   interactive: false
    // });
    //
    // (n)=> ({
    //   type: 'html',
    //   src: 'sample.html',
    //   interactive: true
    // });
    //
    // const pdf = new Pdf('sample.pdf');
    // (n)=> ({
    //   type: 'pdf',
    //   src: pdf,
    //   interactive: false
    // });

    function Book(visual, sheets, pageCallback, props) {
      _classCallCheck(this, Book);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      sheets = Math.min(3, sheets);
      visual.jContainer.append('\n      <style type="text/css">\n        .demo-msg {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          padding: 10px;\n          background-color: #ffe4e1;\n          border-radius: 3px;\n        }\n      </style>\n      <div class="demo-msg">\n        This is the demo version, only 10 pages are available. Use the <a href="http://3dflipbook.net/download-jq" target="_blank">full version</a>.\n      </div>\n    ');
      _this.visual = visual;
      _this.mouseController = true;
      _this.p = _extends({}, Book.prepareProps(props), {
        sheets: sheets,
        pageCallback: pageCallback,
        zoom: 1,
        singlePage: false,
        autoResolution: {
          enable: false,
          k: 1.5
        }
      });
      _this.pageManager = new _PageManager2.default(visual, _this, _this.p);
      _CSSLayer2.default.init(visual.doc);
      _this.layerManager = new _CssLayersManager2.default(_this);
      _this.searchEngine = new _SearchEngine2.default(pageCallback, 2 * (sheets + 2));
      _this.searchEngine.onPageHitsChanged = function (page, query) {
        _this.pageManager.refreshPageQuery(page, query);
        _this.dispatchEvent({
          type: 'searchResults',
          results: _this.searchEngine.results,
          lastPage: page,
          query: query
        });
      };

      _this.three = new _libs.THREE.Object3D();

      _this.binder = new _Binder2.default(visual, _this.p);
      _this.three.add(_this.binder.three);

      _this.leftCover = new _Cover2.default(visual, _extends({}, _this.p, { setTexture: _this.setLeftCoverTexture.bind(_this) }), Math.PI / 2, 'opened');
      _this.binder.joinLeftCover(_this.leftCover);
      _this.subscribeSheetBlock(_this.leftCover, 0);
      _this.rightCover = new _Cover2.default(visual, _extends({}, _this.p, { setTexture: _this.setRightCoverTexture.bind(_this) }), 0, 'closed');
      _this.binder.joinRightCover(_this.rightCover);
      _this.subscribeSheetBlock(_this.rightCover, 2 * (_this.p.sheets + 1));

      _this.threeSheetBlocks = new _libs.THREE.Object3D();
      _this.three.add(_this.threeSheetBlocks);
      _this.threeSheetBlocks.position.set(0.5 * _this.p.cover.depth - 0.5 * sheets * _this.p.page.depth, -0.5 * sheets * _this.p.page.depth, 0);

      _this.sheetBlocks = [];
      if (sheets > 0) {
        _this.addSheetBlock(0, new _SheetBlock2.default(visual, _extends({}, _this.p, { setTexture: _this.setPageTexture.bind(_this) }), 0, sheets, 0, 'closed'));
      }

      _this.angle = _this.p.rtl ? Math.PI : 0;
      _this.closedAngle = 0;
      _this.set(_this.angle, 0);
      _this.lastMousePos = {
        t: 0
      };

      _this.three.position.set(-0.5 * _this.p.cover.depth + 0.5 * sheets * _this.p.page.depth, 0, 0);
      _this.sheetPhysics = new _SheetPhysics2.default(_this.p.page.width / _this.p.scale, _this.p.gravity, _this.p.page.cornerDeviation);

      _this.binds = {
        update: _this.update.bind(_this),
        lastMousePos: function lastMousePos(e) {
          _this.lastMousePos = _extends({}, _this.lastMousePos, {
            pageX: e.pageX,
            pageY: e.pageY
          });
        }
      };
      _this.visual.addRenderCallback(_this.binds.update);
      (0, _libs.$)(_this.visual.element).on('mousemove', _this.binds.lastMousePos);

      _this.binds.onPickCallback = _this.onPickCallback.bind(_this);
      _this.visual.drag.onPickCallback = _this.binds.onPickCallback;
      _this.binds.onDragCallback = _this.onDragCallback.bind(_this);
      _this.visual.drag.onDragCallback = _this.binds.onDragCallback;
      _this.binds.onReleaseCallback = _this.onReleaseCallback.bind(_this);
      _this.visual.drag.onReleaseCallback = _this.binds.onReleaseCallback;

      _this.dragAngle = 0.05;
      _this.tmp = {
        boxs: [new _libs.THREE.Box3(), new _libs.THREE.Box3()]
      };

      _this.visual.addObject(_this.three);
      _this.visual.addEventListener('resize', _this.pageManager.refreshZoom.bind(_this.pageManager));

      setTimeout(function () {
        _this.notifyBeforeAnimation();
        _this.notifyAfterAnimation();
      }, 100);
      return _this;
    }

    Book.prototype.dispose = function dispose() {
      this.visual.removeObject(this.three);
      this.sheetPhysics.dispose();
      delete this.visual.drag.onPickCallback;
      delete this.visual.drag.onDragCallback;
      delete this.visual.drag.onReleaseCallback;
      (0, _libs.$)(this.visual.element).off('mousemove', this.binds.lastMousePos);
      this.visual.removeRenderCallback(this.binds.update);
      this.removeSheetBlocks(0, this.sheetBlocks.length);
      this.binder.disconnectLeftCover(this.leftCover);
      this.removeSheetBlock(this.leftCover);
      this.binder.disconnectRightCover(this.rightCover);
      this.removeSheetBlock(this.rightCover);
      this.binder.dispose();
      this.layerManager.dispose();
      _CSSLayer2.default.dispose();
      this.pageManager.dispose();
    };

    // publics {

    Book.prototype.setAutoResolution = function setAutoResolution(enable) {
      var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1.5;

      this.p.autoResolution = _extends({}, this.p.autoResolution, {
        enable: enable,
        k: k
      });
    };

    Book.prototype.setZoom = function setZoom(zoom, singlePage) {
      if (Math.abs(this.p.zoom - zoom) > 1e-3 || singlePage !== this.p.singlePage) {
        this.p.zoom = zoom;
        this.p.singlePage = singlePage;
        this.pageManager.refreshZoom();
      }
    };

    Book.prototype.getPageCallback = function getPageCallback() {
      return this.p.pageCallback;
    };

    Book.prototype.setQuery = function setQuery(query) {
      this.searchEngine.setQuery(query);
    };

    Book.prototype.isProcessing = function isProcessing() {
      return this.sheetPhysics.getSize() !== 0;
    };

    Book.prototype.getPages = function getPages() {
      return 4 + 2 * this.p.sheets;
    };

    Book.prototype.setFlipProgressClb = function setFlipProgressClb(clb) {
      this.p.flipProgressClb = clb;
    };

    Book.prototype.setInjector = function setInjector(injector) {
      this.p.injector = injector;
    };

    Book.prototype.isActivePage = function isActivePage(n) {
      var res = true;
      if (n > 1 && n < this.getPages() - 2) {
        for (var _iterator = this.sheetBlocks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var b = _ref;

          if (n - 2 > 2 * b.p.first && n - 2 < 2 * b.p.last - 1) {
            res = false;
            break;
          }
        }
      }
      return res;
    };

    Book.prototype.getBlockByPage = function getBlockByPage(n) {
      var block = void 0;
      if (n < 2) {
        block = this.leftCover;
      } else if (n < 2 * (this.p.sheets + 1)) {
        for (var _iterator2 = this.sheetBlocks, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var b = _ref2;

          if (n - 2 >= 2 * b.p.first && n - 2 < 2 * b.p.last) {
            block = b;
            break;
          }
        }
      } else {
        block = this.rightCover;
      }
      return block;
    };

    Book.prototype.getBlockPages = function getBlockPages(block) {
      var range = void 0;
      switch (block) {
        case this.leftCover:
          {
            range = [0, 1];
            break;
          }
        case this.rightCover:
          {
            range = [2 * (this.p.sheets + 1), 2 * (this.p.sheets + 1) + 1];
            break;
          }
        default:
          {
            range = block ? [2 * (block.p.first + 1), 2 * (block.p.last + 1) - 1] : undefined;
          }
      }
      return range;
    };

    Book.prototype.getPage = function getPage() {
      var PI = Math.PI;
      var p = void 0;
      if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
        for (var _iterator3 = this.sheetBlocks, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var block = _ref3;

          if (block.angle <= PI / 2) {
            p = this.getBlockPages(block)[0] - 1;
            break;
          }
        }
        if (!p) {
          p = this.getPages() - 3;
        }
      } else if (this.angle < PI / 2) {
        p = 0;
      } else if (this.angle > 3 * PI / 2) {
        p = 1;
      } else if (this.angle < PI) {
        p = this.getPages() - 3;
      } else if (this.angle >= PI) {
        p = this.getPages() - 1;
      }
      return p;
    };

    Book.prototype.getTopPages = function getTopPages() {
      var p = this.getPage();
      return p === 0 || p === this.getPages() - 1 ? [p] : [p, p + 1];
    };

    Book.prototype.getPageState = function getPageState(n) {
      return this.pageManager.getPageState(n);
    };

    Book.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {
      this.pageManager.enableLoadingAnimation(enable);
    };

    Book.prototype.getLeftFlipping = function getLeftFlipping() {
      var block = void 0;
      var left = this.sheetBlocks[0],
          PI = Math.PI;
      if (this.angle === PI) {
        block = this.rightCover;
      } else {
        if (left && left.state === 'closed' && left.angle > PI / 2) {
          block = left;
        } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
          block = this.leftCover;
        }
      }
      return block;
    };

    Book.prototype.getRightFlipping = function getRightFlipping() {
      var block = void 0;
      var right = this.sheetBlocks[this.sheetBlocks.length - 1],
          PI = Math.PI;
      if (this.angle === 0) {
        block = this.leftCover;
      } else {
        if (right && right.state === 'closed' && right.angle <= PI / 2) {
          block = right;
        } else if (this.angle === PI / 2 || this.angle === 3 * PI / 2) {
          block = this.rightCover;
        }
      }
      return block;
    };

    Book.prototype.getClosedBlockAngle = function getClosedBlockAngle(angle) {
      var closedAngle = void 0,
          PI = Math.PI;

      if (this.leftCover.physicId) {
        var test = void 0;
        try {
          test = Math.abs(this.sheetPhysics.getParametr(this.leftCover.physicId, 'angle') - angle);
        } catch (e) {
          test = 0;
        }
        closedAngle = angle > PI / 2 || test > PI / 6 ? PI / 2 : this.closedAngle;
      } else if (this.rightCover.physicId) {
        var _test = void 0;
        try {
          _test = Math.abs(this.sheetPhysics.getParametr(this.rightCover.physicId, 'angle') - angle);
        } catch (e) {
          _test = 0;
        }
        closedAngle = angle < PI / 2 || _test > PI / 6 ? PI / 2 + 1e-7 : this.closedAngle;
      } else {
        closedAngle = PI / 2 + (angle !== 0) * 1e-7;
      }

      return {
        openedAngle: angle,
        closedAngle: closedAngle,
        binderTurn: this.closedAngle
      };
    };

    Book.prototype.flipLeft = function flipLeft() {
      var _this2 = this;

      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;

      var block = void 0,
          res = void 0;
      if (this.sheetPhysics.getSize() < 25) {
        (function () {
          var left = _this2.sheetBlocks[0],
              PI = Math.PI;
          if (_this2.angle === PI) {
            res = _this2.connectPhysics(block = _this2.rightCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {
              return _this2.set(3 * PI / 2 - angle / 2, height);
            }, function (angle, height) {
              _this2.set(3 * PI / 2 - angle / 2, 0);
              _this2.setSheetBlocks(angle ? PI : PI / 2 + 1e-7, 'closed');
            }, progressClb);
          } else {
            if (left && left.state === 'closed' && left.angle > PI / 2) {
              block = size < left.getSize() ? _this2.splitSheetBlock(0, left.getSize() - size)[1] : left;
              res = _this2.connectPhysics(block, _this2.p.page.mass * block.getSize(), PI, -_this2.p.page.startVelocity, _this2.p.page.flexibility, 0, function (angle, height) {
                return block.set(_this2.getClosedBlockAngle(angle), 'opened', height);
              }, Book.finishAnimationClb.bind({ book: _this2, block: block }), progressClb);
            } else if (_this2.angle === PI / 2 || _this2.angle === 3 * PI / 2) {
              res = _this2.connectPhysics(block = _this2.leftCover, _this2.p.cover.mass, PI, -_this2.p.cover.startVelocity, _this2.p.cover.flexibility, 0, function (angle, height) {
                _this2.set(2 * PI - angle / 2, height);
                if (angle > PI / 2) {
                  _this2.setSheetBlocks(angle ? PI / 2 : 0, 'closed');
                }
              }, function (angle, height) {
                return _this2.set(angle === 0 ? 0 : 2 * PI - angle / 2, 0);
              }, progressClb);
            }
          }
        })();
      }
      return res;
    };

    Book.prototype.flipRight = function flipRight() {
      var _this3 = this;

      var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var progressClb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.p.flipProgressClb;

      var block = void 0,
          res = void 0;
      if (this.sheetPhysics.getSize() < 25) {
        (function () {
          var right = _this3.sheetBlocks[_this3.sheetBlocks.length - 1],
              PI = Math.PI;
          if (_this3.angle === 0) {
            res = _this3.connectPhysics(block = _this3.leftCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {
              return _this3.set(angle / 2, height);
            }, function (angle, height) {
              _this3.set(angle / 2, 0);
              _this3.setSheetBlocks(angle ? PI / 2 : 0, 'closed');
            }, progressClb);
          } else {
            if (right && right.state === 'closed' && right.angle <= PI / 2) {
              block = size < right.getSize() ? _this3.splitSheetBlock(_this3.sheetBlocks.length - 1, size)[0] : right;
              res = _this3.connectPhysics(block, _this3.p.page.mass * block.getSize(), 0, _this3.p.page.startVelocity, _this3.p.page.flexibility, 0, function (angle, height) {
                return block.set(_this3.getClosedBlockAngle(angle), 'opened', height);
              }, Book.finishAnimationClb.bind({ book: _this3, block: block }), progressClb);
            } else if (_this3.angle === PI / 2 || _this3.angle === 3 * PI / 2) {
              res = _this3.connectPhysics(block = _this3.rightCover, _this3.p.cover.mass, 0, _this3.p.cover.startVelocity, _this3.p.cover.flexibility, 0, function (angle, height) {
                _this3.set(PI / 2 + angle / 2, height);
                if (angle < PI / 2) {
                  _this3.setSheetBlocks(PI / 2 + 1e-7, 'closed');
                }
              }, function (angle, height) {
                return _this3.set(PI / 2 + angle / 2, 0);
              }, progressClb);
            }
          }
        })();
      }
      return res;
    };

    // }

    Book.prototype.clearHoverInfo = function clearHoverInfo() {
      this.pageManager.turnOnEvents();
      delete this.hoverInfo.block.force;
      delete this.hoverInfo.block.cornerForce;
      delete this.hoverInfo;
    };

    Book.prototype.xSegment = function xSegment() {
      var boxs = this.tmp.boxs,
          res = {};
      if (this.leftCover.physicId) {
        boxs[0].setFromObject(this.rightCover.three);
        res.min = -(res.max = boxs[0].max.x);
      } else if (this.rightCover.physicId) {
        boxs[0].setFromObject(this.leftCover.three);
        res.max = -(res.min = boxs[0].min.x);
      } else {
        boxs[0].setFromObject(this.leftCover.three);
        boxs[1].setFromObject(this.rightCover.three);
        boxs[0].union(boxs[1]);
        res.min = boxs[0].min.x;
        res.max = boxs[0].max.x;
      }
      return res;
    };

    Book.prototype.computeTarget = function computeTarget(point) {
      var x = point.x,
          y = point.y,
          seg = this.xSegment(),
          angle = void 0;

      angle = (seg.max - x) / (seg.max - seg.min) * Math.PI;
      // angle = Math.acos(x/Math.sqrt(x*x+y*y));
      return Math.max(this.dragAngle, Math.min(Math.PI - this.dragAngle, angle));
    };

    Book.prototype.onPickCallback = function onPickCallback(object) {
      var res = false;
      var block = object.object.userData.self,
          p = _extends({}, object.uv),
          i = object.face.materialIndex;
      if (i < 2) {
        p.x = i === 0 ? p.x : 1 - p.x;
        if (block.cornerTarget.testIntersection(null, p) && block.physicId) {
          if (this.hoverInfo) {
            this.clearHoverInfo();
          }
          block.force = _SheetPhysics2.default.dragForceClb;
          block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(object.point));
          this.dragInfo = {
            object: object,
            block: block
          };
          res = true;
          this.pageManager.turnOffEvents();
        }
      }
      return res;
    };

    Book.prototype.onDragCallback = function onDragCallback(point) {
      var block = this.dragInfo.block,
          p = block.getProps();
      block.force = _SheetPhysics2.default.dragForceClb;
      block.cornerForce = _SheetPhysics2.default.getDragCornerForceClb(this.computeTarget(point));
      return true;
    };

    Book.prototype.onReleaseCallback = function onReleaseCallback() {
      delete this.dragInfo.block.force;
      delete this.dragInfo.block.cornerForce;
      delete this.dragInfo;
      this.pageManager.turnOnEvents();
    };

    Book.prototype.getFlipping = function getFlipping(i) {
      return i ? this.getLeftFlipping() : this.getRightFlipping();
    };

    Book.prototype.flip = function flip(i) {
      var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

      return i ? this.flipLeft(size) : this.flipRight(size);
    };

    Book.prototype.enableMouse = function enableMouse(enable) {
      this.mouseController = enable;
    };

    Book.prototype.cornerCallback = function cornerCallback(e, data) {
      var _this4 = this;

      if (this.mouseController) {
        (function () {
          var _data$data = data.data,
              i = _data$data.i,
              n = _data$data.n;

          if (e.type === 'mouseover') {
            if (_this4.hoverInfo && _this4.hoverInfo.pendings !== undefined) {
              ++_this4.hoverInfo.pendings;
            } else {
              if (_this4.hoverInfo) {
                console.warn('Wrong state: element is already hover');
                if (_this4.hoverInfo.n !== n) {
                  _this4.clearHoverInfo();
                }
              }
              if (!_this4.hoverInfo && !_this4.dragInfo) {
                (function () {
                  var res = Promise.resolve(undefined);
                  var hoverAngle = 0.02,
                      hover = _this4.getBlockByPage(n),
                      possible = _this4.getFlipping(i);
                  if (n > 1 && n < 2 * (_this4.p.sheets + 1) && hover.physicId && (hover.angle < hoverAngle || hover.angle > Math.PI - hoverAngle)) {
                    res = Promise.resolve(hover);
                  } else if (hover === possible) {
                    var sheetBlocks = [_this4.leftCover].concat(_this4.sheetBlocks, [_this4.rightCover]);
                    var j = sheetBlocks.indexOf(hover),
                        nextBlock = ~j ? sheetBlocks[j + 2 * i - 1] : undefined;
                    if (!nextBlock || !nextBlock.physicId || nextBlock.angle > hoverAngle && nextBlock.angle < Math.PI - hoverAngle) {
                      res = _this4.flip(i, 1).then(function (block) {
                        if (!block) {
                          delete _this4.hoverInfo;
                        } else {
                          _this4.sheetPhysics.setParametr(block.physicId, 'velocity', 0);
                        }
                        return block;
                      });
                      _this4.hoverInfo = {
                        pendings: 1
                      };
                    }
                  }
                  res.then(function (block) {
                    if (_this4.hoverInfo && _this4.hoverInfo.pendings < 1) {
                      block = undefined;
                      delete _this4.hoverInfo;
                    }
                    if (block) {
                      _this4.pageManager.turnOffEvents();
                      var p = block.getProps();
                      block.force = _this4.sheetPhysics.getTargetForceClb(p.mass * block.getSize(), i ? Math.PI - hoverAngle : hoverAngle);
                      block.cornerForce = function () {
                        return (i ? -1 : 1) * _SheetPhysics2.default.hoverCornerForceClb();
                      };
                      _this4.sheetPhysics.setParametr(block.physicId, 'angle', i ? Math.PI - 0.5 * hoverAngle : 0.5 * hoverAngle);
                      _this4.hoverInfo = {
                        n: n,
                        block: block
                      };
                      _this4.update(1 / 30);
                    }
                  });
                })();
              }
            }
          } else if (_this4.hoverInfo && e.type === 'mouseout') {
            if (_this4.hoverInfo.pendings !== undefined) {
              --_this4.hoverInfo.pendings;
            } else if (n === _this4.hoverInfo.n) {
              _this4.clearHoverInfo();
            }
          } else if (e.type === 'mousedown') {
            _this4.cornerClickData = {
              x: e.pageX,
              y: e.pageY
            };
          } else if (e.type === 'click') {
            if (Math.sqrt(Math.pow(_this4.cornerClickData.x - e.pageX, 2) + Math.pow(_this4.cornerClickData.y - e.pageY, 2)) < 5) {
              var hover = _this4.getBlockByPage(n);
              if (hover.physicId) {
                var id = hover.physicId,
                    props = hover.getProps();
                _this4.sheetPhysics.setParametr(id, 'velocity', (i ? -1 : 1) * props.startVelocity);
              }
            }
            delete _this4.cornerClickData;
          }
        })();
      }
    };

    Book.prototype.addSheetBlock = function addSheetBlock(p, block) {
      this.sheetBlocks.splice(p, 0, block);
      this.subscribeSheetBlock(block, 2);
      this.threeSheetBlocks.add(block.three);
    };

    Book.prototype.subscribeSheetBlock = function subscribeSheetBlock(block, offset) {
      var _this5 = this;

      var eventConverter = new _CustomEventConverter2.default(this.visual.wnd, this.visual.doc, _CircleTarget2.default.test),
          r = 0.15,
          target = new _CircleTarget2.default(1 - 0.5 * r, 0.5 * r, r);
      target.block = block;
      target.callback = this.cornerCallback.bind(this);
      eventConverter.addCustom(target);
      block.cornerTarget = target;
      block.three.userData.mouseCallback = function (e, data) {
        var i = data.face.materialIndex;
        if (i < 2) {
          var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;
          eventConverter.convert(e, { x: i === 0 ? data.uv.x : 1 - data.uv.x, y: data.uv.y, i: i, n: n });
          _this5.pageManager.transferEventToTexture(n, e, data);
        }
      };
      block.three.userData.touchCallback = function (e, data) {
        var i = data.face.materialIndex;
        if (i < 2) {
          var n = i === 0 ? offset + 2 * block.p.first : offset + 2 * block.p.last - 1;
          _this5.pageManager.transferEventToTexture(n, e, data);
        }
      };
      this.visual.drag.addThree(block.three);
      this.visual.mouseEvents.addThree(block.three);
      this.visual.touchEvents.addThree(block.three);
    };

    Book.prototype.removeSheetBlock = function removeSheetBlock(block) {
      this.visual.mouseEvents.removeThree(block.three);
      this.visual.touchEvents.removeThree(block.three);
      this.visual.drag.removeThree(block.three);
      this.threeSheetBlocks.remove(block.three);
      block.dispose();
    };

    Book.prototype.removeSheetBlocks = function removeSheetBlocks(first, size) {
      var blocks = this.sheetBlocks.splice(first, size);
      for (var _iterator4 = blocks, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var block = _ref4;

        this.removeSheetBlock(block);
      }
    };

    Book.prototype.setTexture = function setTexture(material, n) {
      this.pageManager.setTexture(material, n);
    };

    Book.prototype.setPageTexture = function setPageTexture(material, n) {
      this.setTexture(material, n + 2);
    };

    Book.prototype.setLeftCoverTexture = function setLeftCoverTexture(material, n) {
      this.setTexture(material, n);
    };

    Book.prototype.setRightCoverTexture = function setRightCoverTexture(material, n) {
      this.setTexture(material, n + 2 * (this.p.sheets + 1));
    };

    Book.finishAnimationClb = function finishAnimationClb(angle) {
      this.block.set(this.book.getClosedBlockAngle(angle).closedAngle, 'closed', 0);
      var i = this.book.sheetBlocks.indexOf(this.block);
      if (~i) {
        if (angle === 0) {
          this.book.mergeSheetBlocks(i, this.book.sheetBlocks.length - i);
        } else {
          this.book.mergeSheetBlocks(0, i + 1);
        }
      }
    };

    Book.prototype.calcBlockForce = function calcBlockForce(block, object, angle, velocity, cornerHeight) {
      return block.force ? block.force(object, angle, velocity, cornerHeight) : 0;
    };

    Book.prototype.calcBlockCornerForce = function calcBlockCornerForce(block, object, angle, velocity, cornerHeight) {
      return block.cornerForce ? block.cornerForce(object, angle, velocity, cornerHeight) : 0;
    };

    Book.prototype.notifyBeforeAnimation = function notifyBeforeAnimation() {
      var res = void 0;
      if (this.animationNotification) {
        res = Promise.reject();
      } else {
        this.animationNotification = true;
        this.dispatchEvent({
          type: 'beforeAnimation'
        });
        res = this.layerManager.hide();
      }
      return res;
    };

    Book.prototype.notifyAfterAnimation = function notifyAfterAnimation() {
      if (this.animationNotification) {
        delete this.animationNotification;
        this.layerManager.show();
        this.dispatchEvent({
          type: 'afterAnimation'
        });
      }
    };

    Book.prototype.connectPhysics = function connectPhysics(block, mass, angle, velocity, flexibility, coverHeight, simulateClb, removeClb, progressClb) {
      var _this6 = this;

      var type = function type() {
        return _this6.hoverInfo ? 'hover' : _this6.dragInfo ? 'drag' : 'free';
      },
          res = this.sheetPhysics.getSize() ? Promise.resolve() : this.notifyBeforeAnimation();
      return res.then(function () {
        block.physicId = _this6.sheetPhysics.addObject(mass, angle, velocity, flexibility, coverHeight, function (angl, ch) {
          simulateClb(angl, ch);
          progressClb(block, Math.abs(angle - angl) / Math.PI, 'process', type());
        }, function (angl, ch) {
          removeClb(angl, ch);
          delete block.physicId;
          progressClb(block, Math.abs(angle - angl) / Math.PI, 'finish', type());
          Promise.resolve().then(function () {
            if (!_this6.sheetPhysics.getSize()) {
              _this6.notifyAfterAnimation();
            }
          });
        }, function (object, angle, velocity, cornerHeight) {
          return _this6.calcBlockForce(block, object, angle, velocity, cornerHeight);
        }, function (object, angle, velocity, cornerHeight) {
          return _this6.calcBlockCornerForce(block, object, angle, velocity, cornerHeight);
        });
        progressClb(block, 0, 'init', type());
        return block;
      }).catch(function () {
        return undefined;
      });
    };

    Book.prototype.update = function update(dt) {
      var _this7 = this;

      this.lastMousePos.t += dt;
      if (this.isProcessing() && this.lastMousePos.pageX !== undefined && this.lastMousePos.t - (this.lastMousePos.lastT || 0) > 0.25 && !this.hoverInfo && !this.dragInfo) {
        this.lastMousePos.lastT = this.lastMousePos.t;
        Promise.resolve().then(function () {
          (0, _libs.$)(_this7.visual.element).trigger(_libs.$.Event('mousemove', _this7.lastMousePos));
        });
      }
      this.sheetPhysics.simulate(dt);
    };

    Book.prototype.splitSheetBlock = function splitSheetBlock(i, leftSize) {
      var block = this.sheetBlocks[i];
      if (block && leftSize < block.getSize()) {
        var newBlock = new _SheetBlock2.default(this.visual, _extends({}, this.p, { setTexture: this.setPageTexture.bind(this) }), block.p.first, block.p.first + leftSize, block.angle, block.state);
        block.set(block.angle, block.state, block.corner.height, block.p.first + leftSize, block.p.last);
        this.addSheetBlock(i, newBlock);
        return [newBlock, block];
      }
    };

    Book.prototype.mergeSheetBlocks = function mergeSheetBlocks(first, size) {
      if (first < this.sheetBlocks.length) {
        size = Math.min(this.sheetBlocks.length - first, size);
        var firstBlock = this.sheetBlocks[first],
            lastBlock = this.sheetBlocks[first + size - 1];
        firstBlock.set(firstBlock.angle, firstBlock.state, firstBlock.corner.height, firstBlock.p.first, lastBlock.p.last);
        this.removeSheetBlocks(first + 1, size - 1);
      }
    };

    Book.prototype.setSheetBlocks = function setSheetBlocks(angle, state) {
      if (state === 'closed') {
        this.closedAngle = angle;
      }
      this.sheetBlocks.forEach(function (s) {
        if (!s.physicId) {
          s.set(angle, state);
        }
      });
    };

    Book.prototype.set = function set(angle) {
      var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

      this.angle = angle;
      var PI = Math.PI;
      if (angle < PI / 4) {
        this.binder.set(0);

        this.binder.setLeft(-PI / 2 + 2 * angle);
        this.leftCover.set(PI / 2, 'opened', height);

        this.setSheetBlocks(0, 'closed');

        this.binder.setRight(0);
        this.rightCover.set(0, 'closed', 0);
      } else if (angle < 2 * PI / 4) {
        var a = 2 * (angle - PI / 4);
        this.binder.set(a);

        this.binder.setLeft(-a);
        this.leftCover.set(PI / 2 + a, 'opened', height);

        this.setSheetBlocks(a, 'closed');

        this.binder.setRight(-a);
        this.rightCover.set(a, 'closed', 0);
      } else if (angle < 3 * PI / 4) {
        var _a = 2 * (angle - PI / 2);
        this.binder.set(PI / 2);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI, 'opened', 0);

        this.binder.setRight(-PI / 2);
        this.rightCover.set(_a, 'opened', height);
      } else if (angle < 4 * PI / 4) {
        var _a2 = 2 * (angle - 3 * PI / 4) + PI / 2;
        this.binder.set(_a2);

        this.binder.setLeft(-_a2);
        this.leftCover.set(_a2, 'closed', 0);

        this.setSheetBlocks(_a2, 'closed');

        this.binder.setRight(-PI / 2);
        this.rightCover.set(PI / 2, 'opened', height);
      } else if (angle < 5 * PI / 4) {
        this.binder.set(PI);

        this.binder.setLeft(-PI);
        this.leftCover.set(PI, 'closed', 0);

        this.setSheetBlocks(PI, 'closed');

        this.binder.setRight(-PI / 2 - 2 * (angle - PI));
        this.rightCover.set(PI / 2, 'opened', height);
      } else if (angle < 6 * PI / 4) {
        var _a3 = 2 * (angle - 5 * PI / 4);
        this.binder.set(PI - _a3);

        this.binder.setLeft(-PI + _a3);
        this.leftCover.set(PI - _a3, 'closed', 0);

        this.setSheetBlocks(PI - _a3, 'closed');

        this.binder.setRight(-PI + _a3);
        this.rightCover.set(PI / 2 - _a3, 'opened', height);
      } else if (angle < 7 * PI / 4) {
        var _a4 = 2 * (angle - 6 * PI / 4);
        this.binder.set(PI / 2);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI - _a4, 'opened', height);

        this.binder.setRight(-PI / 2);
        this.rightCover.set(0, 'opened', 0);
      } else if (angle < 8 * PI / 4) {
        var _a5 = 2 * (angle - 7 * PI / 4);
        this.binder.set(PI / 2 - _a5);

        this.binder.setLeft(-PI / 2);
        this.leftCover.set(PI / 2, 'opened', height);

        this.setSheetBlocks(PI / 2 - _a5, 'closed');

        this.binder.setRight(-PI / 2 + _a5);
        this.rightCover.set(PI / 2 - _a5, 'closed', 0);
      }
    };

    Book.createSideTexture = function createSideTexture(color) {
      var jC = (0, _libs.$)('<canvas width="8" height="8"></canvas>');
      var ctx = jC[0].getContext('2d');
      ctx.beginPath();
      ctx.fillStyle = _GraphUtils2.default.color2Rgba(color, 1);
      ctx.rect(0, 0, 8, 7);
      ctx.fill();
      ctx.beginPath();
      ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(color, 0.5), 1);
      ctx.rect(0, 7, 8, 1);
      ctx.fill();
      return jC[0];
    };

    Book.prepareProps = function prepareProps(props) {
      return Book.calcProps(Book.mergeProps((0, _book.props)(), props));
    };

    Book.mergeProps = function mergeProps(first, second) {
      second = second || {};
      return _extends({}, first, second, {
        sheet: _extends({}, first.sheet, second.sheet),
        cover: _extends({}, first.cover, second.cover),
        page: _extends({}, first.page, second.page),
        cssLayerProps: _extends({}, first.cssLayerProps, second.cssLayerProps)
      });
    };

    Book.calcProps = function calcProps(props) {
      var p = _extends({}, props, {
        sheet: _extends({}, props.sheet),
        cover: _extends({}, props.sheet, props.cover),
        page: _extends({}, props.sheet, props.page),
        cssLayerProps: _extends({}, props.cssLayerProps, {
          $: _libs.$
        })
      }),
          scale = 10,
          height = scale * p.height,
          width = scale * p.width,
          flipProgressClb = function flipProgressClb() {
        return undefined;
      },
          sheet = {
        sideTexture: p.sheet.sideTexture || Book.createSideTexture(p.sheet.color)
      },
          cover = _extends({}, sheet, p.cover, {
        depth: scale * p.cover.depth,
        width: width,
        height: height,
        padding: scale * p.cover.padding
      }),
          page = _extends({}, sheet, p.page, {
        depth: scale * p.page.depth,
        width: cover.width - cover.padding,
        height: cover.height - 2 * cover.padding
      }),
          marker = {
        use: false,
        color: 0XFF0000,
        size: scale * 0.001
      };
      if (cover.color !== sheet.color && !p.cover.sideTexture) {
        cover.sideTexture = Book.createSideTexture(cover.color);
      }
      if (page.color !== sheet.color && !p.page.sideTexture) {
        page.sideTexture = Book.createSideTexture(page.color);
      }
      return _extends({}, p, { scale: scale, height: height, width: width, flipProgressClb: flipProgressClb, cover: cover, page: page, marker: marker });
    };

    return Book;
  }(_libs.THREE.EventDispatcher);

  exports.default = Book;

  /***/
},
/* 27 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
    return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  };

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Controller2 = __webpack_require__(15);

  var _Controller3 = _interopRequireDefault(_Controller2);

  var _bookController = __webpack_require__(42);

  var _EventsToActions = __webpack_require__(49);

  var _EventsToActions2 = _interopRequireDefault(_EventsToActions);

  var _stats = __webpack_require__(70);

  var _stats2 = _interopRequireDefault(_stats);

  var _Object3DWatcher = __webpack_require__(55);

  var _Object3DWatcher2 = _interopRequireDefault(_Object3DWatcher);

  var _FullScreen = __webpack_require__(50);

  var _FullScreen2 = _interopRequireDefault(_FullScreen);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BookController = function (_Controller) {
    _inherits(BookController, _Controller);

    function BookController(book, view, props) {
      _classCallCheck(this, BookController);

      var _this = _possibleConstructorReturn(this, _Controller.call(this));

      _this.navigationControls = true;
      _this.book = book;
      _this.visual = book.visual;
      _this.p = BookController.prepareProps(props);
      _this.p.rtl = book.p.rtl;
      _this.devicePixelRatio = _this.visual.wnd.devicePixelRatio || 1;

      _this.orbit = book.visual.getOrbit();
      book.setFlipProgressClb(_this.updateViewIfState.bind(_this));
      _this.view = view;
      _this.bindActions();

      _this.state = {
        smartPan: !_this.actions['cmdSmartPan'].active,
        singlePage: _this.actions['cmdSinglePage'].active || _this.actions['cmdSinglePage'].activeForMobile && _this.devicePixelRatio > 1,
        stats: _this.actions['cmdStats'].active,
        lighting: _this.p.lighting.default,
        activeSide: 1
      };

      _this.boxs = [new _libs.THREE.Box3(), new _libs.THREE.Box3()];
      _this.bookWatcher = new _Object3DWatcher2.default(_this.visual, function () {
        if (_this.state.singlePage) {
          if (_this.state.activeSide) {
            _this.boxs[0].setFromObject(book.rightCover.three);
          } else {
            _this.boxs[0].setFromObject(book.leftCover.three);
          }
        } else {
          _this.boxs[0].setFromObject(book.leftCover.three);
          _this.boxs[1].setFromObject(book.rightCover.three);
          _this.boxs[0].union(_this.boxs[1]);
        }
        return _this.boxs[0];
      });
      _this.bookWatcher.scale = _this.p.scale.default;
      _this.book.setZoom(_this.bookWatcher.scale, _this.state.singlePage);

      _this.Stats = new _stats2.default();
      _this.Stats.domElement.style.position = 'absolute';
      _this.Stats.domElement.style.top = '0px';

      _this.visual.setExtraLighting(_this.state.lighting);
      _this.binds = {
        onScreenModeChanged: _this.onScreenModeChanged.bind(_this),
        stats: _this.Stats.update.bind(_this.Stats),
        onUpdateView: _this.updateView.bind(_this)
      };
      _FullScreen2.default.addEventListener(_this.view.getParentContainer().ownerDocument, _this.binds.onScreenModeChanged);

      _this.cmdSmartPan();

      if (_this.view.templateObject.appLoaded) {
        Promise.resolve().then(_this.view.templateObject.appLoaded);
      }

      _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);
      if (_this.p.loadingAnimation.skin) {
        _this.initLoadingAnimation();
      }

      _this.book.enableLoadingAnimation(_this.p.loadingAnimation.book);
      _this.book.setAutoResolution(_this.p.autoResolution.enabled, _this.p.autoResolution.coefficient);
      return _this;
    }

    BookController.prototype.dispose = function dispose() {
      _FullScreen2.default.removeEventListener(this.view.getParentContainer().ownerDocument, this.binds.onScreenModeChanged);
      delete this.book;
      delete this.view;
      delete this.visual;
    };

    BookController.prototype.initLoadingAnimation = function initLoadingAnimation() {
      var _this2 = this;

      var handler = function handler() {
        var pages = _this2.book.getTopPages();
        var visible = false;
        for (var _iterator = pages, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var n = _ref;

          var state = _this2.book.getPageState(n);
          visible = state === undefined || state === 'loading';
          if (visible) {
            break;
          }
        }
        _this2.view.setState('widLoading', {
          visible: visible
        });
      };
      this.book.addEventListener('beforeAnimation', handler);
      this.book.addEventListener('afterAnimation', handler);
      this.book.addEventListener('loadPage', handler);
      this.book.addEventListener('loadedPage', handler);
    };

    BookController.prototype.enableNavigation = function enableNavigation(enable) {
      this.navigationControls = enable;
    };

    BookController.prototype.setTocCtrl = function setTocCtrl(tocCtrl) {
      this.tocCtrl = tocCtrl;
      this.tocCtrl.onChange = this.updateView.bind(this);
      this.updateView();
    };

    BookController.prototype.setPrinter = function setPrinter(printer) {
      this.printer = printer;
      this.updateView();
    };

    BookController.prototype.setSounds = function setSounds(sounds) {
      this.sounds = sounds;
      sounds.setEnabled(this.actions['cmdSounds'].active);
      this.updateView();
    };

    BookController.prototype.onScreenModeChanged = function onScreenModeChanged(e) {
      this.updateView();
    };

    BookController.prototype.canZoomIn = function canZoomIn() {
      return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.max) > this.p.eps;
    };

    BookController.prototype.canZoomOut = function canZoomOut() {
      return !this.state.smartPan || Math.abs(this.bookWatcher.scale - this.p.scale.min) > this.p.eps;
    };

    BookController.prototype.canDefaultZoom = function canDefaultZoom() {
      return this.state.smartPan;
    };

    BookController.prototype.setBookZoom = function setBookZoom(scale) {
      var _this3 = this;

      setTimeout(function () {
        if (_this3.bookWatcher.scale === scale) {
          _this3.book.setZoom(scale, _this3.state.singlePage);
        }
      }, 1000);
    };

    BookController.prototype.cmdZoomIn = function cmdZoomIn() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = Math.min(this.p.scale.max, this.bookWatcher.scale + this.p.scale.delta);
        this.setBookZoom(this.bookWatcher.scale);
      } else {
        this.orbit.zoomIn(6.6 * this.p.scale.delta / 0.32);
      }
      this.updateView();
    };

    BookController.prototype.cmdZoomOut = function cmdZoomOut() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = Math.max(this.p.scale.min, this.bookWatcher.scale - this.p.scale.delta);
        this.setBookZoom(this.bookWatcher.scale);
      } else {
        this.orbit.zoomOut(6.6 * this.p.scale.delta / 0.32);
      }
      this.updateView();
    };

    BookController.prototype.cmdDefaultZoom = function cmdDefaultZoom() {
      if (this.state.smartPan) {
        this.bookWatcher.scale = this.p.scale.default;
        this.setBookZoom(this.bookWatcher.scale);
        this.updateView();
      }
    };

    BookController.prototype.cmdToc = function cmdToc() {
      if (this.tocCtrl) {
        this.tocCtrl.togle();
      }
    };

    BookController.prototype.cmdFastBackward = function cmdFastBackward() {
      this.startFlip(this.book.flipLeft(5));
    };

    BookController.prototype.cmdBackward = function cmdBackward() {
      var _this4 = this;

      if (this.state.singlePage) {
        this.state.activeSide = (this.getPage() + 1) % 2;
        if (this.state.activeSide) {
          this.state.activeSide = 0;
          this.updateView();
        } else {
          this.startFlip(this.book.flipLeft(1)).then(function (block) {
            if (block) {
              _this4.state.activeSide = 1;
            }
          });
        }
      } else {
        this.startFlip(this.book.flipLeft(1));
      }
    };

    BookController.prototype.cmdForward = function cmdForward() {
      var _this5 = this;

      if (this.state.singlePage) {
        this.state.activeSide = (this.getPage() + 1) % 2;
        if (!this.state.activeSide) {
          this.state.activeSide = 1;
          this.updateView();
        } else {
          this.startFlip(this.book.flipRight(1)).then(function (block) {
            if (block) {
              _this5.state.activeSide = 0;
            }
          });
        }
      } else {
        this.startFlip(this.book.flipRight(1));
      }
    };

    BookController.prototype.cmdFastForward = function cmdFastForward() {
      this.startFlip(this.book.flipRight(5));
    };

    BookController.prototype.cmdSave = function cmdSave() {
      window.open(this.p.downloadURL, '_blank');
    };

    BookController.prototype.cmdPrint = function cmdPrint() {
      this.printer.print();
    };

    BookController.prototype.cmdFullScreen = function cmdFullScreen() {
      if (!_FullScreen2.default.activated()) {
        _FullScreen2.default.request(this.view.getParentContainer());
      } else {
        _FullScreen2.default.cancel();
      }
    };

    BookController.prototype.cmdSmartPan = function cmdSmartPan() {
      this.state.smartPan = !this.state.smartPan;
      if (this.state.smartPan) {
        this.orbit.minAzimuthAngle = 0;
        this.orbit.maxAzimuthAngle = 0;
        this.orbit.minPolarAngle = 0;
        this.orbit.maxPolarAngle = Math.PI / 4;
        this.bookWatcher.enabled = true;
      } else {
        this.orbit.minAzimuthAngle = -Infinity;
        this.orbit.maxAzimuthAngle = Infinity;
        this.orbit.minPolarAngle = 0;
        this.orbit.maxPolarAngle = Math.PI;
        this.bookWatcher.enabled = false;
      }
      this.updateView();
    };

    BookController.prototype.cmdSinglePage = function cmdSinglePage() {
      this.state.singlePage = !this.state.singlePage;
      this.setBookZoom(this.bookWatcher.scale);
      this.updateView();
    };

    BookController.prototype.cmdSounds = function cmdSounds() {
      if (this.sounds) {
        this.sounds.togle();
      }
      this.updateView();
    };

    BookController.prototype.cmdStats = function cmdStats() {
      this.state.stats = !this.state.stats;
      if (this.state.stats) {
        (0, _libs.$)(this.view.getContainer()).append(this.Stats.domElement);
        this.visual.addRenderCallback(this.binds.stats);
      } else {
        (0, _libs.$)(this.view.getContainer()).find(this.Stats.domElement).remove();
        this.visual.removeRenderCallback(this.binds.stats);
      }
      this.updateView();
    };

    BookController.prototype.cmdLightingUp = function cmdLightingUp() {
      this.state.lighting = Math.min(this.state.lighting + this.p.lighting.delta, this.p.lighting.max);
      this.visual.setExtraLighting(this.state.lighting);
      this.updateView();
    };

    BookController.prototype.cmdLightingDown = function cmdLightingDown() {
      this.state.lighting = Math.max(this.state.lighting - this.p.lighting.delta, this.p.lighting.min);
      this.visual.setExtraLighting(this.state.lighting);
      this.updateView();
    };

    BookController.prototype.goToPage = function goToPage(page) {
      var _this6 = this;

      if (this.p.rtl) {
        page = this.book.getPages() - 1 - page;
      }
      var pageNum = Math.max(Math.min(page, this.book.getPages() - 1), 0);
      this.state.activeSide = (pageNum + 1) % 2;
      var target = Math.max(Math.min(page - 1 + page % 2, this.book.getPages() - 1), 0),
          current = this.book.getPage(),
          flips = [],
          covs = 0;;
      if (target != current) {
        if (current === 0) {
          flips.push(1);
          current += 1;
          ++covs;
        } else if (current === this.book.getPages() - 1) {
          flips.push(-1);
          current -= 2;
          ++covs;
        }
        var cv = 0;
        if (target === 0) {
          cv = -1;
          target += 1;
          ++covs;
        } else if (target === this.book.getPages() - 1) {
          cv = 1;
          target -= 2;
          ++covs;
        }
        if (target - current) {
          flips.push(Math.ceil((target - current) / 2));
        }
        if (cv) {
          flips.push(cv);
        }
      }

      var setClb = function setClb(fl, time, clb) {
        setTimeout(function () {
          if (fl < 0) {
            _this6.startFlip(_this6.book.flipLeft(-fl, clb));
          } else {
            _this6.startFlip(_this6.book.flipRight(fl, clb));
          }
        }, time);
      };

      if (covs === 2) {
        setClb(flips[0], 0, function (block, progress, state) {
          if (state == 'finish' && progress == 1) {
            setClb(flips[flips.length - 1], 0);
          }
        });
        setClb(flips[1], 500);
      } else {
        var time = 0;
        for (var _iterator2 = flips, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var fl = _ref2;

          setClb(fl, time);
          time += 250;
        }
      }
    };

    BookController.prototype.startFlip = function startFlip(flipRes) {
      var _this7 = this;

      return flipRes ? flipRes.then(function (block) {
        if (block) {
          _this7.dispatchAsync({
            type: 'startFlip'
          });
        }
        return block;
      }) : Promise.resolve(undefined);
    };

    BookController.prototype.endFlip = function endFlip(block) {
      this.dispatchAsync({
        type: 'endFlip'
      });
      return block;
    };

    BookController.prototype.getPage = function getPage() {
      var page = this.book.getPage();
      return page ? Math.min(this.book.getPage() + this.state.activeSide, this.book.getPages() - 1) : 0;
    };

    BookController.prototype.getPageForGUI = function getPageForGUI() {
      var n = (this.state.singlePage ? this.getPage() : this.book.getPage()) + 1;
      if (this.p.rtl) {
        n = this.book.getPages() - n + 1;
      }
      return n;
    };

    BookController.prototype.inpPage = function inpPage(e, data) {
      this.goToPage(data - 1);
    };

    BookController.prototype.updateViewIfState = function updateViewIfState(block, progress, state, type) {
      if (state === 'init' || state === 'finish') {
        setTimeout(this.updateView.bind(this), 100);
      }
      if (state === 'finish') {
        this.endFlip(block);
      }
    };

    BookController.prototype.updateViewState = function updateViewState() {
      this.viewState = {
        'cmdZoomIn': {
          enable: this.canZoomIn(),
          visible: this.actions['cmdZoomIn'].enabled,
          active: false
        },
        'cmdZoomOut': {
          enable: this.canZoomOut(),
          visible: this.actions['cmdZoomOut'].enabled,
          active: false
        },
        'cmdDefaultZoom': {
          enable: this.canDefaultZoom(),
          visible: this.actions['cmdDefaultZoom'].enabled,
          active: this.canDefaultZoom() && Math.abs(this.bookWatcher.scale - this.p.scale.default) < this.p.eps
        },
        'cmdToc': {
          enable: !!this.tocCtrl,
          visible: this.actions['cmdToc'].enabled && this.tocCtrl,
          active: this.tocCtrl && this.tocCtrl.visible
        },
        'inpPages': {
          visible: true,
          value: this.book.getPages()
        },
        'inpPage': {
          visible: true,
          enable: !this.book.isProcessing() && this.navigationControls,
          value: this.getPageForGUI()
        },
        'cmdSave': {
          enable: true,
          visible: this.actions['cmdSave'].enabled && !!this.p.downloadURL,
          active: false
        },
        'cmdPrint': {
          enable: true,
          visible: this.actions['cmdPrint'].enabled && !!this.printer,
          active: false
        },
        'cmdFullScreen': {
          enable: _FullScreen2.default.available(),
          visible: this.actions['cmdFullScreen'].enabled,
          active: _FullScreen2.default.available() && _FullScreen2.default.activated()
        },
        'widSettings': {
          enable: true,
          visible: this.actions['widSettings'].enabled,
          active: false
        },
        'cmdSmartPan': {
          enable: true,
          visible: this.actions['cmdSmartPan'].enabled,
          active: this.state.smartPan
        },
        'cmdSinglePage': {
          enable: true,
          visible: this.actions['cmdSinglePage'].enabled,
          active: this.state.singlePage
        },
        'cmdSounds': {
          enable: true,
          visible: this.actions['cmdSounds'].enabled && !!this.sounds,
          active: !!this.sounds && this.sounds.enabled
        },
        'cmdStats': {
          enable: true,
          visible: this.actions['cmdStats'].enabled,
          active: this.state.stats
        },
        'cmdLightingUp': {
          enable: Math.abs(this.state.lighting - this.p.lighting.max) > this.p.eps,
          visible: this.actions['cmdLightingUp'].enabled,
          active: false
        },
        'cmdLightingDown': {
          enable: Math.abs(this.state.lighting - this.p.lighting.min) > this.p.eps,
          visible: this.actions['cmdLightingDown'].enabled,
          active: false
        }
      };

      var left = this.book.getLeftFlipping(),
          right = this.book.getRightFlipping();
      var flippersEnable = {
        cmdFastBackward: !!left && this.navigationControls,
        cmdBackward: !!left && this.navigationControls,
        cmdForward: !!right && this.navigationControls,
        cmdFastForward: !!right && this.navigationControls
      };
      for (var _iterator3 = Object.keys(flippersEnable), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var name = _ref3;

        this.viewState[name] = {
          enable: flippersEnable[name],
          visible: this.actions[name].enabled,
          active: false
        };
      };
    };

    BookController.prototype.updateView = function updateView() {
      if (this.view) {
        this.updateViewState();
        for (var _iterator4 = Object.keys(this.viewState), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var name = _ref4;

          this.view.setState(name, this.viewState[name]);
        }
      }
    };

    BookController.prototype.getActions = function getActions() {
      var _this8 = this;

      var isSwipping = function isSwipping(name) {
        return _this8.actions.touchCmdSwipe.enabled && _this8.actions.touchCmdSwipe.code === _this8.actions[name].code && _this8.state.smartPan && _this8.bookWatcher.scale <= 1;
      },
          cmds = {};

      var _loop = function _loop(name) {
        if (name.indexOf('cmd') === 0) {
          cmds[name] = {
            activate: function activate() {
              if (_this8.viewState && _this8.viewState[name].enable) {
                _this8[name].apply(_this8, arguments);
              }
            }
          };
        }
      };

      for (var name in this) {
        _loop(name);
      }

      return _extends({}, cmds, {
        cmdPanLeft: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: -_this8.p.pan.speed,
              dy: 0
            });
          }
        },
        cmdPanRight: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: _this8.p.pan.speed,
              dy: 0
            });
          }
        },
        cmdPanUp: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: 0,
              dy: -_this8.p.pan.speed
            });
          }
        },
        cmdPanDown: {
          activate: function activate(e) {
            return _this8.orbit.actions.pan(e, {
              state: 'move',
              dx: 0,
              dy: _this8.p.pan.speed
            });
          }
        },
        mouseCmdRotate: {
          activate: this.orbit.actions.rotate
        },
        mouseCmdDragZoom: {
          activate: function activate(e, data) {
            if (data.dy > 0) {
              _this8.cmdZoomOut();
            } else if (data.dy < 0) {
              _this8.cmdZoomIn();
            }
          }
        },
        mouseCmdPan: {
          activate: this.orbit.actions.pan
        },
        mouseCmdWheelZoom: {
          activate: function activate(e) {
            e.preventDefault();
            if (e.deltaY < 0) {
              _this8.cmdZoomOut();
            } else if (e.deltaY > 0) {
              _this8.cmdZoomIn();
            }
          }
        },
        touchCmdRotate: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdRotate')) {
              e.preventDefault();
              _this8.orbit.actions.rotate(e, data);
            }
          }
        },
        touchCmdZoom: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdZoom')) {
              e.preventDefault();
              if (data.dy > 0) {
                _this8.cmdZoomOut();
              } else if (data.dy < 0) {
                _this8.cmdZoomIn();
              }
            }
          }
        },
        touchCmdPan: {
          activate: function activate(e, data) {
            if (!isSwipping('touchCmdPan')) {
              e.preventDefault();
              _this8.orbit.actions.pan(e, data);
            }
          }
        },
        touchCmdSwipe: {
          activate: function activate(e, data) {
            if (isSwipping('touchCmdSwipe')) {
              e.preventDefault();
              if (data.state === 'start') {
                var touch = (e.touches || e.originalEvent.touches)[_this8.actions.touchCmdSwipe.code - 1];
                _this8.swipeData = {
                  handled: false,
                  x0: touch.pageX,
                  y0: touch.pageY,
                  x: touch.pageX,
                  y: touch.pageY
                };
              } else if (data.state === 'move') {
                if (!_this8.swipeData.handled) {
                  _this8.swipeData = _extends({}, _this8.swipeData, {
                    x: _this8.swipeData.x + data.dx,
                    y: _this8.swipeData.y + data.dy
                  });
                  if (Math.abs(_this8.swipeData.x0 - _this8.swipeData.x) > 100) {
                    _this8.swipeData.x0 > _this8.swipeData.x ? _this8.cmdForward() : _this8.cmdBackward();
                    _this8.swipeData.handled = true;
                  }
                }
              } else {
                delete _this8.swipeData;
              }
            }
          }
        },
        widSettings: {
          activate: function activate() {
            return undefined;
          }
        }
      });
    };

    BookController.prototype.bindActions = function bindActions() {
      this.eToA = new _EventsToActions2.default((0, _libs.$)(this.visual.element));
      this.eToA.addAction(function (e) {
        return e.preventDefault();
      }, 'contextmenu', _EventsToActions2.default.mouseButtons.Right, 0);

      this.actions = this.getActions();
      for (var _iterator5 = Object.keys(this.actions), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var name = _ref5;

        var action = _extends({}, this.actions[name], this.p.actions[name]);
        this.actions[name] = action;
        if (action.enabled) {
          var flags = action.flags || 0;
          if (action.type) {
            this.eToA.addAction(action.activate, action.type, action.code, flags);
          } else if (action.code !== undefined) {
            this.eToA.addAction(action.activate, 'keydown', action.code, flags);
          }
        }
      }
    };

    BookController.prepareProps = function prepareProps(props) {
      return BookController.calcProps(BookController.mergeProps((0, _bookController.props)(), props));
    };

    BookController.setActions = function setActions(props, actions) {
      for (var _iterator6 = Object.keys(actions || {}), _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i6 >= _iterator6.length) break;
          _ref6 = _iterator6[_i6++];
        } else {
          _i6 = _iterator6.next();
          if (_i6.done) break;
          _ref6 = _i6.value;
        }

        var name = _ref6;

        props.actions[name] = _extends({}, props.actions[name], actions[name]);
      }
    };

    BookController.mergeProps = function mergeProps(first, second) {
      second = second || {};
      function merge(first, second) {
        second = second || {};
        var props = _extends({}, first, second);
        for (var _iterator7 = Object.keys(first), _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
          var _ref7;

          if (_isArray7) {
            if (_i7 >= _iterator7.length) break;
            _ref7 = _iterator7[_i7++];
          } else {
            _i7 = _iterator7.next();
            if (_i7.done) break;
            _ref7 = _i7.value;
          }

          var name = _ref7;

          if (_typeof(first[name]) === 'object') {
            props[name] = merge(first[name], second[name]);
          }
        }
        return props;
      }
      var props = merge(first, second);
      BookController.setActions(props, first.actions);
      BookController.setActions(props, second.actions);
      return props;
    };

    BookController.calcProps = function calcProps(props) {
      props.scale.delta = (props.scale.max - props.scale.min) / props.scale.levels;
      props.lighting.delta = (props.lighting.max - props.lighting.min) / props.lighting.levels;
      return props;
    };

    return BookController;
  }(_Controller3.default);

  exports.default = BookController;

  /***/
},
/* 28 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var BookPrinter = function () {
    function BookPrinter(context, book, styleSheet) {
      _classCallCheck(this, BookPrinter);

      this.book = book;
      this.styleSheet = styleSheet;
      this.wnd = context.wnd;
      this.doc = context.doc;
      this.pageCallback = book.getPageCallback();
      var test = this.pageCallback(0);
      this.type = test.type;
      if (this.type === 'pdf') {
        this.pdfSrc = test.src.src;
      }
    }

    BookPrinter.prototype.cancel = function cancel() {
      this.canceled = true;
    };

    BookPrinter.prototype.dispose = function dispose() {
      if (this.frame) {
        this.frame.remove();
        delete this.frame;
      }
    };

    BookPrinter.prototype.print = function print() {
      var _this = this;

      delete this.canceled;
      if (this.type === 'pdf') {
        (function () {
          var printWnd = void 0,
              callManually = false;
          if (_this.useIFrame()) {
            callManually = !!_this.frame;
            if (!_this.frame) {
              _this.frame = (0, _libs.$)('<iframe src="' + _this.pdfSrc + '" style="display: none;"></iframe>').appendTo(_this.doc.body);
            }
            printWnd = _this.frame[0].contentWindow;
          } else {
            printWnd = _this.wnd.open(_this.pdfSrc);
          }
          if (callManually) {
            printWnd.print();
          } else {
            (0, _libs.$)(printWnd).on('load', function () {
              try {
                printWnd.print();
              } catch (e) {
                console.error(e);
              }
            });
          }
        })();
      } else {
        this.renderContent().then(function (content) {
          var printWnd = _this.wnd.open(),
              printDoc = printWnd.document,
              html = '\n            <!DOCTYPE html>\n            <html>\n              <head>\n                <meta charset="utf-8">\n                <title>3D FlipBook - Printing</title>\n                ' + content.head + '\n                <script type="text/javascript">\n                  function printDocument() {\n                    window.print();\n                    window.close();\n                  }\n                  function init() {\n                    setTimeout(printDocument, 100);\n                  }\n                </script>\n              </head>\n              <body onload="init()">\n                ' + content.body + '\n              </body>\n            </html>\n          ';
          printDoc.open();
          printDoc.write(html);
          printDoc.close();
        }).catch(function (e) {
          return console.warn('3D FlipBook - Printing was canceled');
        });
      }
    };

    BookPrinter.prototype.progress = function progress(v) {
      if (this.canceled) {
        throw 'Cancel Printing';
      }
      if (this.onProgress) {
        this.onProgress(Math.floor(v * 100));
      }
    };

    BookPrinter.prototype.renderContent = function renderContent() {
      var _this2 = this;

      var pages = this.book.getPages(),
          head = new Set(),
          body = [];
      var done = Promise.resolve();

      var _loop = function _loop(page) {
        var info = _this2.pageCallback(page);
        if (info.type === 'image') {
          done = done.then(function () {
            _this2.progress(page / pages);
            return _this2.renderImage(head, body, info.src);
          });
        } else if (info.type === 'html') {
          done = done.then(function () {
            _this2.progress(page / pages);
            return _this2.renderHtml(head, body, info.src);
          });
        }
      };

      for (var page = 0; page < pages; ++page) {
        _loop(page);
      }
      return done.then(function () {
        _this2.progress(1);
        return { head: _this2.renderHead(head), body: body.join('\n') };
      });
    };

    BookPrinter.wrap = function wrap(content) {
      return '<div class="fb3d-printer-page">' + content + '</div>';
    };

    BookPrinter.prototype.renderImage = function renderImage(head, body, src) {
      body.push(BookPrinter.wrap('<img src="' + src + '" />'));
    };

    BookPrinter.prototype.renderHtml = function renderHtml(head, body, src) {
      return new Promise(function (resolve, reject) {
        _libs.$.get(src, function (html) {
          var links = html.match(/<link.*?>/ig) || [];
          for (var _iterator = links, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var link = _ref;

            if (link.match(/stylesheet/i)) {
              var href = link.match(/href\s*=\s*['"](.*)['"]/i);
              if (href) {
                head.add(href[1]);
              }
            }
          }
          var content = html.match(/<body.*?>([\S\s]*)<\/body>/i);
          if (content) {
            body.push(BookPrinter.wrap(content[1]));
          }
          resolve();
        }).fail(function (e) {
          console.error(e.responseText);
          reject();
        });
      });
    };

    BookPrinter.prototype.renderHead = function renderHead(head) {
      var content = [];
      head.forEach(function (k) {
        return content.push('<link rel="stylesheet" href="' + k + '">');
      });
      content.push(this.styleSheet ? '<link rel="stylesheet" href="' + this.styleSheet + '">' : BookPrinter.defaultStyleSheet());
      return content.join('\n');
    };

    BookPrinter.prototype.useIFrame = function useIFrame() {
      var isChromium = this.wnd.chrome,
          winNav = this.wnd.navigator,
          vendorName = winNav.vendor,
          isIEedge = winNav.userAgent.indexOf("Edge") > -1,
          isIOSChrome = winNav.userAgent.match("CriOS");
      var use = void 0;
      if (isIOSChrome) {
        use = true;
      } else if (isChromium && vendorName === 'Google Inc.' && !isIEedge) {
        use = true;
      } else {
        use = false;
      }
      return use;
    };

    BookPrinter.defaultStyleSheet = function defaultStyleSheet() {
      return '\n      <style type="text/css">\n        body {\n          margin: 0;\n          padding: 0;\n        }\n        .fb3d-printer-page {\n          page-break-after: always;\n        }\n      </style>\n    ';
    };

    return BookPrinter;
  }();

  exports.default = BookPrinter;

  /***/
},
/* 29 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  var _View2 = __webpack_require__(65);

  var _View3 = _interopRequireDefault(_View2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BookView = function (_View) {
    _inherits(BookView, _View);

    function BookView(container, onLoad, template, handler) {
      _classCallCheck(this, BookView);

      return _possibleConstructorReturn(this, _View.call(this, container, onLoad, template, handler));
    }

    BookView.prototype.initView = function initView() {
      this.view = this.container.find('.view');
      this.bookmarksView = this.container.find('.widBookmarks');
      this.thumbnailsView = this.container.find('.widThumbnails');
      this.searchView = this.container.find('.widSearch');
    };

    BookView.prototype.getHandlers = function getHandlers(id) {
      var _this2 = this;

      var handlers = void 0;
      if (id === 'inpPage') {
        handlers = [{
          inpPage: function inpPage(e, data) {
            return _this2.callLater(_View.prototype.getHandlers.call(_this2, id), id, e, data, BookView.PAGE_HANDLER_DELAY);
          }
        }];
      } else {
        handlers = _View.prototype.getHandlers.call(this, id);
      }
      return handlers;
    };

    BookView.prototype.onItemStateChanged = function onItemStateChanged(id, state) {
      if (id === 'cmdFullScreen') {
        if (state.active) {
          this.parentContainer.addClass('fullscreen');
        } else {
          this.parentContainer.removeClass('fullscreen');
        }
      }
    };

    BookView.prototype.getView = function getView() {
      return this.view;
    };

    BookView.prototype.getBookmarksView = function getBookmarksView() {
      return this.bookmarksView;
    };

    BookView.prototype.getThumbnailsView = function getThumbnailsView() {
      return this.thumbnailsView;
    };

    BookView.prototype.getSearchView = function getSearchView() {
      return this.searchView;
    };

    BookView.prototype.getForms = function getForms() {
      return [];
    };

    BookView.prototype.getLinks = function getLinks() {
      return ['cmdZoomIn', 'cmdZoomOut', 'cmdDefaultZoom', 'cmdToc', 'cmdFastBackward', 'cmdBackward', 'cmdForward', 'cmdFastForward', 'cmdSave', 'cmdPrint', 'cmdFullScreen', 'cmdSmartPan', 'cmdSinglePage', 'cmdSounds', 'cmdStats', 'cmdLightingUp', 'cmdLightingDown', 'cmdCloseToc', 'cmdBookmarks', 'cmdSearch', 'cmdThumbnails'];
    };

    BookView.prototype.getWidgets = function getWidgets() {
      return ['widLoadingProgress', 'widFloatWnd', 'widTocMenu', 'widBookmarks', 'widThumbnails', 'widSearch', 'widSettings', 'widLoading'];
    };

    BookView.prototype.getInputs = function getInputs() {
      return ['inpPage', 'inpPages'];
    };

    BookView.prototype.getTexts = function getTexts() {
      return ['txtLoadingProgress'];
    };

    BookView.prototype.getTemplate = function getTemplate() {
      return {
        html: 'templates/default-book-view.html',
        styles: ['css/black-book-view.css'],
        links: [{
          rel: 'stylesheet',
          href: 'css/font-awesome.min.css'
        }],
        script: 'js/default-book-view.js'
      };
    };

    return BookView;
  }(_View3.default);

  BookView.PAGE_HANDLER_DELAY = 1000;
  exports.default = BookView;

  /***/
},
/* 30 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BookPropsBuilder2 = __webpack_require__(9);

  var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ClbBookPropsBuilder = function (_BookPropsBuilder) {
    _inherits(ClbBookPropsBuilder, _BookPropsBuilder);

    function ClbBookPropsBuilder(context, pageCallback, pages, onReady) {
      _classCallCheck(this, ClbBookPropsBuilder);

      var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));

      _this.calcSheets(pages);
      _this.pageCallback = pageCallback;
      _this.binds = {
        pageCallback: pageCallback.bind(_this)
      };
      _this.imageFactory = new _ImageFactory2.default(context);

      if (pages > 0) {
        (function () {
          var test = _this.imageFactory.build(pageCallback(0), 0, _this.defaults.sheet.widthTexels, _this.defaults.sheet.heightTexels, _this.defaults.sheet.color);
          test.onLoad = function () {
            _this.calcProps(test.width, test.height);
            test.dispose();
            _this.ready();
          };
        })();
      } else {
        _this.props = _this.defaults;
        _this.ready();
      }
      return _this;
    }

    return ClbBookPropsBuilder;
  }(_BookPropsBuilder3.default);

  exports.default = ClbBookPropsBuilder;

  /***/
},
/* 31 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _SheetBlock2 = __webpack_require__(10);

  var _SheetBlock3 = _interopRequireDefault(_SheetBlock2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Cover = function (_SheetBlock) {
    _inherits(Cover, _SheetBlock);

    function Cover(visual, p, angle, state) {
      _classCallCheck(this, Cover);

      return _possibleConstructorReturn(this, _SheetBlock.call(this, visual, p, 0, 1, angle, state));
    }

    Cover.prototype.getProps = function getProps() {
      return _extends({}, this.p.cover, {
        sheets: 1
      });
    };

    Cover.prototype.loadPoints = function loadPoints() {
      var openedInterpolationIndeces = [[2, 3, 4], [2, 3, 4, 5, 6]],
          closedInterpolationIndeces = [[0, 1, 2], [0, 1, 2]],
          interpolationPoints = [{
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0, 0.1370, 0.3881, 0.5342, 0.6758], [0, 0, 0, 0, 0]],
        y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0, 0.2466, 0.4795, 0.5708, 0.6758], [0, 0.2877, 0.6347, 0.8174, 1.0000]]
      }, {
        x: [[0, 0.2877, 0.6347, 0.8174, 1.0000], [0, 0.2831, 0.6256, 0.8082, 0.9909], [0, 0.2603, 0.5936, 0.7763, 0.9589], [0.000, 0.233, 0.563, 0.746, 0.927], [0.000, 0.144, 0.433, 0.613, 0.796], [0.000, 0.070, 0.288, 0.455, 0.626], [0, 0, 0, 0, 0]],
        y: [[0, 0, 0, 0, 0], [0, 0.02, 0.005, -0.001, -0.0025], [0, 0.04, 0.01, -0.002, -0.005], [0.000, 0.168, 0.269, 0.270, 0.255], [0.000, 0.245, 0.435, 0.458, 0.460], [0.000, 0.278, 0.544, 0.614, 0.673], [0, 0.2877, 0.6347, 0.8174, 1.0000]]
      }];
      return {
        interpolationPoints: interpolationPoints,
        openedInterpolationIndeces: openedInterpolationIndeces,
        closedInterpolationIndeces: closedInterpolationIndeces
      };
    };

    return Cover;
  }(_SheetBlock3.default);

  exports.default = Cover;

  /***/
},
/* 32 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _SheetCssLayer = __webpack_require__(37);

  var _SheetCssLayer2 = _interopRequireDefault(_SheetCssLayer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var CssLayersManager = function () {
    function CssLayersManager(book) {
      _classCallCheck(this, CssLayersManager);

      this.book = book;
      this.props = book.p.cssLayerProps;
      this.visual = book.visual;
      this.pageManager = book.pageManager;
      this.wrappers = {};
    }

    CssLayersManager.prototype.getActives = function getActives() {
      var page = this.book.getPage(),
          pages = this.book.getPages();
      return page === 0 || page === pages - 1 ? [page] : [page, page + 1];
    };

    CssLayersManager.prototype.dispose = function dispose() {
      for (var _iterator = Object.values(this.wrappers), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var w = _ref;

        w.layers.forEach(function (l) {
          return l.dispose();
        });
      }
      delete this.wrappers;
    };

    CssLayersManager.prototype.show = function show() {
      var _this = this;

      this.hidden = false;

      var _loop = function _loop() {
        if (_isArray2) {
          if (_i2 >= _iterator2.length) return 'break';
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) return 'break';
          _ref2 = _i2.value;
        }

        var n = _ref2;

        var w = _this.wrappers[n];
        if (w) {
          if (w.state === 'ready' && w.layers.length) {
            (function () {
              var block = _this.book.getBlockByPage(n);
              w.layers.forEach(function (l) {
                if (l.isHidden()) {
                  l.update(block);
                  l.show();
                }
              });
            })();
          }
        } else {
          (function () {
            var w = _this.wrappers[n] = {
              state: 'loading',
              layers: []
            };
            Promise.resolve().then(function () {
              _this.pageManager.getLayers(n, function (layers) {
                if (layers.length && _this.wrappers) {
                  var block = _this.book.getBlockByPage(n);
                  for (var _iterator3 = layers, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
                    var _ref3;

                    if (_isArray3) {
                      if (_i3 >= _iterator3.length) break;
                      _ref3 = _iterator3[_i3++];
                    } else {
                      _i3 = _iterator3.next();
                      if (_i3.done) break;
                      _ref3 = _i3.value;
                    }

                    var l = _ref3;

                    var sl = new _SheetCssLayer2.default(_this.visual, block, _this.props);
                    w.layers.push(sl);
                    sl.set(l.css, l.html, l.js);
                  }
                  setTimeout(function () {
                    if (!_this.hidden && ~_this.getActives().indexOf(n)) {
                      w.layers.forEach(function (l) {
                        return l.show();
                      });
                    }
                  }, 10);
                }
                w.state = 'ready';
              });
            });
          })();
        }
      };

      for (var _iterator2 = this.getActives(), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
    };

    CssLayersManager.prototype.hide = function hide() {
      this.hidden = true;
      var wait = [];
      for (var _iterator4 = Object.values(this.wrappers), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var _w = _ref4;

        _w.layers.forEach(function (l) {
          return wait.push(l.hide());
        });
      }
      return Promise.all(wait);
    };

    return CssLayersManager;
  }();

  exports.default = CssLayersManager;

  /***/
},
/* 33 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(1);

  var _Cache = __webpack_require__(14);

  var _Cache2 = _interopRequireDefault(_Cache);

  var _LoadingAnimation = __webpack_require__(52);

  var _LoadingAnimation2 = _interopRequireDefault(_LoadingAnimation);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _TextureAnimator = __webpack_require__(60);

  var _TextureAnimator2 = _interopRequireDefault(_TextureAnimator);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var PageManager = function () {
    function PageManager(visual, book, p) {
      _classCallCheck(this, PageManager);

      this.visual = visual;
      this.book = book;
      this.pageQuery = '';
      this.p = p;
      this.pageCache = new _Cache2.default(p.cachedPages);
      this.resourcesCache = new _Cache2.default();
      this.canvas = (0, _libs.$)('<canvas>')[0];
      this.imageFactory = new _ImageFactory2.default(_extends({}, visual, { dispatchEvent: book.dispatchEvent.bind(book), renderCanvas: this.canvas, renderCanvasCtx: this.canvas.getContext('2d') }), this.resourcesCache);

      this.loadings = [];
      this.renderQueue = [];
      this.pageRequests = [];
      this.predictedRequests = [];

      this.tmpMaterial = new _libs.THREE.MeshBasicMaterial();
      visual.addObject(new _libs.THREE.Mesh(new _libs.THREE.PlaneGeometry(0, 0), this.tmpMaterial));

      this.loadingAnimation = true;
      this.loading = {};
      this.loading[p.cover.color] = this.createLoadingTexture(p.cover);
      if (p.page.color !== p.cover.color) {
        this.loading[p.page.color] = this.createLoadingTexture(p.page);
      }

      this.turnOnEvents();

      visual.addRenderCallback(this.update.bind(this));

      setTimeout(this.updateRenderQueue.bind(this), 250);
    }

    PageManager.prototype.createLoadingTexture = function createLoadingTexture(p) {
      var spriteTiles = 6,
          scale = Math.sqrt(4.5 * 210 * 4.5 * 297 / (p.widthTexels * p.heightTexels)),
          animation = new _LoadingAnimation2.default(scale * p.widthTexels, scale * p.heightTexels, p.color),
          animator = new _TextureAnimator2.default(animation.createSprite(spriteTiles), spriteTiles, 1, spriteTiles, 0.2);
      animation.dispose();
      return animator;
    };

    PageManager.prototype.dispose = function dispose() {
      this.turnOffEvents();
      for (var _iterator = Object.keys(this.loading), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var color = _ref;

        this.loading[color].dispose();
      }
      delete this.loading;
      this.resourcesCache.dispose();
      this.pageCache.dispose();
      this.canvas.height = this.canvas.width = 0;
      delete this.canvas;
    };

    PageManager.prototype.isCover = function isCover(n) {
      return n < 2 || n >= 2 * (this.p.sheets + 1);
    };

    PageManager.prototype.isMobile = function isMobile() {
      return (this.visual.wnd.devicePixelRatio || 1) > 1;
    };

    PageManager.prototype.getPageState = function getPageState(n) {
      var object = this.pageCache.get(n);
      return object ? object.state : undefined;
    };

    PageManager.prototype.enableLoadingAnimation = function enableLoadingAnimation(enable) {
      this.loadingAnimation = enable;
      for (var _iterator2 = this.loadings, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var o = _ref2;

        this.setupMaterial(o);
      }
    };

    PageManager.prototype.update = function update(dt) {
      if (this.loadingAnimation) {
        var loading = {};
        for (var _iterator3 = this.loadings, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var o = _ref3;

          if (o.isActive()) {
            loading[o.color] = true;;
          }
        }
        for (var _iterator4 = Object.keys(loading), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var color = _ref4;

          this.loading[color].update(dt);
        }
      }
    };

    PageManager.prototype.removeFromLoadings = function removeFromLoadings(o) {
      var i = this.loadings.indexOf(o);
      if (~i) {
        this.loadings.splice(i, 1);
      }
    };

    PageManager.prototype.removeFromRenderQueue = function removeFromRenderQueue(o) {
      var i = this.renderQueue.indexOf(o);
      if (~i) {
        this.renderQueue.splice(i, 1);
      }
    };

    PageManager.prototype.refreshPageQuery = function refreshPageQuery(n) {
      var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

      this.pageQuery = query;
      var object = this.pageCache.get(n);
      if (object && object.wrapper && object.wrapper.setQuery) {
        if (!this.pageCache.remove(n)) {
          object.wrapper.setQuery(query);
          this.pushInRenderQueue(object);
        }
      }
    };

    PageManager.prototype.refreshZoom = function refreshZoom() {
      var _this = this;

      if (this.p.autoResolution.enable) {
        (function () {
          var es = [];
          _this.pageCache.forEach(function (e) {
            es.push(e);
          });
          es.forEach(function (e) {
            var object = e[1];
            if (object && object.wrapper) {
              if (!_this.pageCache.remove(e[0])) {
                _this.pushInRenderQueue(object);
              }
            }
          });
        })();
      }
    };

    PageManager.prototype.getLayers = function getLayers(n, clb) {
      var _this2 = this;

      if (this.p.cssLayersLoader) {
        this.p.cssLayersLoader(n, function () {
          for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }

          var object = _this2.pageCache.get(n);
          if (object) {
            if (object.state !== 'active') {
              object.pendings.push({ clb: clb, args: args });
            } else {
              clb.apply(undefined, args);
            }
          }
        });
      } else {
        clb([]);
      }
    };

    PageManager.prototype.resolvePendings = function resolvePendings(pendings) {
      for (var _iterator5 = pendings, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var p = _ref5;

        try {
          p.clb.apply(p, p.args);
        } catch (e) {
          console.error(e);
        }
      }
      pendings.splice(0, pendings.length);
    };

    PageManager.prototype.rtlPageN = function rtlPageN(n) {
      return this.p.rtl ? 2 * (this.p.sheets + 2) - 1 - n : n;
    };

    PageManager.prototype.load = function load(material, n) {
      var _this3 = this;

      var pi = this.p.pageCallback(this.rtlPageN(n)),
          p = this.isCover(n) ? this.p.cover : this.p.page;
      var o = {
        n: n,
        texture: new _libs.THREE.Texture(),
        wrapper: null,
        state: 'loading',
        locked: function locked(n) {
          return o.state === 'loading' || o.state === 'rendering' || _this3.book.isActivePage(n);
        },
        color: p.color,
        isActive: function isActive() {
          return _this3.book.isActivePage(n);
        },
        isTop: function isTop() {
          return ~_this3.book.getTopPages().indexOf(n);
        },
        dispose: function dispose() {
          _this3.removeFromLoadings(o);
          _this3.removeFromRenderQueue(o);
          if (o.wrapper && o.wrapper.dispose) {
            o.wrapper.dispose();
          }
          o.texture.dispose();
          delete o.texture;
          delete o.wrapper;
        },
        pendings: []
      };
      o.texture.minFilter = _libs.THREE.LinearFilter;
      this.loadings.push(o);
      this.setMaterial(o, material);

      Promise.resolve().then(function () {
        if (o.texture) {
          o.widthTexels = pi.widthTexels || p.widthTexels;
          o.heightTexels = pi.heightTexels || p.heightTexels;
          var res = _this3.calcResolution(o);
          o.wrapper = _this3.imageFactory.build(pi, pi.number === undefined ? n : pi.number, res.width, res.height, p.color, _this3.p.injector);
          if (o.wrapper.setQuery) {
            o.wrapper.setQuery(_this3.pageQuery);
          }
          o.simulate = pi.interactive ? (o.wrapper.simulate || function () {
            return undefined;
          }).bind(o.wrapper) : undefined;
          o.wrapper.onLoad = function () {
            _this3.pushInRenderQueue(o);
            _this3.book.dispatchEvent({
              type: 'loadedPage',
              page: n
            });
          };
          o.wrapper.onChange = function (image) {
            if (o.texture) {
              _this3.removeFromLoadings(o);
              if (o.material) {
                o.material.map = o.texture;
                o.material.color = new _libs.THREE.Color(0xFFFFFF);
                o.material.needsUpdate = true;
              }
              o.texture.image = image;
              o.texture.needsUpdate = true;
              o.texture.onUpdate = function () {
                if (o.state !== 'queuedForRender') {
                  o.state = 'active';
                  _this3.resolvePendings(o.pendings);
                }
                delete _this3.rendering;
                //this.updateRenderQueue();
              };
              _this3.tmpMaterial.map = o.texture;
              _this3.tmpMaterial.needsUpdate = true;
            }
          };
        }
      });
      this.book.dispatchEvent({
        type: 'loadPage',
        page: n
      });
      return this.pageCache.put(n, o);
    };

    PageManager.prototype.isSinglePage = function isSinglePage(o) {
      return this.p.singlePage || !o.n || o.n === this.book.getPages() - 1;
    };

    PageManager.prototype.calcResolution = function calcResolution(o) {
      var res = void 0;
      if (this.p.autoResolution.enable) {
        var k = Math.min((this.isSinglePage(o) ? 1 : 0.5) * this.visual.width() / o.widthTexels, this.visual.height() / o.heightTexels);
        res = {
          width: this.p.autoResolution.k * this.p.zoom * k * o.widthTexels,
          height: this.p.autoResolution.k * this.p.zoom * k * o.heightTexels
        };
      } else {
        res = {
          width: o.widthTexels,
          height: o.heightTexels
        };
      }
      return res;
    };

    PageManager.prototype.pushInRenderQueue = function pushInRenderQueue(o) {
      if (o.state !== 'queuedForRender') {
        o.state = 'queuedForRender';
        this.renderQueue.push(o);
        // this.updateRenderQueue();
      }
    };

    PageManager.prototype.updateRenderQueue = function updateRenderQueue() {
      if (this.canvas) {
        var p = this.p;
        if (!this.rendering && (p.renderWhileFlipping || !this.book.isProcessing())) {
          var active = void 0,
              top = void 0;
          for (var _iterator6 = this.renderQueue, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
            var _ref6;

            if (_isArray6) {
              if (_i6 >= _iterator6.length) break;
              _ref6 = _iterator6[_i6++];
            } else {
              _i6 = _iterator6.next();
              if (_i6.done) break;
              _ref6 = _i6.value;
            }

            var o = _ref6;

            if (!active && o.isActive()) {
              active = o;
            }
            if (o.isTop()) {
              top = o;
              break;
            }
          }
          this.rendering = top || active;
          if (this.isMobile() && p.renderInactivePagesOnMobile || !this.isMobile() && p.renderInactivePages) {
            this.rendering = this.rendering || this.renderQueue[0];
          }
          if (this.rendering) {
            if (this.rendering.wrapper.startRender) {
              this.removeFromRenderQueue(this.rendering);
              this.rendering.state = 'rendering';
              this.rendering.wrapper.setResolution(this.calcResolution(this.rendering));
              this.rendering.wrapper.startRender();
            } else {
              delete this.rendering;
            }
          }
        }
        setTimeout(this.updateRenderQueue.bind(this), 250);
      }
    };

    PageManager.prototype.turnOnEvents = function turnOnEvents() {
      this.transferEvents = true;
    };

    PageManager.prototype.turnOffEvents = function turnOffEvents() {
      var mouseup = _libs.$.Event('mouseup'),
          mouseout = _libs.$.Event('mouseout');
      this.pageCache.forEach(function (ent) {
        var object = ent[1];
        if (object.simulate) {
          object.simulate(mouseup, undefined, 0, 0);
          object.simulate(mouseout, undefined, 0, 0);
        }
      });
      this.transferEvents = false;
    };

    PageManager.prototype.transferEventToTexture = function transferEventToTexture(n, e, data) {
      var _this4 = this;

      if (this.transferEvents) {
        var toObject = this.getOrLoadTextureObject(undefined, n);
        if (toObject.wrapper) {
          (function () {
            var uv = data.uv,
                toDoc = toObject.wrapper.getSimulatedDoc();
            _this4.pageCache.forEach(function (ent) {
              var object = ent[1];
              if (object.simulate) {
                object.simulate(e, toDoc, uv.x, uv.y);
              }
            });
          })();
        }
      }
    };

    PageManager.prototype.loadPredictedPages = function loadPredictedPages() {
      this.predictedRequests = _BaseMathUtils2.default.predict(this.pageRequests, this.p.preloadPages);
      for (var _iterator7 = this.predictedRequests, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
        var _ref7;

        if (_isArray7) {
          if (_i7 >= _iterator7.length) break;
          _ref7 = _iterator7[_i7++];
        } else {
          _i7 = _iterator7.next();
          if (_i7.done) break;
          _ref7 = _i7.value;
        }

        var p = _ref7;

        if (p < this.book.getPages() && !this.pageCache.get(p)) {
          this.load(undefined, p);
        }
      }
    };

    PageManager.prototype.addPageRequest = function addPageRequest(n) {
      this.pageRequests.push(n);
      if (this.pageRequests.length > this.p.pagesForPredicting) {
        this.pageRequests.shift();
      }
      Promise.resolve().then(this.loadPredictedPages.bind(this));
    };

    PageManager.prototype.setMaterial = function setMaterial(o, material) {
      this.pageCache.forEach(function (e) {
        var ob = e[1];
        if (o !== ob && ob.material === material) {
          delete ob.material;
        }
      });
      if (material && material !== o.material) {
        o.material = material;
        this.setupMaterial(o);
      }
    };

    PageManager.prototype.setupMaterial = function setupMaterial(o) {
      o.material.map = o.texture.image ? o.texture : this.loadingAnimation ? this.loading[o.color].texture : null;
      if (!o.material.map) {
        o.material.color = new _libs.THREE.Color(o.color);
      }
      o.material.needsUpdate = true;
    };

    PageManager.prototype.getOrLoadTextureObject = function getOrLoadTextureObject(material, n) {
      var object = this.pageCache.get(n);
      if (!object) {
        object = this.load(material, n);
        this.addPageRequest(n);
      } else {
        this.setMaterial(object, material);
      }

      return object;
    };

    PageManager.prototype.setTexture = function setTexture(material, n) {
      if (~this.predictedRequests.indexOf(n)) {
        this.addPageRequest(n);
      }
      this.getOrLoadTextureObject(material, n);
    };

    return PageManager;
  }();

  exports.default = PageManager;

  /***/
},
/* 34 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _BookPropsBuilder2 = __webpack_require__(9);

  var _BookPropsBuilder3 = _interopRequireDefault(_BookPropsBuilder2);

  var _Pdf = __webpack_require__(18);

  var _Pdf2 = _interopRequireDefault(_Pdf);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PdfBookPropsBuilder = function (_BookPropsBuilder) {
    _inherits(PdfBookPropsBuilder, _BookPropsBuilder);

    function PdfBookPropsBuilder(src, onReady) {
      _classCallCheck(this, PdfBookPropsBuilder);

      var _this = _possibleConstructorReturn(this, _BookPropsBuilder.call(this, onReady));

      _this.pdf = new _Pdf2.default(src);
      _this.pageDescription = {
        type: 'pdf',
        src: _this.pdf,
        interactive: true
      };
      _this.binds = {
        pageCallback: _this.pageCallback.bind(_this)
      };
      _this.pdf.getHandler(_this.init.bind(_this));
      return _this;
    }

    PdfBookPropsBuilder.prototype.dispose = function dispose() {
      this.pdf.dispose();
      _BookPropsBuilder.prototype.dispose.call(this);
    };

    PdfBookPropsBuilder.prototype.init = function init(handler) {
      var _this2 = this;

      var pages = this.pdf.getPagesNum();
      this.calcSheets(pages);
      if (pages > 0) {
        handler.getPage(1).then(function (page) {
          var size = _Pdf2.default.getPageSize(page);
          _this2.calcProps(size.width, size.height);
          _this2.ready();
        }).catch(function (e) {
          console.error(e);
        });
      } else {
        this.props = this.defaults;
        this.ready();
      }
    };

    PdfBookPropsBuilder.prototype.pageCallback = function pageCallback(n) {
      return this.pageDescription;
    };

    return PdfBookPropsBuilder;
  }(_BookPropsBuilder3.default);

  exports.default = PdfBookPropsBuilder;

  /***/
},
/* 35 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var PdfLinksHandler = function () {
    function PdfLinksHandler(pdf, ctrl, element) {
      _classCallCheck(this, PdfLinksHandler);

      this.pdf = pdf;
      this.ctrl = ctrl;
      this.element = (0, _libs.$)(element);
      this.cursors = [];
    }

    PdfLinksHandler.prototype.dispose = function dispose() {};

    PdfLinksHandler.prototype.setHandler = function setHandler(handler) {
      this.handler = handler;
    };

    PdfLinksHandler.prototype.defaultHandler = function defaultHandler(type, destination) {
      if (type === 'internal') {
        this.ctrl.goToPage(destination);
      } else if (type === 'external') {
        window.open(destination, '_blank');
      }
    };

    PdfLinksHandler.prototype.callHandlers = function callHandlers(type, destination) {
      if (!this.handler || !this.handler(type, destination)) {
        this.defaultHandler(type, destination);
      }
    };

    PdfLinksHandler.prototype.handleEvent = function handleEvent(data) {
      var _this = this;

      var e = data.event,
          anno = data.annotation;
      switch (e.type) {
        case 'mouseover':
          {
            this.cursors.push(this.element.css('cursor'));
            this.element.css('cursor', 'pointer');
            break;
          }
        case 'mouseout':
          {
            this.element.css('cursor', this.cursors.pop() || '');
            break;
          }
        case 'touchtap':
        case 'click':
          {
            if (anno.url) {
              this.callHandlers('external', anno.url);
            } else if (anno.dest) {
              var destPromise = void 0;
              if (typeof anno.dest === 'string') {
                destPromise = this.pdf.handler.getDestination(anno.dest);
              } else {
                destPromise = Promise.resolve(anno.dest);
              }
              destPromise.then(function (dest) {
                return typeof dest[0] === 'number' ? dest[0] : _this.pdf.handler.getPageIndex(dest[0]);
              }).then(function (number) {
                return _this.callHandlers('internal', number);
              }).catch(function () {
                return console.error('Bad link');
              });
            }
            break;
          }
      }
    };

    return PdfLinksHandler;
  }();

  exports.default = PdfLinksHandler;

  /***/
},
/* 36 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Finder = __webpack_require__(17);

  var _Finder2 = _interopRequireDefault(_Finder);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SearchEngine = function () {
    function SearchEngine(pageCallback, pages) {
      _classCallCheck(this, SearchEngine);

      this.pageCallback = pageCallback;
      this.pages = pages;
      this.results = [];
    }

    SearchEngine.prototype.setQuery = function setQuery(query) {
      this.query = query;
      this.update = true;
      this.process();
    };

    SearchEngine.prototype.process = function process() {
      var _this = this;

      if (this.update) {
        var results = this.results;
        this.results = [];
        if (this.onPageHitsChanged) {
          for (var _iterator = results, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var res = _ref;

            this.onPageHitsChanged(undefined, '');
          }
        }
        this.update = false;
        this.page = 0;
        this.stamp = Date.now();
        if (this.query.length > 1) {
          this.process();
        }
      } else {
        if (this.page < this.pages) {
          (function () {
            var stamp = _this.stamp;
            _this.find(_this.pageCallback(_this.page)).then(function (contexts) {
              if (stamp === _this.stamp) {
                if (contexts.length) {
                  _this.results.push({
                    page: _this.page,
                    contexts: contexts
                  });
                }
                ++_this.page;
                if (_this.onPageHitsChanged) {
                  _this.onPageHitsChanged(_this.page, _this.query);
                }
                _this.process();
              }
            });
          })();
        }
      }
    };

    SearchEngine.prototype.find = function find(pi) {
      var _this2 = this;

      var next = void 0;
      if (pi.type === 'pdf') {
        next = new Promise(function (resolve) {
          pi.src.getHandler(function () {
            var n = pi.number === undefined ? _this2.page : pi.number;
            if (pi.src.getPageType(n) === 'right') {
              resolve([]);
            } else {
              pi.src.getPage(n).then(function (page) {
                page.getTextContent().then(function (textContent) {
                  resolve(new _Finder2.default(textContent.items.map(function (item) {
                    return item.str;
                  }), _this2.query, { hits: false }).getContexts());
                });
              }).catch(function () {
                return resolve([]);
              });
            }
          });
        });
      } else {
        next = Promise.resolve([]);
      }
      return next;
    };

    return SearchEngine;
  }();

  exports.default = SearchEngine;

  /***/
},
/* 37 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _CSSLayer = __webpack_require__(13);

  var _CSSLayer2 = _interopRequireDefault(_CSSLayer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SheetCssLayer = function () {
    function SheetCssLayer(visual, block, props) {
      _classCallCheck(this, SheetCssLayer);

      this.visual = visual;
      var size = block.getTopSize();
      this.layer = new _CSSLayer2.default(size.width, size.height, props);

      this.update(block);
      this.visual.addCssObject(this.layer);
    }

    SheetCssLayer.prototype.dispose = function dispose() {
      this.layer.dispose();
      this.visual.removeCssObject(this.layer);
    };

    SheetCssLayer.prototype.isHidden = function isHidden() {
      return this.layer.isHidden();
    };

    SheetCssLayer.prototype.hide = function hide() {
      return this.layer.hide();
    };

    SheetCssLayer.prototype.show = function show() {
      return this.layer.show();
    };

    SheetCssLayer.prototype.set = function set(css, html, js) {
      this.layer.setData(css, html, js);
    };

    SheetCssLayer.prototype.update = function update(block) {
      this.block = block;
      this.block.getTopWorldRotation(this.layer.rotation);
      this.block.getTopWorldPosition(this.layer.position);
    };

    return SheetCssLayer;
  }();

  exports.default = SheetCssLayer;

  /***/
},
/* 38 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SheetPhysics = function () {
    SheetPhysics.targetForceClb = function targetForceClb(o, a, v, ch) {
      var l = a * this.r;
      return 100 * this.m * this.g * (2 / (1 + Math.exp(10 * (l - this.tl))) - 1) - this.m * 40 * v;
    };

    SheetPhysics.hoverCornerForceClb = function hoverCornerForceClb(o, v, l, ch) {
      return 5;
    };

    SheetPhysics.prototype.getTargetForceClb = function getTargetForceClb(mass, targetAngle) {
      return SheetPhysics.targetForceClb.bind({
        g: this.p.gravity,
        m: mass,
        tl: targetAngle * this.p.r,
        r: this.p.r
      });
    };

    SheetPhysics.dragForceClb = function dragForceClb(o, a, v, ch) {
      return o.flbt * o.m * (10 * o.g * ch - 50 * v / (1 + Math.exp(3.5 * Math.abs(ch))));
    };

    SheetPhysics.dragCornerForceClb = function dragCornerForceClb(o, a, v, ch) {
      return 15 * (2 / (1 + Math.exp(10 * (a - this.ta) * o.r)) - 1);
    };

    SheetPhysics.getDragCornerForceClb = function getDragCornerForceClb(targetAngle) {
      return SheetPhysics.dragCornerForceClb.bind({
        ta: targetAngle
      });
    };

    function SheetPhysics() {
      var r = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;
      var gravity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var cornerDeviation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.15;
      var fps = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 240;

      _classCallCheck(this, SheetPhysics);

      this.p = {
        r: r,
        cornerDeviation: cornerDeviation,
        l: Math.PI * r,
        startDt: 1 / fps,
        gravity: gravity,
        margin: 0.002 * r,
        infM: 1e4,
        attempts: 16,
        maxIterations: 100
      };
      this.os = [];
    }

    SheetPhysics.prototype.dispose = function dispose() {
      this.os = [];
    };

    SheetPhysics.prototype.getSize = function getSize() {
      return this.os.length;
    };

    SheetPhysics.prototype.addObject = function addObject(mass, angle, velocity, flexibility, cornerHeight, simulateClb, removeClb) {
      var forceClb = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : function () {
        return 0;
      };
      var cornerForceClb = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : function () {
        return 0;
      };

      var no = {
        id: _MathUtils2.default.getUnique(),
        m: mass,
        v: velocity,
        l: angle * this.p.r,
        f: forceClb,
        cf: cornerForceClb,
        ch: cornerHeight,
        flbt: flexibility,
        simulateClb: simulateClb,
        removeClb: removeClb
      };
      var i = this.os.findIndex(function (o) {
        return no.l <= o.l;
      });
      i = ~i ? i : this.os.length;
      this.os.splice(i, 0, no);
      return no.id;
    };

    SheetPhysics.prototype.getParametrMap = function getParametrMap(name) {
      var map = {
        mass: 'm',
        velocity: 'v',
        flexibility: 'flbt',
        cornerHeight: 'ch',
        simulateClb: 'simulateClb',
        removeClb: 'removeClb',
        forceClb: 'f',
        cornerForceClb: 'cf'
      };
      return map[name];
    };

    SheetPhysics.prototype.setParametr = function setParametr(id, name, value) {
      var o = this.os.find(function (o) {
        return o.id === id;
      });
      if (name === 'angle') {
        o.l = value * this.p.r;
      } else {
        o[this.getParametrMap(name)] = value;
      }
    };

    SheetPhysics.prototype.getParametr = function getParametr(id, name) {
      var o = this.os.find(function (o) {
        return o.id === id;
      });
      var value = void 0;
      if (name === 'angle') {
        value = o.l / this.p.r;
      } else {
        value = o[this.getParametrMap(name)];
      }
      return value;
    };

    SheetPhysics.prototype.simulate = function simulate(T) {
      var t = 0,
          dt = this.p.startDt,
          attempt = 0,
          it = 0;

      while (t < T && it < this.p.maxIterations) {
        if (dt > T - t) {
          dt = T - t;
        }
        var nos = this.integrate(this.os, dt),
            ci = this.findCollisions(nos);
        if (ci.num > 1 && attempt < this.p.attempts) {
          dt /= 2;
          ++attempt;
        } else {
          if (ci.num === 1) {
            var scos = this.solveCollision(nos[ci.last - 1], nos[ci.last]);
            nos[ci.last - 1] = scos[0];
            nos[ci.last] = scos[1];
          } else if (ci.num > 1) {
            var gs = [];
            var last = -2;
            for (var _iterator = ci.all, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
              var _ref;

              if (_isArray) {
                if (_i >= _iterator.length) break;
                _ref = _iterator[_i++];
              } else {
                _i = _iterator.next();
                if (_i.done) break;
                _ref = _i.value;
              }

              var i = _ref;

              if (i - last > 1) {
                gs.push([]);
              }
              gs[gs.length - 1].push(i);
              last = i;
            }
            for (var _iterator2 = gs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
              var _ref2;

              if (_isArray2) {
                if (_i2 >= _iterator2.length) break;
                _ref2 = _iterator2[_i2++];
              } else {
                _i2 = _iterator2.next();
                if (_i2.done) break;
                _ref2 = _i2.value;
              }

              var g = _ref2;

              var sg = void 0,
                  i0 = void 0;
              if (nos[g[0]].l > Math.PI / 2 * this.p.r) {
                sg = -1;
                i0 = g[g.length - 1];
              } else {
                sg = 1;
                i0 = g[0];
              }
              for (var _i3 = i0; _i3 < nos.length && _i3 > -1; _i3 += sg) {
                var o = nos[_i3 + sg];
                if (o && sg * (o.l - nos[_i3].l) <= this.p.margin) {
                  o.l = nos[_i3].l + sg * 2 * this.p.margin;
                  if (o.l > this.p.l || o.l < 0) {
                    o.l = o.l > this.p.l ? this.p.l : 0;
                    o.ch = 0;
                    o.v = 0;
                    console.error('Bad collision');
                  }
                } else {
                  break;
                }
              }
            }
          }
          this.os = nos;
          this.findAndSolveCornerCollisions();
          t += dt;
          dt = this.p.startDt;
          attempt = 0;
        }
        ++it;
      }

      this.removeStatics();
    };

    SheetPhysics.prototype.removeStatics = function removeStatics() {
      var nos = [],
          notify = [[], []];
      for (var _iterator3 = this.os, _isArray3 = Array.isArray(_iterator3), _i4 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i4 >= _iterator3.length) break;
          _ref3 = _iterator3[_i4++];
        } else {
          _i4 = _iterator3.next();
          if (_i4.done) break;
          _ref3 = _i4.value;
        }

        var o = _ref3;

        if (o.simulateClb) {
          o.simulateClb(o.l / this.p.r, o.ch);
        }
        if ((o.l === this.p.l || o.l === 0) && o.v === 0) {
          if (o.removeClb !== undefined) {
            notify[(o.l !== this.p.l) + 0].push(o);
          }
        } else {
          nos.push(o);
        }
      }
      this.os = nos;
      for (var _iterator4 = notify[0].reverse(), _isArray4 = Array.isArray(_iterator4), _i5 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i5 >= _iterator4.length) break;
          _ref4 = _iterator4[_i5++];
        } else {
          _i5 = _iterator4.next();
          if (_i5.done) break;
          _ref4 = _i5.value;
        }

        var _o = _ref4;

        _o.removeClb(Math.PI, _o.ch);
      }
      for (var _iterator5 = notify[1], _isArray5 = Array.isArray(_iterator5), _i6 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i6 >= _iterator5.length) break;
          _ref5 = _iterator5[_i6++];
        } else {
          _i6 = _iterator5.next();
          if (_i6.done) break;
          _ref5 = _i6.value;
        }

        var _o2 = _ref5;

        _o2.removeClb(0, _o2.ch);
      }
    };

    SheetPhysics.prototype.findAndSolveCornerCollisions = function findAndSolveCornerCollisions() {
      if (this.os.length) {
        var os = [_extends({}, this.os[0], {
          l: 0,
          m: this.p.infM,
          ch: 0
        })].concat(this.os, [_extends({}, this.os[0], {
          l: 1.05 * this.p.l,
          m: this.p.infM,
          ch: 0
        })]);

        for (var i = 1; i < os.length; ++i) {
          var a = os[i - 1],
              b = os[i],
              al = a.l + this.p.cornerDeviation * a.ch * this.p.r,
              bl = b.l + this.p.cornerDeviation * b.ch * this.p.r;
          if (1.05 * al > bl && a.ch > b.ch) {
            var dCh = a.ch - b.ch,
                dv = a.m / a.flbt + b.m / b.flbt,
                ka = a.m / a.flbt / dv,
                kb = b.m / b.flbt / dv;
            a.ch = a.ch - kb * dCh;
            b.ch = b.ch + ka * dCh;
          }
        }
      }
    };

    SheetPhysics.prototype.solveCollision = function solveCollision(a, b) {
      var mm = b.m + a.m,
          av = (-a.v * b.m + a.m * a.v + 2 * b.m * b.v) / mm,
          bv = (b.m * b.v - b.v * a.m + 2 * a.m * a.v) / mm;
      return [_extends({}, a, { v: av }), _extends({}, b, { v: bv })];
    };

    SheetPhysics.prototype.findCollisions = function findCollisions(os) {
      var ci = {
        num: 0,
        last: 0,
        all: []
      };
      for (var i = 1; i < os.length && ci.num < 2; ++i) {
        if (os[i - 1].l > os[i].l || this.isCollision(os[i - 1], os[i])) {
          if (os[i - 1].l > os[i].l) {
            ++ci.num;
          }
          ++ci.num;
          ci.last = i;
          if (ci.all.indexOf(i - 1) === -1) {
            ci.all.push(i - 1);
          }
          if (ci.all.indexOf(i) === -1) {
            ci.all.push(i);
          }
        }
      }
      return ci;
    };

    SheetPhysics.prototype.isCollision = function isCollision(a, b) {
      return Math.abs(a.l - b.l) < this.p.margin && a.v > b.v;
    };

    SheetPhysics.prototype.integrate = function integrate(os, dt) {
      var nos = [];
      for (var _iterator6 = os, _isArray6 = Array.isArray(_iterator6), _i7 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
        var _ref6;

        if (_isArray6) {
          if (_i7 >= _iterator6.length) break;
          _ref6 = _iterator6[_i7++];
        } else {
          _i7 = _iterator6.next();
          if (_i7.done) break;
          _ref6 = _i7.value;
        }

        var o = _ref6;

        var vl = _MathUtils2.default.rk4(this.dy.bind({
          g: this.p.gravity,
          r: this.p.r,
          m: o.m,
          f: o.f,
          cf: o.cf,
          ch: o.ch,
          flbt: o.flbt
        }), 0, dt, [o.v, o.l, o.ch]);
        var no = _extends({}, o, {
          v: vl[0],
          l: vl[1],
          ch: vl[2]
        });
        if (no.l <= 0 || no.l >= this.p.l) {
          no.l = no.l <= 0 ? 0 : this.p.l;
          no.v = 0;
          no.ch = 0;
        }
        nos.push(no);
      }
      return nos;
    };

    SheetPhysics.prototype.dy = function dy(t, y) {
      var v = y[0],
          l = y[1],
          ch = y[2],
          f = this.f(this, l / this.r, v, ch),
          cf = this.cf(this, l / this.r, v, ch);
      return [(-this.g * Math.cos(l / this.r) * this.m + f) / this.m, v + 0.01 * (Math.random() - 0.5), this.flbt * ((2 / (1 + Math.exp(-0.2 * cf)) - 1) * (1 - 2 / (1 + Math.exp(-5 * (Math.abs(ch) - 2)))) - ch)];
    };

    return SheetPhysics;
  }();

  exports.default = SheetPhysics;

  /***/
},
/* 39 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var SoundsEnviroment = function () {
    function SoundsEnviroment() {
      var template = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _classCallCheck(this, SoundsEnviroment);

      this.sounds = template.sounds || {};
      this.audio = {};
      if (this.sounds.startFlip) {
        this.audio.startFlip = new Audio(this.sounds.startFlip);
      }
      if (this.sounds.endFlip) {
        this.audio.endFlip = new Audio(this.sounds.endFlip);
      }
    }

    SoundsEnviroment.prototype.setEnabled = function setEnabled(enabled) {
      this.enabled = enabled;
    };

    SoundsEnviroment.prototype.togle = function togle() {
      this.enabled = !this.enabled;
    };

    SoundsEnviroment.prototype.dispose = function dispose() {
      delete this.audio.startFlip;
      delete this.audio.endFlip;
    };

    SoundsEnviroment.prototype.startFlip = function startFlip() {
      if (this.enabled && this.audio.startFlip) {
        this.audio.startFlip.play();
      }
    };

    SoundsEnviroment.prototype.endFlip = function endFlip() {
      if (this.enabled && this.audio.startFlip) {
        this.audio.startFlip.pause();
        this.audio.startFlip.currentTime = 0;
      }
      if (this.enabled && this.audio.endFlip) {
        this.audio.endFlip.play();
      }
    };

    SoundsEnviroment.prototype.subscribeFlips = function subscribeFlips(emitter) {
      emitter.addEventListener('startFlip', this.startFlip.bind(this));
      emitter.addEventListener('endFlip', this.endFlip.bind(this));
    };

    return SoundsEnviroment;
  }();

  exports.default = SoundsEnviroment;

  /***/
},
/* 40 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _WidgetController2 = __webpack_require__(67);

  var _WidgetController3 = _interopRequireDefault(_WidgetController2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var TocController = function (_WidgetController) {
    _inherits(TocController, _WidgetController);

    function TocController(view, bookCtrl) {
      _classCallCheck(this, TocController);

      var _this = _possibleConstructorReturn(this, _WidgetController.call(this, view));

      _this.bookCtrl = bookCtrl;
      _this.tab = 'none';
      return _this;
    }

    TocController.prototype.setThumbnails = function setThumbnails(thumbnails) {
      this.thumbnails = thumbnails;
      thumbnails.onNavigate = this.navigateThumbnails.bind(this);
      if (this.tab === 'none') {
        this.tab = 'thumbnails';
      }
      this.fireChange();
    };

    TocController.prototype.setSearch = function setSearch(search) {
      this.search = search;
      search.onNavigate = this.navigateSearch.bind(this);
      this.fireChange();
    };

    TocController.prototype.setBookmarks = function setBookmarks(bookmarks, pdf) {
      this.bookmarks = bookmarks;
      this.pdf = pdf;
      bookmarks.onNavigate = this.navigateBookmarks.bind(this);
      if (bookmarks.getSize()) {
        this.tab = 'bookmarks';
        this.isBookmarks = true;
      }
      this.fireChange();
    };

    TocController.prototype.cmdBookmarks = function cmdBookmarks() {
      this.tab = 'bookmarks';
      this.fireChange();
    };

    TocController.prototype.cmdThumbnails = function cmdThumbnails() {
      this.tab = 'thumbnails';
      this.fireChange();
    };

    TocController.prototype.cmdSearch = function cmdSearch() {
      this.tab = 'search';
      this.fireChange();
    };

    TocController.prototype.cmdCloseToc = function cmdCloseToc() {
      this.hide();
    };

    TocController.prototype.navigateThumbnails = function navigateThumbnails(number) {
      this.bookCtrl.goToPage(number);
    };

    TocController.prototype.navigateSearch = function navigateSearch(number) {
      this.bookCtrl.goToPage(number);
    };

    TocController.prototype.navigateBookmarks = function navigateBookmarks(item) {
      var _this2 = this;

      if (item.url) {
        window.open(item.url, '_blank');
      } else if (item.dest) {
        var destPromise = void 0;
        if (typeof item.dest === 'string') {
          destPromise = this.pdf.handler.getDestination(item.dest);
        } else {
          destPromise = Promise.resolve(item.dest);
        }
        destPromise.then(function (dest) {
          return _this2.pdf.handler.getPageIndex(dest[0]);
        }).then(function (number) {
          return _this2.bookCtrl.goToPage(number);
        }).catch(function () {
          return console.error('Bad bookmark');
        });
      }
    };

    TocController.prototype.updateView = function updateView() {
      var _this3 = this;

      if (this.view) {
        this.view.setState('widTocMenu', {
          enable: true,
          visible: true,
          active: false
        });
        this.view.setState('widThumbnails', {
          enable: true,
          visible: this.tab === 'thumbnails',
          active: false
        });
        this.view.setState('widSearch', {
          enable: true,
          visible: this.tab === 'search',
          active: false
        });
        this.view.setState('widBookmarks', {
          enable: true,
          visible: this.tab === 'bookmarks',
          active: false
        });
        this.view.setState('cmdBookmarks', {
          enable: true,
          visible: true,
          active: this.tab === 'bookmarks'
        });
        this.view.setState('cmdCloseToc', {
          enable: true,
          visible: true,
          active: false
        });
        this.view.setState('cmdThumbnails', {
          enable: true,
          visible: true,
          active: this.tab === 'thumbnails'
        });
        this.view.setState('cmdSearch', {
          enable: true,
          visible: true,
          active: this.tab === 'search'
        });
        Promise.resolve().then(function () {
          return _this3.thumbnails.setEnable(_this3.visible && _this3.tab === 'thumbnails');
        });
        _WidgetController.prototype.updateView.call(this);
      }
    };

    return TocController;
  }(_WidgetController3.default);

  exports.default = TocController;

  /***/
},
/* 41 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(1);

  var _ThreeUtils = __webpack_require__(20);

  var _ThreeUtils2 = _interopRequireDefault(_ThreeUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  var resX = 11,
      resY = 2,
      resZ = 15,
      scale = 1,
      faces = [];

  var frontGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);
  frontGeometry.translate(0.5 * scale, 0.5 * scale, scale);
  var backGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resY - 1);
  backGeometry.rotateY(Math.PI);
  backGeometry.translate(0.5 * scale, 0.5 * scale, 0);
  var leftGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);
  leftGeometry.rotateY(-Math.PI / 2);
  leftGeometry.translate(0, 0.5 * scale, 0.5 * scale);
  var rightGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resZ - 1, resY - 1);
  rightGeometry.rotateY(Math.PI / 2);
  rightGeometry.translate(scale, 0.5 * scale, 0.5 * scale);
  var topGeometry = new _libs.THREE.PlaneGeometry(scale, scale, resX - 1, resZ - 1);
  topGeometry.rotateX(-Math.PI / 2);
  topGeometry.translate(0.5 * scale, scale, 0.5 * scale);
  var bottomGeometry = topGeometry.clone();
  bottomGeometry.translate(0, -scale, 0);
  for (var _iterator = bottomGeometry.faces, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
    var _ref;

    if (_isArray) {
      if (_i >= _iterator.length) break;
      _ref = _iterator[_i++];
    } else {
      _i = _iterator.next();
      if (_i.done) break;
      _ref = _i.value;
    }

    var f = _ref;
    var _ref3 = [f.b, f.a];
    f.a = _ref3[0];
    f.b = _ref3[1];
  }

  var geometry = new _libs.THREE.Geometry();
  geometry.vertices = [].concat(bottomGeometry.vertices, topGeometry.vertices);

  var addFaces = function addFaces(fs, map) {
    for (var _iterator2 = fs, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
      var _ref2;

      if (_isArray2) {
        if (_i2 >= _iterator2.length) break;
        _ref2 = _iterator2[_i2++];
      } else {
        _i2 = _iterator2.next();
        if (_i2.done) break;
        _ref2 = _i2.value;
      }

      var f = _ref2;

      geometry.faces.push(new _libs.THREE.Face3(map(f.a), map(f.b), map(f.c)));
    }
    faces.push(geometry.faces.length);
  };

  var mapVertices = function mapVertices(src, dst) {
    var map = [];
    var eq = function eq(a, b) {
      return Math.abs(a.x - b.x) + Math.abs(a.y - b.y) + Math.abs(a.z - b.z) < 1e-4;
    };
    for (var i = 0; i < src.length; ++i) {
      for (var j = 0; j < dst.length; ++j) {
        if (eq(src[i], dst[j])) {
          map[i] = j;
          break;
        }
      }
    }
    return map;
  };

  var frontMap = mapVertices(frontGeometry.vertices, geometry.vertices);
  var backMap = mapVertices(backGeometry.vertices, geometry.vertices);
  var leftMap = mapVertices(leftGeometry.vertices, geometry.vertices);
  var rightMap = mapVertices(rightGeometry.vertices, geometry.vertices);

  addFaces(topGeometry.faces, function (i) {
    return i + bottomGeometry.vertices.length;
  });
  addFaces(bottomGeometry.faces, function (i) {
    return i;
  });
  addFaces(frontGeometry.faces, function (i) {
    return frontMap[i];
  });
  addFaces(backGeometry.faces, function (i) {
    return backMap[i];
  });
  addFaces(leftGeometry.faces, function (i) {
    return leftMap[i];
  });
  addFaces(rightGeometry.faces, function (i) {
    return rightMap[i];
  });
  faces.pop();

  _ThreeUtils2.default.computeFaceVertexUvs(geometry, faces);

  geometry.computeVertexNormals();
  //geometry.computeFaceNormals();
  geometry.computeBoundingSphere();
  //geometry.computeBoundingBox();
  geometry.verticesNeedUpdate = true;

  exports.default = {
    resX: resX,
    resY: resY,
    resZ: resZ,
    faces: faces,
    geometry: geometry
  };

  /***/
},
/* 42 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;
  exports.props = props;
  var mouseButtons = {
    Left: 0,
    Middle: 1,
    Right: 2
  };

  function props() {
    return {
      eps: 1e-4,
      skin: {
        default: 'short-white-book-view'
      },
      scale: {
        default: 0.9,
        min: 0.9,
        max: 2.5,
        levels: 7
      },
      lighting: {
        default: 0.7,
        min: 0,
        max: 1,
        levels: 7
      },
      pan: {
        speed: 50
      },
      loadingAnimation: {
        skin: false,
        book: true
      },
      autoResolution: {
        enabled: true,
        coefficient: 1.5
      },
      actions: {
        cmdZoomIn: {
          enabled: true
        },
        cmdZoomOut: {
          enabled: true
        },
        cmdDefaultZoom: {
          enabled: true,
          type: 'dblclick',
          code: 0
        },
        cmdToc: {
          enabled: true
        },
        cmdFastBackward: {
          enabled: false
        },
        cmdBackward: {
          enabled: true
        },
        cmdForward: {
          enabled: true
        },
        cmdFastForward: {
          enabled: false
        },
        cmdSave: {
          enabled: true
        },
        cmdPrint: {
          enabled: true
        },
        cmdFullScreen: {
          enabled: true
        },
        widSettings: {
          enabled: true
        },
        cmdSmartPan: {
          enabled: true,
          active: true
        },
        cmdSinglePage: {
          enabled: true,
          active: false,
          activeForMobile: false
        },
        cmdSounds: {
          enabled: true,
          active: true
        },
        cmdStats: {
          enabled: true,
          active: false
        },
        cmdLightingUp: {
          enabled: true
        },
        cmdLightingDown: {
          enabled: true
        },
        cmdPanLeft: {
          enabled: false
        },
        cmdPanRight: {
          enabled: false
        },
        cmdPanUp: {
          enabled: false
        },
        cmdPanDown: {
          enabled: false
        },
        mouseCmdRotate: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Right
        },
        mouseCmdDragZoom: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Middle
        },
        mouseCmdPan: {
          enabled: true,
          type: 'mousedrag',
          code: mouseButtons.Left
        },
        mouseCmdWheelZoom: {
          enabled: true,
          type: 'mousewheel',
          code: 0
        },
        touchCmdRotate: {
          enabled: true,
          type: 'touchdrag',
          code: 3
        },
        touchCmdZoom: {
          enabled: true,
          type: 'touchdrag',
          code: 2
        },
        touchCmdPan: {
          enabled: true,
          type: 'touchdrag',
          code: 1
        },
        touchCmdSwipe: {
          enabled: true,
          type: 'touchdrag',
          code: 1
        }
      }
    };
  };

  /***/
},
/* 43 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var BlankImage = function (_ImageBase) {
    _inherits(BlankImage, _ImageBase);

    function BlankImage(context, width, height, color) {
      _classCallCheck(this, BlankImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      Promise.resolve().then(function () {
        _this.startRender = function () {
          _this.renderBlankPage();
          _this.finishRender();
        };
        _this.finishLoad();
      });
      return _this;
    }

    return BlankImage;
  }(_ImageBase3.default);

  exports.default = BlankImage;

  /***/
},
/* 44 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Bookmarks = function () {
    function Bookmarks(container, items) {
      var _this = this;

      var getTitle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (i) {
        return i.title;
      };
      var getItems = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (i) {
        return i.items;
      };

      _classCallCheck(this, Bookmarks);

      this.container = container;
      this.map = [];
      this.getTitle = getTitle;
      this.getItems = getItems;
      this.nodes = this.mapNodes(items, this.map);

      this.binds = {
        togle: function togle(e) {
          e.preventDefault();
          var li = (0, _libs.$)(e.target);
          while (li[0] && li[0] !== container[0] && !li.hasClass('item')) {
            li = (0, _libs.$)(li[0].parentNode);
          }
          if (li.hasClass('item')) {
            var cmd = (0, _libs.$)(e.target);
            while (cmd[0] && cmd[0] !== li[0] && !cmd.hasClass('cmd')) {
              cmd = (0, _libs.$)(cmd[0].parentNode);
            }
            if (cmd.hasClass('cmd')) {
              var node = _this.map[li.attr('data-id')];
              if (cmd.hasClass('togle')) {
                node.minimized = !node.minimized;
                if (node.minimized) {
                  li.find('ul').remove();
                  li.find('.togle').addClass('minimized');
                } else {
                  li.find('.togle').removeClass('minimized');
                  li.append((_this.renderNode(node).match(/<ul.*<\/ul>/) || [''])[0]);
                }
              } else {
                if (_this.onNavigate) {
                  _this.onNavigate(node.item);
                }
              }
            }
          }
        }
      };

      container.on('click', this.binds.togle);
      this.update();
    }

    Bookmarks.prototype.getSize = function getSize() {
      return this.map.length;
    };

    Bookmarks.prototype.dispose = function dispose() {
      this.container.off('click', this.binds.togle);
      this.container.html('');
    };

    Bookmarks.prototype.update = function update() {
      this.container.html(this.renderNodes(this.nodes));
    };

    Bookmarks.prototype.forEach = function forEach(f) {
      var nodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.nodes;

      for (var _iterator = nodes || [], _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var node = _ref;

        f(node);
        this.forEach(f, node.children);
      }
    };

    Bookmarks.prototype.expand = function expand() {
      this.forEach(function (n) {
        return n.minimized = false;
      });
      this.update();
    };

    Bookmarks.prototype.minimize = function minimize() {
      this.forEach(function (n) {
        return n.minimized = true;
      });
      this.update();
    };

    Bookmarks.prototype.renderNode = function renderNode(node) {
      return ['<div class="area">', node.children ? '<a href="#" class="cmd togle' + (node.minimized ? ' minimized' : '') + '"><i class="fa fa-angle-right"></i></a> ' : '<i class="white-space"></i> ', '<a class="cmd" title="', node.title, '" href="#">', node.title, '</a></div>', node.minimized ? '' : this.renderNodes(node.children)].join('');
    };

    Bookmarks.prototype.renderNodes = function renderNodes(nodes) {
      var res = ['<div class="bookmarks">'];
      if (nodes && nodes.length) {
        res.push('<ul class="level-', nodes[0].level, '">');
        for (var _iterator2 = nodes, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var node = _ref2;

          res.push(['<li class="item" data-id="', node.id, '">', this.renderNode(node), '</li>'].join(''));
        }
        res.push('</ul>');
      }
      res.push('</div>');
      return res.join('');
    };

    Bookmarks.prototype.mapNodes = function mapNodes(items) {
      var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

      var nodes = null;
      if (items && items.length) {
        nodes = [];
        for (var _iterator3 = items, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var item = _ref3;

          var id = map.length;
          map.push(undefined);
          var node = {
            id: id,
            title: this.getTitle(item),
            level: level,
            item: item,
            minimized: true,
            children: this.mapNodes(this.getItems(item), map, level + 1)
          };
          nodes.push(node);
          map[id] = node;
        }
      }
      return nodes;
    };

    return Bookmarks;
  }();

  exports.default = Bookmarks;

  /***/
},
/* 45 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Detector = function () {
    function Detector() {
      _classCallCheck(this, Detector);
    }

    Detector.getWebGLErrorMessage = function getWebGLErrorMessage() {
      var element = document.createElement('div');
      element.id = 'webgl-error-message';
      element.style.fontFamily = 'monospace';
      element.style.fontSize = '13px';
      element.style.fontWeight = 'normal';
      element.style.textAlign = 'center';
      element.style.background = '#fff';
      element.style.color = '#000';
      element.style.padding = '1.5em';
      element.style.width = '400px';
      element.style.margin = '5em auto 0';

      if (!Detector.webgl) {
        element.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n') : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join('\n');
      }
      return element;
    };

    Detector.addGetWebGLMessage = function addGetWebGLMessage(parameters) {
      var parent = void 0,
          id = void 0,
          element = void 0;
      parameters = parameters || {};

      parent = parameters.parent || (0, _libs.$)(document.body);
      id = parameters.id || 'oldie';

      element = Detector.getWebGLErrorMessage();
      //element.id = id;

      parent.append(element);
    };

    return Detector;
  }();

  Detector.canvas = !!window.CanvasRenderingContext2D;

  Detector.webgl = function () {
    try {
      var canvas = document.createElement('canvas');
      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
    } catch (e) {
      return false;
    }
  }();

  Detector.workers = !!window.Worker;
  Detector.fileapi = window.File && window.FileReader && window.FileList && window.Blob;
  exports.default = Detector;

  /***/
},
/* 46 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var DocMouseSimulator = function () {
    function DocMouseSimulator(jFrame, element) {
      var bElement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : document.body;

      _classCallCheck(this, DocMouseSimulator);

      this.jFrame = jFrame;
      this.wnd = jFrame[0].contentWindow;
      this.doc = jFrame[0].contentDocument;
      this.element = element || doc.body;
      this.bElement = bElement;
      this.resendProperties = this.getDefaultResendProperties();
      this.undefinedProperties = this.getDefaultUndefinedProperties();
      this.cursors = [];
      this.onDocChangeClbs = [];
      var terms = [{
        find: ':hover',
        replace: '.' + DocMouseSimulator.HOVER
      }, {
        find: ':active',
        replace: '.' + DocMouseSimulator.ACTIVE
      }];
      var style = ['<style type="text/css">'];
      for (var i = 0; i < this.doc.styleSheets.length; ++i) {
        var ss = this.doc.styleSheets[i];
        for (var j = 0; j < ss.cssRules.length; ++j) {
          var r = ss.cssRules[j],
              cssText = void 0;
          for (var _iterator = terms, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
            var _ref;

            if (_isArray) {
              if (_i >= _iterator.length) break;
              _ref = _iterator[_i++];
            } else {
              _i = _iterator.next();
              if (_i.done) break;
              _ref = _i.value;
            }

            var term = _ref;

            if (~r.selectorText.indexOf(term.find)) {
              cssText = (cssText || r.cssText).replace(new RegExp(term.find, 'g'), term.replace);
            }
          }
          if (cssText) {
            style.push(cssText);
          }
        }
      }
      style.push('</style>');
      (0, _libs.$)(this.doc.head).append((0, _libs.$)(style.join('')));
    }

    DocMouseSimulator.prototype.convertCoords = function convertCoords(x, y) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      return {
        x: offset.left + jElement.width() * x,
        y: offset.top + jElement.height() * (1 - y)
      };
    };

    DocMouseSimulator.prototype.triggerEvent = function triggerEvent(element, e, p, type, advancedProps) {
      var props = {};
      for (var _iterator2 = this.resendProperties, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        if (_isArray2) {
          if (_i2 >= _iterator2.length) break;
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) break;
          _ref2 = _i2.value;
        }

        var _n = _ref2;

        props[_n] = e[_n];
      }
      for (var _iterator3 = this.undefinedProperties, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
        var _ref3;

        if (_isArray3) {
          if (_i3 >= _iterator3.length) break;
          _ref3 = _iterator3[_i3++];
        } else {
          _i3 = _iterator3.next();
          if (_i3.done) break;
          _ref3 = _i3.value;
        }

        var _n2 = _ref3;

        props[_n2] = undefined;
      }
      for (var n in advancedProps) {
        if (advancedProps.hasOwnProperty(n)) {
          props[n] = advancedProps[n];
        }
      }
      props.view = this.wnd;
      props.pageX = p.x;
      props.pageY = p.y;
      var jE = _libs.$.Event(type, props);
      jE.timeStamp = e.timeStamp;
      (0, _libs.$)(element).trigger(jE);
    };

    DocMouseSimulator.prototype.addClass = function addClass(element, name) {
      (0, _libs.$)(element).addClass(name);
      var style = this.wnd.getComputedStyle(element);
      this.cursors.push((0, _libs.$)(this.bElement).css('cursor'));
      (0, _libs.$)(this.bElement).css('cursor', style.getPropertyValue('cursor'));
    };

    DocMouseSimulator.prototype.removeClass = function removeClass(element, name) {
      (0, _libs.$)(element).removeClass(name);
      (0, _libs.$)(this.bElement).css('cursor', this.cursors.pop());
    };

    DocMouseSimulator.prototype.enterElement = function enterElement(element) {
      this.addClass(element, DocMouseSimulator.HOVER);
    };

    DocMouseSimulator.prototype.leaveElement = function leaveElement(element) {
      this.removeClass(element, DocMouseSimulator.HOVER);
    };

    DocMouseSimulator.prototype.activateElement = function activateElement(element) {
      this.addClass(element, DocMouseSimulator.ACTIVE);
    };

    DocMouseSimulator.prototype.deactivateElement = function deactivateElement(element) {
      this.removeClass(element, DocMouseSimulator.ACTIVE);
    };

    DocMouseSimulator.prototype.addDocChangeClb = function addDocChangeClb(clb) {
      this.onDocChangeClbs.push(clb);
    };

    DocMouseSimulator.prototype.notify = function notify() {
      for (var _iterator4 = this.onDocChangeClbs, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
        var _ref4;

        if (_isArray4) {
          if (_i4 >= _iterator4.length) break;
          _ref4 = _iterator4[_i4++];
        } else {
          _i4 = _iterator4.next();
          if (_i4.done) break;
          _ref4 = _i4.value;
        }

        var clb = _ref4;

        clb(this.wnd, this.doc);
      }
    };

    DocMouseSimulator.prototype.elementFromPoint = function elementFromPoint(p) {
      var node = this.doc.body,
          next = true;
      while (next) {
        next = false;
        for (var i = 0; i < node.childNodes.length; ++i) {
          var child = node.childNodes[i];
          if (child instanceof this.wnd.Element) {
            var jC = (0, _libs.$)(child),
                offset = jC.offset(),
                height = jC.height(),
                width = jC.width();
            if (p.x > offset.left && p.x < offset.left + width && p.y > offset.top && p.y < offset.top + height) {
              node = child;
              next = true;
              break;
            }
          }
        }
      }
      return node;
    };

    DocMouseSimulator.prototype.getElement = function getElement(p) {
      var off0 = this.jFrame.offset();
      this.jFrame.offset({ left: 0.5 * window.innerWidth - p.x, top: 0.5 * window.innerHeight - p.y });
      var element = this.doc.elementFromPoint(p.x, p.y);
      if (!element) {
        // it isn't a joke it's IE
        element = this.doc.elementFromPoint(p.x, p.y);
      }
      this.jFrame.offset(off0);
      return element ? element : this.elementFromPoint(p);
    };

    DocMouseSimulator.prototype.simulate = function simulate(e, doc, x, y) {
      var p = this.convertCoords(x, y),
          element = doc === this.doc ? this.getElement(p) : undefined;
      var trigger = element !== undefined,
          notify = false;

      switch (e.type) {
        case 'mousedown':
          {
            if (this.capElement) {
              this.deactivateElement(this.capElement);
              notify = true;
            }
            this.capElement = element;
            if (this.capElement) {
              this.activateElement(this.capElement);
              notify = true;
            }
            break;
          }
        case 'mouseup':
          {
            if (this.capElement) {
              this.deactivateElement(this.capElement);
              notify = true;
            }
            this.timeStamp = e.timeStamp;
            break;
          }
        case 'click':
          {
            trigger = element && this.capElement === element && e.timeStamp === this.timeStamp;
            this.capElement = undefined;
            break;
          }
        case 'mouseenter':
        case 'mouseover':
        case 'mousemove':
          {
            var leaved = null;
            if (this.hovElement !== element && this.hovElement) {
              this.triggerEvent(this.hovElement, e, p, 'mouseout', { relatedTarget: element ? element : null });
              this.leaveElement(this.hovElement);
              leaved = this.hovElement;
              this.hovElement = undefined;
              notify = true;
            }
            if (!this.hovElement && element) {
              this.triggerEvent(element, e, p, 'mouseover', { relatedTarget: leaved });
              this.enterElement(element);
              this.hovElement = element;
              notify = true;
            }
            trigger = element && e.type === 'mousemove';
            break;
          }
        case 'mouseleave':
        case 'mouseout':
          {
            if (this.hovElement) {
              this.triggerEvent(this.hovElement, e, p, 'mouseout', { relatedTarget: e.relatedTarget });
              this.leaveElement(this.hovElement);
              this.hovElement = undefined;
              notify = true;
            }
            trigger = false;
            break;
          }
      }
      if (trigger) {
        this.triggerEvent(element, e, p, e.type);
      }
      if (notify) {
        this.notify();
      }
    };

    DocMouseSimulator.prototype.getDefaultUndefinedProperties = function getDefaultUndefinedProperties() {
      return ['clientX', 'clientY', 'offsetX', 'offsetY', 'screenX', 'screenY'];
    };

    DocMouseSimulator.prototype.getDefaultResendProperties = function getDefaultResendProperties() {
      return ['altKey', 'bubbles', 'button', 'buttons', 'cancelable', 'changedTouches', 'char', 'charCode', 'ctrlKey', 'data', 'detail', 'eventPhase', 'isDefaultPrevented', 'key', 'keyCode', 'metaKey', 'pointerId', 'pointerType', 'shiftKey', 'targetTouches', 'touches', 'which'];
    };

    return DocMouseSimulator;
  }();

  /*
  altKey,
  bubbles,
  button,
  buttons,
  cancelable,
  changedTouches,
  char,
  charCode,
  clientX,
  clientY,
  ctrlKey,
  currentTarget,
  data,
  delegateTarget,
  detail,
  eventPhase,
  handleObj,
  isDefaultPrevented,
  key,
  keyCode,
  metaKey,
  offsetX,
  offsetY,
  originalEvent,
  pageX,
  pageY,
  pointerId,
  pointerType,
  relatedTarget,
  screenX,
  screenY,
  shiftKey,
  target,
  targetTouches,
  timeStamp,
  toElement,
  touches,
  type,
  view,
  which
  */

  DocMouseSimulator.HOVER = 'SIMULATED-HOVER';
  DocMouseSimulator.ACTIVE = 'SIMULATED-ACTIVE';
  exports.default = DocMouseSimulator;

  /***/
},
/* 47 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Dom2Image = function Dom2Image(wnd, doc, cache) {
    _classCallCheck(this, Dom2Image);

    var self = this;
    this.window = wnd;
    this.document = doc;
    this.cache = cache;

    var util = newUtil();
    var inliner = newInliner();
    var fontFaces = newFontFaces();
    var images = newImages();

    this.toSvg = toSvg;
    this.toPng = toPng;
    this.toJpeg = toJpeg;
    this.toBlob = toBlob;
    this.toPixelData = toPixelData;
    this.impl = {
      fontFaces: fontFaces,
      images: images,
      util: util,
      inliner: inliner
    };

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options
     * @param {Function} options.filter - Should return true if passed node should be included in the output
     *          (excluding node means excluding it's children as well). Not called on the root node.
     * @param {String} options.bgcolor - color for the background, any valid CSS color value.
     * @param {Number} options.width - width to be applied to node before rendering.
     * @param {Number} options.height - height to be applied to node before rendering.
     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.
     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),
                defaults to 1.0.
     * @return {Promise} - A promise that is fulfilled with a SVG image data URL
     * */

    function toSvg(node, options) {
      options = options || {};
      return Promise.resolve(node).then(function (node) {
        return cloneNode(node, options.filter, true);
      }).then(embedFonts).then(inlineImages).then(applyOptions).then(function (clone) {
        return makeSvgDataUri(clone, options.width || util.width(node), options.height || util.height(node));
      });

      function applyOptions(clone) {
        if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;

        if (options.width) clone.style.width = options.width + 'px';
        if (options.height) clone.style.height = options.height + 'px';

        if (options.style) self.window.Object.keys(options.style).forEach(function (property) {
          clone.style[property] = options.style[property];
        });

        return clone;
      }
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.
     * */
    function toPixelData(node, options) {
      return draw(node, options || {}).then(function (canvas) {
        return canvas.getContext('2d').getImageData(0, 0, util.width(node), util.height(node)).data;
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a PNG image data URL
     * */
    function toPng(node, options) {
      return draw(node, options || {}).then(function (canvas) {
        return canvas.toDataURL();
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL
     * */
    function toJpeg(node, options) {
      options = options || {};
      return draw(node, options).then(function (canvas) {
        return canvas.toDataURL('image/jpeg', options.quality || 1.0);
      });
    }

    /**
     * @param {Node} node - The DOM Node object to render
     * @param {Object} options - Rendering options, @see {@link toSvg}
     * @return {Promise} - A promise that is fulfilled with a PNG image blob
     * */
    function toBlob(node, options) {
      return draw(node, options || {}).then(util.canvasToBlob);
    }

    function draw(domNode, options) {
      return toSvg(domNode, options).then(util.makeImage).then(util.delay(100)).then(function (image) {
        var canvas = newCanvas(domNode);
        canvas.getContext('2d').drawImage(image, 0, 0);
        return canvas;
      });

      function newCanvas(domNode) {
        var canvas = self.document.createElement('canvas');
        canvas.width = options.width || util.width(domNode);
        canvas.height = options.height || util.height(domNode);

        if (options.bgcolor) {
          var ctx = canvas.getContext('2d');
          ctx.fillStyle = options.bgcolor;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        return canvas;
      }
    }

    function cloneNode(node, filter, root) {
      if (!root && filter && !filter(node)) return Promise.resolve();

      return Promise.resolve(node).then(makeNodeCopy).then(function (clone) {
        return cloneChildren(node, clone, filter);
      }).then(function (clone) {
        return processClone(node, clone);
      });

      function makeNodeCopy(node) {
        if (util.isCanvas(node)) return util.makeImage(node.toDataURL());
        return node.cloneNode(false);
      }

      function cloneChildren(original, clone, filter) {
        var children = original.childNodes;
        if (children.length === 0) return Promise.resolve(clone);

        return cloneChildrenInOrder(clone, util.asArray(children), filter).then(function () {
          return clone;
        });

        function cloneChildrenInOrder(parent, children, filter) {
          var done = Promise.resolve();
          children.forEach(function (child) {
            done = done.then(function () {
              return cloneNode(child, filter);
            }).then(function (childClone) {
              if (childClone) parent.appendChild(childClone);
            });
          });
          return done;
        }
      }

      function processClone(original, clone) {
        if (!util.isElement(clone)) return clone;

        return Promise.resolve().then(cloneStyle).then(clonePseudoElements).then(copyUserInput).then(fixSvg).then(function () {
          return clone;
        });

        function cloneStyle() {
          copyStyle(self.window.getComputedStyle(original), clone.style);

          function copyStyle(source, target) {
            if (source.cssText) target.cssText = source.cssText;else copyProperties(source, target);

            function copyProperties(source, target) {
              util.asArray(source).forEach(function (name) {
                target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));
              });
            }
          }
        }

        function clonePseudoElements() {
          [':before', ':after'].forEach(function (element) {
            clonePseudoElement(element);
          });

          function clonePseudoElement(element) {
            var style = self.window.getComputedStyle(original, element);
            var content = style.getPropertyValue('content');

            if (content === '' || content === 'none') return;

            var className = util.uid();
            clone.className = clone.className + ' ' + className;
            var styleElement = self.document.createElement('style');
            styleElement.appendChild(formatPseudoElementStyle(className, element, style));
            clone.appendChild(styleElement);

            function formatPseudoElementStyle(className, element, style) {
              var selector = '.' + className + ':' + element;
              var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);
              return self.document.createTextNode(selector + '{' + cssText + '}');

              function formatCssText(style) {
                var content = style.getPropertyValue('content');
                return style.cssText + ' content: ' + content + ';';
              }

              function formatCssProperties(style) {

                return util.asArray(style).map(formatProperty).join('; ') + ';';

                function formatProperty(name) {
                  return name + ': ' + style.getPropertyValue(name) + (style.getPropertyPriority(name) ? ' !important' : '');
                }
              }
            }
          }
        }

        function copyUserInput() {
          if (util.isTextArea(original)) clone.innerHTML = original.value;
          if (util.isInput(original)) clone.setAttribute("value", original.value);
        }

        function fixSvg() {
          if (!util.isSVG(clone)) return;
          clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');

          if (!util.isSVGRect(clone)) return;
          ['width', 'height'].forEach(function (attribute) {
            var value = clone.getAttribute(attribute);
            if (!value) return;

            clone.style.setProperty(attribute, value);
          });
        }
      }
    }

    function embedFonts(node) {
      return fontFaces.resolveAll().then(function (cssText) {
        var styleNode = self.document.createElement('style');
        node.appendChild(styleNode);
        styleNode.appendChild(self.document.createTextNode(cssText));
        return node;
      });
    }

    function inlineImages(node) {
      return images.inlineAll(node).then(function () {
        return node;
      });
    }

    function makeSvgDataUri(node, width, height) {
      return Promise.resolve(node).then(function (node) {
        node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');
        return new self.window.XMLSerializer().serializeToString(node);
      }).then(util.escapeXhtml).then(function (xhtml) {
        return ['data:image/svg+xml;charset=utf-8,', '<svg xmlns="http://www.w3.org/2000/svg" width="', width, '" height="', height, '">', '<foreignObject x="0" y="0" width="100%" height="100%">', xhtml, '</foreignObject>', '</svg>'].join('');
      });
    }

    function newUtil() {
      return {
        escape: escape,
        parseExtension: parseExtension,
        mimeType: mimeType,
        dataAsUrl: dataAsUrl,
        isDataUrl: isDataUrl,
        canvasToBlob: canvasToBlob,
        resolveUrl: resolveUrl,
        getAndEncode: getAndEncode,
        uid: uid(),
        delay: delay,
        asArray: asArray,
        escapeXhtml: escapeXhtml,
        makeImage: makeImage,
        width: width,
        height: height,

        isElement: isElement,
        isCanvas: isCanvas,
        isTextArea: isTextArea,
        isInput: isInput,
        isSVG: isSVG,
        isSVGRect: isSVGRect,
        isImage: isImage
      };

      function mimes() {
        /*
         * Only WOFF and EOT mime types for fonts are 'real'
         * see http://www.iana.org/assignments/media-types/media-types.xhtml
         */
        var WOFF = 'application/font-woff';
        var JPEG = 'image/jpeg';

        return {
          'woff': WOFF,
          'woff2': WOFF,
          'ttf': 'application/font-truetype',
          'eot': 'application/vnd.ms-fontobject',
          'png': 'image/png',
          'jpg': JPEG,
          'jpeg': JPEG,
          'gif': 'image/gif',
          'tiff': 'image/tiff',
          'svg': 'image/svg+xml'
        };
      }

      function parseExtension(url) {
        var match = /\.([^\.\/]*?)$/g.exec(url);
        if (match) return match[1];else return '';
      }

      function mimeType(url) {
        var extension = parseExtension(url).toLowerCase();
        return mimes()[extension] || '';
      }

      function isDataUrl(url) {
        return url.search(/^(data:)/) !== -1;
      }

      function toBlob(canvas) {
        return new Promise(function (resolve) {
          var binaryString = self.window.atob(canvas.toDataURL().split(',')[1]);
          var length = binaryString.length;
          var binaryArray = new self.window.Uint8Array(length);

          for (var i = 0; i < length; i++) {
            binaryArray[i] = binaryString.charCodeAt(i);
          }resolve(new self.window.Blob([binaryArray], {
            type: 'image/png'
          }));
        });
      }

      function canvasToBlob(canvas) {
        if (canvas.toBlob) return new Promise(function (resolve) {
          canvas.toBlob(resolve);
        });

        return toBlob(canvas);
      }

      function resolveUrl(url, baseUrl) {
        var doc = self.document.implementation.createHTMLDocument();
        var base = doc.createElement('base');
        doc.head.appendChild(base);
        var a = doc.createElement('a');
        doc.body.appendChild(a);
        base.href = baseUrl;
        a.href = url;
        return a.href;
      }

      function uid() {
        var index = 0;

        return function () {
          return 'u' + fourRandomChars() + index++;

          function fourRandomChars() {
            /* see http://stackoverflow.com/a/6248722/2519373 */
            return ('0000' + (self.window.Math.random() * self.window.Math.pow(36, 4) << 0).toString(36)).slice(-4);
          }
        };
      }

      function makeImage(uri) {
        return new Promise(function (resolve, reject) {
          var image = new self.window.Image();
          image.onload = function () {
            resolve(image);
          };
          image.onerror = reject;
          image.src = uri;
        });
      }

      function getAndEncode(url) {
        var data = self.cache.get(url);
        if (data) {
          if (data.content) {
            return data.content;
          } else {
            return new Promise(function (resolve) {
              if (data.content) {
                resolve(data.content);
              } else {
                data.pendings.push(resolve);
              }
            });
          }
        } else {
          data = self.cache.put(url, { pendings: [] });

          var TIMEOUT = 30000;

          return new Promise(function (resolve) {
            var request = new self.window.XMLHttpRequest();

            request.onreadystatechange = done;
            request.ontimeout = timeout;
            request.responseType = 'blob';
            request.timeout = TIMEOUT;
            request.open('GET', url, true);
            request.send();

            function done() {
              if (request.readyState !== 4) return;

              if (request.status !== 200) {
                fail('cannot fetch resource: ' + url + ', status: ' + request.status);
                return;
              }

              var encoder = new self.window.FileReader();
              encoder.onloadend = function () {
                data.content = encoder.result.split(/,/)[1];
                for (var _iterator = data.pendings, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
                  var _ref;

                  if (_isArray) {
                    if (_i >= _iterator.length) break;
                    _ref = _iterator[_i++];
                  } else {
                    _i = _iterator.next();
                    if (_i.done) break;
                    _ref = _i.value;
                  }

                  var _resolve = _ref;

                  _resolve(data.content);
                }
                data.pendings = [];
                resolve(data.content);
              };
              encoder.readAsDataURL(request.response);
            }

            function timeout() {
              fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);
            }

            function fail(message) {
              console.error(message);
              resolve('');
            }
          });
        }
      }

      function dataAsUrl(content, type) {
        return ['data:', type, ';base64,', content].join('');
      }

      function escape(string) {
        return string.replace(/([.*+?^${}()|\[\]\/\\])/g, '\\$1');
      }

      function delay(ms) {
        return function (arg) {
          return new Promise(function (resolve) {
            setTimeout(function () {
              resolve(arg);
            }, ms);
          });
        };
      }

      function asArray(arrayLike) {
        var array = [];
        var length = arrayLike.length;
        for (var i = 0; i < length; i++) {
          array.push(arrayLike[i]);
        }return array;
      }

      function escapeXhtml(string) {
        return string.replace(/(#|\n)/g, function (c) {
          return c === '#' ? '%23' : '%0A';
        });
      }

      function width(node) {
        var leftBorder = px(node, 'border-left-width');
        var rightBorder = px(node, 'border-right-width');
        return node.scrollWidth + leftBorder + rightBorder;
      }

      function height(node) {
        var topBorder = px(node, 'border-top-width');
        var bottomBorder = px(node, 'border-bottom-width');
        return node.scrollHeight + topBorder + bottomBorder;
      }

      function px(node, styleProperty) {
        var value = self.window.getComputedStyle(node).getPropertyValue(styleProperty);
        return parseFloat(value.replace('px', ''));
      }

      function isElement(node) {
        return node instanceof self.window.Element;
      }

      function isCanvas(node) {
        return node instanceof self.window.HTMLCanvasElement;
      }

      function isTextArea(node) {
        return node instanceof self.window.HTMLTextAreaElement;
      }

      function isInput(node) {
        return node instanceof self.window.HTMLInputElement;
      }

      function isSVG(node) {
        return node instanceof self.window.SVGElement;
      }

      function isSVGRect(node) {
        return node instanceof self.window.SVGRectElement;
      }

      function isImage(node) {
        return node instanceof self.window.HTMLImageElement;
      }
    }

    function newInliner() {
      var URL_REGEX = /url\(['"]?([^'"]+?)['"]?\)/g;

      return {
        inlineAll: inlineAll,
        shouldProcess: shouldProcess,
        impl: {
          readUrls: readUrls,
          inline: inline
        }
      };

      function shouldProcess(string) {
        return string.search(URL_REGEX) !== -1;
      }

      function readUrls(string) {
        var result = [];
        var match = void 0;
        while ((match = URL_REGEX.exec(string)) !== null) {
          result.push(match[1]);
        }
        return result.filter(function (url) {
          return !util.isDataUrl(url);
        });
      }

      function inline(string, url, baseUrl, get) {
        return Promise.resolve(url).then(function (url) {
          return baseUrl ? util.resolveUrl(url, baseUrl) : url;
        }).then(get || util.getAndEncode).then(function (data) {
          return util.dataAsUrl(data, util.mimeType(url));
        }).then(function (dataUrl) {
          return string.replace(urlAsRegex(url), ['$1', dataUrl, '$3'].join(''));
        });

        function urlAsRegex(url) {
          return new self.window.RegExp(['(url\\([\'"]?)(', util.escape(url), ')([\'"]?\\))'].join(''), 'g');
        }
      }

      function inlineAll(string, baseUrl, get) {
        if (nothingToInline()) return Promise.resolve(string);

        return Promise.resolve(string).then(readUrls).then(function (urls) {
          var done = Promise.resolve(string);
          urls.forEach(function (url) {
            done = done.then(function (string) {
              return inline(string, url, baseUrl, get);
            });
          });
          return done;
        });

        function nothingToInline() {
          return !shouldProcess(string);
        }
      }
    }

    function newFontFaces() {
      return {
        resolveAll: resolveAll,
        impl: {
          readAll: readAll
        }
      };

      function resolveAll() {
        return readAll(self.document).then(function (webFonts) {
          return Promise.all(webFonts.map(function (webFont) {
            return webFont.resolve();
          }));
        }).then(function (cssStrings) {
          return cssStrings.join('\n');
        });
      }

      function readAll() {
        return Promise.resolve(util.asArray(self.document.styleSheets)).then(getCssRules).then(selectWebFontRules).then(function (rules) {
          return rules.map(newWebFont);
        });

        function selectWebFontRules(cssRules) {
          return cssRules.filter(function (rule) {
            return rule.type === CSSRule.FONT_FACE_RULE;
          }).filter(function (rule) {
            return inliner.shouldProcess(rule.style.getPropertyValue('src'));
          });
        }

        function getCssRules(styleSheets) {
          var cssRules = [];
          styleSheets.forEach(function (sheet) {
            try {
              util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));
            } catch (e) {
              console.log('Error while reading CSS rules from ' + sheet.href, e.toString());
            }
          });
          return cssRules;
        }

        function newWebFont(webFontRule) {
          return {
            resolve: function resolve() {
              var baseUrl = (webFontRule.parentStyleSheet || {}).href;
              return inliner.inlineAll(webFontRule.cssText, baseUrl);
            },
            src: function src() {
              return webFontRule.style.getPropertyValue('src');
            }
          };
        }
      }
    }

    function newImages() {
      return {
        inlineAll: inlineAll,
        impl: {
          newImage: newImage
        }
      };

      function newImage(element) {
        return {
          inline: inline
        };

        function inline(get) {
          if (util.isDataUrl(element.src)) return Promise.resolve();

          return Promise.resolve(element.src).then(get || util.getAndEncode).then(function (data) {
            return util.dataAsUrl(data, util.mimeType(element.src));
          }).then(function (dataUrl) {
            return new Promise(function (resolve, reject) {
              element.onload = resolve;
              element.onerror = reject;
              element.src = dataUrl;
            });
          });
        }
      }

      function inlineAll(node) {
        if (!util.isElement(node)) return Promise.resolve(node);

        return inlineBackground(node).then(function () {
          if (util.isImage(node)) return newImage(node).inline();else return Promise.all(util.asArray(node.childNodes).map(function (child) {
            return inlineAll(child);
          }));
        });

        function inlineBackground(node) {
          var background = node.style.getPropertyValue('background');

          if (!background) return Promise.resolve(node);

          return inliner.inlineAll(background).then(function (inlined) {
            node.style.setProperty('background', inlined, node.style.getPropertyPriority('background'));
          }).then(function () {
            return node;
          });
        }
      }
    }
  };

  exports.default = Dom2Image;

  /***/
},
/* 48 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Drag = function () {
    function Drag(wnd, doc, visualWorld) {
      _classCallCheck(this, Drag);

      this.wnd = wnd;
      this.doc = doc;
      this.visual = visualWorld;
      this.coords = new _libs.THREE.Vector2();
      this.intersection = new _libs.THREE.Vector3();
      this.raycaster = this.visual.raycaster;
      this.camera = this.visual.camera;
      this.plane = new _libs.THREE.Plane();
      this.threes = [];
      this.selected = null;
      this.enabled = true;
      this.controlsState = this.visual.getControlsState();

      this.element = this.visual.element;
      this.binds = {
        onMouseMove: this.onMouseMove.bind(this),
        onMouseDown: this.onMouseDown.bind(this),
        onMouseUp: this.onMouseUp.bind(this)
      };
      (0, _libs.$)(this.element).on('mousemove', this.binds.onMouseMove);
      (0, _libs.$)(this.element).on('mousedown', this.binds.onMouseDown);
      (0, _libs.$)(this.doc).on('mouseup', this.binds.onMouseUp);
    }

    Drag.prototype.addThree = function addThree(three) {
      this.threes.push(three);
    };

    Drag.prototype.removeThree = function removeThree(three) {
      var i = this.threes.indexOf(three);
      if (~i) {
        this.threes.splice(i, 1);
      }
    };

    Drag.prototype.onPickCallback = function onPickCallback() {
      return true;
    };

    Drag.prototype.onDragCallback = function onDragCallback() {
      return true;
    };

    Drag.prototype.onReleaseCallback = function onReleaseCallback() {};

    Drag.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('mousemove', this.binds.onMouseMove);
      (0, _libs.$)(this.element).off('mousedown', this.binds.onMouseDown);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.onMouseUp);
    };

    Drag.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    Drag.prototype.onMouseDown = function onMouseDown(e) {
      if (!this.enabled) return;

      if (this.selected) this.onMouseUp(e);

      this.setCoordsFromEvent(e);
      this.raycaster.setFromCamera(this.coords, this.camera);

      var intersects = this.raycaster.intersectObjects(this.threes);
      if (intersects.length > 0) {
        var selected = intersects[0].object;
        if (!this.onPickCallback(intersects[0])) return;
        var v = intersects[0].point.clone();
        this.distance = v.sub(this.raycaster.ray.origin).length();;
        this.controlsState = this.visual.getControlsState();
        this.visual.setControlsState(false);
        this.plane.setFromNormalAndCoplanarPoint(this.visual.camera.getWorldDirection(this.plane.normal), intersects[0].point);
        //this.plane.setFromNormalAndCoplanarPoint(this.plane.normal.set(0,0,1), new THREE.Vector3(0,0,0));
        this.selected = selected;
      }
    };

    Drag.prototype.onMouseMove = function onMouseMove(e) {
      if (!this.enabled) return;
      e.preventDefault();

      if (this.selected) {
        this.setCoordsFromEvent(e);
        this.raycaster.setFromCamera(this.coords, this.camera);
        if (this.raycaster.ray.intersectPlane(this.plane, this.intersection)) {
          if (!this.onDragCallback(this.intersection)) this.onMouseUp(e);
        } /**/
        //this.intersection.copy(this.raycaster.ray.direction).normalize().multiplyScalar(this.distance).add(this.raycaster.ray.origin);/**/
        //if(!this.onDragCallback(this.selected, this.intersection)) this.onMouseUp(e);
      }
    };

    Drag.prototype.onMouseUp = function onMouseUp(e) {
      if (this.selected) {
        this.onReleaseCallback();
        this.selected = null;
        this.visual.setControlsState(this.controlsState);
      }
      if (!this.enabled) return;
      e.preventDefault();
    };

    return Drag;
  }();

  exports.default = Drag;

  /***/
},
/* 49 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  __webpack_require__(71)(_libs.$);

  var EventsToActions = function () {
    EventsToActions.getEventFlags = function getEventFlags(e) {
      return e.ctrlKey << 0 | e.shiftKey << 1 | e.altKey << 2;
    };

    EventsToActions.getPosition = function getPosition(touches) {
      var x = void 0,
          y = void 0;
      if (touches.length === 2) {
        x = touches[1].pageX - touches[0].pageX;
        y = touches[1].pageY - touches[0].pageY;
        y = -Math.sqrt(x * x + y * y);
        x = 0;
      } else {
        x = touches[0].pageX;
        y = touches[0].pageY;
      }
      return {
        x: x,
        y: y
      };
    };

    function EventsToActions(element, actions) {
      _classCallCheck(this, EventsToActions);

      this.actions = actions || {};
      this.element = element;
      this.doc = element[0].ownerDocument;
      this.wnd = this.doc.defaultView;
      this.enabled = true;

      this.binds = {
        contextMenu: this.contextMenu.bind(this),

        mouseDown: this.mouseDown.bind(this),
        mouseMove: this.mouseMove.bind(this),
        mouseUp: this.mouseUp.bind(this),
        mouseWheel: this.mouseWheel.bind(this),

        mouseMoveDoc: this.mouseMoveDoc.bind(this),
        mouseUpDoc: this.mouseUpDoc.bind(this),

        click: this.click.bind(this),
        dblclick: this.dblclick.bind(this),

        touchStart: this.touchStart.bind(this),
        touchMove: this.touchMove.bind(this),
        touchEnd: this.touchEnd.bind(this),

        keyDown: this.keyDown.bind(this),
        keyPress: this.keyPress.bind(this),
        keyUp: this.keyUp.bind(this)
      };

      this.element.on('contextmenu', this.binds.contextMenu);

      this.element.on('mousedown', this.binds.mouseDown);
      this.element.on('mousemove', this.binds.mouseMove);
      this.element.on('mouseup', this.binds.mouseUp);
      this.element.on('mousewheel', this.binds.mouseWheel);

      (0, _libs.$)(this.doc).on('mousemove', this.binds.mouseMoveDoc);
      (0, _libs.$)(this.doc).on('mouseup', this.binds.mouseUpDoc);

      this.element.on('click', this.binds.click);
      this.element.on('dblclick', this.binds.dblclick);

      this.element.on('touchstart', this.binds.touchStart);
      this.element.on('touchmove', this.binds.touchMove);
      this.element.on('touchend', this.binds.touchEnd);

      (0, _libs.$)(this.wnd).on('keydown', this.binds.keyDown);
      (0, _libs.$)(this.wnd).on('keypress', this.binds.keyPress);
      (0, _libs.$)(this.wnd).on('keyup', this.binds.keyUp);
    }

    EventsToActions.prototype.addAction = function addAction(action, type, code, flags) {
      type = type.toLowerCase();
      if (!this.actions[type]) {
        this.actions[type] = {};
      }
      if (!this.actions[type][code]) {
        this.actions[type][code] = {};
      }
      if (!this.actions[type][code][flags]) {
        this.actions[type][code][flags] = [];
      }
      this.actions[type][code][flags].push(action);
    };

    EventsToActions.prototype.getActions = function getActions(type, code, flags) {
      return ((this.actions[type] || {})[code] || {})[flags] || [];
    };

    EventsToActions.prototype.fireActions = function fireActions(actions, e, data) {
      for (var _iterator = actions, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var action = _ref;

        action(e, data);
      }
    };

    EventsToActions.prototype.contextMenu = function contextMenu(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('contextmenu', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseDown = function mouseDown(e) {
      if (this.picked) {
        this.mouseUpDoc();
      }
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousedown', e.button, flags), e);
        this.picked = {
          x: e.pageX,
          y: e.pageY,
          actions: this.getActions('mousedrag', e.button, flags)
        };
        this.fireActions(this.picked.actions, e, {
          state: 'start'
        });
      }
    };

    EventsToActions.prototype.mouseMove = function mouseMove(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousemove', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseMoveDoc = function mouseMoveDoc(e) {
      if (this.enabled && this.picked) {
        this.fireActions(this.picked.actions, e, {
          state: 'move',
          dx: e.pageX - this.picked.x,
          dy: e.pageY - this.picked.y
        });
        this.picked = {
          x: e.pageX,
          y: e.pageY,
          actions: this.picked.actions
        };
      }
    };

    EventsToActions.prototype.mouseUp = function mouseUp(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mouseup', e.button, flags), e);
      }
    };

    EventsToActions.prototype.mouseUpDoc = function mouseUpDoc(e) {
      if (this.picked) {
        this.fireActions(this.picked.actions, e, {
          state: 'end'
        });
        delete this.picked;
      }
    };

    EventsToActions.prototype.mouseWheel = function mouseWheel(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions('mousewheel', 0, flags), e);
      }
    };

    EventsToActions.prototype.clicks = function clicks(e, type) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions(type, e.button, flags), e);
      }
    };

    EventsToActions.prototype.click = function click(e) {
      this.clicks(e, 'click');
    };

    EventsToActions.prototype.dblclick = function dblclick(e) {
      this.clicks(e, 'dblclick');
    };

    EventsToActions.prototype.touchPick = function touchPick(e, flags, touches) {
      this.touchPicked = _extends({}, EventsToActions.getPosition(touches), {
        actions: this.getActions('touchdrag', touches.length, flags),
        code: touches.length,
        flags: flags
      });
      this.fireActions(this.touchPicked.actions, e, {
        state: 'start'
      });
    };

    EventsToActions.prototype.touchStart = function touchStart(e) {
      if (this.touchPicked) {
        this.touchEnd(e);
      }
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e),
            touches = e.touches || e.originalEvent.touches;
        this.fireActions(this.getActions('touchstart', touches.length, flags), e);
        this.touchPick(e, flags, touches);
      }
    };

    EventsToActions.prototype.touchMove = function touchMove(e) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e),
            touches = e.touches || e.originalEvent.touches;
        this.fireActions(this.getActions('touchmove', touches.length, flags), e);
        if (this.touchPicked) {
          if (this.touchPicked.code === touches.length && this.touchPicked.flags === flags) {
            var pos = EventsToActions.getPosition(touches);
            this.fireActions(this.touchPicked.actions, e, {
              state: 'move',
              dx: pos.x - this.touchPicked.x,
              dy: pos.y - this.touchPicked.y
            });
            this.touchPicked = _extends({}, this.touchPicked, pos);
          } else {
            this.touchEnd(e);
            this.touchPick(e, flags, touches);
          }
        }
      }
    };

    EventsToActions.prototype.touchEnd = function touchEnd(e) {
      if (this.touchPicked) {
        this.fireActions(this.touchPicked.actions, e, {
          state: 'end'
        });
        delete this.touchPicked;
      }
    };

    EventsToActions.prototype.key = function key(e, type) {
      if (this.enabled) {
        var flags = EventsToActions.getEventFlags(e);
        this.fireActions(this.getActions(type, e.keyCode, flags), e);
      }
    };

    EventsToActions.prototype.keyDown = function keyDown(e) {
      this.key(e, 'keydown');
    };

    EventsToActions.prototype.keyPress = function keyPress(e) {
      this.key(e, 'keypress');
    };

    EventsToActions.prototype.keyUp = function keyUp(e) {
      this.key(e, 'keyup');
    };

    EventsToActions.prototype.dispose = function dispose() {
      this.element.off('contextmenu', this.binds.contextMenu);

      this.element.off('mousedown', this.binds.mouseDown);
      this.element.off('mousemove', this.binds.mouseMove);
      this.element.off('mouseup', this.binds.mouseUp);
      this.element.off('mousewheel', this.binds.mouseWheel);

      (0, _libs.$)(this.doc).off('mousemove', this.binds.mouseMoveDoc);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.mouseUpDoc);

      this.element.off('click', this.binds.click);
      this.element.off('dblclick', this.binds.dblclick);

      this.element.off('touchstart', this.binds.touchStart);
      this.element.off('touchmove', this.binds.touchMove);
      this.element.off('touchend', this.binds.touchEnd);

      (0, _libs.$)(this.wnd).off('keydown', this.binds.keyDown);
      (0, _libs.$)(this.wnd).off('keypress', this.binds.keyPress);
      (0, _libs.$)(this.wnd).off('keyup', this.binds.keyUp);
    };

    return EventsToActions;
  }();

  EventsToActions.modKeys = {
    Ctrl: 1,
    Shift: 2,
    Alt: 4
  };
  EventsToActions.mouseButtons = {
    Left: 0,
    Middle: 1,
    Right: 2
  };
  exports.default = EventsToActions;

  /***/
},
/* 50 */
/***/function (module, exports) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var FullScreen = function () {
    function FullScreen() {
      _classCallCheck(this, FullScreen);
    }

    FullScreen.available = function available() {
      return FullScreen._hasWebkitFullScreen || FullScreen._hasMozFullScreen || FullScreen._hasMsFullscreen;
    };

    FullScreen.activated = function activated() {
      if (FullScreen._hasWebkitFullScreen) {
        return document.webkitIsFullScreen;
      } else if (FullScreen._hasMozFullScreen) {
        return document.mozFullScreen;
      } else if (FullScreen._hasMsFullscreen) {
        return !!document.msFullscreenElement;
      } else {
        console.assert(false);
      }
    };

    FullScreen.addEventListener = function addEventListener(element, handler) {
      if (element.addEventListener) {
        element.addEventListener('webkitfullscreenchange', handler, false);
        element.addEventListener('mozfullscreenchange', handler, false);
        element.addEventListener('fullscreenchange', handler, false);
        element.addEventListener('MSFullscreenChange', handler, false);
      }
    };

    FullScreen.removeEventListener = function removeEventListener(element, handler) {
      if (element.removeEventListener) {
        element.removeEventListener('webkitfullscreenchange', handler, false);
        element.removeEventListener('mozfullscreenchange', handler, false);
        element.removeEventListener('fullscreenchange', handler, false);
        element.removeEventListener('MSFullscreenChange', handler, false);
      }
    };

    FullScreen.request = function request(element) {
      element = element || document.body;
      if (FullScreen._hasWebkitFullScreen) {
        element.webkitRequestFullScreen();
      } else if (FullScreen._hasMozFullScreen) {
        element.mozRequestFullScreen();
      } else if (FullScreen._hasMsFullscreen) {
        element.msRequestFullscreen();
      } else {
        console.assert(false);
      }
    };

    FullScreen.cancel = function cancel() {
      if (FullScreen._hasWebkitFullScreen) {
        document.webkitCancelFullScreen();
      } else if (FullScreen._hasMozFullScreen) {
        document.mozCancelFullScreen();
      } else if (FullScreen._hasMsFullscreen) {
        document.msExitFullscreen();
      } else {
        console.assert(false);
      }
    };

    return FullScreen;
  }();

  FullScreen._hasWebkitFullScreen = !!document.webkitCancelFullScreen;
  FullScreen._hasMozFullScreen = !!document.mozCancelFullScreen;
  FullScreen._hasMsFullscreen = !!document.documentElement.msRequestFullscreen;
  exports.default = FullScreen;

  /***/
},
/* 51 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _Dom2Image = __webpack_require__(47);

  var _Dom2Image2 = _interopRequireDefault(_Dom2Image);

  var _DocMouseSimulator = __webpack_require__(46);

  var _DocMouseSimulator2 = _interopRequireDefault(_DocMouseSimulator);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var InteractiveImage = function (_ImageBase) {
    _inherits(InteractiveImage, _ImageBase);

    function InteractiveImage(context, width, height, color, src, cache, injector) {
      _classCallCheck(this, InteractiveImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.iId = 'i' + _BaseMathUtils2.default.getUnique();
      var jFrame = (0, _libs.$)('<iframe id="' + _this.iId + '" src="' + src + '" style="position: fixed; left: -1000px;"></iframe>');
      (0, _libs.$)(_this.doc.body).append(jFrame);
      _this.frame = jFrame[0];

      _this.binds = {};

      if (injector) {
        injector(_this.frame.contentWindow);
      }

      if (_this.doc.implementation.hasFeature('www.http://w3.org/TR/SVG11/feature#Extensibility', '1.1')) {
        // svg foreignObject renderer
        _this.image = new Image();
        _this.binds.imageLoad = function () {
          _this.renderImage(_this.image);
          _this.finishRender();
        };
        (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad);
        _this.svgRender = new _Dom2Image2.default(_this.frame.contentWindow, _this.frame.contentDocument, cache);
      } // otherwise - html2canvas

      _this.binds.frameLoad = function () {
        if (~_this.frame.contentDocument.title.indexOf('404')) {
          _this.startRender = function () {
            _this.renderNotFoundPage();
            _this.finishRender();
          };
          _this.finishLoad();
        } else {
          setTimeout(function () {
            if (_this.frame) {
              _this.width = (0, _libs.$)(_this.frame.contentDocument.body).width();
              _this.height = (0, _libs.$)(_this.frame.contentDocument.body).height();
              jFrame.css('width', _this.width + 'px').css('height', _this.height + 'px');
              jFrame.offset({ left: -_this.width - 100, top: 0 });
              if (_this.svgRender) {
                _this.simulator = new _DocMouseSimulator2.default(jFrame, _this.frame.contentDocument.body, _this.element);
                _this.simulator.addDocChangeClb(_this.finishLoad.bind(_this));
              }
              _this.startRender = function () {
                _this.render();
              };
              _this.finishLoad();
            }
          }, 500);
        }
      };
      (0, _libs.$)(_this.frame.contentWindow).on('load', _this.binds.frameLoad);
      return _this;
    }

    InteractiveImage.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return this.frame.contentDocument;
    };

    InteractiveImage.prototype.render = function render() {
      var _this2 = this;

      if (this.svgRender) {
        this.svgRender.toSvg(this.simulator.element, { height: this.height + 'px', width: this.width + 'px' }).then(function (dataUrl) {
          _this2.image.src = dataUrl;
        }).catch(function (error) {
          console.error('Dom2Image: ', error);
          _this2.renderBlankPage();
          _this2.finishRender();
        });
      } else {
        (0, _libs.html2canvas)(this.frame.contentDocument.body, { timeout: 30000 }).then(function (canvas) {
          _this2.renderImage(canvas);
          _this2.finishRender();
        });
      }
    };

    InteractiveImage.prototype.dispose = function dispose() {
      (0, _libs.$)(this.image).off('load', this.binds.imageLoad);
      (0, _libs.$)(this.frame.contentWindow).off('load', this.binds.frameLoad);
      (0, _libs.$)(this.doc.body).find('#' + this.iId).remove();
      if (this.image) {
        this.image.src = '';
        delete this.image;
      }
      this.frame.src = '';
      delete this.frame;
      _ImageBase.prototype.dispose.call(this);
    };

    InteractiveImage.prototype.simulate = function simulate(e, doc, x, y) {
      if (this.simulator) {
        this.simulator.simulate(e, doc, x, y);
      }
    };

    return InteractiveImage;
  }(_ImageBase3.default);

  exports.default = InteractiveImage;

  /***/
},
/* 52 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _GraphUtils = __webpack_require__(7);

  var _GraphUtils2 = _interopRequireDefault(_GraphUtils);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var LoadingAnimation = function () {
    LoadingAnimation.prototype.dy = function dy(t, y) {
      var w = y[0],
          a = y[1];
      return [-this.g * Math.cos(a), w];
    };

    LoadingAnimation.prototype.integrate = function integrate(T) {
      var t = 0,
          dt = this.p.dt,
          os = this.os;
      while (t < T) {
        if (t + dt > T) {
          dt = T - t;
        }
        os = _MathUtils2.default.rk4(this.dy.bind({ g: this.p.g }), 0, dt, os);
        t += dt;
      }
      return os;
    };

    LoadingAnimation.prototype.calcTimeTo = function calcTimeTo(target) {
      var t = 0,
          dt = this.p.dt,
          os = this.os;
      while (Math.abs(os[1] - target) > 1e-4) {
        var nos = _MathUtils2.default.rk4(this.dy.bind({ g: this.p.g }), 0, dt, os);
        if (nos[0] < 0 && nos[1] < target || nos[0] > 0 && nos[1] > target) {
          dt /= 2;
        } else {
          os = nos;
          t += dt;
        }
      }
      return t;
    };

    LoadingAnimation.prototype.update = function update(T) {
      this.os = this.integrate(T);

      this.t += T;
      if (this.t >= this.p.updateInterval) {
        this.t = 0;
        var r = 0.06 * Math.min(this.c.width, this.c.height),
            a = this.os[1],
            x0 = 0.5 * this.c.width,
            y0 = 0.5 * this.c.height,
            ctx = this.ctx;

        ctx.clearRect(0, 0, this.c.width, this.c.height);
        ctx.beginPath();
        ctx.fillStyle = _GraphUtils2.default.color2Rgba(this.p.color, 1);
        ctx.rect(0, 0, this.c.width, this.c.height);
        ctx.fill();

        ctx.beginPath();
        ctx.shadowBlur = 50;
        ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 0.9), Math.abs(this.os[0] / 6.36));
        ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.9);
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = 0;
        ctx.font = 'bold ' + Math.round(0.25 * r) + 'px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText((0, _libs.tr)('Loading...'), x0, y0);

        var ps = 10,
            da = 2 * Math.PI / ps; //2.5*_r/r
        ctx.shadowColor = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, 1), 0.7);
        for (var i = 0, _a = a, _r = 0.2 * r; i < ps; ++i, _r *= 0.9, _a += da) {
          ctx.beginPath();
          ctx.fillStyle = _GraphUtils2.default.color2Rgba(_GraphUtils2.default.inverseColor(this.p.color, (ps - i) / ps), 0.7 * (ps - i) / ps);
          var cx = x0 + r * Math.cos(_a),
              cy = y0 - r * Math.sin(_a),
              nx = x0 + r * Math.cos(_a + da),
              ny = y0 - r * Math.sin(_a + da);
          ctx.shadowOffsetX = 0.2 * (nx - cx);
          ctx.shadowOffsetY = 0.2 * (ny - cy);
          ctx.arc(cx, cy, _r, 0, Math.PI * 2, 1);
          ctx.fill();
        }
        if (this.onChange) {
          this.onChange(this.c, this.p.color);
        }
      }
    };

    LoadingAnimation.prototype.getImage = function getImage() {
      return this.c;
    };

    LoadingAnimation.prototype.dispose = function dispose() {
      this.c.width = 0;
      this.c.height = 0;
      delete this.ctx;
      delete this.c;
    };

    LoadingAnimation.prototype.createSprite = function createSprite(n) {
      var c = (0, _libs.$)('<canvas width="' + this.c.width * n + '" height="' + this.c.height + '"></canvas>')[0],
          ctx = c.getContext('2d'),
          t = this.calcTimeTo(this.os[1] + Math.sign(this.os[0]) * 2 * Math.PI),
          dt = t / (n + 1);
      var updateInterval = this.p.updateInterval;

      this.p.updateInterval = 0;
      for (var i = 0; i < n; ++i) {
        this.update(dt);
        ctx.drawImage(this.c, i * this.c.width, 0);
      }
      this.p.updateInterval = updateInterval;
      return c;
    };

    function LoadingAnimation(width, height, color) {
      _classCallCheck(this, LoadingAnimation);

      var jC = (0, _libs.$)('<canvas width="' + width + '" height="' + height + '"></canvas>');
      this.c = jC[0];
      this.p = {
        g: 9.8,
        dt: 1 / 60,
        color: color,
        updateInterval: 0.25
      };
      this.ctx = this.c.getContext('2d');
      this.os = [-2, Math.PI / 2];
      this.t = this.p.updateInterval;
    }

    return LoadingAnimation;
  }();

  exports.default = LoadingAnimation;

  /***/
},
/* 53 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var LoadingController = function () {
    function LoadingController(view) {
      var showProgress = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var loadingMsg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;

      _classCallCheck(this, LoadingController);

      this.view = view;
      this.progress = 0;
      this.showProgress = showProgress;
      this.getLoadingMsg = loadingMsg || LoadingController.defaultLoadingMsg;
      this.updateView();
    }

    LoadingController.defaultLoadingMsg = function defaultLoadingMsg(progress) {
      return ['Please wait... the Application is Loading: ', progress, '%'].join('');
    };

    LoadingController.prototype.dispose = function dispose() {
      this.showProgress = false;
      this.updateView();
      delete this.view;
    };

    LoadingController.prototype.setProgress = function setProgress(v) {
      this.progress = v;
      this.updateView();
    };

    LoadingController.prototype.updateView = function updateView() {
      if (this.view) {

        this.view.setState('widLoadingProgress', {
          enable: true,
          visible: this.showProgress,
          active: false
        });

        this.view.setState('txtLoadingProgress', {
          value: this.getLoadingMsg(this.progress),
          visible: true
        });

        for (var _iterator = this.view.getLinks(), _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
          var _ref;

          if (_isArray) {
            if (_i >= _iterator.length) break;
            _ref = _iterator[_i++];
          } else {
            _i = _iterator.next();
            if (_i.done) break;
            _ref = _i.value;
          }

          var name = _ref;

          this.view.setState(name, {
            enable: false,
            visible: true,
            active: false
          });
        }

        this.view.setState('inpPages', {
          visible: true,
          value: ''
        });

        this.view.setState('inpPage', {
          visible: true,
          enable: false,
          value: ''
        });
      }
    };

    return LoadingController;
  }();

  exports.default = LoadingController;

  /***/
},
/* 54 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var MouseEventConverter = function (_EventConverter) {
    _inherits(MouseEventConverter, _EventConverter);

    function MouseEventConverter(wnd, doc, element) {
      _classCallCheck(this, MouseEventConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.element = element;
      _this.binds = {
        convert: _this.convert.bind(_this)
      };
      (0, _libs.$)(_this.element).on('mousemove mousedown mouseover mouseout click', _this.binds.convert);
      (0, _libs.$)(_this.doc).on('mouseup', _this.binds.convert);
      return _this;
    }

    MouseEventConverter.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('mousemove mousedown mouseover mouseout click', this.binds.convert);
      (0, _libs.$)(this.doc).off('mouseup', this.binds.convert);
    };

    return MouseEventConverter;
  }(_EventConverter3.default);

  exports.default = MouseEventConverter;

  /***/
},
/* 55 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _MathUtils = __webpack_require__(3);

  var _MathUtils2 = _interopRequireDefault(_MathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Object3DWatcher = function () {
    function Object3DWatcher(visual, boundBoxClb) {
      var testScale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.testScale;

      _classCallCheck(this, Object3DWatcher);

      this.visual = visual;
      this.boundBoxClb = boundBoxClb;
      this.testScale = testScale;
      this.camera = visual.camera;
      this.element = this.visual.element;
      this.elementSize = { w: 1, h: 1 };
      this.devicePixelRatio = this.visual.wnd.devicePixelRatio || 1;
      this.orbit = visual.getOrbit();
      this.scale = 1;

      this.eps = 1e-4;
      this.v = new _libs.THREE.Vector3();
      this.dv = new _libs.THREE.Vector2();

      this.enabled = false;

      visual.addRenderCallback(this.update.bind(this));

      this.os = {
        vx: 0,
        vy: 0,
        x: 0,
        y: 0
      };
      this.orbit.update();
      this.camera.updateMatrixWorld();
      var box = this.computeClientBoundBox(),
          k = 1.11;
      this.movePan({ x: -k * box.mid.x, y: -k * box.mid.y });
    }

    Object3DWatcher.prototype.movePan = function movePan(dv) {
      this.orbit.pan(dv.x * this.visual.width(), -dv.y * this.visual.height());
    };

    Object3DWatcher.prototype.vToCamera = function vToCamera(v) {
      v.project(this.camera);
      return {
        x: 0.5 * v.x,
        y: 0.5 * v.y
      };
    };

    Object3DWatcher.prototype.computeClientBoundBox = function computeClientBoundBox() {
      var box = this.boundBoxClb(),
          xs = [box.min.x, box.max.x],
          ys = [0, 0],
          zs = [box.min.z, box.max.z];

      var ps = [],
          res = { max: {}, min: {} };
      for (var _iterator = xs, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var x = _ref;

        for (var _iterator2 = ys, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var y = _ref2;

          for (var _iterator3 = zs, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
            var _ref3;

            if (_isArray3) {
              if (_i3 >= _iterator3.length) break;
              _ref3 = _iterator3[_i3++];
            } else {
              _i3 = _iterator3.next();
              if (_i3.done) break;
              _ref3 = _i3.value;
            }

            var z = _ref3;

            ps.push(this.vToCamera(this.v.set(x, y, z)));
          }
        }
      }

      ps.sort(function (p1, p2) {
        return p1.x - p2.x;
      });
      res.min.x = ps[0].x;
      res.max.x = ps[ps.length - 1].x;
      ps.sort(function (p1, p2) {
        return p1.y - p2.y;
      });
      res.min.y = ps[0].y;
      res.max.y = ps[ps.length - 1].y;

      res.width = res.max.x - res.min.x;
      res.height = res.max.y - res.min.y;

      res.mid = {
        x: 0.5 * (res.max.x + res.min.x),
        y: 0.5 * (res.max.y + res.min.y)
      };

      return res;
    };

    Object3DWatcher.prototype.setObject = function setObject(boundBoxClb) {
      this.boundBoxClb = boundBoxClb;
    };

    Object3DWatcher.prototype.testScale = function testScale() {
      return true;
    };

    Object3DWatcher.prototype.computeCorr = function computeCorr(K, min, max) {
      var corr = 0;
      if (K < 1) {
        if (min > -0.5) {
          corr = -0.5 - min;
        } else if (max < 0.5) {
          corr = 0.5 - max;
        }
      } else {
        if (min < -0.5) {
          corr = -0.5 - min;
        } else if (max > 0.5) {
          corr = 0.5 - max;
        }
      }
      return corr;
    };

    Object3DWatcher.prototype.getScale = function getScale() {
      var box = this.computeClientBoundBox(),
          Kx = this.elementSize.w / box.width,
          Ky = this.elementSize.h / box.height;
      return 1 / Math.min(Kx, Ky);
    };

    Object3DWatcher.prototype.centerView = function centerView(T) {
      var _this = this;

      var box = this.computeClientBoundBox(),
          Kx = this.elementSize.w / box.width,
          Ky = this.elementSize.h / box.height,
          K = Math.min(Kx, Ky);

      if (this.testScale() && Math.abs(1 / K - this.scale) > this.eps) {
        var scale = 1 / K + 0.2 * (this.scale - 1 / K);
        this.orbit.setScale(this.orbit.getScale() / (K * scale));
        this.orbit.update();
        this.camera.updateMatrixWorld();
        box = this.computeClientBoundBox();
        Kx = this.elementSize.w / box.width;
        Ky = this.elementSize.h / box.height;
        K = Math.min(Kx, Ky);
      }

      var dv = this.dv;
      if (K > 1 - this.eps) {
        dv.set(-box.mid.x, -box.mid.y);
      } else {
        dv.set(this.computeCorr(Kx, box.min.x, box.max.x), this.computeCorr(Ky, box.min.y, box.max.y));
      }

      if (Math.sqrt(this.os.vx * this.os.vx + this.os.vy * this.os.vy) > 0.003 || dv.length() > 0.003) {
        var dt = 1 / 60,
            t = 0,
            os = _extends({}, this.os, {
          x: 0,
          y: 0
        });
        os.tf = function (vx, vy, x, y) {
          return {
            x: 75 * (dv.x - x) / Math.pow(_this.devicePixelRatio, 1.0),
            y: 75 * (dv.y - y) / Math.pow(_this.devicePixelRatio, 1.0)
          };
        };
        while (t < T) {
          if (t + dt > T) {
            dt = T - t;
          }
          os = this.integrate(os, dt);
          t += dt;
        }
        this.movePan(os);
        this.os = os;
      }
    };

    Object3DWatcher.prototype.integrate = function integrate(os, dt) {
      var _MathUtils$rk = _MathUtils2.default.rk4(this.dy.bind(os), 0, dt, [os.vx, os.vy, os.x, os.y]),
          vx = _MathUtils$rk[0],
          vy = _MathUtils$rk[1],
          x = _MathUtils$rk[2],
          y = _MathUtils$rk[3];

      return _extends({}, os, {
        vx: vx, vy: vy, x: x, y: y
      });
    };

    Object3DWatcher.prototype.dy = function dy(t, Y) {
      var vx = Y[0],
          vy = Y[1],
          x = Y[2],
          y = Y[3],
          vd = 15,
          tf = this.tf(vx, vy, x, y);

      return [tf.x - vd * vx, tf.y - vd * vy, vx, vy];
    };

    Object3DWatcher.prototype.update = function update(dt) {
      if (this.enabled && this.boundBoxClb) {
        this.centerView(dt);
      }
    };

    return Object3DWatcher;
  }();

  exports.default = Object3DWatcher;

  /***/
},
/* 56 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var Orbit = function (_THREE$EventDispatche) {
    _inherits(Orbit, _THREE$EventDispatche);

    function Orbit(object, domElement) {
      _classCallCheck(this, Orbit);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      _this.object = object;
      _this.domElement = domElement || document.body;

      // Set to false to disable this control
      _this.enabled = true;

      // "target" sets the location of focus, where the object orbits around
      _this.target = new _libs.THREE.Vector3();

      // How far you can dolly in and out(PerspectiveCamera only)
      _this.minDistance = 0;
      _this.maxDistance = Infinity;

      // How far you can zoom in and out(OrthographicCamera only)
      _this.minZoom = 0;
      _this.maxZoom = Infinity;

      // How far you can orbit vertically, upper and lower limits.
      // Range is 0 to Math.PI radians.
      _this.minPolarAngle = 0; // radians
      _this.maxPolarAngle = Math.PI; // radians

      // How far you can orbit horizontally, upper and lower limits.
      // If set, must be a sub-interval of the interval [-Math.PI, Math.PI ].
      _this.minAzimuthAngle = -Infinity; // radians
      _this.maxAzimuthAngle = Infinity; // radians

      // Set to true to enable damping (inertia)
      // If damping is enabled, you must call controls.update() in your animation loop
      _this.enableDamping = false;
      _this.dampingFactor = 0.25;

      // This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
      // Set to false to disable zooming
      _this.enableZoom = true;
      _this.zoomSpeed = 1.0;

      // Set to false to disable rotating
      _this.enableRotate = true;
      _this.rotateSpeed = 1.0;

      // Set to false to disable panning
      _this.enablePan = true;

      // Set to true to automatically rotate around the target
      // If auto-rotate is enabled, you must call controls.update() in your animation loop
      _this.autoRotate = false;
      _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60

      // for reset
      _this.target0 = _this.target.clone();
      _this.position0 = _this.object.position.clone();
      _this.zoom0 = _this.object.zoom;

      //
      // public methods
      //
      _this.getPolarAngle = function () {
        return spherical.phi;
      };

      _this.getAzimuthalAngle = function () {
        return spherical.theta;
      };

      _this.reset = function () {
        scope.target.copy(scope.target0);
        scope.object.position.copy(scope.position0);
        scope.object.zoom = scope.zoom0;

        scope.object.updateProjectionMatrix();
        scope.dispatchEvent(changeEvent);

        scope.update();
      };

      _this.zoomOut = function () {
        var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;

        var _speed = this.zoomSpeed;
        this.zoomSpeed = speed;
        dollyIn(getZoomScale());
        this.zoomSpeed = _speed;
      };

      _this.zoomIn = function () {
        var speed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.zoomSpeed;

        var _speed = this.zoomSpeed;
        this.zoomSpeed = speed;
        dollyOut(getZoomScale());
        this.zoomSpeed = _speed;
      };

      _this.getScale = function () {
        return scale;
      };

      _this.setScale = function (newScale) {
        scale = newScale;
      };

      // this method is exposed, but perhaps it would be better if we can make it private...
      _this.update = function () {
        var offset = new _libs.THREE.Vector3();
        // so camera.up is the orbit axis
        var quat = new _libs.THREE.Quaternion().setFromUnitVectors(object.up, new _libs.THREE.Vector3(0, 1, 0));
        var quatInverse = quat.clone().inverse();
        var lastPosition = new _libs.THREE.Vector3();
        var lastQuaternion = new _libs.THREE.Quaternion();

        return function update() {
          var position = scope.object.position;
          offset.copy(position).sub(scope.target);
          // rotate offset to "y-axis-is-up" space
          offset.applyQuaternion(quat);
          // angle from z-axis around y-axis
          spherical.setFromVector3(offset);
          if (scope.autoRotate) {
            rotateLeft(getAutoRotationAngle());
          }
          spherical.theta += sphericalDelta.theta;
          spherical.phi += sphericalDelta.phi;
          // restrict theta to be between desired limits
          spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));
          // restrict phi to be between desired limits
          spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));
          spherical.makeSafe();
          spherical.radius *= scale;
          // restrict radius to be between desired limits
          spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));
          // move target to panned location
          scope.target.add(panOffset);
          offset.setFromSpherical(spherical);
          // rotate offset back to "camera-up-vector-is-up" space
          offset.applyQuaternion(quatInverse);
          position.copy(scope.target).add(offset);
          scope.object.lookAt(scope.target);

          if (scope.enableDamping === true) {
            sphericalDelta.theta *= 1 - scope.dampingFactor;
            sphericalDelta.phi *= 1 - scope.dampingFactor;
          } else {
            sphericalDelta.set(0, 0, 0);
          }

          scale = 1;
          panOffset.set(0, 0, 0);

          // update condition is:
          // min(camera displacement, camera rotation in radians)^2 > EPS
          // using small-angle approximation cos(x/2) = 1-x^2 / 8

          if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {

            scope.dispatchEvent(changeEvent);

            lastPosition.copy(scope.object.position);
            lastQuaternion.copy(scope.object.quaternion);
            zoomChanged = false;

            return true;
          }
          return false;
        };
      }();

      _this.dispose = function () {};

      //
      // internals
      //
      var scope = _this;
      var changeEvent = { type: 'change' };
      var EPS = 1e-6;
      // current position in spherical coordinates
      var spherical = new _libs.THREE.Spherical();
      var sphericalDelta = new _libs.THREE.Spherical();

      var scale = 1;
      var panOffset = new _libs.THREE.Vector3();
      var zoomChanged = false;

      function getAutoRotationAngle() {
        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;
      }

      function getZoomScale() {
        return Math.pow(0.95, scope.zoomSpeed);
      }

      function rotateLeft(angle) {
        sphericalDelta.theta -= angle;
      }

      function rotateUp(angle) {
        sphericalDelta.phi -= angle;
      }

      var panLeft = function () {
        var v = new _libs.THREE.Vector3();
        return function panLeft(distance, objectMatrix) {
          v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix
          v.multiplyScalar(-distance);
          panOffset.add(v);
        };
      }();

      var panUp = function () {
        var v = new _libs.THREE.Vector3();
        return function panUp(distance, objectMatrix) {
          v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix
          v.multiplyScalar(distance);
          panOffset.add(v);
        };
      }();

      // deltaX and deltaY are in pixels; right and down are positive
      scope.pan = function () {
        var offset = new _libs.THREE.Vector3();
        return function pan(deltaX, deltaY) {
          var element = scope.domElement;
          if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
            // perspective
            var position = scope.object.position;
            offset.copy(position).sub(scope.target);
            var targetDistance = offset.length();
            // half of the fov is center to top of screen
            targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);
            // we actually don't use screenWidth, since perspective camera is fixed to screen height
            panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);
            panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);
          } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
            // orthographic
            panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);
            panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);
          } else {
            // camera neither orthographic nor perspective
            console.warn('WARNING: OrbitControls.js encountered an unknown camera type-pan disabled.');
            scope.enablePan = false;
          }
        };
      }();

      function dollyIn(dollyScale) {
        if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
          scale /= dollyScale;
        } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));
          scope.object.updateProjectionMatrix();
          zoomChanged = true;
        } else {
          console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');
          scope.enableZoom = false;
        }
      }

      function dollyOut(dollyScale) {
        if (scope.object instanceof _libs.THREE.PerspectiveCamera) {
          scale *= dollyScale;
        } else if (scope.object instanceof _libs.THREE.OrthographicCamera) {
          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));
          scope.object.updateProjectionMatrix();
          zoomChanged = true;
        } else {
          console.warn('WARNING: OrbitControls.js encountered an unknown camera type-dolly/zoom disabled.');
          scope.enableZoom = false;
        }
      }

      /* Actions */

      function rotate(event, data) {
        if (scope.enabled && scope.enableRotate && data.state === 'move') {
          var element = scope.domElement;
          // rotating across whole screen goes 360 degrees around
          rotateLeft(2 * Math.PI * data.dx / element.clientWidth * scope.rotateSpeed);
          // rotating up and down along whole screen attempts to go 360, but limited to 180
          rotateUp(2 * Math.PI * data.dy / element.clientHeight * scope.rotateSpeed);
          scope.update();
        }
      }

      function pan(event, data) {
        if (scope.enabled && scope.enablePan && data.state === 'move') {
          scope.pan(data.dx, data.dy);
          scope.update();
        }
      }

      function offsetDolly(event, data) {
        if (scope.enabled && scope.enableZoom && data.state === 'move') {
          if (data.dy > 0) {
            dollyIn(getZoomScale());
          } else if (data.dy < 0) {
            dollyOut(getZoomScale());
          }
          scope.update();
        }
      }

      function wheelDolly(event) {
        if (scope.enabled && scope.enableZoom) {
          if (event.deltaY > 0) {
            dollyOut(getZoomScale());
          } else if (event.deltaY < 0) {
            dollyIn(getZoomScale());
          }
          scope.update();
        }
      }

      _this.actions = {
        rotate: rotate,
        pan: pan,
        offsetDolly: offsetDolly,
        wheelDolly: wheelDolly
      };

      // force an update at start
      _this.update();
      return _this;
    }

    return Orbit;
  }(_libs.THREE.EventDispatcher);

  exports.default = Orbit;

  /***/
},
/* 57 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _Pdf = __webpack_require__(18);

  var _Pdf2 = _interopRequireDefault(_Pdf);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  var _CustomEventConverter = __webpack_require__(16);

  var _CustomEventConverter2 = _interopRequireDefault(_CustomEventConverter);

  var _PolyTarget = __webpack_require__(69);

  var _PolyTarget2 = _interopRequireDefault(_PolyTarget);

  var _Finder = __webpack_require__(17);

  var _Finder2 = _interopRequireDefault(_Finder);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PdfImage = function (_ImageBase) {
    _inherits(PdfImage, _ImageBase);

    function PdfImage(context, width, height, color, pdf, n) {
      _classCallCheck(this, PdfImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.query = '';
      _this.n = n;
      _this.pdf = pdf;
      _this.v = { x: 0, y: 0, z: 0, set: function set(x, y, z) {
          this.x = x;this.y = y;this.z = z;
          return this;
        }, transform: function transform(m) {
          var x = m.m[0][0] * this.x + m.m[1][0] * this.y + m.m[2][0] * this.z,
              y = m.m[0][1] * this.x + m.m[1][1] * this.y + m.m[2][1] * this.z,
              z = m.m[0][2] * this.x + m.m[0][2] * this.y + m.m[2][0] * this.z;
          this.x = x;
          this.y = y;
          this.z = z;
          return this;
        } };
      _this.m = { m: [[1, 0, 0], [0, 1, 0], [0, 0, 1]], set: function set(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
          this.m = [[m00, m01, m02], [m10, m11, m12], [m20, m21, m22]];
          return this;
        } };

      _this.startRender = function () {
        _this.pdf.getHandler(_this.render.bind(_this));
      };
      Promise.resolve().then(function () {
        return _this.pdf.getHandler(_this.init.bind(_this));
      });
      return _this;
    }

    PdfImage.prototype.setQuery = function setQuery(query) {
      this.query = query.trim();
      if (this.textContent) {
        this.setHits(this.textContent);
        // this.finishLoad();
      }
    };

    PdfImage.prototype.rectSize = function rectSize(r) {
      return {
        width: r[2] - r[0],
        height: r[3] - r[1]
      };
    };

    PdfImage.prototype.createPoly = function createPoly(m, p, s) {
      var poly = [],
          v = this.v;
      v.set(p.x, p.y, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x, p.y + s.height, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x + s.width, p.y + s.height, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      v.set(p.x + s.width, p.y, 1).transform(m);
      poly.push({ x: v.x, y: v.y });
      return poly;
    };

    PdfImage.prototype.getSimulatedDoc = function getSimulatedDoc() {
      return this.page;
    };

    PdfImage.prototype.simulate = function simulate(e, doc, x, y) {
      if (this.eventConverter) {
        this.eventConverter.convert(e, { doc: doc, x: x, y: y });
      }
    };

    PdfImage.prototype.setAnnotations = function setAnnotations(annos) {
      var _this2 = this;

      var t = this.viewport.transform,
          targets = [];
      this.m.set(t[0], t[1], 0, t[2], t[3], 0, t[4], t[5], 1);

      for (var _iterator = annos, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var anno = _ref;

        if (anno.subtype === 'Link') {
          var rect = anno.rect,
              aPos = {
            x: rect[0],
            y: rect[1]
          },
              aSz = this.rectSize(rect);
          var _target = new _PolyTarget2.default(this.createPoly(this.m, aPos, aSz).map(function (p) {
            return { x: p.x / _this2.viewport.width, y: 1 - p.y / _this2.viewport.height };
          }));
          _target.anno = anno;
          _target.callback = this.annoClb.bind(this);
          targets.push(_target);
        }
      }
      if (targets.length) {
        this.eventConverter = new _CustomEventConverter2.default(this.wnd, this.doc, _PolyTarget2.default.test, this.page);
        for (var _iterator2 = targets, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var target = _ref2;

          this.eventConverter.addCustom(target);
        }
      }
    };

    PdfImage.prototype.setHits = function setHits(textContent) {
      this.textContent = textContent;
      if (this.query !== '') {
        this.finder = new _Finder2.default(textContent.items.map(function (item) {
          return item.str;
        }), this.query, { contexts: false });
      }
    };

    PdfImage.prototype.renderHits = function renderHits() {
      var _this3 = this;

      if (this.finder) {
        var view = this.page.view,
            testSz = (0, _libs.$)('<div style="position: absolute; visibility: hidden;"></div>').appendTo('body'),
            textDiv = testSz[0],
            baseOffset = testSz.offset().left;
        for (var _iterator3 = this.finder.getHits(), _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          if (_isArray3) {
            if (_i3 >= _iterator3.length) break;
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) break;
            _ref3 = _i3.value;
          }

          var hit = _ref3;

          var item = this.textContent.items[hit.index],
              t = PDFJS.Util.transform(this.viewport.transform, item.transform),
              style = this.textContent.styles[item.fontName],
              angle = Math.atan2(t[1], t[0]) + (style.vertical ? Math.PI / 2 : 0),
              fontHeight = Math.sqrt(t[2] * t[2] + t[3] * t[3]),
              fontAscent = style.ascent ? style.ascent * fontHeight : style.descent ? (1 + style.descent) * fontHeight : fontHeight;
          testSz.html(item.str.substr(0, hit.offset) + '<span>' + item.str.substr(hit.offset, hit.length) + '</span>' + item.str.substr(hit.offset + hit.length));

          textDiv.style.fontSize = fontHeight + 'px';
          textDiv.style.fontFamily = style.fontFamily;

          var testSpan = testSz.find('span'),
              iwidth = style.vertical ? item.height * this.viewport.scale : item.width * this.viewport.scale,
              width = testSz.width(),
              relativeOffset = (testSpan.offset().left - baseOffset) / width;
          this.m.set(1, 0, 0, 0, 1, 0, t[4] + fontAscent * Math.sin(angle), t[5] - fontAscent * Math.cos(angle), 1);
          var poly = this.createPoly(this.m, { x: relativeOffset * iwidth, y: 0 }, { width: iwidth * testSpan.width() / width, height: testSpan.height() });
          poly = poly.map(function (p) {
            return { x: p.x / _this3.viewport.width, y: 1 - p.y / _this3.viewport.height };
          });
          this.renderHit(poly);
        }
        testSz.remove();
      }
    };

    PdfImage.prototype.annoClb = function annoClb(e, data) {
      if (this.context.dispatchEvent) {
        this.context.dispatchEvent({
          type: 'pdfAnnotation',
          event: e,
          annotation: data.target.anno
        });
      }
    };

    PdfImage.prototype.calcViewport = function calcViewport() {
      var scale = _BaseMathUtils2.default.calcScale(this.size.width, this.size.height, this.resW, this.resH);
      if (!this.viewport || Math.abs(this.viewport.scale - scale) > 1e-4) {
        this.viewport = this.page.getViewport(scale);
        if (this.type !== 'full') {
          if (this.type === 'right') {
            this.viewport.offsetX += 0.5 * this.viewport.width;
            this.viewport.transform[4] -= 0.5 * this.viewport.width;
          }
          this.viewport.width /= 2;
        }
        this.resW = this.width = this.viewport.width;
        this.resH = this.height = this.viewport.height;
      }
    };

    PdfImage.prototype.init = function init() {
      var _this4 = this;

      this.type = this.pdf.getPageType(this.n);
      this.pdf.getPage(this.n).then(function (page) {
        _this4.page = page;
        _this4.size = _Pdf2.default.getPageSize(page);
        if (_this4.type !== 'full') {
          _this4.size.width /= 2;
        }
        page.getAnnotations().then(_this4.setAnnotations.bind(_this4));
        page.getTextContent().then(_this4.setHits.bind(_this4));
        _this4.calcViewport();
        _this4.finishLoad();
      }).catch(function (e) {
        console.error('Cannot load PDF page: ' + (_this4.n + 1));
        _this4.finishLoad();
      });
    };

    PdfImage.prototype.setResolution = function setResolution(res) {
      _ImageBase.prototype.setResolution.call(this, res);
      if (this.page) {
        this.calcViewport();
      }
    };

    PdfImage.prototype.render = function render(handler) {
      var _this5 = this;

      if (this.page) {
        this.page.render({
          canvasContext: this.pushCtx(),
          viewport: this.viewport
        }).then(function () {
          _this5.renderHits();
          _this5.popCtx();
          _this5.finishRender();
        });
      } else {
        this.renderBlankPage();
        this.finishRender();
      }
    };

    return PdfImage;
  }(_ImageBase3.default);

  exports.default = PdfImage;

  /***/
},
/* 58 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Search = function () {
    function Search(container, pages) {
      _classCallCheck(this, Search);

      this.container = container;
      this.pages = pages;
      this.prevResults = [];
      container.html('\n      <div class="search">\n        <div class="query">\n          <input class="inpQuery" type="text" maxlength="30" value="" />\n        </div>\n        <div class="results">\n        </div>\n        <div class="status">\n\n        </div>\n      </div>\n    ');
      this.query = container.find('.query input');
      this.results = container.find('.results');
      this.status = container.find('.status');

      this.binds = {
        navigate: this.navigate.bind(this),
        doQuery: this.doQuery.bind(this)
      };

      this.query.on('keydown', this.binds.doQuery);
      this.results.on('click', this.binds.navigate);
    }

    Search.prototype.dispose = function dispose() {
      this.results.off('click', this.binds.navigate);
      this.query.off('keydown', this.binds.doQuery);
    };

    Search.prototype.navigate = function navigate(e) {
      e.preventDefault();
      if (this.onNavigate !== undefined) {
        var target = (0, _libs.$)(e.target);
        if (!target.hasClass('result')) {
          var t = target.find('.result');
          if (t.length) {
            target = t;
          } else {
            while (target.length && !target.hasClass('result')) {
              target = (0, _libs.$)(target[0].parentNode);
            }
          }
        }
        var page = target.attr('data');
        if (page !== undefined) {
          this.onNavigate(parseInt(page));
        }
      }
    };

    Search.prototype.doQuery = function doQuery() {
      var _this = this;

      if (this.onQuery) {
        var queryStamp = this.queryStamp = Date.now();
        setTimeout(function () {
          if (queryStamp === _this.queryStamp) {
            _this.onQuery(_this.query[0].value.trim());
          }
        }, 1000);
      }
    };

    Search.prototype.setResults = function setResults(results, lastPage) {
      if (this.prevResults.length && results[0] !== this.prevResults[0]) {
        this.prevResults = [];
        this.results.html('');
      }
      var htmls = [];
      for (var i = this.prevResults.length; i < results.length; ++i) {
        var result = results[i];
        htmls.push('<div class="result" data="' + result.page + '">');
        htmls.push('<a href="#">');
        htmls.push('<div>' + result.contexts.join('</div><div>') + '</div>');
        htmls.push('</a>');
        htmls.push('</div>');
      }
      (0, _libs.$)(htmls.join('')).appendTo(this.results);
      this.prevResults = [].concat(results);
      if (lastPage === undefined) {
        this.status.html('');
      } else {
        this.status.html(lastPage + ' of ' + this.pages);
      }
    };

    return Search;
  }();

  exports.default = Search;

  /***/
},
/* 59 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _ImageBase2 = __webpack_require__(5);

  var _ImageBase3 = _interopRequireDefault(_ImageBase2);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var StaticImage = function (_ImageBase) {
    _inherits(StaticImage, _ImageBase);

    function StaticImage(context, width, height, color, src) {
      _classCallCheck(this, StaticImage);

      var _this = _possibleConstructorReturn(this, _ImageBase.call(this, context, width, height, color));

      _this.binds = {};
      _this.image = new Image();
      _this.image.crossOrigin = 'Anonymous';
      _this.binds.imageLoad = function () {
        _this.width = _this.image.width;
        _this.height = _this.image.height;
        _this.startRender = function () {
          _this.renderImage(_this.image);
          _this.finishRender();
        };
        _this.finishLoad();
      };
      _this.binds.imageError = function () {
        _this.startRender = function () {
          _this.renderNotFoundPage();
          _this.finishRender();
        };
        _this.finishLoad();
      };
      (0, _libs.$)(_this.image).on('load', _this.binds.imageLoad).on('error', _this.binds.imageError);
      _this.image.src = _Utils2.default.normalizeUrl(src);
      return _this;
    }

    StaticImage.prototype.dispose = function dispose() {
      (0, _libs.$)(this.image).off('load', this.binds.imageLoad).off('error', this.binds.imageError);
      this.image.src = '';
      delete this.image;
      _ImageBase.prototype.dispose.call(this);
    };

    return StaticImage;
  }(_ImageBase3.default);

  exports.default = StaticImage;

  /***/
},
/* 60 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var TextureAnimator = function () {
    function TextureAnimator(img, tilesHoriz, tilesVert, numTiles, tileDispDuration) {
      _classCallCheck(this, TextureAnimator);

      var texture = new _libs.THREE.Texture();
      texture.minFilter = _libs.THREE.LinearFilter;
      texture.image = img;
      texture.needsUpdate = true;

      // note: texture passed by reference, will be updated by the update function.
      this.texture = texture;
      this.tilesHorizontal = tilesHoriz;
      this.tilesVertical = tilesVert;
      // how many images does this spritesheet contain?
      //  usually equals tilesHoriz * tilesVert, but not necessarily,
      //  if there at blank tiles at the bottom of the spritesheet.
      this.numberOfTiles = numTiles;
      texture.repeat.set(1 / this.tilesHorizontal, 1 / this.tilesVertical);

      // how long should each image be displayed?
      this.tileDisplayDuration = tileDispDuration;

      // how long has the current image been displayed?
      this.currentDisplayTime = 0;

      // which image is currently being displayed?
      this.currentTile = 0;
    }

    TextureAnimator.prototype.update = function update(milliSec) {
      this.currentDisplayTime += milliSec;
      while (this.currentDisplayTime > this.tileDisplayDuration) {
        this.currentDisplayTime -= this.tileDisplayDuration;
        ++this.currentTile;
        if (this.currentTile == this.numberOfTiles) this.currentTile = 0;
        var currentColumn = this.currentTile % this.tilesHorizontal;
        this.texture.offset.x = currentColumn / this.tilesHorizontal;
        var currentRow = Math.floor(this.currentTile / this.tilesHorizontal);
        this.texture.offset.y = currentRow / this.tilesVertical;
      }
    };

    TextureAnimator.prototype.dispose = function dispose() {
      var img = this.texture.image;
      img.height = img.width = 0;
      this.texture.dispose();
    };

    return TextureAnimator;
  }();

  exports.default = TextureAnimator;

  /***/
},
/* 61 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  var _MouseEventConverter2 = __webpack_require__(54);

  var _MouseEventConverter3 = _interopRequireDefault(_MouseEventConverter2);

  var _ThreeEventConverter = __webpack_require__(19);

  var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ThreeMouseEventConverter = function (_MouseEventConverter) {
    _inherits(ThreeMouseEventConverter, _MouseEventConverter);

    function ThreeMouseEventConverter(wnd, doc, visualWorld, test) {
      _classCallCheck(this, ThreeMouseEventConverter);

      var _this = _possibleConstructorReturn(this, _MouseEventConverter.call(this, wnd, doc, visualWorld.element));

      _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));
      return _this;
    }

    ThreeMouseEventConverter.prototype.getCallback = function getCallback(object) {
      return object.object.userData.mouseCallback;
    };

    ThreeMouseEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element);
      var offset = jElement.offset();
      this.coords.x = (e.pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((e.pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    return ThreeMouseEventConverter;
  }(_MouseEventConverter3.default);

  exports.default = ThreeMouseEventConverter;

  /***/
},
/* 62 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _Utils = __webpack_require__(4);

  var _Utils2 = _interopRequireDefault(_Utils);

  var _TouchEventConverter2 = __webpack_require__(64);

  var _TouchEventConverter3 = _interopRequireDefault(_TouchEventConverter2);

  var _ThreeEventConverter = __webpack_require__(19);

  var _ThreeEventConverter2 = _interopRequireDefault(_ThreeEventConverter);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var ThreeTouchEventConverter = function (_TouchEventConverter) {
    _inherits(ThreeTouchEventConverter, _TouchEventConverter);

    function ThreeTouchEventConverter(wnd, doc, visualWorld, test) {
      _classCallCheck(this, ThreeTouchEventConverter);

      var _this = _possibleConstructorReturn(this, _TouchEventConverter.call(this, wnd, doc, visualWorld.element));

      _Utils2.default.extends(_this, new _ThreeEventConverter2.default(visualWorld, test));
      return _this;
    }

    ThreeTouchEventConverter.prototype.getCallback = function getCallback(object) {
      return object.object.userData.touchCallback;
    };

    ThreeTouchEventConverter.prototype.setCoordsFromEvent = function setCoordsFromEvent(e) {
      var jElement = (0, _libs.$)(this.element),
          offset = jElement.offset(),
          touches = e.touches || e.originalEvent.touches,
          touch = touches.length ? touches[0] : (this.lastTouches || [{ pageX: 0, pageY: 0 }])[0],
          pageX = touch.pageX,
          pageY = touch.pageY;
      this.lastTouches = touches.length ? touches : this.lastTouches;
      this.coords.x = (pageX - offset.left) / jElement.width() * 2 - 1;
      this.coords.y = -((pageY - offset.top) / jElement.height()) * 2 + 1;
      return this.coords;
    };

    return ThreeTouchEventConverter;
  }(_TouchEventConverter3.default);

  exports.default = ThreeTouchEventConverter;

  /***/
},
/* 63 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _ImageFactory = __webpack_require__(8);

  var _ImageFactory2 = _interopRequireDefault(_ImageFactory);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Thumbnails = function () {
    function Thumbnails(context, container, thumbnailsClb, size) {
      var _this = this;

      var props = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { kWtoH: 210 / 297 };

      _classCallCheck(this, Thumbnails);

      this.container = container;
      this.p = props;
      this.thumbnailsClb = thumbnailsClb;
      this.size = size;
      this.canvas = (0, _libs.$)('<canvas>')[0];
      this.imageFactory = new _ImageFactory2.default(_extends({}, context, {
        renderCanvas: this.canvas,
        renderCanvasCtx: this.canvas.getContext('2d')
      }));
      this.thumbnails = [];
      for (var i = 0; i < size; ++i) {
        var info = this.thumbnailsClb(i);
        this.thumbnails.push(_extends({}, info, {
          index: i,
          loaded: info.type === 'thumbnail-image',
          heading: null,
          thumbnail: null,
          title: info.title || i
        }));
      }

      this.binds = {
        update: this.update.bind(this),
        navigate: function navigate(e) {
          e.preventDefault();
          if (_this.onNavigate) {
            var node = e.target;
            while (node && !node.dataThumbnail) {
              node = node.parentNode;
            }
            _this.onNavigate(node.dataThumbnail.index);
          }
        }
      };
      this.container.on('scroll', this.binds.update);
    }

    Thumbnails.prototype.getSize = function getSize() {
      return this.size;
    };

    Thumbnails.prototype.setEnable = function setEnable(enable) {
      this.enable = enable;
      this.update();
    };

    Thumbnails.prototype.dispose = function dispose() {
      this.container.find('a').off('click', this.binds.navigate);
      this.container.off('scroll', this.binds.update);
      this.container.html('');
      this.canvas.height = this.canvas.width = 0;
      delete this.canvas;
    };

    Thumbnails.prototype.load = function load(thumbnail) {
      var _this2 = this;

      this.loading = true;
      var wrapper = this.imageFactory.build(thumbnail, thumbnail.number === undefined ? thumbnail.index : thumbnail.number, this.p.kWtoH * 300, 300);
      wrapper.onChange = function (canvas) {
        _this2.setImage(thumbnail, canvas.toDataURL('image/png'));
        thumbnail.loaded = true;
        wrapper.dispose();
        _this2.loading = false;
        Promise.resolve().then(function () {
          return _this2.update();
        });
      };
    };

    Thumbnails.prototype.getActive = function getActive() {
      var first = this.container.scrollTop(),
          last = first + this.container.height(),
          res = [];
      for (var _iterator = this.thumbnails, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var thumbnail = _ref;

        if (Math.max(thumbnail.first, first) < Math.min(thumbnail.last, last)) {
          res.push(thumbnail);
        }
      }
      return res;
    };

    Thumbnails.prototype.update = function update() {
      if (!this.loading && this.canvas && this.enable) {
        if (!this.built) {
          this.render();
        }
        var active = this.getActive();
        for (var _iterator2 = active, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
          var _ref2;

          if (_isArray2) {
            if (_i2 >= _iterator2.length) break;
            _ref2 = _iterator2[_i2++];
          } else {
            _i2 = _iterator2.next();
            if (_i2.done) break;
            _ref2 = _i2.value;
          }

          var thumbnail = _ref2;

          if (!thumbnail.loaded) {
            this.load(thumbnail);
            break;
          }
        }
      }
    };

    Thumbnails.prototype.setImage = function setImage(thumbnail, img) {
      thumbnail.img = img;
      thumbnail.thumbnail.css('background-image', ['url(\'', img, '\')'].join(''));
      thumbnail.thumbnail.removeClass('loading');
    };

    Thumbnails.prototype.render = function render() {
      var elements = ['<div class="thumbnails">'];
      for (var i = 0; i < this.size; ++i) {
        elements.push(['<div class="item"><a href="#"><div class="thumbnail loading"></div></a><div class="heading"><a href="#" title="', i + 1, '">', i + 1, '</a></div></div>'].join(''));
      }
      elements.push('</div>');
      this.container.append(elements.join(''));
      var items = this.container.find('.item'),
          base = this.container.find('.thumbnails').offset().top;
      for (var _i3 = 0; _i3 < items.length; ++_i3) {
        var item = (0, _libs.$)(items[_i3]);
        this.thumbnails[_i3].heading = item.find('.heading');
        this.thumbnails[_i3].thumbnail = item.find('.thumbnail');
        this.thumbnails[_i3].first = item.offset().top - base;
        this.thumbnails[_i3].last = this.thumbnails[_i3].first + item.height();
        if (this.thumbnails[_i3].loaded) {
          this.setImage(this.thumbnails[_i3], this.thumbnails[_i3].src);
        }
        var as = item.find('a');
        for (var j = 0; j < as.length; ++j) {
          var a = as[j];
          a.dataThumbnail = this.thumbnails[_i3];
        }
      }
      this.container.find('a').on('click', this.binds.navigate);
      this.built = true;
    };

    return Thumbnails;
  }();

  exports.default = Thumbnails;

  /***/
},
/* 64 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _libs = __webpack_require__(0);

  var _EventConverter2 = __webpack_require__(6);

  var _EventConverter3 = _interopRequireDefault(_EventConverter2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var TouchConverter = function (_EventConverter) {
    _inherits(TouchConverter, _EventConverter);

    function TouchConverter(wnd, doc, element) {
      _classCallCheck(this, TouchConverter);

      var _this = _possibleConstructorReturn(this, _EventConverter.call(this, wnd, doc));

      _this.element = element;
      _this.binds = {
        convert: _this.convert.bind(_this)
      };
      (0, _libs.$)(_this.element).on('touchstart touchmove', _this.binds.convert);
      (0, _libs.$)(_this.doc).on('touchend', _this.binds.convert);
      return _this;
    }

    TouchConverter.prototype.dispose = function dispose() {
      (0, _libs.$)(this.element).off('touchstart touchmove', this.binds.convert);
      (0, _libs.$)(this.doc).off('touchend', this.binds.convert);
    };

    return TouchConverter;
  }(_EventConverter3.default);

  exports.default = TouchConverter;

  /***/
},
/* 65 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var View = function () {
    View.classProperty = function classProperty(ctrl, className, value) {
      if (value) {
        ctrl.addClass(className);
      } else {
        ctrl.removeClass(className);
      }
    };

    View.attributeProperty = function attributeProperty(ctrl, attributeName, value) {
      if (value) {
        ctrl.attr(attributeName, value);
      } else {
        ctrl.removeAttr(attributeName);
      }
    };

    View.callHandlers = function callHandlers(handlers, id, e, data) {
      for (var _iterator = handlers, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var handler = _ref;

        if (handler[id]) {
          handler[id](e, data);
        } else if (handler.handleDefault) {
          handler.handleDefault(id, e, data);
        }
      }
    };

    View.handleEvent = function handleEvent(id, getHandlers, e, data) {
      View.callHandlers(getHandlers(id), id, e, data);
    };

    View.handleLinkEvent = function handleLinkEvent(e) {
      e.preventDefault();
      if (!this.ctrl.hasClass('disabled')) {
        View.handleEvent(this.id, this.getHandlers, e);
      }
    };

    View.handleInputEvent = function handleInputEvent(e) {
      View.handleEvent(this.id, this.getHandlers, e, e.target.value);
    };

    View.handleFormEvent = function handleFormEvent(e) {
      e.preventDefault();
      View.handleEvent(this.id, this.getHandlers, e);
    };

    // virtual functions {


    View.prototype.getLinks = function getLinks() {
      return null;
    };

    View.prototype.getWidgets = function getWidgets() {
      return null;
    };

    View.prototype.getInputs = function getInputs() {
      return null;
    };

    View.prototype.getTexts = function getTexts() {
      return null;
    };

    View.prototype.getTemplate = function getTemplate() {
      return {};
    };

    View.prototype.getHandlers = function getHandlers(id) {
      return this.handlers;
    };
    // }

    View.prototype.callLater = function callLater(handlers, id, e, data, ms) {
      var _this = this;

      this.pendings[id] = {
        timestamp: new Date().getTime()
      };
      setTimeout(function () {
        var timestamp = new Date().getTime(),
            pending = _this.pendings[id];
        if (pending && timestamp - pending.timestamp >= ms) {
          View.callHandlers(handlers, id, e, data);
          delete _this.pendings[id];
        }
      }, ms);
    };

    // loadFiles(urls, ready, failure) {
    //   let done = Promise.resolve();
    //   for(let url of urls) {
    //     done = done.then(()=> {
    //       return new Promise((resolve, reject)=> {
    //         $.get(url, (res)=> {
    //           ready(res, url);
    //           resolve();
    //         }).fail((res)=> {
    //           if(failure && failure(res, url)) {
    //             resolve();
    //           }
    //           else {
    //             reject(res);
    //           }
    //         });
    //       });
    //     });
    //   }
    //   return done;
    // }

    View.prototype.loadFiles = function loadFiles(urls, files) {
      var tasks = [];

      var _loop = function _loop() {
        if (_isArray2) {
          if (_i2 >= _iterator2.length) return 'break';
          _ref2 = _iterator2[_i2++];
        } else {
          _i2 = _iterator2.next();
          if (_i2.done) return 'break';
          _ref2 = _i2.value;
        }

        var name = _ref2;

        files[name] = [];

        var _loop2 = function _loop2() {
          if (_isArray3) {
            if (_i3 >= _iterator3.length) return 'break';
            _ref3 = _iterator3[_i3++];
          } else {
            _i3 = _iterator3.next();
            if (_i3.done) return 'break';
            _ref3 = _i3.value;
          }

          var url = _ref3;

          tasks.push(new Promise(function (resolve, reject) {
            _libs.$.get(url, function (data) {
              files[name].push({ url: url, data: data });
              resolve();
            }).fail(function (res) {
              reject(res);
            });
          }));
        };

        for (var _iterator3 = urls[name], _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {
          var _ref3;

          var _ret2 = _loop2();

          if (_ret2 === 'break') break;
        }
      };

      for (var _iterator2 = Object.keys(urls), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {
        var _ref2;

        var _ret = _loop();

        if (_ret === 'break') break;
      }
      return Promise.all(tasks);
    };

    View.prototype.urlResolver = function urlResolver(baseUrl, url) {
      url = url.replace(/\\/g, '/');
      if (url.charAt(0) !== '/') {
        baseUrl = baseUrl.replace(/\\/g, '/');
        var p = baseUrl.lastIndexOf('/');
        url = (~p ? baseUrl.substr(0, p + 1) : '') + url;

        var parts = url.split('/');
        url = [];
        for (var _iterator4 = parts, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {
          var _ref4;

          if (_isArray4) {
            if (_i4 >= _iterator4.length) break;
            _ref4 = _iterator4[_i4++];
          } else {
            _i4 = _iterator4.next();
            if (_i4.done) break;
            _ref4 = _i4.value;
          }

          var part = _ref4;

          if (part === '.') {} else if (part === '..') {
            if (url.length && !(url.length === 1 && url[0] === '')) {
              url.pop();
            }
          } else {
            url.push(part);
          }
        }
        url = url.join('/');
      }

      return url;
    };

    View.prototype.objToAttrsStr = function objToAttrsStr(o) {
      var res = [];
      for (var _iterator5 = Object.keys(o), _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {
        var _ref5;

        if (_isArray5) {
          if (_i5 >= _iterator5.length) break;
          _ref5 = _iterator5[_i5++];
        } else {
          _i5 = _iterator5.next();
          if (_i5.done) break;
          _ref5 = _i5.value;
        }

        var _name = _ref5;

        res.push([_name, '="', o[_name], '"'].join(''));
      }
      return res.join(' ');
    };

    View.prototype.checkIframeSize = function checkIframeSize() {
      if (this.frame) {
        if (Math.abs(this.frame.width - this.parentContainer.width()) > 1 || Math.abs(this.frame.height - this.parentContainer.height()) > 1) {
          this.onResize();
        }
        setTimeout(this.checkIframeSize.bind(this), 250);
      }
    };

    View.prototype.onResize = function onResize() {
      this.frame.width = this.parentContainer.width();
      this.frame.height = this.parentContainer.height();
    };

    View.prototype.translate = function translate(html) {
      return html.replace(/<\$tr>(.*)<\/\$tr>/gi, function (s0, s1) {
        return (0, _libs.tr)(s1);
      });
    };

    View.prototype.fireLinksOnLoadEvent = function fireLinksOnLoadEvent() {
      var _this2 = this;

      if (this.templateObject && this.templateObject.linkLoaded) {
        var loaded = true;

        var _loop3 = function _loop3() {
          if (_isArray6) {
            if (_i6 >= _iterator6.length) return 'break';
            _ref6 = _iterator6[_i6++];
          } else {
            _i6 = _iterator6.next();
            if (_i6.done) return 'break';
            _ref6 = _i6.value;
          }

          var jLink = _ref6;

          var link = jLink[0];
          var img = new Image();
          img.onerror = function () {
            return _this2.templateObject.linkLoaded(link);
          };
          img.src = link.href;
        };

        for (var _iterator6 = this.jLinks, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : _iterator6[Symbol.iterator]();;) {
          var _ref6;

          var _ret3 = _loop3();

          if (_ret3 === 'break') break;
        }
      }
    };

    function View(parentContainer, onLoad) {
      var _this3 = this;

      var template = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

      _classCallCheck(this, View);

      this.pendings = {};
      this.binds = {
        onResize: this.onResize.bind(this)
      };
      this.parentContainer = (0, _libs.$)(parentContainer);
      this.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      this.parentContainer.html('<iframe style="border: 0;' + (this.isIOS ? '' : ' width: 100%; height: 100%') + '" scrolling="no"></iframe>');

      this.frame = this.parentContainer.find('iframe')[0];
      if (this.frame.contentWindow.stop) {
        this.frame.contentWindow.stop();
      }
      if (this.isIOS) {
        (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).on('resize', this.binds.onResize);
        this.onResize();
        setTimeout(this.checkIframeSize.bind(this), 250);
      }

      this.container = (0, _libs.$)(this.frame.contentDocument.body);
      this.container.css('margin', '0');
      this.head = (0, _libs.$)(this.frame.contentDocument.head);
      this.onLoad = onLoad;
      this.handlers = [];

      var script = template.html ? template.script : this.getTemplate().script;
      var urls = {
        styles: template.styles || this.getTemplate().styles,
        html: [template.html || this.getTemplate().html],
        script: script ? [script] : []
      },
          files = {},
          links = template.links || this.getTemplate().links;

      this.loadFiles(urls, files).then(function () {
        var _loop4 = function _loop4() {
          if (_isArray7) {
            if (_i7 >= _iterator7.length) return 'break';
            _ref7 = _iterator7[_i7++];
          } else {
            _i7 = _iterator7.next();
            if (_i7.done) return 'break';
            _ref7 = _i7.value;
          }

          var style = _ref7;

          var textCss = style.data,
              url = style.url;
          textCss = textCss.replace(/url\(['"](.*?)["']\)/g, function (r, r1) {
            return ['url(', _this3.urlResolver(url, r1), ')'].join('');
          });
          (0, _libs.$)('<style type="text/css">' + textCss + '</style>').appendTo(_this3.head);
        };

        for (var _iterator7 = files.styles, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : _iterator7[Symbol.iterator]();;) {
          var _ref7;

          var _ret4 = _loop4();

          if (_ret4 === 'break') break;
        }

        _this3.container.html(_this3.translate(files.html[0].data));

        _this3.jLinks = [];
        for (var _iterator8 = links, _isArray8 = Array.isArray(_iterator8), _i8 = 0, _iterator8 = _isArray8 ? _iterator8 : _iterator8[Symbol.iterator]();;) {
          var _ref8;

          if (_isArray8) {
            if (_i8 >= _iterator8.length) break;
            _ref8 = _iterator8[_i8++];
          } else {
            _i8 = _iterator8.next();
            if (_i8.done) break;
            _ref8 = _i8.value;
          }

          var _link = _ref8;

          _this3.jLinks.push((0, _libs.$)(['<link ', _this3.objToAttrsStr(_link), '>'].join('')).appendTo(_this3.head));
        }

        if (files.script[0]) {
          var init = eval(files.script[0].data);
          _this3.templateObject = init(_this3.container);
        } else {
          _this3.templateObject = {};
        }

        _this3.linkControls = {};
        for (var _iterator9 = _this3.getLinks(), _isArray9 = Array.isArray(_iterator9), _i9 = 0, _iterator9 = _isArray9 ? _iterator9 : _iterator9[Symbol.iterator]();;) {
          var _ref9;

          if (_isArray9) {
            if (_i9 >= _iterator9.length) break;
            _ref9 = _iterator9[_i9++];
          } else {
            _i9 = _iterator9.next();
            if (_i9.done) break;
            _ref9 = _i9.value;
          }

          var id = _ref9;

          _this3.linkControls[id] = _this3.container.find('.' + id);
          _this3.binds[id] = View.handleLinkEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: id, ctrl: _this3.linkControls[id] });
          _this3.linkControls[id].on('click', _this3.binds[id]);
        }

        _this3.widgetControls = {};
        for (var _iterator10 = _this3.getWidgets(), _isArray10 = Array.isArray(_iterator10), _i10 = 0, _iterator10 = _isArray10 ? _iterator10 : _iterator10[Symbol.iterator]();;) {
          var _ref10;

          if (_isArray10) {
            if (_i10 >= _iterator10.length) break;
            _ref10 = _iterator10[_i10++];
          } else {
            _i10 = _iterator10.next();
            if (_i10.done) break;
            _ref10 = _i10.value;
          }

          var _id = _ref10;

          _this3.widgetControls[_id] = _this3.container.find('.' + _id);
        }

        _this3.inputControls = {};
        for (var _iterator11 = _this3.getInputs(), _isArray11 = Array.isArray(_iterator11), _i11 = 0, _iterator11 = _isArray11 ? _iterator11 : _iterator11[Symbol.iterator]();;) {
          var _ref11;

          if (_isArray11) {
            if (_i11 >= _iterator11.length) break;
            _ref11 = _iterator11[_i11++];
          } else {
            _i11 = _iterator11.next();
            if (_i11.done) break;
            _ref11 = _i11.value;
          }

          var _id2 = _ref11;

          _this3.inputControls[_id2] = _this3.container.find('.' + _id2);
          _this3.binds[_id2] = View.handleInputEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: _id2, ctrl: _this3.inputControls[_id2] });
          _this3.inputControls[_id2].on('keyup', _this3.binds[_id2]);
        }

        _this3.formControls = {};
        for (var _iterator12 = _this3.getForms(), _isArray12 = Array.isArray(_iterator12), _i12 = 0, _iterator12 = _isArray12 ? _iterator12 : _iterator12[Symbol.iterator]();;) {
          var _ref12;

          if (_isArray12) {
            if (_i12 >= _iterator12.length) break;
            _ref12 = _iterator12[_i12++];
          } else {
            _i12 = _iterator12.next();
            if (_i12.done) break;
            _ref12 = _i12.value;
          }

          var _id3 = _ref12;

          _this3.formControls[_id3] = _this3.container.find('.' + _id3);
          _this3.binds[_id3] = View.handleFormEvent.bind({ getHandlers: _this3.getHandlers.bind(_this3), id: _id3, ctrl: _this3.formControls[_id3] });
          _this3.formControls[_id3].on('submit', _this3.binds[_id3]);
        }

        _this3.textControls = {};
        for (var _iterator13 = _this3.getTexts(), _isArray13 = Array.isArray(_iterator13), _i13 = 0, _iterator13 = _isArray13 ? _iterator13 : _iterator13[Symbol.iterator]();;) {
          var _ref13;

          if (_isArray13) {
            if (_i13 >= _iterator13.length) break;
            _ref13 = _iterator13[_i13++];
          } else {
            _i13 = _iterator13.next();
            if (_i13.done) break;
            _ref13 = _i13.value;
          }

          var _id4 = _ref13;

          _this3.textControls[_id4] = _this3.container.find('.' + _id4);
        }

        _this3.stateSetters = [{
          map: _this3.linkControls,
          setter: _this3.setLinkControlState.bind(_this3)
        }, {
          map: _this3.widgetControls,
          setter: _this3.setWidgetControlState.bind(_this3)
        }, {
          map: _this3.inputControls,
          setter: _this3.setInputControlState.bind(_this3)
        }, {
          map: _this3.textControls,
          setter: _this3.setTextControlState.bind(_this3)
        }];

        _this3.initView();

        if (_this3.onLoad) {
          _this3.onLoad();
        }

        _this3.fireLinksOnLoadEvent();
      }).catch(function (res) {
        return console.error(res);
      });
    }

    View.prototype.dispose = function dispose() {
      delete this.textControls;
      for (var _iterator14 = this.getLinks(), _isArray14 = Array.isArray(_iterator14), _i14 = 0, _iterator14 = _isArray14 ? _iterator14 : _iterator14[Symbol.iterator]();;) {
        var _ref14;

        if (_isArray14) {
          if (_i14 >= _iterator14.length) break;
          _ref14 = _iterator14[_i14++];
        } else {
          _i14 = _iterator14.next();
          if (_i14.done) break;
          _ref14 = _i14.value;
        }

        var id = _ref14;

        this.linkControls[id].off('click', this.binds[id]);
      }
      delete this.linkControls;
      delete this.widgetControls;
      for (var _iterator15 = this.getInputs(), _isArray15 = Array.isArray(_iterator15), _i15 = 0, _iterator15 = _isArray15 ? _iterator15 : _iterator15[Symbol.iterator]();;) {
        var _ref15;

        if (_isArray15) {
          if (_i15 >= _iterator15.length) break;
          _ref15 = _iterator15[_i15++];
        } else {
          _i15 = _iterator15.next();
          if (_i15.done) break;
          _ref15 = _i15.value;
        }

        var _id5 = _ref15;

        this.inputControls[_id5].off('keyup', this.binds[_id5]);
      }
      delete this.inputControls;
      for (var _iterator16 = this.getForms(), _isArray16 = Array.isArray(_iterator16), _i16 = 0, _iterator16 = _isArray16 ? _iterator16 : _iterator16[Symbol.iterator]();;) {
        var _ref16;

        if (_isArray16) {
          if (_i16 >= _iterator16.length) break;
          _ref16 = _iterator16[_i16++];
        } else {
          _i16 = _iterator16.next();
          if (_i16.done) break;
          _ref16 = _i16.value;
        }

        var _id6 = _ref16;

        this.formControls[_id6].off('submit', this.binds[_id6]);
      }
      delete this.formControls;

      !this.templateObject.dispose || this.templateObject.dispose();
      delete this.templateObject;

      if (this.isIOS) {
        (0, _libs.$)(this.parentContainer[0].ownerDocument.defaultView).off('resize', this.binds.onResize);
      }
      this.parentContainer.html('');
      delete this.frame;
    };

    View.prototype.getContainer = function getContainer() {
      return this.container[0];
    };

    View.prototype.getParentContainer = function getParentContainer() {
      return this.parentContainer[0];
    };

    View.prototype.addHandler = function addHandler(handler) {
      this.handlers.push(handler);
    };

    View.prototype.initView = function initView() {};

    View.setControlState = function setControlState(ctrl, defaults, state, stateHandlers) {
      if (ctrl) {
        var st = _extends({}, defaults, state);
        for (var _name2 in st) {
          if (st.hasOwnProperty(_name2) && stateHandlers[_name2]) {
            stateHandlers[_name2](ctrl, st[_name2]);
          }
        }
      }
    };

    View.prototype.setLinkControlState = function setLinkControlState(id, state) {
      View.setControlState(this.linkControls[id], {
        visible: true,
        active: false,
        enable: true
      }, state, View.linkStateHandlers);
    };

    View.prototype.setWidgetControlState = function setWidgetControlState(id, state) {
      View.setControlState(this.widgetControls[id], {
        visible: true,
        active: false,
        enable: true
      }, state, View.widgetStateHandlers);
    };

    View.prototype.setInputControlState = function setInputControlState(id, state) {
      View.setControlState(this.inputControls[id], {
        visible: true,
        enable: true,
        value: ''
      }, state, View.inputStateHandlers);
    };

    View.prototype.setTextControlState = function setTextControlState(id, state) {
      View.setControlState(this.textControls[id], {
        visible: true,
        value: ''
      }, state, View.textStateHandlers);
    };

    View.prototype.onItemStateChanged = function onItemStateChanged() {};

    View.prototype.setState = function setState(id, state) {
      for (var _iterator17 = this.stateSetters, _isArray17 = Array.isArray(_iterator17), _i17 = 0, _iterator17 = _isArray17 ? _iterator17 : _iterator17[Symbol.iterator]();;) {
        var _ref17;

        if (_isArray17) {
          if (_i17 >= _iterator17.length) break;
          _ref17 = _iterator17[_i17++];
        } else {
          _i17 = _iterator17.next();
          if (_i17.done) break;
          _ref17 = _i17.value;
        }

        var item = _ref17;

        if (item.map[id]) {
          item.setter(id, state);
          this.onItemStateChanged(id, state);
          break;
        }
      }
    };

    return View;
  }();

  View.linkStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    active: function active(ctrl, value) {
      return View.classProperty(ctrl, 'active', value);
    },
    enable: function enable(ctrl, value) {
      return View.classProperty(ctrl, 'disabled', !value);
    }
  };
  View.widgetStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    active: function active(ctrl, value) {
      return View.classProperty(ctrl, 'active', value);
    },
    enable: function enable(ctrl, value) {
      return View.classProperty(ctrl, 'disabled', !value);
    }
  };
  View.inputStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    value: function value(ctrl, _value) {
      return ctrl[0].value = _value;
    },
    enable: function enable(ctrl, value) {
      return View.attributeProperty(ctrl, 'disabled', !value);
    }
  };
  View.textStateHandlers = {
    visible: function visible(ctrl, value) {
      return View.classProperty(ctrl, 'hidden', !value);
    },
    value: function value(ctrl, _value2) {
      return ctrl.text(_value2);
    }
  };
  exports.default = View;

  /***/
},
/* 66 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }return target;
  };

  var _libs = __webpack_require__(0);

  var _Orbit = __webpack_require__(56);

  var _Orbit2 = _interopRequireDefault(_Orbit);

  var _ThreeMouseEventConverter = __webpack_require__(61);

  var _ThreeMouseEventConverter2 = _interopRequireDefault(_ThreeMouseEventConverter);

  var _ThreeTouchEventConverter = __webpack_require__(62);

  var _ThreeTouchEventConverter2 = _interopRequireDefault(_ThreeTouchEventConverter);

  var _Drag = __webpack_require__(48);

  var _Drag2 = _interopRequireDefault(_Drag);

  var _CSS3DRenderer = __webpack_require__(12);

  var _CSS3DRenderer2 = _interopRequireDefault(_CSS3DRenderer);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var VisualWorld = function (_THREE$EventDispatche) {
    _inherits(VisualWorld, _THREE$EventDispatche);

    function VisualWorld(wnd, doc, container) {
      var useHelpers = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

      _classCallCheck(this, VisualWorld);

      var _this = _possibleConstructorReturn(this, _THREE$EventDispatche.call(this));

      _this.wnd = wnd;
      _this.doc = doc;
      _this.jContainer = container;
      _this.renderCallbacks = [];

      _this.clock = new _libs.THREE.Clock();

      _this.raycaster = new _libs.THREE.Raycaster();

      _this.scene = new _libs.THREE.Scene();
      _this.cssScene = new _libs.THREE.Scene();

      _this.camera = new _libs.THREE.PerspectiveCamera(30, _this.width() / _this.height(), 0.2, 2000);
      var scale = 1;

      _this.camera.position.x = 0;
      _this.camera.position.y = 5.5 * scale;
      _this.camera.position.z = 0;

      _this.renderer = new _libs.THREE.WebGLRenderer({ alpha: true, antialias: true });
      _this.renderer.setClearColor(0x000000, 0);
      _this.renderer.setPixelRatio(_this.wnd.devicePixelRatio);
      _this.renderer.setSize(_this.width(), _this.height());

      _this.jContainer.append(_this.renderer.domElement);

      _this.cssRenderer = new _CSS3DRenderer2.default();
      _this.cssRenderer.setSize(_this.width(), _this.height());
      (0, _libs.$)(_this.cssRenderer.domElement).css({
        position: 'absolute',
        top: 0,
        margin: 0,
        padding: 0
      });
      _this.jContainer.append(_this.cssRenderer.domElement);

      _this.element = _this.cssRenderer.domElement;

      _this.controls = new _Orbit2.default(_this.camera, _this.element);
      _this.controls.target.y = 0.5;

      var cssScene = (0, _libs.$)(_this.cssRenderer.domElement).find('div'),
          tmpVector = new _libs.THREE.Vector3();
      _this.controls.addEventListener('change', function () {
        _this.camera.getWorldDirection(tmpVector);
        cssScene.css('display', tmpVector.y - _this.camera.position.y > 0 ? 'none' : 'block');
      });

      _this.textureLoader = new _libs.THREE.TextureLoader();

      _this.scene.add(new _libs.THREE.AmbientLight(0xD0D0D0)); //0xC0C0C0

      _this.light = new _libs.THREE.DirectionalLight(0x404040, 1);
      _this.light.position.set(0, 6 * scale, 0);
      _this.light.castShadow = false;
      // const d = 20*scale;
      // this.light.shadow.camera.left = -d;
      // this.light.shadow.camera.right = d;
      // this.light.shadow.camera.top = d;
      // this.light.shadow.camera.bottom = -d;
      // this.light.shadow.camera.near = 1*scale;
      // this.light.shadow.camera.far = 25*scale;
      // this.light.shadow.mapSize.x = 1024;
      // this.light.shadow.mapSize.y = 1024;
      _this.scene.add(_this.light);

      if (useHelpers) {
        _this.scene.add(new _libs.THREE.AxisHelper(5));
      }

      _this.binds = {
        onWindowResize: _this.onWindowResize.bind(_this),
        animate: _this.animate.bind(_this)
      };

      (0, _libs.$)(_this.wnd).on('resize', _this.binds.onWindowResize);

      _this.mouseEvents = new _ThreeMouseEventConverter2.default(_this.wnd, _this.doc, _this);
      _this.touchEvents = new _ThreeTouchEventConverter2.default(_this.wnd, _this.doc, _this);
      var filterData = { type: 'mousemove' };
      _this.mouseEvents.filter = function (element, e) {
        var types = ['mouseenter', 'mouseover', 'mouseleave', 'mouseout'],
            contains = function contains(p, c) {
          return p === c || _libs.$.contains(p, c);
        };
        if (e.type === 'mousemove') {
          filterData.pageX = e.pageX;
          filterData.pageY = e.pageY;
        }
        return e.relatedTarget && ~types.indexOf(e.type) && contains(element, e.target) && contains(element, e.relatedTarget) ? _extends({}, e, filterData) : e;
      };
      _this.drag = new _Drag2.default(_this.wnd, _this.doc, _this);

      _this.animate();
      return _this;
    }

    VisualWorld.prototype.dispose = function dispose() {
      delete this.binds.animate;
      (0, _libs.$)(this.wnd).off('resize', this.binds.onWindowResize);
      this.mouseEvents.dispose();
      this.touchEvents.dispose();
      this.drag.dispose();
      this.controls.dispose();
    };

    VisualWorld.prototype.width = function width() {
      return this.jContainer.width();
    };

    VisualWorld.prototype.height = function height() {
      return this.jContainer.height();
    };

    VisualWorld.prototype.setExtraLighting = function setExtraLighting(v) {
      this.light.intensity = v;
    };

    VisualWorld.prototype.getOrbit = function getOrbit() {
      return this.controls;
    };

    VisualWorld.prototype.setControlsState = function setControlsState(state) {
      this.controls.enabled = state;
    };

    VisualWorld.prototype.getControlsState = function getControlsState() {
      return this.controls.enabled;
    };

    VisualWorld.prototype.onWindowResize = function onWindowResize() {
      var _this2 = this;

      var updateCamera = function updateCamera(camera) {
        camera.aspect = _this2.width() / _this2.height();
        camera.updateProjectionMatrix();
      },
          updateRenderer = function updateRenderer(renderer) {
        renderer.setSize(_this2.width(), _this2.height());
      };

      updateCamera(this.camera);
      updateRenderer(this.renderer);
      updateRenderer(this.cssRenderer);

      this.dispatchEvent({ type: 'resize' });
    };

    VisualWorld.prototype.addObject = function addObject(object) {
      this.scene.add(object);
    };

    VisualWorld.prototype.addCssObject = function addCssObject(object) {
      this.cssScene.add(object);
    };

    VisualWorld.prototype.removeCssObject = function removeCssObject(object) {
      this.cssScene.remove(object);
    };

    VisualWorld.prototype.removeObject = function removeObject(object) {
      this.scene.remove(object);
    };

    VisualWorld.prototype.animate = function animate() {
      if (this.binds.animate) {
        requestAnimationFrame(this.binds.animate);
      }
      this.render();
    };

    VisualWorld.prototype.addRenderCallback = function addRenderCallback(clb) {
      this.renderCallbacks.push(clb);
    };

    VisualWorld.prototype.removeRenderCallback = function removeRenderCallback(clb) {
      var i = this.renderCallbacks.indexOf(clb);
      if (~i) {
        this.renderCallbacks.splice(i, 1);
      }
    };

    VisualWorld.prototype.render = function render() {
      var deltaTime = this.clock.getDelta();
      this.controls.update(deltaTime);
      for (var _iterator = this.renderCallbacks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {
        var _ref;

        if (_isArray) {
          if (_i >= _iterator.length) break;
          _ref = _iterator[_i++];
        } else {
          _i = _iterator.next();
          if (_i.done) break;
          _ref = _i.value;
        }

        var clb = _ref;

        clb(deltaTime);
      }
      this.cssRenderer.render(this.cssScene, this.camera);
      this.renderer.render(this.scene, this.camera);
    };

    VisualWorld.prototype.processGeometry = function processGeometry(bufGeometry, mesh) {
      mesh.geometry = bufGeometry;
      // Obtain a Geometry
      var geometry = new _libs.THREE.Geometry().fromBufferGeometry(bufGeometry);
      // Merge the vertices so the triangle soup is converted to indexed triangles
      geometry.mergeVertices();
      // Convert again to BufferGeometry, indexed
      var indexedBufferGeom = this.createIndexedBufferGeometryFromGeometry(geometry);
      // Create index arrays mapping the indexed vertices to bufGeometry vertices
      return this.mapIndices(bufGeometry, indexedBufferGeom);
    };

    VisualWorld.prototype.createIndexedBufferGeometryFromGeometry = function createIndexedBufferGeometryFromGeometry(geometry) {
      var numVertices = geometry.vertices.length;
      var numFaces = geometry.faces.length;

      var bufferGeom = new _libs.THREE.BufferGeometry();
      var vertices = new Float32Array(numVertices * 3);
      var indices = new (numFaces * 3 > 65535 ? Uint32Array : Uint16Array)(numFaces * 3);

      for (var i = 0; i < numVertices; i++) {
        var p = geometry.vertices[i];
        var i3 = i * 3;
        vertices[i3] = p.x;
        vertices[i3 + 1] = p.y;
        vertices[i3 + 2] = p.z;
      }

      for (var _i2 = 0; _i2 < numFaces; _i2++) {
        var f = geometry.faces[_i2];
        var _i3 = _i2 * 3;
        indices[_i3] = f.a;
        indices[_i3 + 1] = f.b;
        indices[_i3 + 2] = f.c;
      }

      bufferGeom.setIndex(new _libs.THREE.BufferAttribute(indices, 1));
      bufferGeom.addAttribute('position', new _libs.THREE.BufferAttribute(vertices, 3));

      return bufferGeom;
    };

    VisualWorld.prototype.isEqual = function isEqual(x1, y1, z1, x2, y2, z2) {
      var delta = 0.000001;
      return Math.abs(x2 - x1) < delta && Math.abs(y2 - y1) < delta && Math.abs(z2 - z1) < delta;
    };

    VisualWorld.prototype.mapIndices = function mapIndices(bufGeometry, indexedBufferGeom) {
      // Creates mappedVertices, mappedIndices and mappedAssociation in bufGeometry
      var vertices = bufGeometry.attributes.position.array;
      var idxVertices = indexedBufferGeom.attributes.position.array;
      var indices = indexedBufferGeom.index.array;

      var numIdxVertices = idxVertices.length / 3;
      var numVertices = vertices.length / 3;

      bufGeometry.mappedVertices = idxVertices;
      bufGeometry.mappedIndices = indices;
      bufGeometry.mappedAssociation = [];

      for (var i = 0; i < numIdxVertices; i++) {
        var association = [];
        bufGeometry.mappedAssociation.push(association);
        var i3 = i * 3;
        for (var j = 0; j < numVertices; j++) {
          var j3 = j * 3;
          if (this.isEqual(idxVertices[i3], idxVertices[i3 + 1], idxVertices[i3 + 2], vertices[j3], vertices[j3 + 1], vertices[j3 + 2])) {
            association.push(j3);
          }
        }
      }
      return { vertices: bufGeometry.mappedVertices, indices: bufGeometry.mappedIndices };
    };

    VisualWorld.prototype.oneNodePositionCallback = function oneNodePositionCallback(p, q) {
      this.position.set(p.x, p.y, p.z);
      this.quaternion.set(q.x, q.y, q.z, q.w);
    };

    VisualWorld.prototype.multyNodePositionCallback = function multyNodePositionCallback(node, p, n) {
      var geometry = this.geometry;
      var volumePositions = geometry.attributes.position.array;
      var volumeNormals = geometry.attributes.normal.array;
      var assocVertex = geometry.mappedAssociation[node];

      for (var k = 0; k < assocVertex.length; k++) {
        var indexVertex = assocVertex[k];
        volumePositions[indexVertex] = p.x;
        volumeNormals[indexVertex] = n.x;
        ++indexVertex;
        volumePositions[indexVertex] = p.y;
        volumeNormals[indexVertex] = n.y;
        ++indexVertex;
        volumePositions[indexVertex] = p.z;
        volumeNormals[indexVertex] = n.z;
      }
    };

    VisualWorld.prototype.multyNodePositionPostCallback = function multyNodePositionPostCallback() {
      var geometry = this.geometry;
      geometry.attributes.position.needsUpdate = true;
      geometry.attributes.normal.needsUpdate = true;
    };

    VisualWorld.prototype.pathPositionCallback = function pathPositionCallback(node, p) {
      var positions = this.geometry.attributes.position.array;
      var i = 3 * node;
      positions[i++] = p.x;
      positions[i++] = p.y;
      positions[i] = p.z;
    };

    VisualWorld.prototype.pathPositionPostCallback = function pathPositionPostCallback() {
      var geometry = this.geometry;
      geometry.computeVertexNormals();
      geometry.attributes.position.needsUpdate = true;
      geometry.attributes.normal.needsUpdate = true;
    };

    return VisualWorld;
  }(_libs.THREE.EventDispatcher);

  exports.default = VisualWorld;

  /***/
},
/* 67 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Controller2 = __webpack_require__(15);

  var _Controller3 = _interopRequireDefault(_Controller2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var WidgetController = function (_Controller) {
    _inherits(WidgetController, _Controller);

    function WidgetController(view) {
      _classCallCheck(this, WidgetController);

      var _this = _possibleConstructorReturn(this, _Controller.call(this));

      _this.view = view;
      _this.visible = false;
      return _this;
    }

    WidgetController.prototype.togle = function togle() {
      this.visible = !this.visible;
      this.fireChange();
    };

    WidgetController.prototype.hide = function hide() {
      this.visible = false;
      this.fireChange();
    };

    WidgetController.prototype.fireChange = function fireChange() {
      if (this.onChange) {
        this.onChange();
      }
      this.updateView();
    };

    WidgetController.prototype.updateView = function updateView() {
      if (this.view) {
        this.view.setState('widFloatWnd', {
          enable: true,
          visible: this.visible,
          active: false
        });
      }
    };

    return WidgetController;
  }(_Controller3.default);

  exports.default = WidgetController;

  /***/
},
/* 68 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Target2 = __webpack_require__(21);

  var _Target3 = _interopRequireDefault(_Target2);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var CircleTarget = function (_Target) {
    _inherits(CircleTarget, _Target);

    function CircleTarget(x, y, r) {
      _classCallCheck(this, CircleTarget);

      var _this = _possibleConstructorReturn(this, _Target.call(this));

      _this.p = {
        x: x,
        y: y,
        r: r
      };
      return _this;
    }

    CircleTarget.prototype.testIntersection = function testIntersection(e, data) {
      var res = void 0;
      var x = data.x,
          y = data.y,
          p = this.p;

      if ((x - p.x) * (x - p.x) + (y - p.y) * (y - p.y) <= p.r * p.r) {
        res = {
          target: this,
          data: data
        };
      }
      return res;
    };

    return CircleTarget;
  }(_Target3.default);

  exports.default = CircleTarget;

  /***/
},
/* 69 */
/***/function (module, exports, __webpack_require__) {

  "use strict";
  'use strict';

  exports.__esModule = true;

  var _Target2 = __webpack_require__(21);

  var _Target3 = _interopRequireDefault(_Target2);

  var _BaseMathUtils = __webpack_require__(2);

  var _BaseMathUtils2 = _interopRequireDefault(_BaseMathUtils);

  function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : { default: obj };
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _possibleConstructorReturn(self, call) {
    if (!self) {
      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    }return call && ((typeof call === 'undefined' ? 'undefined' : _typeof2(call)) === "object" || typeof call === "function") ? call : self;
  }

  function _inherits(subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === 'undefined' ? 'undefined' : _typeof2(superClass)));
    }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  }

  var PolyTarget = function (_Target) {
    _inherits(PolyTarget, _Target);

    function PolyTarget(poly) {
      _classCallCheck(this, PolyTarget);

      var _this = _possibleConstructorReturn(this, _Target.call(this));

      _this.poly = poly;
      return _this;
    }

    PolyTarget.prototype.testIntersection = function testIntersection(e, p) {
      return _BaseMathUtils2.default.isInsidePoly(this.poly, p) ? {
        target: this,
        data: p
      } : undefined;
    };

    return PolyTarget;
  }(_Target3.default);

  exports.default = PolyTarget;

  /***/
},
/* 70 */
/***/function (module, exports, __webpack_require__) {

  // stats.js - http://github.com/mrdoob/stats.js
  (function (f, e) {
    true ? module.exports = e() : "function" === typeof define && define.amd ? define(e) : f.Stats = e();
  })(this, function () {
    var f = function f() {
      function e(a) {
        c.appendChild(a.dom);return a;
      }function u(a) {
        for (var d = 0; d < c.children.length; d++) {
          c.children[d].style.display = d === a ? "block" : "none";
        }l = a;
      }var l = 0,
          c = document.createElement("div");c.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";c.addEventListener("click", function (a) {
        a.preventDefault();
        u(++l % c.children.length);
      }, !1);var k = (performance || Date).now(),
          g = k,
          a = 0,
          r = e(new f.Panel("FPS", "#0ff", "#002")),
          h = e(new f.Panel("MS", "#0f0", "#020"));if (self.performance && self.performance.memory) var t = e(new f.Panel("MB", "#f08", "#201"));u(0);return { REVISION: 16, dom: c, addPanel: e, showPanel: u, begin: function begin() {
          k = (performance || Date).now();
        }, end: function end() {
          a++;var c = (performance || Date).now();h.update(c - k, 200);if (c > g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {
            var d = performance.memory;t.update(d.usedJSHeapSize / 1048576, d.jsHeapSizeLimit / 1048576);
          }return c;
        }, update: function update() {
          k = this.end();
        }, domElement: c, setMode: u };
    };f.Panel = function (e, f, l) {
      var c = Infinity,
          k = 0,
          g = Math.round,
          a = g(window.devicePixelRatio || 1),
          r = 80 * a,
          h = 48 * a,
          t = 3 * a,
          v = 2 * a,
          d = 3 * a,
          m = 15 * a,
          n = 74 * a,
          p = 30 * a,
          q = document.createElement("canvas");q.width = r;q.height = h;q.style.cssText = "width:80px;height:48px";var b = q.getContext("2d");b.font = "bold " + 9 * a + "px Helvetica,Arial,sans-serif";b.textBaseline = "top";b.fillStyle = l;b.fillRect(0, 0, r, h);b.fillStyle = f;b.fillText(e, t, v);
      b.fillRect(d, m, n, p);b.fillStyle = l;b.globalAlpha = .9;b.fillRect(d, m, n, p);return { dom: q, update: function update(h, w) {
          c = Math.min(c, h);k = Math.max(k, h);b.fillStyle = l;b.globalAlpha = 1;b.fillRect(0, 0, r, m);b.fillStyle = f;b.fillText(g(h) + " " + e + " (" + g(c) + "-" + g(k) + ")", t, v);b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p);b.fillRect(d + n - a, m, a, p);b.fillStyle = l;b.globalAlpha = .9;b.fillRect(d + n - a, m, a, g((1 - h / w) * p));
        } };
    };return f;
  });

  /***/
},
/* 71 */
/***/function (module, exports, __webpack_require__) {

  /*** IMPORTS FROM imports-loader ***/
  var define = false;

  /*!
   * jQuery Mousewheel 3.1.13
   *
   * Copyright jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   */

  (function (factory) {
    if (typeof define === 'function' && define.amd) {
      // AMD. Register as an anonymous module.
      define(['jquery'], factory);
    } else if (true) {
      // Node/CommonJS style for Browserify
      module.exports = factory;
    } else {
      // Browser globals
      factory(jQuery);
    }
  })(function ($) {

    var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice = Array.prototype.slice,
        nullLowestDeltaTimeout,
        lowestDelta;

    if ($.event.fixHooks) {
      for (var i = toFix.length; i;) {
        $.event.fixHooks[toFix[--i]] = $.event.mouseHooks;
      }
    }

    var special = $.event.special.mousewheel = {
      version: '3.1.12',

      setup: function setup() {
        if (this.addEventListener) {
          for (var i = toBind.length; i;) {
            this.addEventListener(toBind[--i], handler, false);
          }
        } else {
          this.onmousewheel = handler;
        }
        // Store the line height and page height for this particular element
        $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
        $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
      },

      teardown: function teardown() {
        if (this.removeEventListener) {
          for (var i = toBind.length; i;) {
            this.removeEventListener(toBind[--i], handler, false);
          }
        } else {
          this.onmousewheel = null;
        }
        // Clean up the data we added to the element
        $.removeData(this, 'mousewheel-line-height');
        $.removeData(this, 'mousewheel-page-height');
      },

      getLineHeight: function getLineHeight(elem) {
        var $elem = $(elem),
            $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
        if (!$parent.length) {
          $parent = $('body');
        }
        return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
      },

      getPageHeight: function getPageHeight(elem) {
        return $(elem).height();
      },

      settings: {
        adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
        normalizeOffset: true // calls getBoundingClientRect for each event
      }
    };

    $.fn.extend({
      mousewheel: function mousewheel(fn) {
        return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
      },

      unmousewheel: function unmousewheel(fn) {
        return this.unbind('mousewheel', fn);
      }
    });

    function handler(event) {
      var orgEvent = event || window.event,
          args = slice.call(arguments, 1),
          delta = 0,
          deltaX = 0,
          deltaY = 0,
          absDelta = 0,
          offsetX = 0,
          offsetY = 0;
      event = $.event.fix(orgEvent);
      event.type = 'mousewheel';

      // Old school scrollwheel delta
      if ('detail' in orgEvent) {
        deltaY = orgEvent.detail * -1;
      }
      if ('wheelDelta' in orgEvent) {
        deltaY = orgEvent.wheelDelta;
      }
      if ('wheelDeltaY' in orgEvent) {
        deltaY = orgEvent.wheelDeltaY;
      }
      if ('wheelDeltaX' in orgEvent) {
        deltaX = orgEvent.wheelDeltaX * -1;
      }

      // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
      if ('axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS) {
        deltaX = deltaY * -1;
        deltaY = 0;
      }

      // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
      delta = deltaY === 0 ? deltaX : deltaY;

      // New school wheel delta (wheel event)
      if ('deltaY' in orgEvent) {
        deltaY = orgEvent.deltaY * -1;
        delta = deltaY;
      }
      if ('deltaX' in orgEvent) {
        deltaX = orgEvent.deltaX;
        if (deltaY === 0) {
          delta = deltaX * -1;
        }
      }

      // No change actually happened, no reason to go any further
      if (deltaY === 0 && deltaX === 0) {
        return;
      }

      // Need to convert lines and pages to pixels if we aren't already in pixels
      // There are three delta modes:
      //   * deltaMode 0 is by pixels, nothing to do
      //   * deltaMode 1 is by lines
      //   * deltaMode 2 is by pages
      if (orgEvent.deltaMode === 1) {
        var lineHeight = $.data(this, 'mousewheel-line-height');
        delta *= lineHeight;
        deltaY *= lineHeight;
        deltaX *= lineHeight;
      } else if (orgEvent.deltaMode === 2) {
        var pageHeight = $.data(this, 'mousewheel-page-height');
        delta *= pageHeight;
        deltaY *= pageHeight;
        deltaX *= pageHeight;
      }

      // Store lowest absolute delta to normalize the delta values
      absDelta = Math.max(Math.abs(deltaY), Math.abs(deltaX));

      if (!lowestDelta || absDelta < lowestDelta) {
        lowestDelta = absDelta;

        // Adjust older deltas if necessary
        if (shouldAdjustOldDeltas(orgEvent, absDelta)) {
          lowestDelta /= 40;
        }
      }

      // Adjust older deltas if necessary
      if (shouldAdjustOldDeltas(orgEvent, absDelta)) {
        // Divide all the things by 40!
        delta /= 40;
        deltaX /= 40;
        deltaY /= 40;
      }

      // Get a whole, normalized value for the deltas
      delta = Math[delta >= 1 ? 'floor' : 'ceil'](delta / lowestDelta);
      deltaX = Math[deltaX >= 1 ? 'floor' : 'ceil'](deltaX / lowestDelta);
      deltaY = Math[deltaY >= 1 ? 'floor' : 'ceil'](deltaY / lowestDelta);

      // Normalise offsetX and offsetY properties
      if (special.settings.normalizeOffset && this.getBoundingClientRect) {
        var boundingRect = this.getBoundingClientRect();
        offsetX = event.clientX - boundingRect.left;
        offsetY = event.clientY - boundingRect.top;
      }

      // Add information to the event object
      event.deltaX = deltaX;
      event.deltaY = deltaY;
      event.deltaFactor = lowestDelta;
      event.offsetX = offsetX;
      event.offsetY = offsetY;
      // Go ahead and set deltaMode to 0 since we converted to pixels
      // Although this is a little odd since we overwrite the deltaX/Y
      // properties with normalized deltas.
      event.deltaMode = 0;

      // Add event and delta to the front of the arguments
      args.unshift(event, delta, deltaX, deltaY);

      // Clearout lowestDelta after sometime to better
      // handle multiple device types that give different
      // a different lowestDelta
      // Ex: trackpad = 3 and mouse wheel = 120
      if (nullLowestDeltaTimeout) {
        clearTimeout(nullLowestDeltaTimeout);
      }
      nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

      return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
      lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
      // If this is an older event and the delta is divisable by 120,
      // then we are assuming that the browser is treating this as an
      // older mouse wheel event and that we should divide the deltas
      // by 40 to try and get a more usable deltaFactor.
      // Side note, this actually impacts the reported scroll distance
      // in older browsers and can cause scrolling to be slower than native.
      // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
      return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }
  });

  /***/
},
/* 72 */
/***/function (module, exports, __webpack_require__) {

  __webpack_require__(23);
  module.exports = __webpack_require__(22);

  /***/
}
/******/]);

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;
var _$ =  true ? window.jQuery : require('jquery'),
    _html2canvas =  true ? window.html2canvas : require('html2canvas'),
    _THREE =  true ? window.THREE : require('three'),
    _PDFJS =  true ? window.PDFJS : require('pdfjs');

exports.$ = _$;
exports.html2canvas = _html2canvas;
exports.THREE = _THREE;
exports.PDFJS = _PDFJS;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(0);


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZTllZjBjNTdkNGM5OGI5ODgxODUiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6L3dlYnBhY2svYm9vdHN0cmFwIDcyNGU1OGRmNThjNjVjNDgwOGI0Iiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9saWJzLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2xpYnMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQmFzZU1hdGhVdGlscy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9NYXRoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0dyYXBoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VGYWN0b3J5LmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1Byb3BzQnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NoZWV0QmxvY2suanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvcHJvcHMvYm9vay5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9DU1MzRFJlbmRlcmVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NTU0xheWVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NhY2hlLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ3VzdG9tRXZlbnRDb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRmluZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1BkZi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZUV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9UYXJnZXQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vaW5kZXguanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL3BvbHlmaWxsLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQXV0b05hdmlnYXRvci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0JpbmRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2suanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Cb29rQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2tQcmludGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1ZpZXcuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9DbGJCb29rUHJvcHNCdWlsZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQ292ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Dc3NMYXllcnNNYW5hZ2VyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGFnZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9QZGZCb29rUHJvcHNCdWlsZGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvUGRmTGlua3NIYW5kbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2VhcmNoRW5naW5lLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL2NsYXNzZXMvU2hlZXRDc3NMYXllci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NoZWV0UGh5c2ljcy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9qcy9jbGFzc2VzL1NvdW5kc0Vudmlyb21lbnQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Ub2NDb250cm9sbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL21vZGVscy9zaGVldEJsb2NrLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2pzL3Byb3BzL2Jvb2tDb250cm9sbGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0JsYW5rSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQm9va21hcmtzLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RldGVjdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RvY01vdXNlU2ltdWxhdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0RvbTJJbWFnZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9EcmFnLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0V2ZW50c1RvQWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9GdWxsU2NyZWVuLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0ludGVyYWN0aXZlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Mb2FkaW5nQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Nb3VzZUV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL09iamVjdDNEV2F0Y2hlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9PcmJpdC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9QZGZJbWFnZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9TZWFyY2guanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvU3RhdGljSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGV4dHVyZUFuaW1hdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlTW91c2VFdmVudENvbnZlcnRlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGh1bWJuYWlscy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Ub3VjaEV2ZW50Q29udmVydGVyLmpzIiwid2VicGFjazovLy93ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1ZpZXcuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVmlzdWFsV29ybGQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvV2lkZ2V0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy90YXJnZXRzL0NpcmNsZVRhcmdldC5qcyIsIndlYnBhY2s6Ly8vd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy90YXJnZXRzL1BvbHlUYXJnZXQuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vfi9zdGF0cy5qcy9idWlsZC9zdGF0cy5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2s6Ly8vfi9qcXVlcnktbW91c2V3aGVlbC9qcXVlcnkubW91c2V3aGVlbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGlicy5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiXyQiLCJ3aW5kb3ciLCJfaHRtbDJjYW52YXMiLCJfVEhSRUUiLCJfUmVhY3QiLCJfUmVhY3RET00iLCJfUERGSlMiLCJfdHIiLCIkIiwiaHRtbDJjYW52YXMiLCJUSFJFRSIsIlJlYWN0IiwiUmVhY3RET00iLCJQREZKUyIsInRyIiwiRkIzRF9MT0NBTEUiLCJCYXNlTWF0aFV0aWxzIiwic3VtMSIsImthIiwiYSIsImtiIiwiYiIsInN1bTIiLCJzdW0zIiwic3VtNCIsInJrNCIsImR5IiwidCIsImR0IiwieSIsInN1bSIsImsxIiwiazIiLCJrMyIsIms0IiwiZXh0cmFwb2xhdGVMaW5lYXIiLCJ4IiwieGkiLCJpbnRlcnBvbGF0ZUxpbmVhciIsInlpIiwiY2FsY1NjYWxlIiwic3JjVyIsInNyY0giLCJkc3RXIiwiZHN0SCIsIk1hdGgiLCJtdWxNIiwiciIsImkiLCJqIiwiayIsInRyYW5zTSIsIm0iLCJtYXQiLCJkYXRhIiwicyIsImRpc3AiLCJNIiwicHJlZGljdCIsIm51bSIsImwiLCJEIiwiYW0iLCJibSIsInRhIiwiZCIsInAiLCJ2IiwiZ2V0VW5pcXVlIiwic2V0U3BsaW5lUG9pbnRzIiwic3BsaW5lIiwicHMiLCJjb25zb2xlIiwibWFwbDJMIiwibHMiLCJsZW4iLCJuIiwiZiIsImRMIiwiTCIsImRldDIiLCJjIiwic29sdmUyTGluIiwiYTEiLCJiMSIsImEyIiwiYjIiLCJyZXMiLCJkeCIsImlzSW5zaWRlUG9seSIsImRvbmUiLCJjdCIsIm5wIiwicm4iLCJwMCIsInAxIiwiaXAiLCJ0biIsImlzSW5zaWRlQ29udlBvbHkiLCJzZyIsInYybGVuIiwidjIiLCJ2MmRpc3QiLCJ2MjEiLCJ2MjIiLCJjb21wdXRlU3F1YXJlIiwiY29tcHV0ZUludGVycENvZWZzIiwidHJpIiwiY29lZnMiLCJlcHMiLCJNYXRoVXRpbHMiLCJzcGxpdFNwbGluZSIsIk4iLCJvIiwiZGwiLCJnZXRMaW5lYXJJbmRlY2VzIiwiZGVsIiwiZERlbCIsInJlZmluZVBvbHkiLCJwb2x5IiwibWF4RGwiLCJ2MSIsIlV0aWxzIiwibm9ybWFsaXplVXJsIiwidXJsIiwiYmFzZSIsInNwbGl0IiwiZXh0ZW5kcyIsImRlciIsImRlZmF1bHRDbXAiLCJsb3dlckJvdW5kIiwiY21wIiwiaCIsIm1pZCIsIkltYWdlQmFzZSIsImNvbnRleHQiLCJzZXRSZXNvbHV0aW9uIiwiZGlzcG9zZSIsInJlbmRlckJsYW5rUGFnZSIsInJlbmRlckltYWdlIiwiaW1hZ2UiLCJub3JtVG9Db252IiwiaGVpZ2h0IiwicmVuZGVySGl0IiwiY3R4IiwicHVzaEN0eCIsInBvcEN0eCIsInJlbmRlck5vdEZvdW5kUGFnZSIsImZpbmlzaFJlbmRlciIsImZpbmlzaExvYWQiLCJnZXRTaW11bGF0ZWREb2MiLCJyZW5kZXJDYW52YXMiLCJyZW5kZXJDYW52YXNDdHgiLCJFdmVudENvbnZlcnRlciIsInNldEVuYWJsZSIsInZsIiwiZ2V0Q2FsbGJhY2siLCJvYmplY3QiLCJub3RpZnkiLCJlIiwidHlwZSIsImNhbGxiYWNrIiwidmlldyIsInduZCIsImpFIiwiY29udmVydCIsImNvbnZlcnRUb3VjaCIsImNvbnZlcnRNb3VzZSIsIkdyYXBoVXRpbHMiLCJpbnRlcnBvbGF0ZTAxIiwieTEiLCJ5MiIsImdldENvbG9yQnl0ZXMiLCJjb2xvciIsImludmVyc2VDb2xvciIsImJzIiwiaWJzIiwibmJzIiwiY29sb3IyUmdiYSIsImJ5dGVzMlJnYmEiLCJieXRlczJDb2xvciIsIkltYWdlRmFjdG9yeSIsImNhY2hlIiwiYnVpbGQiLCJpbmZvIiwid2lkdGhUZXhlbHMiLCJoZWlnaHRUZXhlbHMiLCJpbmplY3RvciIsInVuZGVmaW5lZCIsIkJvb2tQcm9wc0J1aWxkZXIiLCJjYWxjU2l6ZSIsIndpZHRoIiwic2NhbGUiLCJjYWxjVGV4ZWxzIiwic2hlZXQiLCJjYWxjUHJvcHMiLCJjb3ZlciIsInBhZ2UiLCJjYWxjU2hlZXRzIiwicGFnZXMiLCJnZXRTaGVldHMiLCJnZXRQcm9wcyIsImdldFBhZ2VDYWxsYmFjayIsInJlYWR5IiwiU2hlZXRCbG9jayIsImFuZ2xlIiwic3RhdGUiLCJmaXJzdCIsImxhc3QiLCJwcm9wcyIsImxvYWRlZFBvaW50cyIsIk9iamVjdCIsIm1hcCIsImlzIiwiQXJyYXkiLCJtYXJrZXIiLCJ2ZXJ0ZXgiLCJ1c2UiLCJtYXhEaXN0YW5jZSIsInBvaW50cyIsIk9aIiwiYXhpcyIsImdldFNpemUiLCJzaGVldHMiLCJnZXRUb3BDZXJuZXJzIiwib2ZmIiwiZ2V0VG9wU2l6ZSIsInZzIiwiZ2V0VG9wV29ybGRSb3RhdGlvbiIsInEiLCJnZXRUb3BXb3JsZFBvc2l0aW9uIiwidmkiLCJnZXRJbnRlcnBvbGF0aW9uUG9pbnRzIiwiaW5kcyIsIm1vZCIsIksiLCJzZXQiLCJQSSIsImNsb3NlZEFuZ2xlIiwiYmluZGVyVHVybiIsImhsIiwiaHIiLCJvZmZzZXQiLCJpbkFuZ2xlIiwiaEFuZ2xlIiwic2V0UG9pbnRzIiwibGVmdCIsInJpZ2h0IiwieXMiLCJ6IiwicGxhbmUiLCJub3JtYWwiLCJwbGFuZU9mZnNldCIsInByb2oiLCJkaXN0YW5jZSIsImQyQW5nbGUiLCJwb2ludCIsImludmVyc2UiLCJnZXRQb2ludHNBdEhzIiwiaHMiLCJibCIsInAyIiwiZHAiLCJsbiIsInNwIiwibnBzIiwiZ2V0UG9pbnRzQXRBbmdsZUFuZEhzIiwiZ2V0UG9pbnRzQXRBbmdsZSIsImFuZ2xlcyIsInhwcyIsInlwcyIsImludGVycG9sYXRlIiwibG9hZFBvaW50cyIsIm9wZW5lZEludGVycG9sYXRpb25JbmRlY2VzIiwiY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMiLCJmbGF0SW50ZXJwb2xhdGlvbkluZGVjZXMiLCJpbnRlcnBvbGF0aW9uUG9pbnRzIiwiZ3Jhdml0eSIsImNhY2hlZFBhZ2VzIiwicmVuZGVySW5hY3RpdmVQYWdlcyIsInJlbmRlckluYWN0aXZlUGFnZXNPbk1vYmlsZSIsInJlbmRlcldoaWxlRmxpcHBpbmciLCJwYWdlc0ZvclByZWRpY3RpbmciLCJwcmVsb2FkUGFnZXMiLCJydGwiLCJzdGFydFZlbG9jaXR5IiwiY29ybmVyRGV2aWF0aW9uIiwiZmxleGliaWxpdHkiLCJmbGV4aWJsZUNvcm5lciIsImJlbmRpbmciLCJ3YXZlIiwic2hhcGUiLCJiaW5kZXJUZXh0dXJlIiwiZGVwdGgiLCJwYWRkaW5nIiwibWFzcyIsImNzc0xheWVyUHJvcHMiLCJlbGVtZW50IiwibWF0cml4IiwiY2FtZXJhIiwiZm92Iiwic3R5bGUiLCJvYmplY3RzIiwiZG9tRWxlbWVudCIsImRvY3VtZW50IiwiY2FtZXJhRWxlbWVudCIsImlzSUUiLCJuYXZpZ2F0b3IiLCJfaGVpZ2h0IiwiX3dpZHRoIiwiX3dpZHRoSGFsZiIsIl9oZWlnaHRIYWxmIiwiZWxlbWVudHMiLCJlcHNpbG9uIiwibWF0cml4M2QiLCJnZXRPYmplY3RDU1NNYXRyaXgiLCJjYWNoZWRTdHlsZSIsImdldERpc3RhbmNlVG9TcXVhcmVkIiwicmVuZGVyT2JqZWN0Iiwib2JqZWN0MSIsIm9iamVjdDIiLCJvcmRlciIsInpNYXgiLCJzY2VuZSIsImluZGV4IiwiY2FtZXJhQ1NTTWF0cml4IiwiZ2V0Q2FtZXJhQ1NTTWF0cml4Iiwiek9yZGVyIiwiQ1NTM0RSZW5kZXJlciIsIl9DU1MzRE9iamVjdCIsIl9DU1MzRFNwcml0ZSIsIkNTUzNET2JqZWN0IiwiQ1NTM0RTcHJpdGUiLCJDU1NMYXllciIsImluaXQiLCJkb2MiLCJkZWxheSIsIndpZHRoUHhzIiwiaGVpZ2h0UHhzIiwiY2FsbEludGVybmFsIiwibmFtZSIsImNsZWFySW50ZXJuYWxzIiwic2V0RGF0YSIsImNzcyIsImh0bWwiLCJqcyIsImV2YWwiLCJwZW5kZWRDYWxsIiwiY2xiIiwidGltZXN0YW1wIiwiRGF0ZSIsInNldFRpbWVvdXQiLCJpc0hpZGRlbiIsImhpZGUiLCJyZXNvbHZlIiwiUHJvbWlzZSIsInNob3ciLCJDYWNoZSIsIm1heFNpemUiLCJJbmZpbml0eSIsInNpemVvZiIsImNvdW50U2l6ZW9mIiwiZm9yRWFjaCIsInZhbHVlIiwicmVtb3ZlIiwiZnJlZVNwYWNlIiwiYXJyIiwia2V5IiwicmVjdXJzaW9uU2l6ZW9mIiwic2l6ZSIsImdldFRpbWVzdGFtcCIsImdldCIsInB1dCIsIkNvbnRyb2xsZXIiLCJoYW5kbGVEZWZhdWx0IiwiaWQiLCJkaXNwYXRjaEFzeW5jIiwiRXZlbnREaXNwYXRjaGVyIiwiQ3VzdG9tRXZlbnRDb252ZXJ0ZXIiLCJjdXN0b21UZXN0IiwiZURvYyIsInRlc3QiLCJhZGRDdXN0b20iLCJjdXN0b20iLCJnZXRPYmplY3QiLCJGaW5kZXIiLCJpc0RlbGltZXRyIiwibWVyZ2UiLCJhcyIsInN0cnMiLCJhZGRIaXRzIiwiY2hhcnMiLCJkZWxpbWV0ZXIiLCJsZW5ndGgiLCJhZGRDb250ZXh0IiwiZGVscyIsInByZXZEZWxzIiwiZ2V0SGl0cyIsImdldENvbnRleHRzIiwicGF0dGVybiIsIkRFTElNSVRFUiIsImRlZmF1bHRzIiwiY29udGV4dExlbmd0aCIsImhpdHMiLCJjb250ZXh0cyIsIlBkZiIsImxvYWRlZCIsInRvdGFsIiwicmFuZ2VDaHVua1NpemUiLCJjdXIiLCJvbGQiLCJpc05hTiIsImhhbmRsZXIiLCJnZXRQYWdlVHlwZSIsImdldFBhZ2UiLCJzZXRMb2FkaW5nUHJvZ3Jlc3NDbGIiLCJnZXRQYWdlc051bSIsImdldFBhZ2VTaXplIiwiZ2V0SGFuZGxlciIsIlRocmVlRXZlbnRDb252ZXJ0ZXJGcyIsIm9iamVjdHNUZXN0Iiwib2JqZWN0c0FuZEZhY2VzVGVzdCIsImFkZFRocmVlIiwidGhyZWUiLCJyZW1vdmVUaHJlZSIsImludGVyc2VjdHMiLCJUaHJlZVV0aWxzIiwidmVydGljZXMyVVZzIiwidmVydGljZXMiLCJpbmRlY2VzIiwiY29udmVyQ2xiIiwidmlzIiwiY29tcHV0ZUZhY2VWZXJ0ZXhVdnMiLCJnZW9tZXRyeSIsImZhY2VzIiwidXZzIiwidXZzaSIsImNyZWF0ZU1hcmtlciIsImZpbmRVdlRyaXMiLCJmb3VuZCIsImZpbmRJbnRlcm5hbFZlcnRpY2VzIiwiVGFyZ2V0Iiwib3B0aW9ucyIsInBhcmVudCIsInByb2dyZXNzIiwidyIsInBhZ2VDYWxsYmFjayIsImtXdG9IIiwiY29udGFpbmVycyIsImpDb250YWluZXIiLCJzcmMiLCJwZGYiLCJPIiwic3RhcnQiLCJhcmd1bWVudHMiLCJyZWxhdGl2ZVN0YXJ0IiwiZW5kIiwicmVsYXRpdmVFbmQiLCJmaW5hbCIsImxpc3QiLCJ0aGlzQXJnIiwicHJlZGljYXRlIiwiQXV0b05hdmlnYXRvciIsInVybFBhcmFtIiwibmF2aWdhdGVzIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwicmVnZXgiLCJyZXN1bHRzIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZ2V0UGFnZU51bWJlciIsIm51bWJlciIsInBhcnNlSW50IiwiQmluZGVyIiwiYmFja1NpemUiLCJiYWNrTSIsInRleHR1cmUiLCJ0cjEiLCJ0cjIiLCJzZXRMZWZ0Iiwic2V0UmlnaHQiLCJqb2luTGVmdENvdmVyIiwiZGlzY29ubmVjdExlZnRDb3ZlciIsImpvaW5SaWdodENvdmVyIiwiZGlzY29ubmVjdFJpZ2h0Q292ZXIiLCJCb29rIiwidmlzdWFsIiwiem9vbSIsInNpbmdsZVBhZ2UiLCJhdXRvUmVzb2x1dGlvbiIsImVuYWJsZSIsImxhc3RQYWdlIiwicXVlcnkiLCJzZXRUZXh0dXJlIiwidXBkYXRlIiwibGFzdE1vdXNlUG9zIiwicGFnZVgiLCJwYWdlWSIsImJveHMiLCJzZXRBdXRvUmVzb2x1dGlvbiIsInNldFpvb20iLCJzZXRRdWVyeSIsImlzUHJvY2Vzc2luZyIsImdldFBhZ2VzIiwic2V0RmxpcFByb2dyZXNzQ2xiIiwic2V0SW5qZWN0b3IiLCJpc0FjdGl2ZVBhZ2UiLCJnZXRCbG9ja0J5UGFnZSIsImJsb2NrIiwiZ2V0QmxvY2tQYWdlcyIsInJhbmdlIiwiZ2V0VG9wUGFnZXMiLCJnZXRQYWdlU3RhdGUiLCJlbmFibGVMb2FkaW5nQW5pbWF0aW9uIiwiZ2V0TGVmdEZsaXBwaW5nIiwiZ2V0UmlnaHRGbGlwcGluZyIsImdldENsb3NlZEJsb2NrQW5nbGUiLCJvcGVuZWRBbmdsZSIsImZsaXBMZWZ0IiwicHJvZ3Jlc3NDbGIiLCJmbGlwUHJvZ3Jlc3NDbGIiLCJib29rIiwiZmxpcFJpZ2h0IiwiY2xlYXJIb3ZlckluZm8iLCJ4U2VnbWVudCIsImNvbXB1dGVUYXJnZXQiLCJzZWciLCJvblBpY2tDYWxsYmFjayIsIm9uRHJhZ0NhbGxiYWNrIiwib25SZWxlYXNlQ2FsbGJhY2siLCJnZXRGbGlwcGluZyIsImZsaXAiLCJlbmFibGVNb3VzZSIsImNvcm5lckNhbGxiYWNrIiwiaG92ZXJBbmdsZSIsImhvdmVyIiwicG9zc2libGUiLCJzaGVldEJsb2NrcyIsIm5leHRCbG9jayIsInBlbmRpbmdzIiwiYWRkU2hlZXRCbG9jayIsInN1YnNjcmliZVNoZWV0QmxvY2siLCJldmVudENvbnZlcnRlciIsInRhcmdldCIsInJlbW92ZVNoZWV0QmxvY2siLCJyZW1vdmVTaGVldEJsb2NrcyIsImJsb2NrcyIsIm1hdGVyaWFsIiwic2V0UGFnZVRleHR1cmUiLCJzZXRMZWZ0Q292ZXJUZXh0dXJlIiwic2V0UmlnaHRDb3ZlclRleHR1cmUiLCJmaW5pc2hBbmltYXRpb25DbGIiLCJjYWxjQmxvY2tGb3JjZSIsInZlbG9jaXR5IiwiY29ybmVySGVpZ2h0IiwiY2FsY0Jsb2NrQ29ybmVyRm9yY2UiLCJub3RpZnlCZWZvcmVBbmltYXRpb24iLCJub3RpZnlBZnRlckFuaW1hdGlvbiIsImNvbm5lY3RQaHlzaWNzIiwiY292ZXJIZWlnaHQiLCJzaW11bGF0ZUNsYiIsInJlbW92ZUNsYiIsInNwbGl0U2hlZXRCbG9jayIsImxlZnRTaXplIiwibmV3QmxvY2siLCJtZXJnZVNoZWV0QmxvY2tzIiwiZmlyc3RCbG9jayIsImxhc3RCbG9jayIsInNldFNoZWV0QmxvY2tzIiwiY3JlYXRlU2lkZVRleHR1cmUiLCJqQyIsInByZXBhcmVQcm9wcyIsIm1lcmdlUHJvcHMiLCJzZWNvbmQiLCJzaWRlVGV4dHVyZSIsIkJvb2tDb250cm9sbGVyIiwic21hcnRQYW4iLCJzdGF0cyIsImxpZ2h0aW5nIiwiYWN0aXZlU2lkZSIsIm9uU2NyZWVuTW9kZUNoYW5nZWQiLCJvblVwZGF0ZVZpZXciLCJpbml0TG9hZGluZ0FuaW1hdGlvbiIsInZpc2libGUiLCJlbmFibGVOYXZpZ2F0aW9uIiwic2V0VG9jQ3RybCIsInRvY0N0cmwiLCJzZXRQcmludGVyIiwicHJpbnRlciIsInNldFNvdW5kcyIsInNvdW5kcyIsImNhblpvb21JbiIsImNhblpvb21PdXQiLCJjYW5EZWZhdWx0Wm9vbSIsInNldEJvb2tab29tIiwiY21kWm9vbUluIiwiY21kWm9vbU91dCIsImNtZERlZmF1bHRab29tIiwiY21kVG9jIiwiY21kRmFzdEJhY2t3YXJkIiwiY21kQmFja3dhcmQiLCJjbWRGb3J3YXJkIiwiY21kRmFzdEZvcndhcmQiLCJjbWRTYXZlIiwiY21kUHJpbnQiLCJjbWRGdWxsU2NyZWVuIiwiY21kU21hcnRQYW4iLCJjbWRTaW5nbGVQYWdlIiwiY21kU291bmRzIiwiY21kU3RhdHMiLCJjbWRMaWdodGluZ1VwIiwiY21kTGlnaHRpbmdEb3duIiwiZ29Ub1BhZ2UiLCJwYWdlTnVtIiwiY3VycmVudCIsImZsaXBzIiwiY292cyIsImN2Iiwic2V0Q2xiIiwiZmwiLCJ0aW1lIiwic3RhcnRGbGlwIiwiZmxpcFJlcyIsImVuZEZsaXAiLCJnZXRQYWdlRm9yR1VJIiwiaW5wUGFnZSIsInVwZGF0ZVZpZXdJZlN0YXRlIiwidXBkYXRlVmlld1N0YXRlIiwiYWN0aXZlIiwiZW5hYmxlZCIsImZsaXBwZXJzRW5hYmxlIiwibmF2aWdhdGlvbkNvbnRyb2xzIiwidXBkYXRlVmlldyIsImdldEFjdGlvbnMiLCJpc1N3aXBwaW5nIiwiY21kcyIsImFjdGl2YXRlIiwiY21kUGFuTGVmdCIsImNtZFBhblJpZ2h0IiwiY21kUGFuVXAiLCJzcGVlZCIsImNtZFBhbkRvd24iLCJtb3VzZUNtZFJvdGF0ZSIsInJvdGF0ZSIsIm1vdXNlQ21kRHJhZ1pvb20iLCJtb3VzZUNtZFBhbiIsInBhbiIsIm1vdXNlQ21kV2hlZWxab29tIiwidG91Y2hDbWRSb3RhdGUiLCJ0b3VjaENtZFpvb20iLCJ0b3VjaENtZFBhbiIsInRvdWNoQ21kU3dpcGUiLCJ0b3VjaCIsImhhbmRsZWQiLCJ4MCIsInkwIiwid2lkU2V0dGluZ3MiLCJiaW5kQWN0aW9ucyIsImFjdGlvbiIsImZsYWdzIiwic2V0QWN0aW9ucyIsImFjdGlvbnMiLCJCb29rUHJpbnRlciIsImNhbmNlbCIsInByaW50IiwicHJpbnRXbmQiLCJjYWxsTWFudWFsbHkiLCJwcmludERvYyIsImNvbnRlbnQiLCJyZW5kZXJDb250ZW50IiwiaGVhZCIsImJvZHkiLCJ3cmFwIiwicmVuZGVySHRtbCIsImxpbmtzIiwibGluayIsImhyZWYiLCJyZWplY3QiLCJyZW5kZXJIZWFkIiwidXNlSUZyYW1lIiwiaXNDaHJvbWl1bSIsIndpbk5hdiIsInZlbmRvck5hbWUiLCJpc0lFZWRnZSIsImlzSU9TQ2hyb21lIiwiZGVmYXVsdFN0eWxlU2hlZXQiLCJCb29rVmlldyIsImluaXRWaWV3IiwiZ2V0SGFuZGxlcnMiLCJoYW5kbGVycyIsIm9uSXRlbVN0YXRlQ2hhbmdlZCIsImdldFZpZXciLCJnZXRCb29rbWFya3NWaWV3IiwiZ2V0VGh1bWJuYWlsc1ZpZXciLCJnZXRTZWFyY2hWaWV3IiwiZ2V0Rm9ybXMiLCJnZXRMaW5rcyIsImdldFdpZGdldHMiLCJnZXRJbnB1dHMiLCJnZXRUZXh0cyIsImdldFRlbXBsYXRlIiwic3R5bGVzIiwicmVsIiwic2NyaXB0IiwiUEFHRV9IQU5ETEVSX0RFTEFZIiwiQ2xiQm9va1Byb3BzQnVpbGRlciIsIkNvdmVyIiwiQ3NzTGF5ZXJzTWFuYWdlciIsImdldEFjdGl2ZXMiLCJsYXllcnMiLCJzbCIsIndhaXQiLCJQYWdlTWFuYWdlciIsImRpc3BhdGNoRXZlbnQiLCJjcmVhdGVMb2FkaW5nVGV4dHVyZSIsInNwcml0ZVRpbGVzIiwiYW5pbWF0aW9uIiwiYW5pbWF0b3IiLCJpc0NvdmVyIiwiaXNNb2JpbGUiLCJsb2FkaW5nIiwicmVtb3ZlRnJvbUxvYWRpbmdzIiwicmVtb3ZlRnJvbVJlbmRlclF1ZXVlIiwicmVmcmVzaFBhZ2VRdWVyeSIsInJlZnJlc2hab29tIiwiZXMiLCJnZXRMYXllcnMiLCJhcmdzIiwicmVzb2x2ZVBlbmRpbmdzIiwicnRsUGFnZU4iLCJsb2FkIiwicGkiLCJ3cmFwcGVyIiwibG9ja2VkIiwiaXNBY3RpdmUiLCJpc1RvcCIsImlzU2luZ2xlUGFnZSIsImNhbGNSZXNvbHV0aW9uIiwicHVzaEluUmVuZGVyUXVldWUiLCJ1cGRhdGVSZW5kZXJRdWV1ZSIsInRvcCIsInR1cm5PbkV2ZW50cyIsInR1cm5PZmZFdmVudHMiLCJtb3VzZXVwIiwibW91c2VvdXQiLCJlbnQiLCJ0cmFuc2ZlckV2ZW50VG9UZXh0dXJlIiwidG9PYmplY3QiLCJ1diIsImxvYWRQcmVkaWN0ZWRQYWdlcyIsImFkZFBhZ2VSZXF1ZXN0Iiwic2V0TWF0ZXJpYWwiLCJvYiIsInNldHVwTWF0ZXJpYWwiLCJnZXRPckxvYWRUZXh0dXJlT2JqZWN0IiwiUGRmQm9va1Byb3BzQnVpbGRlciIsImludGVyYWN0aXZlIiwiUGRmTGlua3NIYW5kbGVyIiwic2V0SGFuZGxlciIsImRlZmF1bHRIYW5kbGVyIiwiZGVzdGluYXRpb24iLCJjYWxsSGFuZGxlcnMiLCJoYW5kbGVFdmVudCIsImFubm8iLCJkZXN0UHJvbWlzZSIsImRlc3QiLCJTZWFyY2hFbmdpbmUiLCJwcm9jZXNzIiwic3RhbXAiLCJmaW5kIiwibmV4dCIsIml0ZW0iLCJTaGVldENzc0xheWVyIiwiU2hlZXRQaHlzaWNzIiwidGFyZ2V0Rm9yY2VDbGIiLCJjaCIsImhvdmVyQ29ybmVyRm9yY2VDbGIiLCJnZXRUYXJnZXRGb3JjZUNsYiIsInRhcmdldEFuZ2xlIiwiZyIsInRsIiwiZHJhZ0ZvcmNlQ2xiIiwiZHJhZ0Nvcm5lckZvcmNlQ2xiIiwiZ2V0RHJhZ0Nvcm5lckZvcmNlQ2xiIiwiZnBzIiwic3RhcnREdCIsIm1hcmdpbiIsImluZk0iLCJhdHRlbXB0cyIsIm1heEl0ZXJhdGlvbnMiLCJhZGRPYmplY3QiLCJmb3JjZUNsYiIsImNvcm5lckZvcmNlQ2xiIiwibm8iLCJjZiIsImZsYnQiLCJnZXRQYXJhbWV0ck1hcCIsInNldFBhcmFtZXRyIiwiZ2V0UGFyYW1ldHIiLCJzaW11bGF0ZSIsIlQiLCJhdHRlbXB0IiwiaXQiLCJub3MiLCJjaSIsInNjb3MiLCJncyIsImkwIiwicmVtb3ZlU3RhdGljcyIsImZpbmRBbmRTb2x2ZUNvcm5lckNvbGxpc2lvbnMiLCJvcyIsImFsIiwiZENoIiwiZHYiLCJzb2x2ZUNvbGxpc2lvbiIsIm1tIiwiYXYiLCJidiIsImZpbmRDb2xsaXNpb25zIiwiYWxsIiwiaXNDb2xsaXNpb24iLCJpbnRlZ3JhdGUiLCJTb3VuZHNFbnZpcm9tZW50IiwidGVtcGxhdGUiLCJzZXRFbmFibGVkIiwidG9nbGUiLCJzdWJzY3JpYmVGbGlwcyIsImVtaXR0ZXIiLCJUb2NDb250cm9sbGVyIiwic2V0VGh1bWJuYWlscyIsInRodW1ibmFpbHMiLCJzZXRTZWFyY2giLCJzZWFyY2giLCJzZXRCb29rbWFya3MiLCJib29rbWFya3MiLCJjbWRCb29rbWFya3MiLCJjbWRUaHVtYm5haWxzIiwiY21kU2VhcmNoIiwiY21kQ2xvc2VUb2MiLCJuYXZpZ2F0ZVRodW1ibmFpbHMiLCJuYXZpZ2F0ZVNlYXJjaCIsIm5hdmlnYXRlQm9va21hcmtzIiwicmVzWCIsInJlc1kiLCJyZXNaIiwiZnJvbnRHZW9tZXRyeSIsImJhY2tHZW9tZXRyeSIsImxlZnRHZW9tZXRyeSIsInJpZ2h0R2VvbWV0cnkiLCJ0b3BHZW9tZXRyeSIsImJvdHRvbUdlb21ldHJ5IiwiYWRkRmFjZXMiLCJtYXBWZXJ0aWNlcyIsImVxIiwiZHN0IiwiZnJvbnRNYXAiLCJiYWNrTWFwIiwibGVmdE1hcCIsInJpZ2h0TWFwIiwibW91c2VCdXR0b25zIiwiTGVmdCIsIk1pZGRsZSIsIlJpZ2h0Iiwic2tpbiIsImRlZmF1bHQiLCJtaW4iLCJtYXgiLCJsZXZlbHMiLCJsb2FkaW5nQW5pbWF0aW9uIiwiY29lZmZpY2llbnQiLCJjb2RlIiwiYWN0aXZlRm9yTW9iaWxlIiwiQmxhbmtJbWFnZSIsIkJvb2ttYXJrcyIsImdldFRpdGxlIiwiZ2V0SXRlbXMiLCJsaSIsImNvbnRhaW5lciIsImNtZCIsIm5vZGUiLCJub2RlcyIsImV4cGFuZCIsIm1pbmltaXplIiwicmVuZGVyTm9kZSIsInJlbmRlck5vZGVzIiwibWFwTm9kZXMiLCJpdGVtcyIsImxldmVsIiwidGl0bGUiLCJtaW5pbWl6ZWQiLCJjaGlsZHJlbiIsIkRldGVjdG9yIiwiZ2V0V2ViR0xFcnJvck1lc3NhZ2UiLCJhZGRHZXRXZWJHTE1lc3NhZ2UiLCJwYXJhbWV0ZXJzIiwiY2FudmFzIiwiQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIiwid2ViZ2wiLCJ3b3JrZXJzIiwiV29ya2VyIiwiZmlsZWFwaSIsIkJsb2IiLCJEb2NNb3VzZVNpbXVsYXRvciIsImJFbGVtZW50IiwiakZyYW1lIiwidGVybXMiLCJyZXBsYWNlIiwiSE9WRVIiLCJBQ1RJVkUiLCJzcyIsImNzc1RleHQiLCJ0ZXJtIiwiY29udmVydENvb3JkcyIsImpFbGVtZW50IiwidHJpZ2dlckV2ZW50IiwiYWR2YW5jZWRQcm9wcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJlbnRlckVsZW1lbnQiLCJsZWF2ZUVsZW1lbnQiLCJhY3RpdmF0ZUVsZW1lbnQiLCJkZWFjdGl2YXRlRWxlbWVudCIsImFkZERvY0NoYW5nZUNsYiIsImVsZW1lbnRGcm9tUG9pbnQiLCJjaGlsZCIsImdldEVsZW1lbnQiLCJvZmYwIiwidHJpZ2dlciIsImxlYXZlZCIsInJlbGF0ZWRUYXJnZXQiLCJnZXREZWZhdWx0VW5kZWZpbmVkUHJvcGVydGllcyIsImdldERlZmF1bHRSZXNlbmRQcm9wZXJ0aWVzIiwiRG9tMkltYWdlIiwic2VsZiIsInV0aWwiLCJpbmxpbmVyIiwiZm9udEZhY2VzIiwiaW1hZ2VzIiwiY2xvbmVOb2RlIiwibWFrZVN2Z0RhdGFVcmkiLCJjbG9uZSIsImRyYXciLCJuZXdDYW52YXMiLCJmaWx0ZXIiLCJjbG9uZUNoaWxkcmVuIiwicHJvY2Vzc0Nsb25lIiwib3JpZ2luYWwiLCJjb3B5U3R5bGUiLCJzb3VyY2UiLCJjb3B5UHJvcGVydGllcyIsImNsb25lUHNldWRvRWxlbWVudCIsImNsYXNzTmFtZSIsInN0eWxlRWxlbWVudCIsImZvcm1hdFBzZXVkb0VsZW1lbnRTdHlsZSIsInNlbGVjdG9yIiwiZm9ybWF0Q3NzVGV4dCIsImZvcm1hdENzc1Byb3BlcnRpZXMiLCJzdHlsZU5vZGUiLCJlc2NhcGUiLCJwYXJzZUV4dGVuc2lvbiIsIm1pbWVUeXBlIiwiZGF0YUFzVXJsIiwiaXNEYXRhVXJsIiwiY2FudmFzVG9CbG9iIiwicmVzb2x2ZVVybCIsImdldEFuZEVuY29kZSIsInVpZCIsImFzQXJyYXkiLCJlc2NhcGVYaHRtbCIsIm1ha2VJbWFnZSIsImlzRWxlbWVudCIsImlzQ2FudmFzIiwiaXNUZXh0QXJlYSIsImlzSW5wdXQiLCJpc1NWRyIsImlzU1ZHUmVjdCIsImlzSW1hZ2UiLCJXT0ZGIiwiSlBFRyIsIm1hdGNoIiwiZXh0ZW5zaW9uIiwibWltZXMiLCJiaW5hcnlTdHJpbmciLCJiaW5hcnlBcnJheSIsInRvQmxvYiIsIlRJTUVPVVQiLCJyZXF1ZXN0IiwiZmFpbCIsImVuY29kZXIiLCJzdHJpbmciLCJhcnJheSIsImFycmF5TGlrZSIsImxlZnRCb3JkZXIiLCJweCIsInJpZ2h0Qm9yZGVyIiwidG9wQm9yZGVyIiwiYm90dG9tQm9yZGVyIiwicGFyc2VGbG9hdCIsIlVSTF9SRUdFWCIsImlubGluZUFsbCIsInNob3VsZFByb2Nlc3MiLCJpbXBsIiwicmVhZFVybHMiLCJpbmxpbmUiLCJyZXN1bHQiLCJiYXNlVXJsIiwidXJsQXNSZWdleCIsInVybHMiLCJyZXNvbHZlQWxsIiwicmVhZEFsbCIsIndlYkZvbnQiLCJjc3NTdHJpbmdzIiwicnVsZXMiLCJydWxlIiwiQ1NTUnVsZSIsImNzc1J1bGVzIiwic3R5bGVTaGVldHMiLCJ3ZWJGb250UnVsZSIsIm5ld0ltYWdlIiwiYmFja2dyb3VuZCIsIkRyYWciLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VEb3duIiwib25Nb3VzZVVwIiwic2V0Q29vcmRzRnJvbUV2ZW50Iiwic2VsZWN0ZWQiLCJFdmVudHNUb0FjdGlvbnMiLCJnZXRFdmVudEZsYWdzIiwiZ2V0UG9zaXRpb24iLCJ0b3VjaGVzIiwiY29udGV4dE1lbnUiLCJtb3VzZURvd24iLCJtb3VzZU1vdmUiLCJtb3VzZVVwIiwibW91c2VXaGVlbCIsIm1vdXNlTW92ZURvYyIsIm1vdXNlVXBEb2MiLCJjbGljayIsImRibGNsaWNrIiwidG91Y2hTdGFydCIsInRvdWNoTW92ZSIsInRvdWNoRW5kIiwia2V5RG93biIsImtleVByZXNzIiwia2V5VXAiLCJhZGRBY3Rpb24iLCJmaXJlQWN0aW9ucyIsImNsaWNrcyIsInRvdWNoUGljayIsInBvcyIsIm1vZEtleXMiLCJDdHJsIiwiU2hpZnQiLCJBbHQiLCJGdWxsU2NyZWVuIiwiYXZhaWxhYmxlIiwiYWN0aXZhdGVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFzV2Via2l0RnVsbFNjcmVlbiIsIndlYmtpdENhbmNlbEZ1bGxTY3JlZW4iLCJfaGFzTW96RnVsbFNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJfaGFzTXNGdWxsc2NyZWVuIiwibXNSZXF1ZXN0RnVsbHNjcmVlbiIsIkludGVyYWN0aXZlSW1hZ2UiLCJyZW5kZXIiLCJ0aW1lb3V0IiwiTG9hZGluZ0FuaW1hdGlvbiIsImNhbGNUaW1lVG8iLCJkYSIsIl9hIiwiX3IiLCJjeCIsImN5IiwibngiLCJueSIsImdldEltYWdlIiwiY3JlYXRlU3ByaXRlIiwidXBkYXRlSW50ZXJ2YWwiLCJMb2FkaW5nQ29udHJvbGxlciIsInNob3dQcm9ncmVzcyIsImxvYWRpbmdNc2ciLCJkZWZhdWx0TG9hZGluZ01zZyIsInNldFByb2dyZXNzIiwiTW91c2VFdmVudENvbnZlcnRlciIsIk9iamVjdDNEV2F0Y2hlciIsInRlc3RTY2FsZSIsInZ4IiwidnkiLCJib3giLCJtb3ZlUGFuIiwidlRvQ2FtZXJhIiwiY29tcHV0ZUNsaWVudEJvdW5kQm94IiwieHMiLCJ6cyIsInNldE9iamVjdCIsImJvdW5kQm94Q2xiIiwiY29tcHV0ZUNvcnIiLCJjb3JyIiwiZ2V0U2NhbGUiLCJLeCIsIkt5IiwiY2VudGVyVmlldyIsIlkiLCJ0ZiIsInZkIiwiT3JiaXQiLCJzcGhlcmljYWwiLCJzY29wZSIsInpvb21TcGVlZCIsIl9zcGVlZCIsImRvbGx5SW4iLCJkb2xseU91dCIsInF1YXQiLCJxdWF0SW52ZXJzZSIsImxhc3RQb3NpdGlvbiIsImxhc3RRdWF0ZXJuaW9uIiwicG9zaXRpb24iLCJyb3RhdGVMZWZ0Iiwic3BoZXJpY2FsRGVsdGEiLCJwYW5PZmZzZXQiLCJ6b29tQ2hhbmdlZCIsImNoYW5nZUV2ZW50IiwiRVBTIiwicGFuTGVmdCIsInBhblVwIiwidGFyZ2V0RGlzdGFuY2UiLCJkZWx0YVgiLCJkZWx0YVkiLCJyb3RhdGVVcCIsImV2ZW50Iiwib2Zmc2V0RG9sbHkiLCJ3aGVlbERvbGx5IiwiUGRmSW1hZ2UiLCJ0cmFuc2Zvcm0iLCJyZWN0U2l6ZSIsImNyZWF0ZVBvbHkiLCJzZXRBbm5vdGF0aW9ucyIsImFubm9zIiwidGFyZ2V0cyIsInJlY3QiLCJhUG9zIiwiYVN6Iiwic2V0SGl0cyIsInRleHRDb250ZW50IiwicmVuZGVySGl0cyIsInRlc3RTeiIsInRleHREaXYiLCJiYXNlT2Zmc2V0IiwiaGl0IiwiZm9udEhlaWdodCIsImZvbnRBc2NlbnQiLCJ0ZXN0U3BhbiIsIml3aWR0aCIsInJlbGF0aXZlT2Zmc2V0IiwiYW5ub0NsYiIsImFubm90YXRpb24iLCJjYWxjVmlld3BvcnQiLCJjYW52YXNDb250ZXh0Iiwidmlld3BvcnQiLCJTZWFyY2giLCJuYXZpZ2F0ZSIsImRvUXVlcnkiLCJxdWVyeVN0YW1wIiwic2V0UmVzdWx0cyIsImh0bWxzIiwiU3RhdGljSW1hZ2UiLCJUZXh0dXJlQW5pbWF0b3IiLCJtaWxsaVNlYyIsImN1cnJlbnRDb2x1bW4iLCJjdXJyZW50Um93IiwiaW1nIiwiVGhyZWVNb3VzZUV2ZW50Q29udmVydGVyIiwidmlzdWFsV29ybGQiLCJUaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIiLCJUaHVtYm5haWxzIiwiaGVhZGluZyIsInRodW1ibmFpbCIsImdldEFjdGl2ZSIsInNldEltYWdlIiwiVG91Y2hDb252ZXJ0ZXIiLCJWaWV3IiwiY2xhc3NQcm9wZXJ0eSIsImN0cmwiLCJhdHRyaWJ1dGVQcm9wZXJ0eSIsImF0dHJpYnV0ZU5hbWUiLCJoYW5kbGVMaW5rRXZlbnQiLCJoYW5kbGVJbnB1dEV2ZW50IiwiaGFuZGxlRm9ybUV2ZW50IiwiY2FsbExhdGVyIiwibXMiLCJwZW5kaW5nIiwibG9hZEZpbGVzIiwiZmlsZXMiLCJ0YXNrcyIsInVybFJlc29sdmVyIiwicGFydHMiLCJwYXJ0Iiwib2JqVG9BdHRyc1N0ciIsImNoZWNrSWZyYW1lU2l6ZSIsIm9uUmVzaXplIiwidHJhbnNsYXRlIiwiZmlyZUxpbmtzT25Mb2FkRXZlbnQiLCJqTGluayIsInRleHRDc3MiLCJzZXR0ZXIiLCJnZXRDb250YWluZXIiLCJnZXRQYXJlbnRDb250YWluZXIiLCJhZGRIYW5kbGVyIiwic2V0Q29udHJvbFN0YXRlIiwic3RhdGVIYW5kbGVycyIsInN0Iiwic2V0TGlua0NvbnRyb2xTdGF0ZSIsInNldFdpZGdldENvbnRyb2xTdGF0ZSIsInNldElucHV0Q29udHJvbFN0YXRlIiwic2V0VGV4dENvbnRyb2xTdGF0ZSIsInNldFN0YXRlIiwibGlua1N0YXRlSGFuZGxlcnMiLCJ3aWRnZXRTdGF0ZUhhbmRsZXJzIiwiaW5wdXRTdGF0ZUhhbmRsZXJzIiwidGV4dFN0YXRlSGFuZGxlcnMiLCJWaXN1YWxXb3JsZCIsInVzZUhlbHBlcnMiLCJhbHBoYSIsImFudGlhbGlhcyIsImNzc1NjZW5lIiwidG1wVmVjdG9yIiwib25XaW5kb3dSZXNpemUiLCJhbmltYXRlIiwiZmlsdGVyRGF0YSIsInR5cGVzIiwiY29udGFpbnMiLCJzZXRFeHRyYUxpZ2h0aW5nIiwiZ2V0T3JiaXQiLCJzZXRDb250cm9sc1N0YXRlIiwiZ2V0Q29udHJvbHNTdGF0ZSIsInVwZGF0ZUNhbWVyYSIsInVwZGF0ZVJlbmRlcmVyIiwicmVuZGVyZXIiLCJhZGRDc3NPYmplY3QiLCJyZW1vdmVDc3NPYmplY3QiLCJyZW1vdmVPYmplY3QiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhZGRSZW5kZXJDYWxsYmFjayIsInJlbW92ZVJlbmRlckNhbGxiYWNrIiwiZGVsdGFUaW1lIiwicHJvY2Vzc0dlb21ldHJ5IiwiYnVmR2VvbWV0cnkiLCJtZXNoIiwiaW5kZXhlZEJ1ZmZlckdlb20iLCJjcmVhdGVJbmRleGVkQnVmZmVyR2VvbWV0cnlGcm9tR2VvbWV0cnkiLCJudW1WZXJ0aWNlcyIsIm51bUZhY2VzIiwiYnVmZmVyR2VvbSIsImluZGljZXMiLCJpMyIsImlzRXF1YWwiLCJ4MSIsInoxIiwieDIiLCJ6MiIsImRlbHRhIiwibWFwSW5kaWNlcyIsImlkeFZlcnRpY2VzIiwibnVtSWR4VmVydGljZXMiLCJhc3NvY2lhdGlvbiIsImozIiwib25lTm9kZVBvc2l0aW9uQ2FsbGJhY2siLCJtdWx0eU5vZGVQb3NpdGlvbkNhbGxiYWNrIiwidm9sdW1lUG9zaXRpb25zIiwidm9sdW1lTm9ybWFscyIsImFzc29jVmVydGV4IiwiaW5kZXhWZXJ0ZXgiLCJtdWx0eU5vZGVQb3NpdGlvblBvc3RDYWxsYmFjayIsInBhdGhQb3NpdGlvbkNhbGxiYWNrIiwicG9zaXRpb25zIiwicGF0aFBvc2l0aW9uUG9zdENhbGxiYWNrIiwiV2lkZ2V0Q29udHJvbGxlciIsImZpcmVDaGFuZ2UiLCJDaXJjbGVUYXJnZXQiLCJ0ZXN0SW50ZXJzZWN0aW9uIiwiUG9seVRhcmdldCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxtREFBMkMsY0FBYzs7QUFFekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7QUNoRUE7O0FBQ0EsbUJBQUFBLENBQVEsQ0FBUjs7Ozs7Ozs7Ozs7Ozs7O0FDREEsVSxDQUFBO0FBQ0E7O0FBRUEsVSxDQUFBO0FBQ0E7O0FBRUEsWUFGQSxDQUVBO0FBQ0E7QUFDQTs7QUFFQSxZQU5BLENBTUE7QUFDQTtBQUNBLHlCQURBO0FBRUEsc0JBRkE7QUFHQTtBQUNBLGNBSkE7O0FBTUEsWUFiQSxDQWFBO0FBQ0E7O0FBRUEsWUFoQkEsQ0FnQkE7QUFDQTs7QUFFQSxZQW5CQSxDQW1CQTtBQUNBO0FBQ0E7QUFBQTs7O0FBR0EsVSxDQUFBO0FBQ0E7O0FBRUEsVSxDQUFBO0FBQ0E7O0FBRUEsVSxDQUFBO0FBQ0E7QUFBMkM7QUFBYyxHQUF6RDs7QUFFQSxVLENBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FEQTtBQUVBLGdDQUZBO0FBR0E7QUFDQSxnQkFKQTtB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VyxHQUFoQlAsWTtRQUNVUSxLLEdBQVZQLE07UUFDVVUsSyxHQUFWUCxNIiwiZmlsZSI6Ii4vZGlzdC9mbGlwLWJvb2suanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGU5ZWYwYzU3ZDRjOThiOTg4MTg1IiwiaW1wb3J0IHskLCBodG1sMmNhbnZhcywgVEhSRUUsIFBERkpTfSBmcm9tICcuL3NyYy9saWJzJztcclxucmVxdWlyZSgnLi9zcmMvJysoRU5WSVJPTUVOVC5kZWJ1Zz8gJzNkZmxpcGJvb2suanMnOiAnM2RmbGlwYm9vay5taW4uanMnKSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCAkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcyKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA3MjRlNThkZjU4YzY1YzQ4MDhiNFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi93ZWJwYWNrL2Jvb3RzdHJhcCA3MjRlNThkZjU4YzY1YzQ4MDhiNCIsImNvbnN0IF8kID0gR0xPQkFMX0xJQlMualF1ZXJ5PyB3aW5kb3cualF1ZXJ5OiByZXF1aXJlKCdqcXVlcnknKSxcclxuICAgICAgX2h0bWwyY2FudmFzID0gR0xPQkFMX0xJQlMuaHRtbDJjYW52YXM/IHdpbmRvdy5odG1sMmNhbnZhczogcmVxdWlyZSgnaHRtbDJjYW52YXMnKSxcclxuICAgICAgX1RIUkVFID0gR0xPQkFMX0xJQlMuVEhSRUU/IHdpbmRvdy5USFJFRTogcmVxdWlyZSgndGhyZWUnKSxcclxuICAgICAgX1JlYWN0ID0gR0xPQkFMX0xJQlMuUmVhY3Q/IHdpbmRvdy5SZWFjdDogcmVxdWlyZSgncmVhY3QnKSxcclxuICAgICAgX1JlYWN0RE9NID0gR0xPQkFMX0xJQlMuUmVhY3Q/IHdpbmRvdy5SZWFjdERPTTogcmVxdWlyZSgncmVhY3QtZG9tJyksXHJcbiAgICAgIF9QREZKUyA9IEdMT0JBTF9MSUJTLlBERkpTPyB3aW5kb3cuUERGSlM6IHJlcXVpcmUoJ3BkZmpzJyksXHJcbiAgICAgIF90ciA9IChzKT0+ICh3aW5kb3cuaWJlcmV6YW5za3kgfHwge30pLnRyICYmIHdpbmRvdy5pYmVyZXphbnNreS50cihzKSB8fCBzO1xyXG5cclxuZXhwb3J0IHtcclxuICBfJCBhcyAkLFxyXG4gIF9odG1sMmNhbnZhcyBhcyBodG1sMmNhbnZhcyxcclxuICBfVEhSRUUgYXMgVEhSRUUsXHJcbiAgX1JlYWN0IGFzIFJlYWN0LFxyXG4gIF9SZWFjdERPTSBhcyBSZWFjdERPTSxcclxuICBfUERGSlMgYXMgUERGSlMsXHJcbiAgX3RyIGFzIHRyXHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9saWJzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2xpYnMuanMiLCJjb25zdCBfJCA9IEdMT0JBTF9MSUJTLmpRdWVyeT8gd2luZG93LmpRdWVyeTogcmVxdWlyZSgnanF1ZXJ5JyksXHJcbiAgICAgIF9odG1sMmNhbnZhcyA9IEdMT0JBTF9MSUJTLmh0bWwyY2FudmFzPyB3aW5kb3cuaHRtbDJjYW52YXM6IHJlcXVpcmUoJ2h0bWwyY2FudmFzJyksXHJcbiAgICAgIF9USFJFRSA9IEdMT0JBTF9MSUJTLlRIUkVFPyB3aW5kb3cuVEhSRUU6IHJlcXVpcmUoJ3RocmVlJyksXHJcbiAgICAgIF9QREZKUyA9IEdMT0JBTF9MSUJTLlBERkpTPyB3aW5kb3cuUERGSlM6IHJlcXVpcmUoJ3BkZmpzJyksXHJcbiAgICAgIF90ciA9IChzKT0+ICh3aW5kb3cuaWJlcmV6YW5za3kgfHwge30pLnRyICYmIHdpbmRvdy5pYmVyZXphbnNreS50cihzKSB8fCBzO1xyXG5cclxuaWYod2luZG93LkZCM0RfTE9DQUxFKSB7XHJcbiAgd2luZG93LmliZXJlemFuc2t5ID0ge1xyXG4gICAgLi4ud2luZG93LmliZXJlemFuc2t5LFxyXG4gICAgdHI6IChzKT0+IChGQjNEX0xPQ0FMRS5kaWN0aW9uYXJ5IHx8IHt9KVtzXSB8fCBzXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBfJCBhcyAkLFxyXG4gIF9odG1sMmNhbnZhcyBhcyBodG1sMmNhbnZhcyxcclxuICBfVEhSRUUgYXMgVEhSRUUsXHJcbiAgX1BERkpTIGFzIFBERkpTLFxyXG4gIF90ciBhcyB0clxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9saWJzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvbGlicy5qcyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VNYXRoVXRpbHMge1xyXG4gIHN0YXRpYyBzdW0gPSBbQmFzZU1hdGhVdGlscy5zdW0xLCBCYXNlTWF0aFV0aWxzLnN1bTIsIEJhc2VNYXRoVXRpbHMuc3VtMywgQmFzZU1hdGhVdGlscy5zdW00XTtcclxuICBzdGF0aWMgZXBzID0gMWUtNDtcclxuXHJcbiAgc3RhdGljIHN1bTEoa2EsYSxrYixiKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBrYSphWzBdK2tiKmJbMF1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc3VtMihrYSxhLGtiLGIpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIGthKmFbMF0ra2IqYlswXSxcclxuICAgICAga2EqYVsxXStrYipiWzFdXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHN1bTMoa2EsYSxrYixiKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBrYSphWzBdK2tiKmJbMF0sXHJcbiAgICAgIGthKmFbMV0ra2IqYlsxXSxcclxuICAgICAga2EqYVsyXStrYipiWzJdXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHN1bTQoa2EsYSxrYixiKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBrYSphWzBdK2tiKmJbMF0sXHJcbiAgICAgIGthKmFbMV0ra2IqYlsxXSxcclxuICAgICAga2EqYVsyXStrYipiWzJdLFxyXG4gICAgICBrYSphWzNdK2tiKmJbM11cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcms0KGR5LCB0LCBkdCwgeSwgc3VtPUJhc2VNYXRoVXRpbHMuc3VtW3kubGVuZ3RoLTFdKSB7XHJcbiAgICBjb25zdCBrMT1keSh0LHkpLFxyXG4gICAgICAgICAgazI9ZHkodCtkdC8yLHN1bSgxLHksZHQvMixrMSkpLFxyXG4gICAgICAgICAgazM9ZHkodCtkdC8yLHN1bSgxLHksZHQvMixrMikpLFxyXG4gICAgICAgICAgazQ9ZHkodCtkdCxzdW0oMSx5LGR0LGszKSk7XHJcbiAgICByZXR1cm4gc3VtKDEseSxkdC82LHN1bSgxLHN1bSgxLGsxLDIsazIpLDEsc3VtKDIsazMsMSxrNCkpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBleHRyYXBvbGF0ZUxpbmVhcih4LHkseGkpIHtcclxuICAgIHJldHVybiB5WzBdKyh5WzFdLXlbMF0pLyh4WzFdLXhbMF0pKih4aS14WzBdKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpbnRlcnBvbGF0ZUxpbmVhcih4LHkseGkpIHtcclxuICAgIGxldCB5aTtcclxuICAgIGlmKHhbMF0+eFsxXSkge1xyXG4gICAgICB4PXgucmV2ZXJzZSgpO1xyXG4gICAgICB5PXkucmV2ZXJzZSgpO1xyXG4gICAgfVxyXG4gICAgaWYoeGk8eFswXSkge1xyXG4gICAgICB5aT15WzBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih4aT54WzFdKSB7XHJcbiAgICAgIHlpPXlbMV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgeWk9QmFzZU1hdGhVdGlscy5leHRyYXBvbGF0ZUxpbmVhcih4LHkseGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHlpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNhbGNTY2FsZShzcmNXLCBzcmNILCBkc3RXLCBkc3RIKSB7XHJcbiAgICByZXR1cm4gTWF0aC5taW4oZHN0Vy9zcmNXLCBkc3RIL3NyY0gpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG11bE0oYSwgYikge1xyXG4gICAgY29uc3Qgcj1bXTtcclxuICAgIGZvcihsZXQgaT0wO2k8YS5sZW5ndGg7KytpKSB7XHJcbiAgICAgIHIucHVzaChbXSk7XHJcbiAgICAgIGZvcihsZXQgaj0wO2o8YlswXS5sZW5ndGg7KytqKSB7XHJcbiAgICAgICAgcltpXVtqXSA9IDA7XHJcbiAgICAgICAgZm9yKGxldCBrPTA7azxiLmxlbmd0aDsrK2spIHtcclxuICAgICAgICAgIHJbaV1bal0rPWFbaV1ba10qYltrXVtqXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHRyYW5zTShtKSB7XHJcbiAgICBjb25zdCByPVtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxtLmxlbmd0aDsrK2kpIHtcclxuICAgICAgZm9yKGxldCBqPTA7ajxtWzBdLmxlbmd0aDsrK2opIHtcclxuICAgICAgICBpZighcltqXSkge1xyXG4gICAgICAgICAgcltqXT1bXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcltqXVtpXT1tW2ldW2pdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBtYXQoZGF0YSkge1xyXG4gICAgbGV0IHM9MDtcclxuICAgIGZvcihsZXQgeCBvZiBkYXRhKSB7XHJcbiAgICAgIHMrPXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcy9kYXRhLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkaXNwKGRhdGEpIHtcclxuICAgIGNvbnN0IE09QmFzZU1hdGhVdGlscy5tYXQoZGF0YSk7XHJcbiAgICBsZXQgcz0wO1xyXG4gICAgZm9yKGxldCB4IG9mIGRhdGEpIHtcclxuICAgICAgcys9KHgtTSkqKHgtTSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcy9kYXRhLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwcmVkaWN0KGRhdGEsIG51bSkge1xyXG4gICAgY29uc3Qgcj1bXSwgbD1kYXRhLmxlbmd0aCwgRD1CYXNlTWF0aFV0aWxzLmRpc3AoZGF0YSk7XHJcbiAgICBpZihEPGwgJiYgbD4xKSB7XHJcbiAgICAgIGNvbnN0IGFtPVtdLCBibT1bXTtcclxuICAgICAgZm9yKGxldCBpPTA7aTxsOysraSkge1xyXG4gICAgICAgIGFtLnB1c2goW2ksMV0pO1xyXG4gICAgICAgIGJtLnB1c2goW2RhdGFbaV1dKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0YT1CYXNlTWF0aFV0aWxzLnRyYW5zTShhbSksIGE9QmFzZU1hdGhVdGlscy5tdWxNKHRhLGFtKSwgYj1CYXNlTWF0aFV0aWxzLm11bE0odGEsYm0pLFxyXG4gICAgICBkPShhWzBdWzBdKmFbMV1bMV0tYVsxXVswXSphWzBdWzFdKSxcclxuICAgICAgcD1bXHJcbiAgICAgICAgLShhWzBdWzFdKmJbMV1bMF0tYlswXVswXSphWzFdWzFdKS9kLFxyXG4gICAgICAgIChhWzBdWzBdKmJbMV1bMF0tYVsxXVswXSpiWzBdWzBdKS9kXHJcbiAgICAgIF07XHJcbiAgICAgIGZvcihsZXQgaT0wO2k8bnVtOysraSkge1xyXG4gICAgICAgIGNvbnN0IHYgPSBNYXRoLnJvdW5kKHBbMF0qKGkrbCkrcFsxXSk7XHJcbiAgICAgICAgaWYoci5pbmRleE9mKHYpPT09LTEpIHtcclxuICAgICAgICAgIHIucHVzaCh2KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldFVuaXF1ZSgpIHtcclxuICAgIHJldHVybiBNYXRoLmNlaWwoMWU5Kk1hdGgucmFuZG9tKCkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldFNwbGluZVBvaW50cyhzcGxpbmUsIHBzKSB7XHJcbiAgICBpZihzcGxpbmUucG9pbnRzLmxlbmd0aCE9PXBzLngubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybignc2V0U3BsaW5lUG9pbnRzOiBiYWQgcG9pbnRzJyk7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IGk9MDsgaTxzcGxpbmUucG9pbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHNwbGluZS5wb2ludHNbaV0uc2V0KHBzLnhbaV0sIHBzLnlbaV0sIHBzLno/IHBzLnpbaV06IDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG1hcGwyTChscywgbGVuLCBuLCBmKSB7XHJcbiAgICBjb25zdCBkTCA9IGxlbi8obi0xKTtcclxuICAgIGxldCBMPTA7XHJcbiAgICBmb3IobGV0IGk9MCwgZD1sc1swXTsgaTxscy5sZW5ndGgtMSAmJiBMPGxlbiswLjEqZEw7ICsraSwgZCs9bHNbaV0pIHtcclxuICAgICAgaWYoTWF0aC5hYnMoTC1kKTxNYXRoLmFicyhMLWQtbHNbaSsxXSkpIHtcclxuICAgICAgICBmKGksIEwpO1xyXG4gICAgICAgIEwrPWRMO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihMPGxlbiswLjEqZEwpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdtYXBsMkw6IGxzIGlzIG5vdCBlbm91Z2h0Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGV0MihhLGIsYyxkKSB7XHJcbiAgICByZXR1cm4gYSpkLWIqYztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzb2x2ZTJMaW4oYTEsYjEsYTIsYjIpIHtcclxuICAgIGxldCByZXM7XHJcbiAgICBjb25zdCBkPUJhc2VNYXRoVXRpbHMuZGV0MihhMVswXSxhMVsxXSxhMlswXSxhMlsxXSk7XHJcbiAgICBpZihNYXRoLmFicyhkKT5CYXNlTWF0aFV0aWxzLmVwcykge1xyXG4gICAgICBjb25zdCBkeD1CYXNlTWF0aFV0aWxzLmRldDIoYjEsYTFbMV0sYjIsYTJbMV0pLCBkeT1CYXNlTWF0aFV0aWxzLmRldDIoYTFbMF0sYjEsYTJbMF0sYjIpO1xyXG4gICAgICByZXMgPSB7XHJcbiAgICAgICAgeDogZHgvZCxcclxuICAgICAgICB5OiBkeS9kXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzSW5zaWRlUG9seShwcywgcCkge1xyXG4gICAgbGV0IGRvbmUgPSBmYWxzZSwgY3Q7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxwcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBpZihCYXNlTWF0aFV0aWxzLnYyZGlzdChwLCBwc1tpXSk8QmFzZU1hdGhVdGlscy5lcHMpIHtcclxuICAgICAgICBjdD0xO1xyXG4gICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB3aGlsZSghZG9uZSkge1xyXG4gICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgY3QgPSAwO1xyXG4gICAgICBsZXQgbnAgPSB7eDogcC54K01hdGgucmFuZG9tKCktMC41LCB5OiBwLnkrTWF0aC5yYW5kb20oKS0wLjV9LCBybiA9IHt4OiBucC54LXAueCwgeTogbnAueS1wLnl9LCBhMT1bcm4ueSwgLXJuLnhdLCBiMT1wLngqcm4ueS1wLnkqcm4ueDtcclxuICAgICAgZm9yKGxldCBpPTA7IGk8cHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjb25zdCBwMD1wc1tpXSwgcDE9cHNbKGkrMSklcHMubGVuZ3RoXSwgbiA9IHt4OiBwMS54LXAwLngsIHk6IHAxLnktcDAueX0sIGEyPVtuLnksIC1uLnhdLCBiMj1wMC54Km4ueS1wMC55Km4ueCxcclxuICAgICAgICAgIGlwID0gQmFzZU1hdGhVdGlscy5zb2x2ZTJMaW4oYTEsYjEsYTIsYjIpO1xyXG4gICAgICAgIGlmKGlwKSB7XHJcbiAgICAgICAgICBpZihCYXNlTWF0aFV0aWxzLnYyZGlzdChpcCwgcDApPEJhc2VNYXRoVXRpbHMuZXBzIHx8IEJhc2VNYXRoVXRpbHMudjJkaXN0KGlwLCBwMSk8QmFzZU1hdGhVdGlscy5lcHMpIHtcclxuICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYoaXAueD5NYXRoLm1pbihwMC54LHAxLngpLUJhc2VNYXRoVXRpbHMuZXBzJiZpcC54PE1hdGgubWF4KHAwLngscDEueCkrQmFzZU1hdGhVdGlscy5lcHMgJiZcclxuICAgICAgICAgICAgICAgICAgaXAueT5NYXRoLm1pbihwMC55LHAxLnkpLUJhc2VNYXRoVXRpbHMuZXBzJiZpcC55PE1hdGgubWF4KHAwLnkscDEueSkrQmFzZU1hdGhVdGlscy5lcHMpIHtcclxuICAgICAgICAgICAgaWYoQmFzZU1hdGhVdGlscy52MmRpc3QoaXAsIHApPEJhc2VNYXRoVXRpbHMuZXBzKSB7XHJcbiAgICAgICAgICAgICAgY3Q9MTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zdCB0bj17eDogaXAueC1wLngsIHk6IGlwLnktcC55fTtcclxuICAgICAgICAgICAgICBjdCArPSB0bi54KnJuLngrdG4ueSpybi55PjA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjdCUyO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzSW5zaWRlQ29udlBvbHkocHMsIHApIHtcclxuICAgIGxldCBzZyA9IFswLCAwXTtcclxuICAgIGZvcihsZXQgaT0wOyBpPHBzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IHAwPXBzW2ldLCBwMT1wc1soaSsxKSVwcy5sZW5ndGhdLCBhPXt4OiBwMC54LXAueCwgeTogcDAueS1wLnl9LCBiPXt4OiBwMS54LXAueCwgeTogcDEueS1wLnl9O1xyXG4gICAgICArK3NnWyhhLngqYi55LWEueSpiLng8MCkrMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gfnNnLmluZGV4T2YocHMubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2Mmxlbih2Mikge1xyXG4gICAgcmV0dXJuIE1hdGguc3FydCh2Mi54KnYyLngrdjIueSp2Mi55KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2MmRpc3QodjIxLCB2MjIpIHtcclxuICAgIHJldHVybiBCYXNlTWF0aFV0aWxzLnYybGVuKHtcclxuICAgICAgeDogdjIyLngtdjIxLngsXHJcbiAgICAgIHk6IHYyMi55LXYyMS55XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb21wdXRlU3F1YXJlKHBzKSB7XHJcbiAgICBjb25zdCBhID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxwcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBhLnB1c2goQmFzZU1hdGhVdGlscy52MmRpc3QocHNbaV0sIHBzWyhpKzEpJXBzLmxlbmd0aF0pKTtcclxuICAgICAgcCArPSAwLjUqYVtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBNYXRoLnNxcnQocCoocC1hWzBdKSoocC1hWzFdKSoocC1hWzJdKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29tcHV0ZUludGVycENvZWZzKHRyaSwgcCkge1xyXG4gICAgY29uc3QgcyA9IEJhc2VNYXRoVXRpbHMuY29tcHV0ZVNxdWFyZSh0cmkpLCBjb2Vmcz1bXSwgbCA9IHRyaS5sZW5ndGg7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxsOyArK2kpIHtcclxuICAgICAgY29lZnNbaV0gPSBCYXNlTWF0aFV0aWxzLmNvbXB1dGVTcXVhcmUoW3AsIHRyaVsoaSsxKSVsXSwgdHJpWyhpKzIpJWxdXSkvcztcclxuICAgIH1cclxuICAgIHJldHVybiBjb2VmcztcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0Jhc2VNYXRoVXRpbHMuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9CYXNlTWF0aFV0aWxzLmpzIiwiaW1wb3J0IHtUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBCYXNlTWF0aFV0aWxzIGZyb20gJy4vQmFzZU1hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRoVXRpbHMgZXh0ZW5kcyBCYXNlTWF0aFV0aWxzIHtcclxuICBzdGF0aWMgdjEgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuICBzdGF0aWMgc3BsaXRTcGxpbmUoc3BsaW5lLCBOKSB7XHJcbiAgICBjb25zdCBvID0ge2xlbjogMCwgbHM6IFswXX0sIGRsPTEvTjtcclxuICAgIGZvcihsZXQgaT0wOyBpPD1OOyArK2kpIHtcclxuICAgICAgY29uc3QgcCA9IHNwbGluZS5nZXRQb2ludChpKmRsKTtcclxuICAgICAgaWYoaSkge1xyXG4gICAgICAgIGNvbnN0IGQgPSBNYXRoVXRpbHMudjEuZGlzdGFuY2VUbyhwKTtcclxuICAgICAgICBvLmxlbiArPSBkO1xyXG4gICAgICAgIG8ubHMucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgICBNYXRoVXRpbHMudjEuY29weShwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBvO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldExpbmVhckluZGVjZXMoc3BsaW5lLCBuKSB7XHJcbiAgICBjb25zdCBkZWwgPSA1MDAwLCBkRGVsID0gMS9kZWw7XHJcbiAgICBjb25zdCBscz1bMF07XHJcbiAgICBsZXQgbCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTw9ZGVsOyArK2kpIHtcclxuICAgICAgY29uc3QgcCA9IHNwbGluZS5nZXRQb2ludChpKmREZWwpO1xyXG4gICAgICBpZihpKSB7XHJcbiAgICAgICAgY29uc3QgZD1NYXRoVXRpbHMudjEuZGlzdGFuY2VUbyhwKTtcclxuICAgICAgICBsICs9IGQ7XHJcbiAgICAgICAgbHMucHVzaChkKTtcclxuICAgICAgfVxyXG4gICAgICBNYXRoVXRpbHMudjEuY29weShwKTtcclxuICAgIH1cclxuICAgIGxzLnB1c2goMWU3KTtcclxuXHJcbiAgICBjb25zdCByZXMgPSBbXSwgZGwgPSBsLyhuLTEpO1xyXG4gICAgZm9yKGxldCBpPTAsIEw9MCwgZD1sc1swXTsgaTxscy5sZW5ndGgtMTsgKytpLCBkKz1sc1tpXSkge1xyXG4gICAgICBpZihNYXRoLmFicyhMLWQpPE1hdGguYWJzKEwtZC1sc1tpKzFdKSkge1xyXG4gICAgICAgIHJlcy5wdXNoKGkqZERlbCk7XHJcbiAgICAgICAgTCs9ZGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlZmluZVBvbHkocG9seSwgbWF4RGwpIHtcclxuICAgIGNvbnN0IHJlcyA9IFtdO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8cG9seS5sZW5ndGg7ICsraSkge1xyXG4gICAgICBjb25zdCBwMCA9IHBvbHlbaV0sIHAxID0gcG9seVsoaSsxKSVwb2x5Lmxlbmd0aF0sIGwgPSBCYXNlTWF0aFV0aWxzLnYyZGlzdChwMCwgcDEpLCBuID0gTWF0aC5jZWlsKGwvbWF4RGwpLCBkbCA9IGwvbjtcclxuICAgICAgcmVzLnB1c2gocDApO1xyXG4gICAgICBmb3IobGV0IGo9MTsgajxuOyArK2opIHtcclxuICAgICAgICByZXMucHVzaChuZXcgVEhSRUUuVmVjdG9yMihcclxuICAgICAgICAgIHAwLngraipkbCoocDEueC1wMC54KS9sLFxyXG4gICAgICAgICAgcDAueStqKmRsKihwMS55LXAwLnkpL2xcclxuICAgICAgICApKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL01hdGhVdGlscy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL01hdGhVdGlscy5qcyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgc3RhdGljIG5vcm1hbGl6ZVVybCh1cmwpIHtcclxuICAgIGZ1bmN0aW9uIHNwbGl0KHMpIHtcclxuICAgICAgcmV0dXJuIHMucmVwbGFjZSgvXFxcXC9nLCAnLycpLnNwbGl0KCcvJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBiYXNlID0gc3BsaXQod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgdXJsID0gc3BsaXQodXJsKTtcclxuICAgIGlmKGJhc2VbMl09PT11cmxbMl0pIHtcclxuICAgICAgdXJsWzBdID0gYmFzZVswXTtcclxuICAgIH1cclxuICAgIHJldHVybiB1cmwuam9pbignLycpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGV4dGVuZHMoZGVyLCBiYXNlKSB7XHJcbiAgICBmb3IobGV0IG5hbWUgaW4gYmFzZSkge1xyXG4gICAgICBpZighZGVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAgICAgICAgZGVyW25hbWVdID0gYmFzZVtuYW1lXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRlZmF1bHRDbXAoYSwgYikge1xyXG4gICAgcmV0dXJuIGEtYjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBsb3dlckJvdW5kKGEsIHgsIGNtcCkge1xyXG4gICAgY21wID0gY21wIHx8IFV0aWxzLmRlZmF1bHRDbXA7XHJcbiAgICBsZXQgbCA9IDAsIGggPSBhLmxlbmd0aC0xO1xyXG4gICAgd2hpbGUoaC1sPjEpIHtcclxuICAgICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoKGwgKyBoKSAvIDIpO1xyXG4gICAgICBpZihjbXAoeCwgYVttaWRdKTwwKSB7XHJcbiAgICAgICAgaCA9IG1pZDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBsID0gbWlkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY21wKHgsIGFbaF0pPj0wPyBoOiBsO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVXRpbHMuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9VdGlscy5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBHcmFwaFV0aWxzIGZyb20gJy4vR3JhcGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZUJhc2Uge1xyXG5cclxuICBzdGF0aWMgcmVuZGVyQ2FudmFzID0gICQoJzxjYW52YXM+JylbMF07XHJcbiAgc3RhdGljIHJlbmRlckNhbnZhc0N0eCA9IEltYWdlQmFzZS5yZW5kZXJDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29sb3IpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICB0aGlzLnduZCA9IGNvbnRleHQud25kO1xyXG4gICAgdGhpcy5kb2MgPSBjb250ZXh0LmRvYztcclxuICAgIHRoaXMuZWxlbWVudCA9IGNvbnRleHQuZWxlbWVudCB8fCBjb250ZXh0LmRvYy5ib2R5O1xyXG4gICAgdGhpcy5jID0gY29udGV4dC5yZW5kZXJDYW52YXMgfHwgSW1hZ2VCYXNlLnJlbmRlckNhbnZhcztcclxuICAgIHRoaXMuY3R4ID0gY29udGV4dC5yZW5kZXJDYW52YXNDdHggfHwgSW1hZ2VCYXNlLnJlbmRlckNhbnZhc0N0eDtcclxuICAgIHRoaXMucmVzVyA9IHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgIHRoaXMucmVzSCA9IHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gIH1cclxuXHJcbiAgc2V0UmVzb2x1dGlvbihyZXMpIHtcclxuICAgIHRoaXMucmVzVyA9IHJlcy53aWR0aDtcclxuICAgIHRoaXMucmVzSCA9IHJlcy5oZWlnaHQ7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG5cclxuICB9XHJcblxyXG4gIHJlbmRlckJsYW5rUGFnZSgpIHtcclxuICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gR3JhcGhVdGlscy5jb2xvcjJSZ2JhKHRoaXMuY29sb3IsIDEpO1xyXG4gICAgdGhpcy5jdHgucmVjdCgwLCAwLCB0aGlzLmMud2lkdGgsIHRoaXMuYy5oZWlnaHQpO1xyXG4gICAgdGhpcy5jdHguZmlsbCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySW1hZ2UoaW1hZ2UpIHtcclxuICAgIHRoaXMucHVzaEN0eCgpO1xyXG4gICAgdGhpcy5jdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcclxuICAgIHRoaXMucG9wQ3R4KCk7XHJcbiAgfVxyXG5cclxuICBub3JtVG9Db252KHApIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHg6IHAueCp0aGlzLmMud2lkdGgsXHJcbiAgICAgIHk6ICgxLXAueSkqdGhpcy5jLmhlaWdodFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlckhpdChwb2x5KSB7XHJcbiAgICBjb25zdCBjdHggPSB0aGlzLmN0eDtcclxuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDAsMC40KSc7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBsZXQgcCA9IHRoaXMubm9ybVRvQ29udihwb2x5WzBdKTtcclxuICAgIGN0eC5tb3ZlVG8ocC54LCBwLnkpO1xyXG4gICAgZm9yKGxldCBpPTE7IGk8cG9seS5sZW5ndGg7ICsraSkge1xyXG4gICAgICBwID0gdGhpcy5ub3JtVG9Db252KHBvbHlbaV0pO1xyXG4gICAgICBjdHgubGluZVRvKHAueCwgcC55KTtcclxuICAgIH1cclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgfVxyXG5cclxuICBwdXNoQ3R4KCkge1xyXG4gICAgaWYodGhpcy5yZXNXIT10aGlzLmMud2lkdGgpIHtcclxuICAgICAgdGhpcy5jLndpZHRoID0gdGhpcy5yZXNXO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5yZXNIIT10aGlzLmMuaGVpZ2h0KSB7XHJcbiAgICAgIHRoaXMuYy5oZWlnaHQgPSB0aGlzLnJlc0g7XHJcbiAgICB9XHJcbiAgICB0aGlzLmN0eC5zYXZlKCk7XHJcbiAgICB0aGlzLmN0eC5zY2FsZSh0aGlzLmMud2lkdGgvdGhpcy53aWR0aCwgdGhpcy5jLmhlaWdodC90aGlzLmhlaWdodCk7XHJcbiAgICByZXR1cm4gdGhpcy5jdHg7XHJcbiAgfVxyXG5cclxuICBwb3BDdHgoKSB7XHJcbiAgICB0aGlzLmN0eC5yZXN0b3JlKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJOb3RGb3VuZFBhZ2UoKSB7XHJcbiAgICB0aGlzLnJlbmRlckJsYW5rUGFnZSgpO1xyXG4gIH1cclxuXHJcbiAgZmluaXNoUmVuZGVyKCkge1xyXG4gICAgaWYodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuYyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmaW5pc2hMb2FkKCkge1xyXG4gICAgaWYodGhpcy5vbkxvYWQpIHtcclxuICAgICAgdGhpcy5vbkxvYWQoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXJ0UmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRTaW11bGF0ZWREb2MoKSB7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvSW1hZ2VCYXNlLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvSW1hZ2VCYXNlLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50Q29udmVydGVyIHtcclxuXHJcbiAgLy8gdmlydHVhbHNcclxuICAvLyBnZXRPYmplY3QoZSwgZGF0YSk7XHJcbiAgLy8gZ2V0Q2FsbGJhY2sob2JqZWN0KTtcclxuICAvLyB0ZXN0KG9iamVjdDEsIG9iamVjdDEpO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYykge1xyXG4gICAgdGhpcy53bmQgPSB3bmQ7XHJcbiAgICB0aGlzLmRvYyA9IGRvYztcclxuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBzZXRFbmFibGUodmwpIHtcclxuICAgIGlmKCF2bCkge1xyXG4gICAgICBpZih0aGlzLm1DYXBPYmplY3QpIHtcclxuICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLm1DYXBPYmplY3QsICQuRXZlbnQoJ21vdXNldXAnKSwgJ21vdXNldXAnKTtcclxuICAgICAgICB0aGlzLm1DYXBPYmplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhpcy5tSG92T2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZnkodGhpcy5tSG92T2JqZWN0LCAkLkV2ZW50KCdtb3VzZW91dCcpLCAnbW91c2VvdXQnKTtcclxuICAgICAgICB0aGlzLm1Ib3ZPYmplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuZW5hYmxlZCA9IHZsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FsbGJhY2sob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5KG9iamVjdCwgZSwgdHlwZSkge1xyXG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmdldENhbGxiYWNrKG9iamVjdCk7XHJcbiAgICBpZihjYWxsYmFjaykge1xyXG4gICAgICBjb25zdCBwcm9wcyA9IHtcclxuICAgICAgICAuLi5lLFxyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdmlldzogdGhpcy53bmRcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgakUgPSAkLkV2ZW50KHR5cGUsIHByb3BzKTtcclxuICAgICAgY2FsbGJhY2soakUsIG9iamVjdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb252ZXJ0KGUsIGRhdGEpIHtcclxuICAgIGlmKCF0aGlzLmVuYWJsZWQpIHJldHVybjtcclxuXHJcbiAgICBpZih0aGlzLmZpbHRlcikge1xyXG4gICAgICBlID0gdGhpcy5maWx0ZXIodGhpcy5lbGVtZW50LCBlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvYmplY3QgPSB0aGlzLmdldE9iamVjdChlLCBkYXRhKSxcclxuICAgICAgbm90aWZ5ID0gfmUudHlwZS5pbmRleE9mKCd0b3VjaCcpPyB0aGlzLmNvbnZlcnRUb3VjaChlLCBkYXRhLCBvYmplY3QpOiB0aGlzLmNvbnZlcnRNb3VzZShlLCBkYXRhLCBvYmplY3QpO1xyXG4gICAgaWYobm90aWZ5ICYmIG9iamVjdCkge1xyXG4gICAgICB0aGlzLm5vdGlmeShvYmplY3QsIGUsIGUudHlwZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb252ZXJ0VG91Y2goZSwgZGF0YSwgb2JqZWN0KSB7XHJcbiAgICBsZXQgbm90aWZ5ID0gdHJ1ZTtcclxuICAgIHN3aXRjaChlLnR5cGUpIHtcclxuICAgICAgY2FzZSAndG91Y2hzdGFydCc6IHtcclxuICAgICAgICBpZih0aGlzLnRDYXBPYmplY3QpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5KHRoaXMudENhcE9iamVjdCwgZSwgJ3RvdWNoZW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudENhcE9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICd0b3VjaGVuZCc6IHtcclxuICAgICAgICBpZih0aGlzLnRDYXBPYmplY3QgJiYgIXRoaXMudGVzdCh0aGlzLnRDYXBPYmplY3QsIG9iamVjdCkpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5KHRoaXMudENhcE9iamVjdCwgZSwgJ3RvdWNoZW5kJyk7XHJcbiAgICAgICAgICBub3RpZnkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihvYmplY3QgJiYgdGhpcy50ZXN0KHRoaXMudENhcE9iamVjdCwgb2JqZWN0KSkge1xyXG4gICAgICAgICAgdGhpcy5ub3RpZnkob2JqZWN0LCBlLCAndG91Y2h0YXAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50Q2FwT2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3RvdWNodGFwJzoge1xyXG4gICAgICAgIG5vdGlmeSA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm90aWZ5O1xyXG4gIH1cclxuXHJcbiAgY29udmVydE1vdXNlKGUsIGRhdGEsIG9iamVjdCkge1xyXG4gICAgbGV0IG5vdGlmeSA9IHRydWU7XHJcbiAgICBzd2l0Y2goZS50eXBlKSB7XHJcbiAgICAgIGNhc2UgJ21vdXNlZG93bic6IHtcclxuICAgICAgICBpZih0aGlzLm1DYXBPYmplY3QpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5KHRoaXMubUNhcE9iamVjdCwgZSwgJ21vdXNldXAnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tQ2FwT2JqZWN0ID0gb2JqZWN0O1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNldXAnOiB7XHJcbiAgICAgICAgaWYodGhpcy5tQ2FwT2JqZWN0ICYmICF0aGlzLnRlc3QodGhpcy5tQ2FwT2JqZWN0LCBvYmplY3QpKSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLm1DYXBPYmplY3QsIGUsICdtb3VzZXVwJyk7XHJcbiAgICAgICAgICBub3RpZnkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnY2xpY2snOiB7XHJcbiAgICAgICAgbm90aWZ5ID0gdGhpcy50ZXN0KHRoaXMubUNhcE9iamVjdCwgb2JqZWN0KTtcclxuICAgICAgICB0aGlzLm1DYXBPYmplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbW91c2VlbnRlcic6XHJcbiAgICAgIGNhc2UgJ21vdXNlb3Zlcic6XHJcbiAgICAgIGNhc2UgJ21vdXNlbW92ZSc6IHtcclxuICAgICAgICBpZighdGhpcy50ZXN0KHRoaXMubUhvdk9iamVjdCwgb2JqZWN0KSAmJiB0aGlzLm1Ib3ZPYmplY3QpIHtcclxuICAgICAgICAgIHRoaXMubm90aWZ5KHRoaXMubUhvdk9iamVjdCwgZSwgJ21vdXNlb3V0Jyk7XHJcbiAgICAgICAgICB0aGlzLm1Ib3ZPYmplY3QgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF0aGlzLm1Ib3ZPYmplY3QgJiYgb2JqZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeShvYmplY3QsIGUsICdtb3VzZW92ZXInKTtcclxuICAgICAgICAgIHRoaXMubUhvdk9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm90aWZ5ID0gZS50eXBlID09PSAnbW91c2Vtb3ZlJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlICdtb3VzZWxlYXZlJzpcclxuICAgICAgY2FzZSAnbW91c2VvdXQnOiB7XHJcbiAgICAgICAgaWYodGhpcy5tSG92T2JqZWN0KSB7XHJcbiAgICAgICAgICB0aGlzLm5vdGlmeSh0aGlzLm1Ib3ZPYmplY3QsIGUsICdtb3VzZW91dCcpO1xyXG4gICAgICAgICAgdGhpcy5tSG92T2JqZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub3RpZnkgPSBmYWxzZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vdGlmeTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0V2ZW50Q29udmVydGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRXZlbnRDb252ZXJ0ZXIuanMiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHcmFwaFV0aWxzIHtcclxuXHJcbiAgc3RhdGljIGV4dHJhcG9sYXRlTGluZWFyKHgseSx4aSkge1xyXG4gICAgcmV0dXJuIHlbMF0rKHlbMV0teVswXSkvKHhbMV0teFswXSkqKHhpLXhbMF0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGludGVycG9sYXRlMDEoeTEseTIsdCkge1xyXG4gICAgcmV0dXJuIEdyYXBoVXRpbHMuZXh0cmFwb2xhdGVMaW5lYXIoWzAsMV0sW3kxLHkyXSx0KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRDb2xvckJ5dGVzKGNvbG9yKSB7XHJcbiAgICByZXR1cm4gWyhjb2xvcj4+MTYpJjB4RkYsIChjb2xvcj4+OCkmMHhGRiwgY29sb3ImMHhGRl07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaW52ZXJzZUNvbG9yKGNvbG9yLCB0PTEpIHtcclxuICAgIGNvbnN0IGJzPUdyYXBoVXRpbHMuZ2V0Q29sb3JCeXRlcyhjb2xvciksXHJcbiAgICAgICAgICBpYnM9WzB4RkYtYnNbMF0sMHhGRi1ic1sxXSwweEZGLWJzWzJdXSxcclxuICAgICAgICAgIG5icz1bTWF0aC5yb3VuZChHcmFwaFV0aWxzLmludGVycG9sYXRlMDEoYnNbMF0saWJzWzBdLHQpKSxNYXRoLnJvdW5kKEdyYXBoVXRpbHMuaW50ZXJwb2xhdGUwMShic1sxXSxpYnNbMV0sdCkpLE1hdGgucm91bmQoR3JhcGhVdGlscy5pbnRlcnBvbGF0ZTAxKGJzWzJdLGlic1syXSx0KSldO1xyXG4gICAgcmV0dXJuIEdyYXBoVXRpbHMuYnl0ZXMyQ29sb3IobmJzKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb2xvcjJSZ2JhKGNvbG9yLCBhKSB7XHJcbiAgICByZXR1cm4gR3JhcGhVdGlscy5ieXRlczJSZ2JhKEdyYXBoVXRpbHMuZ2V0Q29sb3JCeXRlcyhjb2xvciksIGEpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGJ5dGVzMlJnYmEoYnMsIGEpIHtcclxuICAgIHJldHVybiAncmdiYSgnK2JzLmpvaW4oJywnKSsnLCcrYSsnKSc7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYnl0ZXMyQ29sb3IoYnMpIHtcclxuICAgIHJldHVybiBic1syXXwoYnNbMV08PDgpfChic1swXTw8MTYpXHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0dyYXBoVXRpbHMuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9HcmFwaFV0aWxzLmpzIiwiaW1wb3J0IENhY2hlIGZyb20gJy4vQ2FjaGUnO1xyXG5pbXBvcnQgQmxhbmtJbWFnZSBmcm9tICcuL0JsYW5rSW1hZ2UnO1xyXG5pbXBvcnQgU3RhdGljSW1hZ2UgZnJvbSAnLi9TdGF0aWNJbWFnZSc7XHJcbmltcG9ydCBQZGZJbWFnZSBmcm9tICcuL1BkZkltYWdlJztcclxuaW1wb3J0IEludGVyYWN0aXZlSW1hZ2UgZnJvbSAnLi9JbnRlcmFjdGl2ZUltYWdlJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlRmFjdG9yeSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIGNhY2hlKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlIHx8IG5ldyBDYWNoZSgpO1xyXG4gIH1cclxuXHJcbiAgYnVpbGQoaW5mbywgbj0wLCB3aWR0aFRleGVscz0yMTAsIGhlaWdodFRleGVscz0yOTcsIGNvbG9yPTB4RkZGRkZGLCBpbmplY3Rvcj11bmRlZmluZWQpIHtcclxuICAgIGxldCBpbWFnZTtcclxuICAgIHN3aXRjaChpbmZvLnR5cGUpIHtcclxuICAgICAgY2FzZSAnaHRtbCc6IHtcclxuICAgICAgICBpbWFnZSA9IG5ldyBJbnRlcmFjdGl2ZUltYWdlKHRoaXMuY29udGV4dCwgd2lkdGhUZXhlbHMsIGhlaWdodFRleGVscywgY29sb3IsIGluZm8uc3JjLCB0aGlzLmNhY2hlLCBpbmplY3Rvcik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnaW1hZ2UnOiB7XHJcbiAgICAgICAgaW1hZ2UgPSBuZXcgU3RhdGljSW1hZ2UodGhpcy5jb250ZXh0LCB3aWR0aFRleGVscywgaGVpZ2h0VGV4ZWxzLCBjb2xvciwgaW5mby5zcmMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ3BkZic6IHtcclxuICAgICAgICBpbWFnZSA9IG5ldyBQZGZJbWFnZSh0aGlzLmNvbnRleHQsIHdpZHRoVGV4ZWxzLCBoZWlnaHRUZXhlbHMsIGNvbG9yLCBpbmZvLnNyYywgbik7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnYmxhbmsnOlxyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgaW1hZ2UgPSBuZXcgQmxhbmtJbWFnZSh0aGlzLmNvbnRleHQsIHdpZHRoVGV4ZWxzLCBoZWlnaHRUZXhlbHMsIGNvbG9yKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGltYWdlO1xyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9JbWFnZUZhY3RvcnkuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9JbWFnZUZhY3RvcnkuanMiLCJpbXBvcnQge3Byb3BzIGFzICBib29rUHJvcHN9IGZyb20gJy4uL3Byb3BzL2Jvb2snO1xyXG5pbXBvcnQgQmFzZU1hdGhVdGlscyBmcm9tICdCYXNlTWF0aFV0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2tQcm9wc0J1aWxkZXIge1xyXG4gIGNvbnN0cnVjdG9yKG9uUmVhZHkpIHtcclxuICAgIHRoaXMub25SZWFkeSA9IG9uUmVhZHk7XHJcbiAgICB0aGlzLmRlZmF1bHRzID0gYm9va1Byb3BzKCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG5cclxuICB9XHJcblxyXG4gIGNhbGNTaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIGNvbnN0IHNjYWxlID0gQmFzZU1hdGhVdGlscy5jYWxjU2NhbGUod2lkdGgsIGhlaWdodCwgdGhpcy5kZWZhdWx0cy53aWR0aCwgdGhpcy5kZWZhdWx0cy5oZWlnaHQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IHNjYWxlKndpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHNjYWxlKmhlaWdodFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNhbGNUZXhlbHMod2lkdGgsIGhlaWdodCkge1xyXG4gICAgY29uc3Qgc2hlZXQgPSB0aGlzLmRlZmF1bHRzLnNoZWV0LCBzY2FsZSA9IEJhc2VNYXRoVXRpbHMuY2FsY1NjYWxlKHdpZHRoLCBoZWlnaHQsIHNoZWV0LndpZHRoVGV4ZWxzLCBzaGVldC5oZWlnaHRUZXhlbHMpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGhUZXhlbHM6IHNjYWxlKndpZHRoLFxyXG4gICAgICBoZWlnaHRUZXhlbHM6IHNjYWxlKmhlaWdodFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNhbGNQcm9wcyh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICB0aGlzLnByb3BzID0ge1xyXG4gICAgICAuLi50aGlzLmRlZmF1bHRzLFxyXG4gICAgICAuLi50aGlzLmNhbGNTaXplKHdpZHRoLCBoZWlnaHQpLFxyXG4gICAgICBzaGVldDoge1xyXG4gICAgICAgIC4uLnRoaXMuZGVmYXVsdHMuc2hlZXQsXHJcbiAgICAgICAgLi4udGhpcy5jYWxjVGV4ZWxzKHdpZHRoLCBoZWlnaHQpXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvdmVyOiB7XHJcbiAgICAgICAgLi4udGhpcy5kZWZhdWx0cy5jb3ZlcixcclxuICAgICAgfSxcclxuICAgICAgcGFnZToge1xyXG4gICAgICAgIC4uLnRoaXMuZGVmYXVsdHMucGFnZSxcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNhbGNTaGVldHMocGFnZXMpIHtcclxuICAgIHJldHVybiB0aGlzLnNoZWV0cyA9IE1hdGguY2VpbChNYXRoLm1heCgwLCBwYWdlcy00KS8yKTtcclxuICB9XHJcblxyXG4gIGdldFNoZWV0cygpIHtcclxuICAgIHJldHVybiB0aGlzLnNoZWV0cztcclxuICB9XHJcblxyXG4gIGdldFByb3BzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvcHM7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlQ2FsbGJhY2soKSB7XHJcbiAgICByZXR1cm4gdGhpcy5iaW5kcy5wYWdlQ2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICByZWFkeSgpIHtcclxuICAgIGlmKHRoaXMub25SZWFkeSkge1xyXG4gICAgICB0aGlzLm9uUmVhZHkodGhpcy5nZXRQcm9wcygpLCB0aGlzLmdldFNoZWV0cygpLCB0aGlzLmdldFBhZ2VDYWxsYmFjaygpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9Cb29rUHJvcHNCdWlsZGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Cb29rUHJvcHNCdWlsZGVyLmpzIiwiaW1wb3J0IHtUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBzaGVldEJsb2NrIGZyb20gJy4uL21vZGVscy9zaGVldEJsb2NrJztcclxuaW1wb3J0IE1hdGhVdGlscyBmcm9tICdNYXRoVXRpbHMnO1xyXG5pbXBvcnQgVGhyZWVVdGlscyBmcm9tICdUaHJlZVV0aWxzJztcclxuLy8gaW1wb3J0IFRocmVlTWFya3VwIGZyb20gJy4vVGhyZWVNYXJrdXAnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hlZXRCbG9jayB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbCwgcCwgZmlyc3QsIGxhc3QsIGFuZ2xlPTAsIHN0YXRlPSdjbG9zZWQnLCBoZWlnaHQ9MCkge1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWw7XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIC4uLnAsXHJcbiAgICAgIGZpcnN0LFxyXG4gICAgICBsYXN0XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmdldFByb3BzKCk7XHJcblxyXG4gICAgY29uc3QgbG9hZGVkUG9pbnRzID0gdGhpcy5sb2FkUG9pbnRzKCk7XHJcbiAgICBPYmplY3Qua2V5cyhsb2FkZWRQb2ludHMpLm1hcCgoayk9PiB7XHJcbiAgICAgIHRoaXNba10gPSBsb2FkZWRQb2ludHNba11bcHJvcHMuc2hhcGVdIHx8IGxvYWRlZFBvaW50c1trXVswXTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucFNwbGluZSA9IG5ldyBUSFJFRS5TcGxpbmUoW10pO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8dGhpcy5pbnRlcnBvbGF0aW9uUG9pbnRzLnhbMF0ubGVuZ3RoOyArK2kpIHtcclxuICAgIFx0dGhpcy5wU3BsaW5lLnBvaW50cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaVNwbGluZSA9IG5ldyBUSFJFRS5TcGxpbmUoW10pO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8c2hlZXRCbG9jay5yZXNYOyArK2kpIHtcclxuICAgIFx0dGhpcy5pU3BsaW5lLnBvaW50cy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYVNwbGluZXMgPSBbXTtcclxuXHJcbiAgICAvL3RoaXMudGhyZWUgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuXHJcbiAgICB0aGlzLmdlb21ldHJ5ID0gc2hlZXRCbG9jay5nZW9tZXRyeS5jbG9uZSgpO1xyXG5cclxuICAgIHRoaXMucC5zaWRlRmFjZXMgPSBbe1xyXG4gICAgICAgIGZpcnN0OiAwLFxyXG4gICAgICAgIGxhc3Q6IHNoZWV0QmxvY2suZmFjZXNbMF1cclxuICAgICAgfSwge1xyXG4gICAgICAgIGZpcnN0OiBzaGVldEJsb2NrLmZhY2VzWzBdLFxyXG4gICAgICAgIGxhc3Q6IHNoZWV0QmxvY2suZmFjZXNbMV1cclxuICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLnNpZGVUZXh0dXJlID0gbmV3IFRIUkVFLlRleHR1cmUoKTtcclxuICAgIHRoaXMuc2lkZVRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcclxuICAgIHRoaXMuc2lkZVRleHR1cmUucmVwZWF0LnNldCgwLCBsYXN0LWZpcnN0KTtcclxuICAgIHRoaXMuc2lkZVRleHR1cmUuaW1hZ2UgPSBwcm9wcy5zaWRlVGV4dHVyZTtcclxuICAgIHRoaXMuc2lkZVRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMubWF0ZXJpYWxzID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7bWFwOiB0aGlzLnNpZGVUZXh0dXJlfSksXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKHttYXA6IHRoaXMuc2lkZVRleHR1cmV9KSxcclxuICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe21hcDogdGhpcy5zaWRlVGV4dHVyZX0pLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBUSFJFRS5NZXNoUGhvbmdNYXRlcmlhbCh7bWFwOiB0aGlzLnNpZGVUZXh0dXJlfSlcclxuICAgICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICB0aGlzLnAuc2V0VGV4dHVyZSh0aGlzLm1hdGVyaWFsc1swXSwgMipmaXJzdCk7XHJcbiAgICB0aGlzLnAuc2V0VGV4dHVyZSh0aGlzLm1hdGVyaWFsc1sxXSwgMipsYXN0LTEpO1xyXG5cclxuICAgIHRoaXMubWVzaCA9IG5ldyBUSFJFRS5NZXNoKHRoaXMuZ2VvbWV0cnksIG5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKHRoaXMubWF0ZXJpYWxzKSk7XHJcbiAgICB0aGlzLm1lc2guY2FzdFNoYWRvdyA9IGZhbHNlO1xyXG4gICAgdGhpcy5tZXNoLnJlY2VpdmVTaGFkb3cgPSBmYWxzZTtcclxuICAgIC8vIHRoaXMubWVzaC5mcnVzdHVtQ3VsbGVkID0gdHJ1ZTtcclxuXHJcbiAgICAvL3RoaXMudGhyZWUuYWRkKHRoaXMubWVzaCk7XHJcbiAgICB0aGlzLnRocmVlID0gdGhpcy5tZXNoO1xyXG4gICAgdGhpcy50aHJlZS51c2VyRGF0YS5zZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLm1hcmtlcnMgPSBbXTtcclxuICAgIGlmKHRoaXMucC5tYXJrZXIudXNlKSB7XHJcbiAgICAgIGNvbnN0IGw9dGhpcy5nZW9tZXRyeS52ZXJ0aWNlcy5sZW5ndGg7XHJcbiAgICAgIGxldCBpcztcclxuICAgICAgLy8gaXMgPSBbMCwgc2hlZXRCbG9jay5yZXNYLTEsIChzaGVldEJsb2NrLnJlc1otMSkqc2hlZXRCbG9jay5yZXNYLCBzaGVldEJsb2NrLnJlc1oqc2hlZXRCbG9jay5yZXNYLTFdO1xyXG4gICAgICBpcyA9IEFycmF5LmFwcGx5KDAsIEFycmF5KGwpKS5tYXAoKF8sIGkpPT4gaSk7XHJcblxyXG4gICAgICBmb3IobGV0IGkgb2YgaXMpIHtcclxuICAgICAgICBjb25zdCBtYXJrZXIgPSBUaHJlZVV0aWxzLmNyZWF0ZU1hcmtlcih0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW2ldLCBpPGwvMj8weEZGMDAwMDoweDAwRkYwMCwgdGhpcy5wLm1hcmtlci5zaXplKTtcclxuICAgICAgICB0aGlzLm1hcmtlcnMucHVzaCh7XHJcbiAgICAgICAgICBtYXJrZXIsXHJcbiAgICAgICAgICB2ZXJ0ZXg6IGlcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnRocmVlLmFkZChtYXJrZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jb3JuZXIgPSB7XHJcbiAgICAgIHVzZTogdHJ1ZSxcclxuICAgICAgaGVpZ2h0OiAwLFxyXG4gICAgICBtYXhEaXN0YW5jZTogMCxcclxuICAgICAgcG9pbnRzOiBbXSxcclxuICAgICAgT1o6IG5ldyBUSFJFRS5WZWN0b3IzKDAsMCwxKSxcclxuICAgICAgYXhpczogbmV3IFRIUkVFLlZlY3RvcjMoKVxyXG4gICAgfTtcclxuICAgIHRoaXMuc2V0KDAsICdjbG9zZWQnLCBoZWlnaHQsIGZpcnN0LCBsYXN0KTsgLy8gY2FsY3VsYXRlIGNvcm5lciBwb2ludHNcclxuXHJcbiAgICB0aGlzLnNldChhbmdsZSwgc3RhdGUsIGhlaWdodCwgZmlyc3QsIGxhc3QpOyAvLyBpbml0IHBvc2l0aW9uXHJcblxyXG4gICAgLy8gaWYoIVNoZWV0QmxvY2subWFya3VwKSB7XHJcbiAgICAvLyAgIFNoZWV0QmxvY2subWFya3VwPXRydWU7XHJcbiAgICAvLyAgIHRoaXMubWFya3VwID0gbmV3IFRocmVlTWFya3VwKHRoaXMsIDAsIFt7XHJcbiAgICAvLyAgICAgeDogMCxcclxuICAgIC8vICAgICB5OiAwLFxyXG4gICAgLy8gICB9LCB7XHJcbiAgICAvLyAgICAgeDogMC41LFxyXG4gICAgLy8gICAgIHk6IDFcclxuICAgIC8vICAgfSwge1xyXG4gICAgLy8gICAgIHg6IDEsXHJcbiAgICAvLyAgICAgeTogMFxyXG4gICAgLy8gICB9XS5tYXAoKHApPT5uZXcgVEhSRUUuVmVjdG9yMihwLngsIHAueSkpLCB7fSk7XHJcbiAgICAvLyB9XHJcblxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGZvcihsZXQgbSBvZiB0aGlzLm1hdGVyaWFscykge1xyXG4gICAgICBpZihtLm1hcCkge1xyXG4gICAgICAgIG0ubWFwID0gbnVsbDtcclxuICAgICAgICBtLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBtLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLm1hdGVyaWFscztcclxuICAgIHRoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2l6ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnAubGFzdC10aGlzLnAuZmlyc3Q7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9wcygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC4uLnRoaXMucC5wYWdlLFxyXG4gICAgICBzaGVldHM6IHRoaXMucC5zaGVldHNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRUb3BDZXJuZXJzKCkge1xyXG4gICAgY29uc3Qgb2ZmID0gdGhpcy5hbmdsZT5NYXRoLlBJLzI/IHRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoLzI6IDA7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbb2ZmXSxcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW3NoZWV0QmxvY2sucmVzWC0xK29mZl0sXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1soc2hlZXRCbG9jay5yZXNaLTEpKnNoZWV0QmxvY2sucmVzWCtvZmZdLFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbc2hlZXRCbG9jay5yZXNaKnNoZWV0QmxvY2sucmVzWC0xK29mZl1cclxuICAgICAgXTtcclxuICB9XHJcblxyXG4gIGdldFRvcFNpemUoKSB7XHJcbiAgICAvLyBjb25zdCBsPXRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoLCBvZmYgPSB0aGlzLmFuZ2xlPk1hdGguUEkvMj8gbC8yOiAwLFxyXG4gICAgLy8gICB2MCA9IHRoaXMuZ2VvbWV0cnkudmVydGljZXNbb2ZmXSwgdjEgPSB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW3NoZWV0QmxvY2sucmVzWipzaGVldEJsb2NrLnJlc1gtMStvZmZdO1xyXG4gICAgLy8gLy8gaXMgPSBbMCwgc2hlZXRCbG9jay5yZXNYLTEsIChzaGVldEJsb2NrLnJlc1otMSkqc2hlZXRCbG9jay5yZXNYLCBzaGVldEJsb2NrLnJlc1oqc2hlZXRCbG9jay5yZXNYLTFdO1xyXG4gICAgLy8gcmV0dXJuIHtcclxuICAgIC8vICAgd2lkdGg6IE1hdGguYWJzKHYxLngtdjAueCksXHJcbiAgICAvLyAgIGhlaWdodDogTWF0aC5hYnModjEuei12MC56KVxyXG4gICAgLy8gfTtcclxuICAgIGNvbnN0IHZzID0gdGhpcy5nZXRUb3BDZXJuZXJzKCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogdnNbMF0uZGlzdGFuY2VUbyh2c1sxXSksXHJcbiAgICAgIGhlaWdodDogdnNbMF0uZGlzdGFuY2VUbyh2c1syXSlcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRUb3BXb3JsZFJvdGF0aW9uKHEpIHtcclxuICAgIHEueCA9IC1NYXRoLlBJLzI7XHJcbiAgICByZXR1cm4gcTtcclxuICB9XHJcblxyXG4gIGdldFRvcFdvcmxkUG9zaXRpb24odikge1xyXG4gICAgY29uc3QgbD10aGlzLmdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCwgb2ZmID0gdGhpcy5hbmdsZT5NYXRoLlBJLzI/IGwvMjogMCwgdnMgPSBbXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tvZmZdLFxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkudmVydGljZXNbc2hlZXRCbG9jay5yZXNYLTErb2ZmXSxcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzWyhzaGVldEJsb2NrLnJlc1otMSkqc2hlZXRCbG9jay5yZXNYK29mZl0sXHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tzaGVldEJsb2NrLnJlc1oqc2hlZXRCbG9jay5yZXNYLTErb2ZmXVxyXG4gICAgICBdO1xyXG4gICAgdi5zZXQoMCwgMCwgMCk7XHJcbiAgICBmb3IobGV0IHZpIG9mIHZzKSB7XHJcbiAgICAgIHYueCArPSAwLjI1KnZpLng7XHJcbiAgICAgIHYueSArPSAwLjI1KnZpLnk7XHJcbiAgICAgIHYueiArPSAwLjI1KnZpLno7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRocmVlLmxvY2FsVG9Xb3JsZCh2KTtcclxuICAgIHJldHVybiB2O1xyXG4gIH1cclxuXHJcbiAgZ2V0SW50ZXJwb2xhdGlvblBvaW50cyhpbmRzLCBtb2QpIHtcclxuICAgIGNvbnN0IHBzID0ge3g6IFtdLCB5OiBbXX0sIEsgPSB0aGlzLmdldFByb3BzKCkud2F2ZTtcclxuICAgIGZvcihsZXQgaSBvZiBpbmRzKSB7XHJcbiAgICAgIHBzLngucHVzaChbLi4udGhpcy5pbnRlcnBvbGF0aW9uUG9pbnRzLnhbaV1dKTtcclxuICAgICAgcHMueS5wdXNoKH5tb2QuaW5kZXhPZihpKT8gdGhpcy5pbnRlcnBvbGF0aW9uUG9pbnRzLnlbaV0ubWFwKChuKT0+IEsqbik6IFsuLi50aGlzLmludGVycG9sYXRpb25Qb2ludHMueVtpXV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBzO1xyXG4gIH1cclxuXHJcbiAgc2V0KGFuZ2xlLCBzdGF0ZT10aGlzLnN0YXRlLCBoZWlnaHQ9dGhpcy5jb3JuZXIuaGVpZ2h0LCBmaXJzdD10aGlzLnAuZmlyc3QsIGxhc3Q9dGhpcy5wLmxhc3QpIHtcclxuICAgIGNvbnN0IFBJID0gTWF0aC5QSTtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgIGxldCBjbG9zZWRBbmdsZSwgYmluZGVyVHVybjtcclxuICAgIGlmKHR5cGVvZiBhbmdsZT09PSdvYmplY3QnKSB7XHJcbiAgICAgIHRoaXMuYW5nbGUgPSBhbmdsZS5vcGVuZWRBbmdsZTtcclxuICAgICAgY2xvc2VkQW5nbGUgPSBhbmdsZS5jbG9zZWRBbmdsZTtcclxuICAgICAgYmluZGVyVHVybiA9IGFuZ2xlLmJpbmRlclR1cm4+UEkvMj9QSS1hbmdsZS5iaW5kZXJUdXJuOmFuZ2xlLmJpbmRlclR1cm47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5jb3JuZXIuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgaWYodGhpcy5wLmZpcnN0IT09Zmlyc3QgfHwgdGhpcy5wLmxhc3QhPT1sYXN0KSB7XHJcbiAgICAgIHRoaXMuc2lkZVRleHR1cmUucmVwZWF0LnNldCgwLCBsYXN0LWZpcnN0KTtcclxuICAgICAgdGhpcy5zaWRlVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgIGlmKHRoaXMucC5maXJzdCE9PWZpcnN0KSB7XHJcbiAgICAgICAgdGhpcy5wLnNldFRleHR1cmUodGhpcy5tYXRlcmlhbHNbMF0sIDIqZmlyc3QpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRoaXMucC5sYXN0IT09bGFzdCkge1xyXG4gICAgICAgIHRoaXMucC5zZXRUZXh0dXJlKHRoaXMubWF0ZXJpYWxzWzFdLCAyKmxhc3QtMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucC5maXJzdCA9IGZpcnN0O1xyXG4gICAgdGhpcy5wLmxhc3QgPSBsYXN0O1xyXG4gICAgbGV0IHBvaW50cztcclxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5nZXRQcm9wcygpO1xyXG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcclxuICAgICAgcG9pbnRzID0gdGhpcy5nZXRJbnRlcnBvbGF0aW9uUG9pbnRzKHRoaXMuY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMsIHRoaXMuY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLnN0YXRlID09PSAnb3BlbmVkJykge1xyXG4gICAgICBpZihjbG9zZWRBbmdsZSE9PXVuZGVmaW5lZCAmJiBNYXRoLmFicyhjbG9zZWRBbmdsZS1QSS8yKT4xZS0yKSB7XHJcbiAgICAgICAgcG9pbnRzID0gdGhpcy5nZXRJbnRlcnBvbGF0aW9uUG9pbnRzKHRoaXMuZmxhdEludGVycG9sYXRpb25JbmRlY2VzLCBbXSk7XHJcbiAgICAgICAgY29uc3QgcHMgPSB0aGlzLmdldFBvaW50c0F0QW5nbGUodGhpcy5nZXRJbnRlcnBvbGF0aW9uUG9pbnRzKHRoaXMuY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMsIHRoaXMuY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMpLCBjbG9zZWRBbmdsZT5QSS8yP1BJLWNsb3NlZEFuZ2xlOmNsb3NlZEFuZ2xlKTtcclxuICAgICAgICBwb2ludHMueCA9IFtwcy54LC4uLnBvaW50cy54XTtcclxuICAgICAgICBwb2ludHMueSA9IFtwcy55LC4uLnBvaW50cy55XTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcG9pbnRzID0gdGhpcy5nZXRJbnRlcnBvbGF0aW9uUG9pbnRzKHRoaXMub3BlbmVkSW50ZXJwb2xhdGlvbkluZGVjZXMsIHRoaXMuY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgaGwsIGhyLCBvZmZzZXQgPSAwLjUqcHJvcHMuc2hlZXRzKnByb3BzLmRlcHRoO1xyXG4gICAgaWYodGhpcy5zdGF0ZT09PSdjbG9zZWQnKSB7XHJcbiAgICAgIG9mZnNldCAtPSA3ZS02KnRoaXMucC5zY2FsZTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuYW5nbGU8PVBJLzIpIHtcclxuICAgICAgaGwgPSAocHJvcHMuc2hlZXRzLWZpcnN0KSpwcm9wcy5kZXB0aDtcclxuICAgICAgaHIgPSAocHJvcHMuc2hlZXRzLWxhc3QpKnByb3BzLmRlcHRoO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGhsID0gZmlyc3QqcHJvcHMuZGVwdGg7XHJcbiAgICAgIGhyID0gbGFzdCpwcm9wcy5kZXB0aDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbkFuZ2xlID0gdGhpcy5hbmdsZT5QSS8yP1BJLXRoaXMuYW5nbGU6dGhpcy5hbmdsZSwgaEFuZ2xlID0gdGhpcy5zdGF0ZSA9PT0gJ2Nsb3NlZCc/IGluQW5nbGU6IChiaW5kZXJUdXJuPT09dW5kZWZpbmVkPyBQSS8yOiBiaW5kZXJUdXJuKTtcclxuICAgIGNvbnN0IFtsZWZ0LCByaWdodF0gPSB0aGlzLmdldFBvaW50c0F0QW5nbGVBbmRIcyhwb2ludHMsIGluQW5nbGUsIGhBbmdsZSwgW2hsL3Byb3BzLndpZHRoLCBoci9wcm9wcy53aWR0aF0pO1xyXG4gICAgaWYodGhpcy5hbmdsZT5QSS8yKSB7XHJcbiAgICAgIHRoaXMuaW52ZXJzZShsZWZ0KTtcclxuICAgICAgdGhpcy5pbnZlcnNlKHJpZ2h0KTtcclxuICAgICAgb2Zmc2V0ID0gLW9mZnNldDtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0UG9pbnRzKGxlZnQsIHJpZ2h0LCBvZmZzZXQpO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9pbnRzKGxlZnQsIHJpZ2h0LCBvZmZzZXQpIHtcclxuICAgIGNvbnN0IHAgPSB0aGlzLmdldFByb3BzKCk7XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgY29uc3QgeXMgPSBbcmlnaHQsIGxlZnRdO1xyXG4gICAgZm9yKGxldCB5ID0gMDsgeTxzaGVldEJsb2NrLnJlc1k7ICsreSkge1xyXG4gICAgICBmb3IobGV0IHogPSAwOyB6PHNoZWV0QmxvY2sucmVzWjsgKyt6KSB7XHJcbiAgICAgICAgZm9yKGxldCB4ID0gMDsgeDxzaGVldEJsb2NrLnJlc1g7ICsreCkge1xyXG4gICAgICAgICAgdGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tpKytdLnNldChcclxuICAgICAgICAgICAgeXNbeV0ueFt4XSpwLndpZHRoK29mZnNldCxcclxuICAgICAgICAgICAgeXNbeV0ueVt4XSpwLndpZHRoLFxyXG4gICAgICAgICAgICB6KnAuaGVpZ2h0LyhzaGVldEJsb2NrLnJlc1otMSktMC41KnAuaGVpZ2h0XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoaSE9PXRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybignc2V0UG9pbnRzOiBiYWQgbWFwcGluZyEnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLmNvcm5lci51c2UgJiYgIXRoaXMuY29ybmVyLnBvaW50cy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgcGxhbmUgPSBuZXcgVEhSRUUuUGxhbmUoKSwgbm9ybWFsID0gcGxhbmUubm9ybWFsLCBwbGFuZU9mZnNldCA9ICgxLXRoaXMuZ2V0UHJvcHMoKS5mbGV4aWJsZUNvcm5lcikqTWF0aC5taW4ocC53aWR0aCwgcC5oZWlnaHQpLCBwcm9qID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgcGxhbmUuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQobmV3IFRIUkVFLlZlY3RvcjMoLTEsMCwtMSkubm9ybWFsaXplKCksIG5ldyBUSFJFRS5WZWN0b3IzKHBsYW5lT2Zmc2V0K29mZnNldCwgMCwgMC41KnAuaGVpZ2h0KSk7XHJcbiAgICAgIGZvcihsZXQgaT0wLCBsPXRoaXMuZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoO2k8bDsrK2kpIHtcclxuICAgICAgICBwbGFuZS5wcm9qZWN0UG9pbnQodGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tpXSwgcHJvaik7XHJcbiAgICAgICAgcHJvai5zdWIodGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1tpXSk7XHJcbiAgICAgICAgaWYocHJvai54Km5vcm1hbC54K3Byb2oueSpub3JtYWwueStwcm9qLnoqbm9ybWFsLno+MCkge1xyXG4gICAgICAgICAgY29uc3QgZCA9IHByb2oubGVuZ3RoKCkvcGxhbmVPZmZzZXQ7XHJcbiAgICAgICAgICB0aGlzLmNvcm5lci5tYXhEaXN0YW5jZSA9IE1hdGgubWF4KHRoaXMuY29ybmVyLm1heERpc3RhbmNlLCBkKTtcclxuICAgICAgICAgIHRoaXMuY29ybmVyLnBvaW50cy5wdXNoKHt2ZXJ0ZXg6IGksIGRpc3RhbmNlOiBkfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5jb3JuZXIudXNlICYmIE1hdGguYWJzKHRoaXMuY29ybmVyLmhlaWdodCk+MWUtMykge1xyXG4gICAgICBjb25zdCBkMkFuZ2xlID0gKGQpPT4gcC5jb3JuZXJEZXZpYXRpb24qdGhpcy5jb3JuZXIuaGVpZ2h0LygxK01hdGguZXhwKC1wLmJlbmRpbmcqKGQtMC41KnRoaXMuY29ybmVyLm1heERpc3RhbmNlKSkpO1xyXG4gICAgICB0aGlzLmNvcm5lci5heGlzLnNldCgtMSwwLDEpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICB0aGlzLmNvcm5lci5heGlzLmFwcGx5QXhpc0FuZ2xlKHRoaXMuY29ybmVyLk9aLCB0aGlzLmFuZ2xlKTtcclxuICAgICAgZm9yKGxldCBwb2ludCBvZiB0aGlzLmNvcm5lci5wb2ludHMpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzW3BvaW50LnZlcnRleF0uYXBwbHlBeGlzQW5nbGUodGhpcy5jb3JuZXIuYXhpcywgZDJBbmdsZShwb2ludC5kaXN0YW5jZSkpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IG0gb2YgdGhpcy5tYXJrZXJzKSB7XHJcbiAgICAgIG0ubWFya2VyLnBvc2l0aW9uLmNvcHkodGhpcy5nZW9tZXRyeS52ZXJ0aWNlc1ttLnZlcnRleF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcclxuICAgIC8vdGhpcy5nZW9tZXRyeS5jb21wdXRlRmFjZU5vcm1hbHMoKTtcclxuICAgIHRoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICAvL3RoaXMuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk7XHJcbiAgICB0aGlzLmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgaWYodGhpcy5tYXJrdXApIHtcclxuICAgICAgdGhpcy5tYXJrdXAuY29tcHV0ZVZlcnRpY2VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbnZlcnNlKHBzKSB7XHJcbiAgICBmb3IobGV0IGkgPSAwO2k8cHMueC5sZW5ndGg7ICsraSkge1xyXG4gICAgICBwcy54W2ldPS1wcy54W2ldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBzO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9pbnRzQXRIcyhwcywgYW5nbGUsIGhzKSB7XHJcbiAgICBjb25zdCBOID0gMTAwMDtcclxuICAgIE1hdGhVdGlscy5zZXRTcGxpbmVQb2ludHModGhpcy5wU3BsaW5lLCBwcyk7XHJcbiAgICBsZXQgYmwgPSBNYXRoVXRpbHMuc3BsaXRTcGxpbmUodGhpcy5wU3BsaW5lLCBOKSwgcj1bXTtcclxuICAgIHtcclxuICAgICAgY29uc3QgcDEgPSB7Li4udGhpcy5wU3BsaW5lLmdldFBvaW50KChOLTEpL04pfSwgcDIgPSB7Li4udGhpcy5wU3BsaW5lLmdldFBvaW50KDEpfSxcclxuICAgICAgICBkcCA9IHt4OiBwMi54LXAxLngsIHk6IHAyLnktcDEueX0sIGxuID0gTWF0aC5zcXJ0KGRwLngqZHAueCtkcC55KmRwLnkpLFxyXG4gICAgICAgIHNwID0gdGhpcy5wU3BsaW5lLnBvaW50c1t0aGlzLnBTcGxpbmUucG9pbnRzLmxlbmd0aC0xXTtcclxuICAgICAgc3Auc2V0KHNwLngrMC4xKmRwLngvbG4sIHNwLnkrMC4xKmRwLnkvbG4sIDApO1xyXG4gICAgICBibCA9IE1hdGhVdGlscy5zcGxpdFNwbGluZSh0aGlzLnBTcGxpbmUsIE4pO1xyXG4gICAgfVxyXG4gICAgYmwubHMucHVzaCgxZTcpO1xyXG4gICAgTWF0aFV0aWxzLm1hcGwyTChibC5scywgYmwubGVuLCBzaGVldEJsb2NrLnJlc1gsIChpKT0+IHtcclxuICAgICAgZm9yKGxldCBqPTA7IGo8aHMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICBpZighaSkge1xyXG4gICAgICAgICAgcltqXSA9IHt4OiBbLWhzW2pdKk1hdGguc2luKGFuZ2xlKV0sIHk6IFtoc1tqXSpNYXRoLmNvcyhhbmdsZSldfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBwMCA9IHsuLi50aGlzLnBTcGxpbmUuZ2V0UG9pbnQoKGktMSkvTil9LFxyXG4gICAgICAgICAgICAgICAgcDEgPSB0aGlzLnBTcGxpbmUuZ2V0UG9pbnQoaS9OKSxcclxuICAgICAgICAgICAgICAgIHg9LShwMS55LXAwLnkpLCB5PShwMS54LXAwLngpLCBsPU1hdGguc3FydCh4KngreSp5KTtcclxuICAgICAgICAgIHJbal0ueC5wdXNoKHAxLngreC9sKmhzW2pdKTtcclxuICAgICAgICAgIHJbal0ueS5wdXNoKHAxLnkreS9sKmhzW2pdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG5wcz1bXTtcclxuICAgIGZvcihsZXQgaj0wOyBqPGhzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgIG5wc1tqXT17eDpbXSx5OltdfTtcclxuICAgICAgTWF0aFV0aWxzLnNldFNwbGluZVBvaW50cyh0aGlzLmlTcGxpbmUsIHJbal0pO1xyXG4gICAgICBjb25zdCBsID0gTWF0aFV0aWxzLnNwbGl0U3BsaW5lKHRoaXMuaVNwbGluZSwgTik7XHJcbiAgICAgIGwubHMucHVzaCgxZTcpO1xyXG4gICAgICBNYXRoVXRpbHMubWFwbDJMKGwubHMsIDEsIHNoZWV0QmxvY2sucmVzWCwgKGkpPT4ge1xyXG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLmlTcGxpbmUuZ2V0UG9pbnQoaS9OKTtcclxuICAgICAgICBucHNbal0ueC5wdXNoKHAueCk7XHJcbiAgICAgICAgbnBzW2pdLnkucHVzaChwLnkpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBucHM7XHJcbiAgfVxyXG5cclxuICBnZXRQb2ludHNBdEFuZ2xlQW5kSHMocG9pbnRzLCBhbmdsZSwgaEFuZ2xlLCBocykge1xyXG4gICAgY29uc3QgcHMgPSB0aGlzLmdldFBvaW50c0F0QW5nbGUocG9pbnRzLCBhbmdsZSk7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRQb2ludHNBdEhzKHBzLCBoQW5nbGUsIGhzKTtcclxuICB9XHJcblxyXG4gIGdldFBvaW50c0F0QW5nbGUocG9pbnRzLCBhbmdsZSkge1xyXG4gICAgY29uc3QgcHM9e3g6IFtdLCB5OltdfSwgYW5nbGVzPVtdO1xyXG4gICAgYW5nbGUvPU1hdGguUEkvMjtcclxuICAgIGZvcihsZXQgaiA9IDA7IGo8cG9pbnRzLngubGVuZ3RoOyArK2opIHtcclxuICAgICAgYW5nbGVzLnB1c2goai8ocG9pbnRzLngubGVuZ3RoLTEpKTtcclxuICAgIH1cclxuICAgIGZvcihsZXQgaSA9IDA7IGk8cG9pbnRzLnhbMF0ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY29uc3QgeHBzID0gW10sIHlwcyA9IFtdO1xyXG4gICAgICBmb3IobGV0IGogPSAwOyBqPHBvaW50cy54Lmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgeHBzLnB1c2gocG9pbnRzLnhbal1baV0pO1xyXG4gICAgICAgIHlwcy5wdXNoKHBvaW50cy55W2pdW2ldKTtcclxuICAgICAgfVxyXG4gICAgICBwcy54LnB1c2godGhpcy5pbnRlcnBvbGF0ZShhbmdsZXMseHBzLGFuZ2xlKSk7XHJcbiAgICAgIHBzLnkucHVzaCh0aGlzLmludGVycG9sYXRlKGFuZ2xlcyx5cHMsYW5nbGUpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcztcclxuICB9XHJcblxyXG4gIGludGVycG9sYXRlKHgseSx4aSkge1xyXG4gICAgaWYoIXRoaXMuYVNwbGluZXNbeC5sZW5ndGhdKSB7XHJcbiAgICAgIHRoaXMuYVNwbGluZXNbeC5sZW5ndGhdID0gbmV3IFRIUkVFLlNwbGluZShbXSk7XHJcbiAgICAgIGNvbnN0IHBzID0gdGhpcy5hU3BsaW5lc1t4Lmxlbmd0aF0ucG9pbnRzO1xyXG4gICAgICBmb3IobGV0IGk9MDtpPHgubGVuZ3RoOysraSkge1xyXG4gICAgICAgIHBzLnB1c2gobmV3IFRIUkVFLlZlY3RvcjMoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHNwbGluZSA9IHRoaXMuYVNwbGluZXNbeC5sZW5ndGhdO1xyXG4gICAgZm9yKGxldCBpPTA7aTx4Lmxlbmd0aDsrK2kpIHtcclxuICAgICAgc3BsaW5lLnBvaW50c1tpXS5zZXQoeFtpXSwgeVtpXSwgMCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3BsaW5lLmdldFBvaW50KE1hdGgubWluKDEsIE1hdGgubWF4KHhpLCAwKSkpLnk7XHJcbiAgfVxyXG5cclxuICBsb2FkUG9pbnRzKCkge1xyXG4gICAgY29uc3QgeD1bXSx5PVtdO1xyXG4gICAgZm9yKGxldCByIG9mIFswLCAwLjI4NzcsIDAuNjM0NywgMC44MTc0LCAxLjAwMDBdKSB7XHJcbiAgICAgIHgucHVzaChyKk1hdGguY29zKDAuOSpNYXRoLlBJLzQpKTtcclxuICAgICAgeS5wdXNoKHIqTWF0aC5zaW4oMC45Kk1hdGguUEkvNCkpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3BlbmVkSW50ZXJwb2xhdGlvbkluZGVjZXMgPSBbXHJcbiAgICAgIFsyLDMsNF0sXHJcbiAgICAgIFsyLDMsNCw1LDZdXHJcbiAgICBdLFxyXG4gICAgY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMgPSBbXHJcbiAgICAgIFswLDEsMl0sXHJcbiAgICAgIFswLDEsMl1cclxuICAgIF0sXHJcbiAgICBmbGF0SW50ZXJwb2xhdGlvbkluZGVjZXMgPSBbXHJcbiAgICAgIFs1LDRdLFxyXG4gICAgICBbNyw2XVxyXG4gICAgXSxcclxuICAgIGludGVycG9sYXRpb25Qb2ludHMgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICB4OiBbXHJcbiAgICAgICAgICBbMCwwLjI4NzcsMC42MzQ3LDAuODE3NCwxLjAwMDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjg2LDAuNjMyLDAuODE1LDAuOTk3XSxcclxuICAgICAgICAgIFswLjAwMCwwLjI3OSwwLjYyMywwLjgwNiwwLjk4OF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4xMjYsMC40MTEsMC41OTMsMC43NzRdLFxyXG4gICAgICAgICAgWzAsMCwwLDAsMF0sXHJcbiAgICAgICAgICB4XHJcbiAgICAgICAgXSxcclxuICAgICAgICB5OiBbXHJcbiAgICAgICAgICBbMCwwLDAsMCwwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjAzMCwwLjAxMCwwLjAwMiwwLjAwMF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4wNjAsMC4wMTcsMC4wMDQsMC4wMDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjU5LDAuNDQwLDAuNDQ2LDAuNDI5XSxcclxuICAgICAgICAgIFswLCAwLjI4NzcsIDAuNjM0NywgMC44MTc0LCAxLjAwMDBdLFxyXG4gICAgICAgICAgeVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHg6IFtcclxuICAgICAgICAgIFswLDAuMjg3NywwLjYzNDcsMC44MTc0LDEuMDAwMF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4yODYsMC42MzIsMC44MTUsMC45OTddLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjc5LDAuNjIzLDAuODA2LDAuOTg4XSxcclxuICAgICAgICAgIFswLjAwMCwwLjIzMywwLjU2MywwLjc0NiwwLjkyN10sXHJcbiAgICAgICAgICBbMC4wMDAsMC4xNDQsMC40MzMsMC42MTMsMC43OTZdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMDcwLDAuMjg4LDAuNDU1LDAuNjI2XSxcclxuICAgICAgICAgIFswLDAsMCwwLDBdLFxyXG4gICAgICAgICAgeFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgeTogW1xyXG4gICAgICAgICAgWzAsMCwwLDAsMF0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4wMzAsMC4wMTAsMC4wMDIsMC4wMDBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMDYwLDAuMDE3LDAuMDA0LDAuMDAwXSxcclxuICAgICAgICAgIFswLjAwMCwwLjE2OCwwLjI2OSwwLjI3MCwwLjI1NV0sXHJcbiAgICAgICAgICBbMC4wMDAsMC4yNDUsMC40MzUsMC40NTgsMC40NjBdLFxyXG4gICAgICAgICAgWzAuMDAwLDAuMjc4LDAuNTQ0LDAuNjE0LDAuNjczXSxcclxuICAgICAgICAgIFswLCAwLjI4NzcsIDAuNjM0NywgMC44MTc0LCAxLjAwMDBdLFxyXG4gICAgICAgICAgeVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbnRlcnBvbGF0aW9uUG9pbnRzLFxyXG4gICAgICBvcGVuZWRJbnRlcnBvbGF0aW9uSW5kZWNlcyxcclxuICAgICAgY2xvc2VkSW50ZXJwb2xhdGlvbkluZGVjZXMsXHJcbiAgICAgIGZsYXRJbnRlcnBvbGF0aW9uSW5kZWNlc1xyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9TaGVldEJsb2NrLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9TaGVldEJsb2NrLmpzIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9wcygpIHtcclxuICAvLyBjb25zdCBwcm9wcyA9IHtcclxuICAvLyAgIGhlaWdodCxcclxuICAvLyAgIHdpZHRoLFxyXG4gIC8vICAgZ3Jhdml0eSxcclxuICAvLyAgIGluamVjdG9yLFxyXG4gIC8vICAgY2FjaGVkUGFnZXMsXHJcbiAgLy8gICByZW5kZXJJbmFjdGl2ZVBhZ2VzLFxyXG4gIC8vICAgcmVuZGVyV2hpbGVGbGlwcGluZyxcclxuICAvLyAgIHBhZ2VzRm9yUHJlZGljdGluZyxcclxuICAvLyAgIHByZWxvYWRQYWdlcyxcclxuICAvLyAgIHNoZWV0OiB7XHJcbiAgLy8gICAgIHN0YXJ0VmVsb2NpdHksXHJcbiAgLy8gICAgIGNvcm5lckRldmlhdGlvbixcclxuICAvLyAgICAgZmxleGliaWxpdHksXHJcbiAgLy8gICAgIGZsZXhpYmxlQ29ybmVyLFxyXG4gIC8vICAgICBiZW5kaW5nLFxyXG4gIC8vICAgICB3YXZlLFxyXG4gIC8vICAgICBzaGFwZSxcclxuICAvLyAgICAgd2lkdGhUZXhlbHMsXHJcbiAgLy8gICAgIGhlaWdodFRleGVscyxcclxuICAvLyAgICAgY29sb3IsXHJcbiAgLy8gICAgIHNpZGVUZXh0dXJlXHJcbiAgLy8gICB9LFxyXG4gIC8vICAgY292ZXI6IHtcclxuICAvLyAgICAgLi4uc2hlZXQsXHJcbiAgLy8gICAgIHBhZGRpbmcsXHJcbiAgLy8gICAgIGJpbmRlclRleHR1cmUsXHJcbiAgLy8gICAgIGRlcHRoLFxyXG4gIC8vICAgICBtYXNzXHJcbiAgLy8gICB9LFxyXG4gIC8vICAgcGFnZToge1xyXG4gIC8vICAgICAuLi5zaGVldCxcclxuICAvLyAgICAgZGVwdGgsXHJcbiAgLy8gICAgIG1hc3NcclxuICAvLyAgIH1cclxuICAvLyB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaGVpZ2h0OiAwLjI5NyxcclxuICAgIHdpZHRoOiAwLjIxLFxyXG4gICAgZ3Jhdml0eTogMSxcclxuICAgIGNhY2hlZFBhZ2VzOiA1MCxcclxuICAgIHJlbmRlckluYWN0aXZlUGFnZXM6IHRydWUsXHJcbiAgICByZW5kZXJJbmFjdGl2ZVBhZ2VzT25Nb2JpbGU6IGZhbHNlLFxyXG4gICAgcmVuZGVyV2hpbGVGbGlwcGluZzogZmFsc2UsXHJcbiAgICBwYWdlc0ZvclByZWRpY3Rpbmc6IDUsXHJcbiAgICBwcmVsb2FkUGFnZXM6IDUsXHJcbiAgICBydGw6IGZhbHNlLFxyXG4gICAgc2hlZXQ6IHtcclxuICAgICAgc3RhcnRWZWxvY2l0eTogMC45LFxyXG4gICAgICBjb3JuZXJEZXZpYXRpb246IDAuMjUsXHJcbiAgICAgIGZsZXhpYmlsaXR5OiAxMCxcclxuICAgICAgZmxleGlibGVDb3JuZXI6IDAuNSxcclxuICAgICAgYmVuZGluZzogMTEsXHJcbiAgICAgIHdhdmU6IDAuNSxcclxuICAgICAgc2hhcGU6IDAsXHJcbiAgICAgIHdpZHRoVGV4ZWxzOiA1KjIxMCxcclxuICAgICAgaGVpZ2h0VGV4ZWxzOiA1KjI5NyxcclxuICAgICAgY29sb3I6IDB4RkZGRkZGXHJcbiAgICB9LFxyXG4gICAgY292ZXI6IHtcclxuICAgICAgYmluZGVyVGV4dHVyZTogJycsXHJcbiAgICAgIGRlcHRoOiAwLjAwMDMsXHJcbiAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgIG1hc3M6IDAuMDAzXHJcbiAgICB9LFxyXG4gICAgcGFnZToge1xyXG4gICAgICBkZXB0aDogMC4wMDAxLFxyXG4gICAgICBtYXNzOiAwLjAwMVxyXG4gICAgfSxcclxuICAgIGNzc0xheWVyUHJvcHM6IHtcclxuICAgICAgd2lkdGg6IDEwMjRcclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wcm9wcy9ib29rLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvcHJvcHMvYm9vay5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuVEhSRUUuQ1NTM0RPYmplY3QgPSBjbGFzcyBDU1MzRE9iamVjdCBleHRlbmRzIFRIUkVFLk9iamVjdDNEIHtcclxuICBjb25zdHJ1Y3RvcihlbGVtZW50PXVuZGVmaW5lZCkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIFxyXG4gICAgaWYoZWxlbWVudCkge1xyXG4gICAgICB0aGlzLnNldChlbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldChlbGVtZW50KSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gIFx0dGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuXHJcbiAgXHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZWQnLCBmdW5jdGlvbigpIHtcclxuICBcdFx0aWYgKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlICE9PSBudWxsKSB7XHJcbiAgXHRcdFx0dGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcclxuICBcdFx0fVxyXG4gIFx0fSk7XHJcbiAgfVxyXG59O1xyXG5cclxuVEhSRUUuQ1NTM0RTcHJpdGUgPSBjbGFzcyBDU1MzRFNwcml0ZSBleHRlbmRzIFRIUkVFLkNTUzNET2JqZWN0IHtcclxuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XHJcbiAgICBzdXBlcihlbGVtZW50KTtcclxuICB9XHJcbn07XHJcblxyXG5USFJFRS5DU1MzRFJlbmRlcmVyID0gY2xhc3MgQ1NTM0RSZW5kZXJlciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gIFx0dmFyIF93aWR0aCwgX2hlaWdodDtcclxuICBcdHZhciBfd2lkdGhIYWxmLCBfaGVpZ2h0SGFsZjtcclxuXHJcbiAgXHR2YXIgbWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuXHJcbiAgXHR2YXIgY2FjaGUgPSB7XHJcbiAgXHRcdGNhbWVyYTogeyBmb3Y6IDAsIHN0eWxlOiAnJyB9LFxyXG4gIFx0XHRvYmplY3RzOiB7fVxyXG4gIFx0fTtcclxuXHJcbiAgXHR2YXIgZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnKTtcclxuICBcdGRvbUVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuXHJcbiAgXHR0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xyXG5cclxuICBcdHZhciBjYW1lcmFFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicpO1xyXG5cclxuICBcdGNhbWVyYUVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xyXG4gIFx0Y2FtZXJhRWxlbWVudC5zdHlsZS5Nb3pUcmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XHJcbiAgXHRjYW1lcmFFbGVtZW50LnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcclxuXHJcbiAgXHRkb21FbGVtZW50LmFwcGVuZENoaWxkKCBjYW1lcmFFbGVtZW50KTtcclxuXHJcbiAgXHR2YXIgaXNJRSA9IC9UcmlkZW50L2kudGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblxyXG4gIFx0dGhpcy5zZXRDbGVhckNvbG9yID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gIFx0dGhpcy5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICBcdFx0cmV0dXJuIHtcclxuICBcdFx0XHR3aWR0aDogX3dpZHRoLFxyXG4gIFx0XHRcdGhlaWdodDogX2hlaWdodFxyXG4gIFx0XHR9O1xyXG5cclxuICBcdH07XHJcblxyXG4gIFx0dGhpcy5zZXRTaXplID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xyXG5cclxuICBcdFx0X3dpZHRoID0gd2lkdGg7XHJcbiAgXHRcdF9oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgXHRcdF93aWR0aEhhbGYgPSBfd2lkdGggLyAyO1xyXG4gIFx0XHRfaGVpZ2h0SGFsZiA9IF9oZWlnaHQgLyAyO1xyXG5cclxuICBcdFx0ZG9tRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICBcdFx0ZG9tRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG5cclxuICBcdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICBcdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG5cclxuICBcdH07XHJcblxyXG4gIFx0ZnVuY3Rpb24gZXBzaWxvbiggdmFsdWUpIHtcclxuXHJcbiAgXHRcdHJldHVybiBNYXRoLmFicyggdmFsdWUpIDwgMWUtMTAgPyAwIDogdmFsdWU7XHJcblxyXG4gIFx0fVxyXG5cclxuICBcdGZ1bmN0aW9uIGdldENhbWVyYUNTU01hdHJpeCggbWF0cml4KSB7XHJcblxyXG4gIFx0XHR2YXIgZWxlbWVudHMgPSBtYXRyaXguZWxlbWVudHM7XHJcblxyXG4gIFx0XHRyZXR1cm4gJ21hdHJpeDNkKCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAwIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyAxIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMiBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDMgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA0IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA1IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgNiBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDcgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyA4IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA5IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTAgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDEyIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyAxMyBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE0IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTUgXSkgK1xyXG4gIFx0XHQnKSc7XHJcblxyXG4gIFx0fVxyXG5cclxuICBcdGZ1bmN0aW9uIGdldE9iamVjdENTU01hdHJpeCggbWF0cml4LCBjYW1lcmFDU1NNYXRyaXgpIHtcclxuXHJcbiAgXHRcdHZhciBlbGVtZW50cyA9IG1hdHJpeC5lbGVtZW50cztcclxuICBcdFx0dmFyIG1hdHJpeDNkID0gJ21hdHJpeDNkKCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAwIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMSBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDIgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAzIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA0IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA1IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA2IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCAtIGVsZW1lbnRzWyA3IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgOCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDkgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMCBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDExIF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTIgXSkgKyAnLCcgK1xyXG4gIFx0XHRcdGVwc2lsb24oIGVsZW1lbnRzWyAxMyBdKSArICcsJyArXHJcbiAgXHRcdFx0ZXBzaWxvbiggZWxlbWVudHNbIDE0IF0pICsgJywnICtcclxuICBcdFx0XHRlcHNpbG9uKCBlbGVtZW50c1sgMTUgXSkgK1xyXG4gIFx0XHQnKSc7XHJcblxyXG4gIFx0XHRpZihpc0lFKSB7XHJcblxyXG4gIFx0XHRcdHJldHVybiAndHJhbnNsYXRlKC01MCUsLTUwJSknICtcclxuICBcdFx0XHRcdCd0cmFuc2xhdGUoJyArIF93aWR0aEhhbGYgKyAncHgsJyArIF9oZWlnaHRIYWxmICsgJ3B4KScgK1xyXG4gIFx0XHRcdFx0Y2FtZXJhQ1NTTWF0cml4ICtcclxuICBcdFx0XHRcdG1hdHJpeDNkO1xyXG5cclxuICBcdFx0fVxyXG5cclxuICBcdFx0cmV0dXJuICd0cmFuc2xhdGUoLTUwJSwtNTAlKScgKyBtYXRyaXgzZDtcclxuXHJcbiAgXHR9XHJcblxyXG4gIFx0ZnVuY3Rpb24gcmVuZGVyT2JqZWN0KCBvYmplY3QsIGNhbWVyYSwgY2FtZXJhQ1NTTWF0cml4KSB7XHJcblxyXG4gIFx0XHRpZihvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5DU1MzRE9iamVjdCkge1xyXG5cclxuICBcdFx0XHR2YXIgc3R5bGU7XHJcblxyXG4gIFx0XHRcdGlmKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkNTUzNEU3ByaXRlKSB7XHJcbiAgXHRcdFx0XHRtYXRyaXguY29weSggY2FtZXJhLm1hdHJpeFdvcmxkSW52ZXJzZSk7XHJcbiAgXHRcdFx0XHRtYXRyaXgudHJhbnNwb3NlKCk7XHJcbiAgXHRcdFx0XHRtYXRyaXguY29weVBvc2l0aW9uKCBvYmplY3QubWF0cml4V29ybGQpO1xyXG4gIFx0XHRcdFx0bWF0cml4LnNjYWxlKCBvYmplY3Quc2NhbGUpO1xyXG5cclxuICBcdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMyBdID0gMDtcclxuICBcdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgNyBdID0gMDtcclxuICBcdFx0XHRcdG1hdHJpeC5lbGVtZW50c1sgMTEgXSA9IDA7XHJcbiAgXHRcdFx0XHRtYXRyaXguZWxlbWVudHNbIDE1IF0gPSAxO1xyXG5cclxuICBcdFx0XHRcdHN0eWxlID0gZ2V0T2JqZWN0Q1NTTWF0cml4KCBtYXRyaXgsIGNhbWVyYUNTU01hdHJpeCk7XHJcblxyXG4gIFx0XHRcdH0gZWxzZSB7XHJcblxyXG4gIFx0XHRcdFx0c3R5bGUgPSBnZXRPYmplY3RDU1NNYXRyaXgoIG9iamVjdC5tYXRyaXhXb3JsZCwgY2FtZXJhQ1NTTWF0cml4KTtcclxuXHJcbiAgXHRcdFx0fVxyXG5cclxuICBcdFx0XHR2YXIgZWxlbWVudCA9IG9iamVjdC5lbGVtZW50O1xyXG4gIFx0XHRcdHZhciBjYWNoZWRTdHlsZSA9IGNhY2hlLm9iamVjdHNbIG9iamVjdC5pZCBdICYmIGNhY2hlLm9iamVjdHNbIG9iamVjdC5pZCBdLnN0eWxlO1xyXG5cclxuICBcdFx0XHRpZihjYWNoZWRTdHlsZSA9PT0gdW5kZWZpbmVkIHx8IGNhY2hlZFN0eWxlICE9PSBzdHlsZSkge1xyXG4gIFx0XHRcdFx0ZWxlbWVudC5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSBzdHlsZTtcclxuICBcdFx0XHRcdGVsZW1lbnQuc3R5bGUuTW96VHJhbnNmb3JtID0gc3R5bGU7XHJcbiAgXHRcdFx0XHRlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlO1xyXG5cclxuICBcdFx0XHRcdGNhY2hlLm9iamVjdHNbIG9iamVjdC5pZCBdID0geyBzdHlsZTogc3R5bGUgfTtcclxuICBcdFx0XHRcdGlmKGlzSUUpIHtcclxuICBcdFx0XHRcdFx0Y2FjaGUub2JqZWN0c1sgb2JqZWN0LmlkIF0uZGlzdGFuY2VUb0NhbWVyYVNxdWFyZWQgPSBnZXREaXN0YW5jZVRvU3F1YXJlZCggY2FtZXJhLCBvYmplY3QpO1xyXG4gIFx0XHRcdFx0fVxyXG4gIFx0XHRcdH1cclxuXHJcbiAgXHRcdFx0aWYoZWxlbWVudC5wYXJlbnROb2RlICE9PSBjYW1lcmFFbGVtZW50KSB7XHJcbiAgXHRcdFx0XHRjYW1lcmFFbGVtZW50LmFwcGVuZENoaWxkKCBlbGVtZW50KTtcclxuICBcdFx0XHR9XHJcbiAgXHRcdH1cclxuXHJcbiAgXHRcdGZvcih2YXIgaSA9IDAsIGwgPSBvYmplY3QuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSArKykge1xyXG5cclxuICBcdFx0XHRyZW5kZXJPYmplY3QoIG9iamVjdC5jaGlsZHJlblsgaSBdLCBjYW1lcmEsIGNhbWVyYUNTU01hdHJpeCk7XHJcblxyXG4gIFx0XHR9XHJcblxyXG4gIFx0fVxyXG5cclxuICBcdHZhciBnZXREaXN0YW5jZVRvU3F1YXJlZCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgXHRcdHZhciBhID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICBcdFx0dmFyIGIgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuICBcdFx0cmV0dXJuIGZ1bmN0aW9uKG9iamVjdDEsIG9iamVjdDIpIHtcclxuXHJcbiAgXHRcdFx0YS5zZXRGcm9tTWF0cml4UG9zaXRpb24oIG9iamVjdDEubWF0cml4V29ybGQpO1xyXG4gIFx0XHRcdGIuc2V0RnJvbU1hdHJpeFBvc2l0aW9uKCBvYmplY3QyLm1hdHJpeFdvcmxkKTtcclxuXHJcbiAgXHRcdFx0cmV0dXJuIGEuZGlzdGFuY2VUb1NxdWFyZWQoIGIpO1xyXG5cclxuICBcdFx0fTtcclxuXHJcbiAgXHR9KCk7XHJcblxyXG4gIFx0ZnVuY3Rpb24gek9yZGVyKCBzY2VuZSkge1xyXG5cclxuICBcdFx0dmFyIG9yZGVyID0gT2JqZWN0LmtleXMoIGNhY2hlLm9iamVjdHMpLnNvcnQoIGZ1bmN0aW9uKGEsIGIpIHtcclxuXHJcbiAgXHRcdFx0cmV0dXJuIGNhY2hlLm9iamVjdHNbIGEgXS5kaXN0YW5jZVRvQ2FtZXJhU3F1YXJlZCAtIGNhY2hlLm9iamVjdHNbIGIgXS5kaXN0YW5jZVRvQ2FtZXJhU3F1YXJlZDtcclxuXHJcbiAgXHRcdH0pO1xyXG4gIFx0XHR2YXIgek1heCA9IG9yZGVyLmxlbmd0aDtcclxuXHJcbiAgXHRcdHNjZW5lLnRyYXZlcnNlKCBmdW5jdGlvbihvYmplY3QpIHtcclxuXHJcbiAgXHRcdFx0dmFyIGluZGV4ID0gb3JkZXIuaW5kZXhPZiggb2JqZWN0LmlkICsgJycpO1xyXG5cclxuICBcdFx0XHRpZihpbmRleCAhPT0gLSAxKSB7XHJcblxyXG4gIFx0XHRcdFx0b2JqZWN0LmVsZW1lbnQuc3R5bGUuekluZGV4ID0gek1heCAtIGluZGV4O1xyXG5cclxuICBcdFx0XHR9XHJcblxyXG4gIFx0XHR9KTtcclxuXHJcbiAgXHR9XHJcblxyXG4gIFx0dGhpcy5yZW5kZXIgPSBmdW5jdGlvbihzY2VuZSwgY2FtZXJhKSB7XHJcblxyXG4gIFx0XHR2YXIgZm92ID0gY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbIDUgXSAqIF9oZWlnaHRIYWxmO1xyXG5cclxuICBcdFx0aWYoY2FjaGUuY2FtZXJhLmZvdiAhPT0gZm92KSB7XHJcblxyXG4gIFx0XHRcdGRvbUVsZW1lbnQuc3R5bGUuV2Via2l0UGVyc3BlY3RpdmUgPSBmb3YgKyAncHgnO1xyXG4gIFx0XHRcdGRvbUVsZW1lbnQuc3R5bGUuTW96UGVyc3BlY3RpdmUgPSBmb3YgKyAncHgnO1xyXG4gIFx0XHRcdGRvbUVsZW1lbnQuc3R5bGUucGVyc3BlY3RpdmUgPSBmb3YgKyAncHgnO1xyXG5cclxuICBcdFx0XHRjYWNoZS5jYW1lcmEuZm92ID0gZm92O1xyXG5cclxuICBcdFx0fVxyXG5cclxuICBcdFx0c2NlbmUudXBkYXRlTWF0cml4V29ybGQoKTtcclxuXHJcbiAgXHRcdGlmKGNhbWVyYS5wYXJlbnQgPT09IG51bGwpIGNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xyXG5cclxuICBcdFx0dmFyIGNhbWVyYUNTU01hdHJpeCA9ICd0cmFuc2xhdGVaKCcgKyBmb3YgKyAncHgpJyArXHJcbiAgXHRcdFx0Z2V0Q2FtZXJhQ1NTTWF0cml4KCBjYW1lcmEubWF0cml4V29ybGRJbnZlcnNlKTtcclxuXHJcbiAgXHRcdHZhciBzdHlsZSA9IGNhbWVyYUNTU01hdHJpeCArXHJcbiAgXHRcdFx0J3RyYW5zbGF0ZSgnICsgX3dpZHRoSGFsZiArICdweCwnICsgX2hlaWdodEhhbGYgKyAncHgpJztcclxuXHJcbiAgXHRcdGlmKGNhY2hlLmNhbWVyYS5zdHlsZSAhPT0gc3R5bGUgJiYgISBpc0lFKSB7XHJcblxyXG4gIFx0XHRcdGNhbWVyYUVsZW1lbnQuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gc3R5bGU7XHJcbiAgXHRcdFx0Y2FtZXJhRWxlbWVudC5zdHlsZS5Nb3pUcmFuc2Zvcm0gPSBzdHlsZTtcclxuICBcdFx0XHRjYW1lcmFFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlO1xyXG5cclxuICBcdFx0XHRjYWNoZS5jYW1lcmEuc3R5bGUgPSBzdHlsZTtcclxuXHJcbiAgXHRcdH1cclxuXHJcbiAgXHRcdHJlbmRlck9iamVjdCggc2NlbmUsIGNhbWVyYSwgY2FtZXJhQ1NTTWF0cml4KTtcclxuXHJcbiAgXHRcdGlmKGlzSUUpIHtcclxuXHJcbiAgXHRcdFx0Ly8gSUUxMCBhbmQgMTEgZG9lcyBub3Qgc3VwcG9ydCAncHJlc2VydmUtM2QnLlxyXG4gIFx0XHRcdC8vIFRodXMsIHotb3JkZXIgaW4gM0Qgd2lsbCBub3Qgd29yay5cclxuICBcdFx0XHQvLyBXZSBoYXZlIHRvIGNhbGMgei1vcmRlciBtYW51YWxseSBhbmQgc2V0IENTUyB6LWluZGV4IGZvciBJRS5cclxuICBcdFx0XHQvLyBGWUk6IHotaW5kZXggY2FuJ3QgaGFuZGxlIG9iamVjdCBpbnRlcnNlY3Rpb25cclxuICBcdFx0XHR6T3JkZXIoIHNjZW5lKTtcclxuXHJcbiAgXHRcdH1cclxuXHJcbiAgXHR9O1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRIUkVFLkNTUzNEUmVuZGVyZXI7XHJcblxyXG5jb25zdCBfQ1NTM0RPYmplY3QgPSBUSFJFRS5DU1MzRE9iamVjdCwgX0NTUzNEU3ByaXRlID0gVEhSRUUuQ1NTM0RTcHJpdGU7XHJcbmV4cG9ydCB7XHJcbiAgX0NTUzNET2JqZWN0IGFzIENTUzNET2JqZWN0LFxyXG4gIF9DU1MzRFNwcml0ZSBhcyBDU1MzRFNwcml0ZVxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9DU1MzRFJlbmRlcmVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ1NTM0RSZW5kZXJlci5qcyIsImltcG9ydCB7VEhSRUUsICR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQge0NTUzNET2JqZWN0fSBmcm9tICcuL0NTUzNEUmVuZGVyZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ1NTTGF5ZXIgZXh0ZW5kcyBDU1MzRE9iamVjdCB7XHJcblxyXG4gIHN0YXRpYyBkZWxheTtcclxuICBzdGF0aWMgc3R5bGU7XHJcbiAgc3RhdGljIGluaXQoZG9jLCBkZWxheT0xNTApIHtcclxuICAgIENTU0xheWVyLmRlbGF5ID0gZGVsYXk7XHJcbiAgICBDU1NMYXllci5zdHlsZSA9ICQoYDxzdHlsZSB0eXBlPXRleHQvY3NzPlxyXG4gICAgICAuY3NzLWxheWVyIHtcclxuICAgIFx0XHRvcGFjaXR5OiAxO1xyXG4gICAgXHRcdHRyYW5zaXRpb246IG9wYWNpdHkgJHtkZWxheX1tcyBlYXNlLW91dDtcclxuICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xyXG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBcdH1cclxuICAgIFx0LmNzcy1sYXllci5oaWRkZW4ge1xyXG4gICAgXHRcdHRyYW5zaXRpb246IG9wYWNpdHkgJHtkZWxheX1tcyBlYXNlLWluLCB2aXNpYmlsaXR5ICR7ZGVsYXl9bXMgc3RlcC1lbmQ7XHJcbiAgICBcdFx0b3BhY2l0eTogMDtcclxuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgICAgIH1cclxuICAgIDwvc3R5bGU+YCkuYXBwZW5kVG8oZG9jLmhlYWQpO1xyXG4gIH1cclxuICBzdGF0aWMgZGlzcG9zZSgpIHtcclxuICAgIENTU0xheWVyLnN0eWxlLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCwgcHJvcHMpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnByb3BzID0gcHJvcHM7XHJcbiAgICB0aGlzLmpDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiaGlkZGVuIGNzcy1sYXllclwiPjwvZGl2PicpO1xyXG4gIFx0Y29uc3Qgd2lkdGhQeHMgPSBwcm9wcy53aWR0aCwgaGVpZ2h0UHhzID0gaGVpZ2h0L3dpZHRoKndpZHRoUHhzO1xyXG4gICAgdGhpcy5qQ29udGFpbmVyLndpZHRoKHdpZHRoUHhzKS5oZWlnaHQoaGVpZ2h0UHhzKTtcclxuICBcdHRoaXMuc2NhbGUueCAvPSB3aWR0aFB4cy93aWR0aDtcclxuICBcdHRoaXMuc2NhbGUueSAvPSB3aWR0aFB4cy93aWR0aDtcclxuXHJcbiAgICB0aGlzLnNldERhdGEoKTtcclxuICAgIHRoaXMuc2V0KHRoaXMuakNvbnRhaW5lclswXSk7XHJcbiAgfVxyXG5cclxuICBjYWxsSW50ZXJuYWwobmFtZSkge1xyXG4gICAgaWYodGhpcy5vYmplY3QgJiYgdGhpcy5vYmplY3RbbmFtZV0pIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLm9iamVjdFtuYW1lXSgpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5jbGVhckludGVybmFscygpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJJbnRlcm5hbHMoKSB7XHJcbiAgICB0aGlzLmNhbGxJbnRlcm5hbCgnZGlzcG9zZScpO1xyXG4gICAgIXRoaXMuY3NzIHx8IHRoaXMuY3NzLnJlbW92ZSgpO1xyXG4gICAgIXRoaXMuaHRtbCB8fCB0aGlzLmh0bWwucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBzZXREYXRhKGNzcz0nJywgaHRtbD0nJywganM9JycpIHtcclxuICAgIHRoaXMuY2xlYXJJbnRlcm5hbHMoKTtcclxuXHJcbiAgICB0aGlzLmNzcyA9ICQoYDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj4ke2Nzc308L3N0eWxlPmApLmFwcGVuZFRvKHRoaXMuakNvbnRhaW5lcik7XHJcbiAgICB0aGlzLmh0bWwgPSAkKGh0bWwpLmFwcGVuZFRvKHRoaXMuakNvbnRhaW5lcik7XHJcbiAgICBjb25zdCBpbml0ID0gZXZhbChqcyk7XHJcbiAgICBpZihpbml0KSB7XHJcbiAgICAgIHRoaXMub2JqZWN0ID0gaW5pdCh0aGlzLmpDb250YWluZXIsIHRoaXMucHJvcHMpIHx8IHt9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcGVuZGVkQ2FsbChjbGIpIHtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICAgIHNldFRpbWVvdXQoKCk9PiB7XHJcbiAgICAgIGlmKHRpbWVzdGFtcD09PXRoaXMudGltZXN0YW1wKSB7XHJcbiAgICAgICAgY2xiKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIENTU0xheWVyLmRlbGF5KTtcclxuICB9XHJcblxyXG4gIGlzSGlkZGVuKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuakNvbnRhaW5lci5oYXNDbGFzcygnaGlkZGVuJyk7XHJcbiAgfVxyXG5cclxuICBoaWRlKCkge1xyXG4gICAgbGV0IHJlcztcclxuICAgIGlmKCF0aGlzLmlzSGlkZGVuKCkpIHtcclxuICAgICAgdGhpcy5qQ29udGFpbmVyLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgdGhpcy5jYWxsSW50ZXJuYWwoJ2hpZGUnKTtcclxuICAgICAgcmVzID0gbmV3IFByb21pc2UoKHJlc29sdmUpPT4ge1xyXG4gICAgICAgIHRoaXMucGVuZGVkQ2FsbCgoKT0+IHtcclxuICAgICAgICAgIHRoaXMuY2FsbEludGVybmFsKCdoaWRkZW4nKTtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmVzID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgc2hvdygpIHtcclxuICAgIGxldCByZXM7XHJcbiAgICBpZih0aGlzLmlzSGlkZGVuKCkpIHtcclxuICAgICAgdGhpcy5qQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgdGhpcy5jYWxsSW50ZXJuYWwoJ3Nob3cnKTtcclxuICAgICAgcmVzID0gbmV3IFByb21pc2UoKHJlc29sdmUpPT4ge1xyXG4gICAgICAgIHRoaXMucGVuZGVkQ2FsbCgoKT0+IHtcclxuICAgICAgICAgIHRoaXMuY2FsbEludGVybmFsKCdzaG93bicpO1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXMgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9DU1NMYXllci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0NTU0xheWVyLmpzIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FjaGUge1xyXG5cclxuICBjb25zdHJ1Y3RvcihtYXhTaXplPUluZmluaXR5LCBzaXplb2Y9Q2FjaGUuY291bnRTaXplb2YpIHtcclxuICAgIHRoaXMub3MgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLnNpemVvZiA9IHNpemVvZjtcclxuICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XHJcbiAgICB0aGlzLnNpemUgPSAwO1xyXG4gIH1cclxuXHJcbiAgZm9yRWFjaChjbGIpIHtcclxuICAgIHRoaXMub3MuZm9yRWFjaCgodiwgayk9PiBjbGIoW2ssdl0pKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjb3VudFNpemVvZih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIDE7XHJcbiAgfVxyXG5cclxuICByZW1vdmUoaykge1xyXG4gICAgbGV0IHJlcyA9IGZhbHNlO1xyXG4gICAgY29uc3QgdiA9IHRoaXMub3MuZ2V0KGspO1xyXG4gICAgaWYoIXYubG9ja2VkIHx8ICF2LmxvY2tlZChrKSkge1xyXG4gICAgICB0aGlzLnNpemUgLT0gdGhpcy5zaXplb2Yodik7XHJcbiAgICAgIGlmKHYuZGlzcG9zZSkge1xyXG4gICAgICAgIHYuZGlzcG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3MuZGVsZXRlKGspO1xyXG4gICAgICByZXMgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIGZyZWVTcGFjZSgpIHtcclxuICAgIGNvbnN0IGFyciA9IFtdO1xyXG4gICAgZm9yKGxldCBwIG9mIHRoaXMub3MpIHtcclxuICAgICAgYXJyLnB1c2goe3RpbWVzdGFtcDogcFsxXS50aW1lc3RhbXAsIGtleTogcFswXX0pO1xyXG4gICAgfVxyXG4gICAgYXJyLnNvcnQoKGEsIGIpPT4gYS50aW1lc3RhbXAtYi50aW1lc3RhbXApO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8YXJyLmxlbmd0aCAmJiB0aGlzLnNpemU+Myp0aGlzLm1heFNpemUvNDsgKytpKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlKGFycltpXS5rZXkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGNvbnN0IGFyciA9IFtdO1xyXG4gICAgZm9yKGxldCBwIG9mIHRoaXMub3MpIHtcclxuICAgICAgYXJyLnB1c2goe3Y6IHBbMV0sIGs6IHBbMF19KTtcclxuICAgIH1cclxuICAgIGZvcihsZXQgbyBvZiBhcnIpIHtcclxuICAgICAgaWYoby52LmRpc3Bvc2UpIHtcclxuICAgICAgICBvLnYuZGlzcG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3MuZGVsZXRlKG8uayk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgcmVjdXJzaW9uU2l6ZW9mKHZhbHVlKSB7XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICBpZih2YWx1ZSkge1xyXG4gICAgICArK3NpemU7XHJcbiAgICAgIGNvbnN0IGxlbiA9IHZhbHVlLmxlbmd0aDtcclxuICAgICAgaWYobGVuPT09dW5kZWZpbmVkKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcCBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgaWYodmFsdWUuaGFzT3duUHJvcGVydHkocCkpIHtcclxuICAgICAgICAgICAgc2l6ZSs9Q2FjaGUucmVjdXJzaW9uU2l6ZW9mKHZhbHVlW3BdKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2l6ZSs9bGVuXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzaXplO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGltZXN0YW1wKCkge1xyXG4gICAgcmV0dXJuIERhdGUubm93KCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0KGtleSkge1xyXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLm9zLmdldChrZXkpO1xyXG4gICAgaWYodmFsdWUpIHtcclxuICAgICAgdmFsdWUudGltZXN0YW1wID0gdGhpcy5nZXRUaW1lc3RhbXAoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIHB1dChrZXksIHZhbHVlKSB7XHJcbiAgICB2YWx1ZS50aW1lc3RhbXAgPSB0aGlzLmdldFRpbWVzdGFtcCgpO1xyXG4gICAgdGhpcy5vcy5zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICB0aGlzLnNpemUrPXRoaXMuc2l6ZW9mKHZhbHVlKTtcclxuICAgIGlmKHRoaXMuc2l6ZT50aGlzLm1heFNpemUpIHtcclxuICAgICAgdGhpcy5mcmVlU3BhY2UoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQ2FjaGUuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9DYWNoZS5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJvbGxlciBleHRlbmRzIFRIUkVFLkV2ZW50RGlzcGF0Y2hlciB7XHJcblxyXG4gIGhhbmRsZURlZmF1bHQoaWQsIGUsIGRhdGEpIHtcclxuICAgIC8vY29uc29sZS5sb2coaWQrJy0nK2UudHlwZSsnLScrZGF0YSk7XHJcbiAgfVxyXG5cclxuICBkaXNwYXRjaEFzeW5jKGUpIHtcclxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB0aGlzLmRpc3BhdGNoRXZlbnQoZSkpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuXHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9Db250cm9sbGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvQ29udHJvbGxlci5qcyIsImltcG9ydCBFdmVudENvbnZlcnRlciBmcm9tICcuL0V2ZW50Q29udmVydGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1c3RvbUV2ZW50Q29udmVydGVyIGV4dGVuZHMgRXZlbnRDb252ZXJ0ZXIge1xyXG5cclxuICAvLyBjdXN0b21cclxuICAvLyB0ZXN0SW50ZXJzZWN0aW9uKGUsIGRhdGEpO1xyXG4gIC8vIGN1c3RvbS5vYmplY3RcclxuICAvLyB0ZXN0KG9iamVjdCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHduZCwgZG9jLCBjdXN0b21UZXN0PSgpPT4gZmFsc2UsIGVEb2MpIHtcclxuICAgIHN1cGVyKHduZCwgZG9jKTtcclxuXHJcbiAgICB0aGlzLmVEb2MgPSBlRG9jO1xyXG4gICAgdGhpcy5jdXN0b21UZXN0ID0gY3VzdG9tVGVzdDtcclxuICAgIHRoaXMuY3VzdG9tcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgdGVzdChvYmplY3QxLCBvYmplY3QyKSB7XHJcbiAgICByZXR1cm4gb2JqZWN0MSAmJiBvYmplY3QyPyB0aGlzLmN1c3RvbVRlc3Qob2JqZWN0MSwgb2JqZWN0Mik6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FsbGJhY2sob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LnRhcmdldC5jYWxsYmFjaztcclxuICB9XHJcblxyXG4gIGFkZEN1c3RvbShjdXN0b20pIHtcclxuICAgIHRoaXMuY3VzdG9tcy5wdXNoKGN1c3RvbSk7XHJcbiAgfVxyXG5cclxuICBnZXRPYmplY3QoZSwgZGF0YSkge1xyXG4gICAgbGV0IG9iamVjdDtcclxuICAgIGlmKGRhdGEuZG9jPT09dGhpcy5lRG9jKSB7XHJcbiAgICAgIGZvcihsZXQgY3VzdG9tIG9mIHRoaXMuY3VzdG9tcykge1xyXG4gICAgICAgIG9iamVjdCA9IGN1c3RvbS50ZXN0SW50ZXJzZWN0aW9uKGUsIGRhdGEpO1xyXG4gICAgICAgIGlmKG9iamVjdCkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQ3VzdG9tRXZlbnRDb252ZXJ0ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9DdXN0b21FdmVudENvbnZlcnRlci5qcyIsImltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbmRlciB7XHJcblxyXG4gIHN0YXRpYyBERUxJTUlURVIgPSAnICc7XHJcblxyXG4gIHN0YXRpYyBpc0RlbGltZXRyKHMpIHtcclxuICAgIHJldHVybiBzPT09RmluZGVyLkRFTElNSVRFUjtcclxuICB9XHJcblxyXG4gIG1lcmdlKCkge1xyXG4gICAgY29uc3QgYXMgPSBbXSwgbWFwID0gW10sIHN0cnMgPSB0aGlzLnN0cnM7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxzdHJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGlmKHN0cnNbaV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgbWFwLnB1c2goe1xyXG4gICAgICAgICAgYmFzZTogaSxcclxuICAgICAgICAgIG9mZnNldDogcFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFzLnB1c2goc3Ryc1tpXSk7XHJcbiAgICAgICAgcCArPSBzdHJzW2ldLmxlbmd0aDtcclxuICAgICAgICBpZihpPHN0cnMubGVuZ3RoLTEgJiYgIUZpbmRlci5pc0RlbGltZXRyKHN0cnNbaV0uY2hhckF0KHN0cnNbaV0ubGVuZ3RoLTEpKSAmJiAhRmluZGVyLmlzRGVsaW1ldHIoc3Ryc1tpKzFdLmNoYXJBdCgwKSkpIHtcclxuICAgICAgICAgIGFzLnB1c2goRmluZGVyLkRFTElNSVRFUik7XHJcbiAgICAgICAgICArK3A7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm1hcCA9IG1hcDtcclxuICAgIHRoaXMuc3RyID0gYXMuam9pbignJyk7XHJcbiAgfVxyXG5cclxuICBhZGRIaXRzKHApIHtcclxuICAgIGNvbnN0IGluZm8gPSB0aGlzLm1hcFtVdGlscy5sb3dlckJvdW5kKHRoaXMubWFwLCB7b2Zmc2V0OiBwfSwgKGEsIGIpPT4gYS5vZmZzZXQtYi5vZmZzZXQpXTtcclxuICAgIGxldCBjaGFycyA9IHRoaXMucGF0dGVybi5sZW5ndGgsIGkgPSBpbmZvLmJhc2U7XHJcbiAgICBwIC09IGluZm8ub2Zmc2V0O1xyXG4gICAgd2hpbGUoY2hhcnMpIHtcclxuICAgICAgaWYodGhpcy5zdHJzW2ldLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGRlbGltZXRlciA9IGk8dGhpcy5zdHJzLmxlbmd0aC0xICYmICFGaW5kZXIuaXNEZWxpbWV0cih0aGlzLnN0cnNbaV0uY2hhckF0KHRoaXMuc3Ryc1tpXS5sZW5ndGgtMSkpICYmICFGaW5kZXIuaXNEZWxpbWV0cih0aGlzLnN0cnNbaSsxXS5jaGFyQXQoMCkpLFxyXG4gICAgICAgICAgICAgIGxlbmd0aCA9IE1hdGgubWluKHRoaXMuc3Ryc1tpXS5sZW5ndGgrKGRlbGltZXRlcj8gMTogMCktcCwgY2hhcnMpO1xyXG4gICAgICAgIGlmKHA8dGhpcy5zdHJzW2ldLmxlbmd0aCkge1xyXG4gICAgICAgICAgdGhpcy5oaXRzLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogaSxcclxuICAgICAgICAgICAgb2Zmc2V0OiBwLFxyXG4gICAgICAgICAgICBsZW5ndGg6IE1hdGgubWluKGxlbmd0aCwgdGhpcy5zdHJzW2ldLmxlbmd0aC1wKSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGFycyAtPSBsZW5ndGg7XHJcbiAgICAgICAgKytpO1xyXG4gICAgICAgIHAgPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRDb250ZXh0KHApIHtcclxuICAgIGxldCBmID0gcCwgbCA9IHArdGhpcy5wYXR0ZXJuLmxlbmd0aC0xLCBkZWxzID0gdGhpcy5wcm9wcy5jb250ZXh0TGVuZ3RoLCBwcmV2RGVscyA9IGRlbHMrMTtcclxuICAgIHdoaWxlKGRlbHMgJiYgcHJldkRlbHMtZGVscykge1xyXG4gICAgICBwcmV2RGVscyA9IGRlbHM7XHJcbiAgICAgIGlmKGRlbHMlMikge1xyXG4gICAgICAgIGZvcihsZXQgaT1mLTI7IGk+PTA7IC0taSkge1xyXG4gICAgICAgICAgaWYoRmluZGVyLmlzRGVsaW1ldHIodGhpcy5zdHJbaV0pIHx8IGk9PT0wKSB7XHJcbiAgICAgICAgICAgIGYgPSBpPT09MD8gMDogaSsxO1xyXG4gICAgICAgICAgICAtLWRlbHM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBmb3IobGV0IGk9bCsyOyBpPHRoaXMuc3RyLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICBpZihGaW5kZXIuaXNEZWxpbWV0cih0aGlzLnN0cltpXSkgfHwgaT09PXRoaXMuc3RyLmxlbmd0aC0xKSB7XHJcbiAgICAgICAgICAgIGwgPSBpPT09dGhpcy5zdHIubGVuZ3RoLTE/IGk9PT10aGlzLnN0ci5sZW5ndGgtMTogaS0xO1xyXG4gICAgICAgICAgICAtLWRlbHM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb250ZXh0cy5wdXNoKHRoaXMuc3RyLnN1YnN0cihmLCBsLWYrMSkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SGl0cygpIHtcclxuICAgIHJldHVybiB0aGlzLmhpdHM7XHJcbiAgfVxyXG5cclxuICBnZXRDb250ZXh0cygpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbnRleHRzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRlZmF1bHRzID0ge1xyXG4gICAgY29udGV4dExlbmd0aDogNyxcclxuICAgIGhpdHM6IHRydWUsXHJcbiAgICBjb250ZXh0czogdHJ1ZVxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHN0cnMsIHBhdHRlcm4sIHByb3BzKSB7XHJcbiAgICB0aGlzLnByb3BzID0ge1xyXG4gICAgICAuLi5GaW5kZXIuZGVmYXVsdHMsXHJcbiAgICAgIC4uLnByb3BzXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zdHJzID0gc3RycztcclxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1lcmdlKHN0cnMpO1xyXG4gICAgdGhpcy5oaXRzID0gW107XHJcbiAgICB0aGlzLmNvbnRleHRzID0gW107XHJcbiAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB0aGlzLmxzdHIgPSB0aGlzLnN0ci50b0xvd2VyQ2FzZSgpO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgd2hpbGUodHJ1ZSkge1xyXG4gICAgICBwID0gdGhpcy5sc3RyLmluZGV4T2YodGhpcy5wYXR0ZXJuLCBwKTtcclxuICAgICAgaWYocD09PS0xKSB7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5hZGRIaXRzKHApO1xyXG4gICAgICAgIHRoaXMuYWRkQ29udGV4dChwKTtcclxuICAgICAgICBwICs9IHRoaXMucGF0dGVybi5sZW5ndGg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRmluZGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRmluZGVyLmpzIiwiaW1wb3J0IHtQREZKU30gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuXHJcblBERkpTLndvcmtlclNyYyA9ICh3aW5kb3cuUERGSlNfTE9DQUxFPyBQREZKU19MT0NBTEU6IEdMT0JBTF9QQVRIUykucGRmSnNXb3JrZXI7XHJcblBERkpTLmNNYXBVcmwgPSAod2luZG93LlBERkpTX0xPQ0FMRT8gUERGSlNfTE9DQUxFOiBHTE9CQUxfUEFUSFMpLnBkZkpzQ01hcFVybDtcclxuUERGSlMuY01hcFBhY2tlZCA9IHRydWU7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQZGYge1xyXG5cclxuICBjb25zdHJ1Y3RvcihzcmMsIGxvYWRpbmdQcm9ncmVzcykge1xyXG4gICAgdGhpcy5zcmMgPSBVdGlscy5ub3JtYWxpemVVcmwoc3JjKTtcclxuICAgIHRoaXMuaGFuZGxlclF1ZXVlID0gW107XHJcbiAgICB0aGlzLnByb2dyZXNEYXRhID0ge2xvYWRlZDogLTEsIHRvdGFsOiAxfTtcclxuICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzID0gbG9hZGluZ1Byb2dyZXNzO1xyXG5cclxuICAgIFBERkpTLmdldERvY3VtZW50KHtcclxuICAgICAgdXJsOiB0aGlzLnNyYyxcclxuICAgICAgcmFuZ2VDaHVua1NpemU6IDUxMioxMDI0XHJcbiAgICB9LCBudWxsLCBudWxsLCAoZGF0YSk9PiB7XHJcbiAgICAgIGlmKHRoaXMubG9hZGluZ1Byb2dyZXNzKSB7XHJcbiAgICAgICAgbGV0IGN1ciA9IE1hdGguZmxvb3IoMTAwKmRhdGEubG9hZGVkL2RhdGEudG90YWwpLFxyXG4gICAgICAgICAgICAgIG9sZCA9IE1hdGguZmxvb3IoMTAwKnRoaXMucHJvZ3Jlc0RhdGEubG9hZGVkL3RoaXMucHJvZ3Jlc0RhdGEudG90YWwpO1xyXG4gICAgICAgIGlmKGN1ciE9PW9sZCkge1xyXG4gICAgICAgICAgY3VyID0gaXNOYU4oY3VyKT8gMDogY3VyO1xyXG4gICAgICAgICAgY3VyID0gY3VyPjEwMD8gMTAwOiBjdXI7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzcyhjdXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnByb2dyZXNEYXRhID0gZGF0YTtcclxuICAgIH0pLlxyXG4gICAgdGhlbigoaGFuZGxlcik9PiB7XHJcbiAgICAgIGlmKGhhbmRsZXIubnVtUGFnZXM+MSkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKFtoYW5kbGVyLmdldFBhZ2UoMSksIGhhbmRsZXIuZ2V0UGFnZSgyKV0pLlxyXG4gICAgICAgIHRoZW4oKHBhZ2VzKT0+IHtcclxuICAgICAgICAgIHRoaXMuaW5pdChoYW5kbGVyLCBwYWdlcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5pbml0KGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGluaXQoaGFuZGxlciwgcGFnZXMpIHtcclxuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgICB0aGlzLmRvdWJsZWRQYWdlcyA9IHBhZ2VzPyAoTWF0aC5hYnMoMipQZGYuZ2V0UGFnZVNpemUocGFnZXNbMF0pLndpZHRoLVBkZi5nZXRQYWdlU2l6ZShwYWdlc1sxXSkud2lkdGgpL1BkZi5nZXRQYWdlU2l6ZShwYWdlc1swXSkud2lkdGg8MWUtNCk6IGZhbHNlO1xyXG4gICAgbGV0IGRvbmUgPSBQcm9taXNlLnJlc29sdmUoaGFuZGxlcik7XHJcbiAgICBmb3IobGV0IGNsYiBvZiB0aGlzLmhhbmRsZXJRdWV1ZS5yZXZlcnNlKCkpIHtcclxuICAgICAgZG9uZSA9IGRvbmUudGhlbigoaGFuZGxlcik9PiB7XHJcbiAgICAgICAgY2xiKGhhbmRsZXIpO1xyXG4gICAgICAgIHJldHVybiBoYW5kbGVyO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFBhZ2VUeXBlKG4pIHtcclxuICAgIHJldHVybiAhdGhpcy5kb3VibGVkUGFnZXMgfHwgbj09PTAgfHwgbj09PXRoaXMuZ2V0UGFnZXNOdW0oKS0xPyAnZnVsbCc6IChuJjE/ICdsZWZ0JzogJ3JpZ2h0Jyk7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlKG4pIHtcclxuICAgIHJldHVybiB0aGlzLmhhbmRsZXIuZ2V0UGFnZSh0aGlzLmRvdWJsZWRQYWdlcz8gTWF0aC5jZWlsKG4vMikrMTogbisxKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmhhbmRsZXJRdWV1ZS5zcGxpY2UoMCwgdGhpcy5oYW5kbGVyUXVldWUubGVuZ3RoKTtcclxuICAgIGRlbGV0ZSB0aGlzLmhhbmRsZXI7XHJcbiAgfVxyXG5cclxuICBzZXRMb2FkaW5nUHJvZ3Jlc3NDbGIoY2xiKSB7XHJcbiAgICB0aGlzLmxvYWRpbmdQcm9ncmVzcyA9IGNsYjtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VzTnVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcj8gKHRoaXMuZG91YmxlZFBhZ2VzPyAyKih0aGlzLmhhbmRsZXIubnVtUGFnZXMtMSk6IHRoaXMuaGFuZGxlci5udW1QYWdlcyk6IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRQYWdlU2l6ZShwYWdlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogcGFnZS52aWV3WzJdLXBhZ2Uudmlld1swXSxcclxuICAgICAgaGVpZ2h0OiBwYWdlLnZpZXdbM10tcGFnZS52aWV3WzFdXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbi8vICAgaWYocGFnZXM+MSkge1xyXG4vLyAgIGhhbmRsZXIuZ2V0UGFnZSgyKS5cclxuLy8gICB0aGVuKChwYWdlKT0+IHtcclxuLy8gICAgIGNvbnN0IHNpemUxID0gUGRmLmdldFBhZ2VTaXplKHBhZ2UpO1xyXG4vLyAgICAgdGhpcy5wcm9wcy5kb3VibGVkUGFnZXMgPSAyKnNpemUwLndpZHRoPT09c2l6ZTEud2lkdGg7XHJcbi8vICAgICB0aGlzLnJlYWR5KCk7XHJcbi8vICAgfSkuXHJcbi8vICAgY2F0Y2goKCk9PiB0aGlzLnJlYWR5KCkpO1xyXG4vLyB9XHJcbi8vIGVsc2Uge1xyXG5cclxuICBnZXRIYW5kbGVyKGNsYikge1xyXG4gICAgaWYodGhpcy5oYW5kbGVyKSB7XHJcbiAgICAgIGNsYih0aGlzLmhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlclF1ZXVlLnB1c2goY2xiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1BkZi5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1BkZi5qcyIsImltcG9ydCB7VEhSRUUsICR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGhyZWVFdmVudENvbnZlcnRlckZzIHtcclxuXHJcbiAgc3RhdGljIG9iamVjdHNUZXN0KG9iamVjdDEsIG9iamVjdDIpIHtcclxuICAgIHJldHVybiBvYmplY3QxICYmIG9iamVjdDI/IG9iamVjdDEub2JqZWN0PT09b2JqZWN0Mi5vYmplY3Q6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIG9iamVjdHNBbmRGYWNlc1Rlc3Qob2JqZWN0MSwgb2JqZWN0Mikge1xyXG4gICAgcmV0dXJuIG9iamVjdDEgJiYgb2JqZWN0Mj8gb2JqZWN0MS5vYmplY3Q9PT1vYmplY3QyLm9iamVjdCAmJiBvYmplY3QxLmZhY2UubWF0ZXJpYWxJbmRleD09PW9iamVjdDIuZmFjZS5tYXRlcmlhbEluZGV4OiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbFdvcmxkLCB0ZXN0PVRocmVlRXZlbnRDb252ZXJ0ZXJGcy5vYmplY3RzQW5kRmFjZXNUZXN0KSB7XHJcbiAgICB0aGlzLnZpc3VhbCA9IHZpc3VhbFdvcmxkO1xyXG4gICAgdGhpcy5jb29yZHMgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG4gICAgdGhpcy5yYXljYXN0ZXIgPSB0aGlzLnZpc3VhbC5yYXljYXN0ZXI7XHJcbiAgICB0aGlzLmNhbWVyYSA9IHRoaXMudmlzdWFsLmNhbWVyYTtcclxuICAgIHRoaXMudGhyZWVzID0gW107XHJcbiAgICB0aGlzLnRlc3QgPSB0ZXN0O1xyXG4gIH1cclxuXHJcbiAgYWRkVGhyZWUodGhyZWUpIHtcclxuICAgIHRoaXMudGhyZWVzLnB1c2godGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlVGhyZWUodGhyZWUpIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnRocmVlcy5pbmRleE9mKHRocmVlKTtcclxuICAgIGlmKH5pKSB7XHJcbiAgICAgIHRoaXMudGhyZWVzLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldE9iamVjdChlKSB7XHJcbiAgICB0aGlzLnNldENvb3Jkc0Zyb21FdmVudChlKTtcclxuICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5jb29yZHMsIHRoaXMuY2FtZXJhKTtcclxuICAgIGNvbnN0IGludGVyc2VjdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMudGhyZWVzKTtcclxuICAgIHJldHVybiBpbnRlcnNlY3RzWzBdO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVGhyZWVFdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RocmVlRXZlbnRDb252ZXJ0ZXIuanMiLCJpbXBvcnQgQmFzZU1hdGhVdGlscyBmcm9tICcuL0Jhc2VNYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGhyZWVVdGlscyB7XHJcblxyXG4gIHN0YXRpYyB2ZXJ0aWNlczJVVnModmVydGljZXMsIGluZGVjZXMsIGZpcnN0LCBsYXN0LCBjb252ZXJDbGIpIHtcclxuICAgIGNvbnN0IHIgPSBbXTtcclxuICAgIGZvcihsZXQgaSA9IGZpcnN0OyBpPGxhc3Q7ICsraSkge1xyXG4gICAgICBjb25zdCB2aXMgPSBbaW5kZWNlc1tpXS5hLGluZGVjZXNbaV0uYixpbmRlY2VzW2ldLmNdO1xyXG4gICAgICBmb3IobGV0IGogPSAwOyBqPHZpcy5sZW5ndGg7ICsraikge1xyXG4gICAgICAgIGlmKCFyW3Zpc1tqXV0pIHtcclxuICAgICAgICAgIHJbdmlzW2pdXSA9IGNvbnZlckNsYih2ZXJ0aWNlc1t2aXNbal1dKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNvbXB1dGVGYWNlVmVydGV4VXZzKGdlb21ldHJ5LCBmYWNlcykge1xyXG4gICAgY29uc3QgdXZzID0gW1xyXG4gICAgICAgICAgICAgICAgVGhyZWVVdGlscy52ZXJ0aWNlczJVVnMoZ2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LmZhY2VzLCAwLCBmYWNlc1swXSwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMihwLngsIDEtcC56KSksXHJcbiAgICAgICAgICAgICAgICBUaHJlZVV0aWxzLnZlcnRpY2VzMlVWcyhnZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkuZmFjZXMsIGZhY2VzWzBdLCBmYWNlc1sxXSwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMigxLXAueCwgMS1wLnopKSxcclxuICAgICAgICAgICAgICAgIFRocmVlVXRpbHMudmVydGljZXMyVVZzKGdlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS5mYWNlcywgZmFjZXNbMV0sIGZhY2VzWzJdLCAocCk9Pm5ldyBUSFJFRS5WZWN0b3IyKHAueCwgcC55KSksXHJcbiAgICAgICAgICAgICAgICBUaHJlZVV0aWxzLnZlcnRpY2VzMlVWcyhnZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkuZmFjZXMsIGZhY2VzWzJdLCBmYWNlc1szXSwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMigxLXAueCwgcC55KSksXHJcbiAgICAgICAgICAgICAgICBUaHJlZVV0aWxzLnZlcnRpY2VzMlVWcyhnZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkuZmFjZXMsIGZhY2VzWzNdLCBmYWNlc1s0XSwgKHApPT5uZXcgVEhSRUUuVmVjdG9yMihwLnosIHAueSkpLFxyXG4gICAgICAgICAgICAgICAgVGhyZWVVdGlscy52ZXJ0aWNlczJVVnMoZ2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LmZhY2VzLCBmYWNlc1s0XSwgZ2VvbWV0cnkuZmFjZXMubGVuZ3RoLCAocCk9Pm5ldyBUSFJFRS5WZWN0b3IyKDEtcC56LCBwLnkpKVxyXG4gICAgXTtcclxuXHJcbiAgICBsZXQgdXZzaSA9IDA7XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpPGdlb21ldHJ5LmZhY2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIHV2c2kgKz0gZmFjZXNbdXZzaV0gPT09IGk7XHJcbiAgICAgIGNvbnN0IGYgPSBnZW9tZXRyeS5mYWNlc1tpXTtcclxuICAgICAgZi5tYXRlcmlhbEluZGV4ID0gdXZzaTtcclxuICAgICAgZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXVtpXSA9IFt1dnNbdXZzaV1bZi5hXSwgdXZzW3V2c2ldW2YuYl0sIHV2c1t1dnNpXVtmLmNdXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVNYXJrZXIocCwgYywgc2l6ZSkge1xyXG4gICAgY29uc3QgbWFya2VyID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KHNpemUpLCBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogYyB9KSk7XHJcbiAgICBtYXJrZXIucG9zaXRpb24uc2V0KHAueCxwLnkscC56KTtcclxuICAgIHJldHVybiBtYXJrZXI7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZmluZFV2VHJpcyhnZW9tZXRyeSwgcHMsIGZpcnN0LCBsYXN0KSB7XHJcbiAgICBjb25zdCByZXMgPSBbXTtcclxuICAgIGZvcihsZXQgcCBvZiBwcykge1xyXG4gICAgICBsZXQgZm91bmQgPSBmYWxzZTtcclxuICAgICAgZm9yKGxldCBpPWZpcnN0OyBpPGxhc3QgJiYgIWZvdW5kOyArK2kpIHtcclxuICAgICAgICBjb25zdCB0cmkgPSBnZW9tZXRyeS5mYWNlVmVydGV4VXZzWzBdW2ldO1xyXG4gICAgICAgIGlmKEJhc2VNYXRoVXRpbHMuaXNJbnNpZGVDb252UG9seSh0cmksIHApKSB7XHJcbiAgICAgICAgICByZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGNvZWZzOiBCYXNlTWF0aFV0aWxzLmNvbXB1dGVJbnRlcnBDb2Vmcyh0cmksIHApLFxyXG4gICAgICAgICAgICBpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYoIWZvdW5kKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQmFkIHBvaW50Jyk7XHJcbiAgICAgICAgcmVzLnB1c2godW5kZWZpbmVkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmaW5kSW50ZXJuYWxWZXJ0aWNlcyhnZW9tZXRyeSwgcHMsIGZpcnN0LCBsYXN0KSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvcihsZXQgaT1maXJzdDsgaTxsYXN0OyArK2kpIHtcclxuICAgICAgY29uc3QgdHJpID0gZ2VvbWV0cnkuZmFjZVZlcnRleFV2c1swXVtpXSwgZiA9IGdlb21ldHJ5LmZhY2VzW2ldLCB2cyA9IFtmLmEsIGYuYiwgZi5jXTtcclxuICAgICAgZm9yKGxldCBqPTA7IGo8dHJpLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgaWYocmVzW3ZzW2pdXT09PXVuZGVmaW5lZCAmJiBCYXNlTWF0aFV0aWxzLmlzSW5zaWRlUG9seShwcywgdHJpW2pdKSkge1xyXG4gICAgICAgICAgcmVzW3ZzW2pdXSA9IHtcclxuICAgICAgICAgICAgcDogdHJpW2pdLFxyXG4gICAgICAgICAgICBpOiB2c1tqXSxcclxuICAgICAgICAgICAgbjogZi52ZXJ0ZXhOb3JtYWxzW2pdXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocmVzKTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1RocmVlVXRpbHMuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UaHJlZVV0aWxzLmpzIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhcmdldCB7XHJcblxyXG4gIHN0YXRpYyB0ZXN0KG9iamVjdDEsIG9iamVjdDIpIHtcclxuICAgIHJldHVybiBvYmplY3QxLnRhcmdldD09PW9iamVjdDIudGFyZ2V0O1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9UYXJnZXQuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy90YXJnZXRzL1RhcmdldC5qcyIsImltcG9ydCB7JCwgdHJ9IGZyb20gJy4vanMvbGlicyc7XHJcbmltcG9ydCBEZXRlY3RvciBmcm9tICdEZXRlY3Rvcic7XHJcbmltcG9ydCBWaXN1YWxXb3JsZCBmcm9tICdWaXN1YWxXb3JsZCc7XHJcbmltcG9ydCBQZGZMaW5rc0hhbmRsZXIgZnJvbSAnLi9qcy9jbGFzc2VzL1BkZkxpbmtzSGFuZGxlcic7XHJcbmltcG9ydCBCb29rIGZyb20gJy4vanMvY2xhc3Nlcy9Cb29rJztcclxuaW1wb3J0IEJvb2tWaWV3IGZyb20gJy4vanMvY2xhc3Nlcy9Cb29rVmlldyc7XHJcbmltcG9ydCBCb29rQ29udHJvbGxlciBmcm9tICcuL2pzL2NsYXNzZXMvQm9va0NvbnRyb2xsZXInO1xyXG5pbXBvcnQgUGRmQm9va1Byb3BzQnVpbGRlciBmcm9tICcuL2pzL2NsYXNzZXMvUGRmQm9va1Byb3BzQnVpbGRlcic7XHJcbmltcG9ydCBDbGJCb29rUHJvcHNCdWlsZGVyIGZyb20gJy4vanMvY2xhc3Nlcy9DbGJCb29rUHJvcHNCdWlsZGVyJztcclxuaW1wb3J0IExvYWRpbmdDb250cm9sbGVyIGZyb20gJ0xvYWRpbmdDb250cm9sbGVyJztcclxuaW1wb3J0IFNlYXJjaCBmcm9tICdTZWFyY2gnO1xyXG5pbXBvcnQgQm9va21hcmtzIGZyb20gJ0Jvb2ttYXJrcyc7XHJcbmltcG9ydCBUaHVtYm5haWxzIGZyb20gJ1RodW1ibmFpbHMnO1xyXG5pbXBvcnQgVG9jQ29udHJvbGxlciBmcm9tICcuL2pzL2NsYXNzZXMvVG9jQ29udHJvbGxlcic7XHJcbmltcG9ydCBCb29rUHJpbnRlciBmcm9tICcuL2pzL2NsYXNzZXMvQm9va1ByaW50ZXInO1xyXG5pbXBvcnQgQXV0b05hdmlnYXRvciBmcm9tICcuL2pzL2NsYXNzZXMvQXV0b05hdmlnYXRvcic7XHJcbmltcG9ydCBTb3VuZHNFbnZpcm9tZW50IGZyb20gJy4vanMvY2xhc3Nlcy9Tb3VuZHNFbnZpcm9tZW50JztcclxuXHJcbiQuZm4uRmxpcEJvb2sgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgY29uc3Qgc2NlbmUgPSB7XHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICBpZih0aGlzLnJlYWR5KSB7XHJcbiAgICAgICAgIXNjZW5lLnBkZkxpbmtzSGFuZGxlciB8fCBzY2VuZS5wZGZMaW5rc0hhbmRsZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5wZGZMaW5rc0hhbmRsZXI7XHJcbiAgICAgICAgc2NlbmUuc291bmRzLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUuc291bmRzO1xyXG4gICAgICAgIHNjZW5lLnRvY0N0cmwuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS50b2NDdHJsO1xyXG4gICAgICAgIHNjZW5lLnRodW1ibmFpbHMuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS50aHVtYm5haWxzO1xyXG4gICAgICAgICFzY2VuZS5ib29rbWFya3MgfHwgc2NlbmUuYm9va21hcmtzLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUuYm9va21hcmtzO1xyXG4gICAgICAgIHNjZW5lLmN0cmwuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5jdHJsO1xyXG4gICAgICAgIHNjZW5lLmJvb2tQcmludGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUuYm9va1ByaW50ZXI7XHJcbiAgICAgICAgc2NlbmUuYm9vay5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLmJvb2s7XHJcbiAgICAgICAgc2NlbmUucHJvcHNCdWlsZGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgc2NlbmUucHJvcHNCdWlsZGVyO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5ib29rQnVpbGRlcjtcclxuICAgICAgICBzY2VuZS52aXN1YWwuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS52aXN1YWw7XHJcbiAgICAgICAgc2NlbmUudmlldy5kaXNwb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLnZpZXc7XHJcbiAgICAgICAgZGVsZXRlIHNjZW5lLmRpc3Bvc2U7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlzcG9zZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG4gIG9wdGlvbnMgPSB7Li4ub3B0aW9uc307XHJcbiAgc2NlbmUudmlldyA9IG5ldyBCb29rVmlldyh0aGlzLmxlbmd0aD8gdGhpc1swXTogJCgnPGRpdj4nKS5hcHBlbmRUbygnYm9keScpLCAoKT0+IHtcclxuICAgIGlmKCFEZXRlY3Rvci53ZWJnbCkge1xyXG4gICAgICBEZXRlY3Rvci5hZGRHZXRXZWJHTE1lc3NhZ2Uoe3BhcmVudDogc2NlbmUudmlldy5nZXRWaWV3KCl9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBzY2VuZS5sb2FkaW5nQ3RybCA9IG5ldyBMb2FkaW5nQ29udHJvbGxlcihzY2VuZS52aWV3LCB0cnVlLCAocHJvZ3Jlc3MpPT4gcHJvZ3Jlc3M9PT0wPyB0cignUGxlYXNlIHdhaXQuLi4gdGhlIEFwcGxpY2F0aW9uIGlzIExvYWRpbmcnKTogdHIoJ1BERiBpcyBMb2FkaW5nOicpKycgJytwcm9ncmVzcysnJScpO1xyXG4gICAgICBzY2VuZS52aXN1YWwgPSBuZXcgVmlzdWFsV29ybGQoc2NlbmUudmlldy5nZXRDb250YWluZXIoKS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LCBzY2VuZS52aWV3LmdldENvbnRhaW5lcigpLm93bmVyRG9jdW1lbnQsIHNjZW5lLnZpZXcuZ2V0VmlldygpKTtcclxuICAgICAgc2NlbmUuYm9va0J1aWxkZXIgPSAocHJvcHMsIHNoZWV0cywgcGFnZUNhbGxiYWNrKT0+IHtcclxuICAgICAgICBwcm9wcy5jc3NMYXllclByb3BzID0ge1xyXG4gICAgICAgICAgLi4ucHJvcHMuY3NzTGF5ZXJQcm9wcyxcclxuICAgICAgICAgIHNjZW5lXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZihvcHRpb25zLnByb3BlcnRpZXNDYWxsYmFjaykge1xyXG4gICAgICAgICAgcHJvcHMgPSBvcHRpb25zLnByb3BlcnRpZXNDYWxsYmFjayhwcm9wcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjZW5lLmJvb2sgPSBuZXcgQm9vayhzY2VuZS52aXN1YWwsIHNoZWV0cywgcGFnZUNhbGxiYWNrLCBwcm9wcyk7XHJcbiAgICAgICAgc2NlbmUuYm9va1ByaW50ZXIgPSBuZXcgQm9va1ByaW50ZXIoc2NlbmUudmlzdWFsLCBzY2VuZS5ib29rLCAob3B0aW9ucy50ZW1wbGF0ZSB8fCB7fSkucHJpbnRTdHlsZSk7XHJcbiAgICAgICAgc2NlbmUubG9hZGluZ0N0cmwuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBzY2VuZS5sb2FkaW5nQ3RybDtcclxuICAgICAgICBzY2VuZS5jdHJsID0gbmV3IEJvb2tDb250cm9sbGVyKHNjZW5lLmJvb2ssIHNjZW5lLnZpZXcsIG9wdGlvbnMuY29udHJvbHNQcm9wcyk7XHJcbiAgICAgICAgc2NlbmUuYm9vay5zZXRJbmplY3Rvcigodyk9PiB7XHJcbiAgICAgICAgICB3LmpRdWVyeSA9IHcuJCA9ICQ7XHJcbiAgICAgICAgICB3LmJvb2sgPSBzY2VuZS5ib29rO1xyXG4gICAgICAgICAgdy5ib29rQ3RybCA9IHNjZW5lLmN0cmw7XHJcbiAgICAgICAgICBpZihwcm9wcy5pbmplY3Rvcikge1xyXG4gICAgICAgICAgICBwcm9wcy5pbmplY3Rvcih3KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzY2VuZS52aWV3LmFkZEhhbmRsZXIoc2NlbmUuY3RybCk7XHJcbiAgICAgICAgc2NlbmUuY3RybC5zZXRQcmludGVyKHNjZW5lLmJvb2tQcmludGVyKTtcclxuICAgICAgICBjb25zdCB0ZXN0ID0gcGFnZUNhbGxiYWNrKDApO1xyXG5cclxuICAgICAgICBzY2VuZS5zZWFyY2ggPSBuZXcgU2VhcmNoKHNjZW5lLnZpZXcuZ2V0U2VhcmNoVmlldygpLCBzY2VuZS5ib29rLmdldFBhZ2VzKCkpO1xyXG4gICAgICAgIHNjZW5lLnNlYXJjaC5vblF1ZXJ5ID0gc2NlbmUuYm9vay5zZXRRdWVyeS5iaW5kKHNjZW5lLmJvb2spO1xyXG4gICAgICAgIHNjZW5lLmJvb2suYWRkRXZlbnRMaXN0ZW5lcignc2VhcmNoUmVzdWx0cycsIChlKT0+IHtcclxuICAgICAgICAgIHNjZW5lLnNlYXJjaC5zZXRSZXN1bHRzKGUucmVzdWx0cywgZS5sYXN0UGFnZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNjZW5lLnRodW1ibmFpbHMgPSBuZXcgVGh1bWJuYWlscyhzY2VuZS52aXN1YWwsIHNjZW5lLnZpZXcuZ2V0VGh1bWJuYWlsc1ZpZXcoKSwgcGFnZUNhbGxiYWNrLCAyKihzaGVldHMrMiksIHtrV3RvSDogcHJvcHMud2lkdGgvcHJvcHMuaGVpZ2h0fSk7XHJcbiAgICAgICAgc2NlbmUudG9jQ3RybCA9IG5ldyBUb2NDb250cm9sbGVyKHNjZW5lLnZpZXcsIHNjZW5lLmN0cmwpO1xyXG4gICAgICAgIHNjZW5lLnRvY0N0cmwuc2V0VGh1bWJuYWlscyhzY2VuZS50aHVtYm5haWxzKTtcclxuICAgICAgICBzY2VuZS50b2NDdHJsLnNldFNlYXJjaChzY2VuZS5zZWFyY2gpO1xyXG4gICAgICAgIHNjZW5lLmN0cmwuc2V0VG9jQ3RybChzY2VuZS50b2NDdHJsKTtcclxuICAgICAgICBzY2VuZS52aWV3LmFkZEhhbmRsZXIoc2NlbmUudG9jQ3RybCk7XHJcblxyXG4gICAgICAgIGlmKHRlc3QudHlwZT09PSdwZGYnKSB7XHJcbiAgICAgICAgICBzY2VuZS5wZGZMaW5rc0hhbmRsZXIgPSBuZXcgUGRmTGlua3NIYW5kbGVyKHRlc3Quc3JjLCBzY2VuZS5jdHJsLCBzY2VuZS52aXN1YWwuZWxlbWVudCk7XHJcbiAgICAgICAgICBzY2VuZS5ib29rLmFkZEV2ZW50TGlzdGVuZXIoJ3BkZkFubm90YXRpb24nLCBzY2VuZS5wZGZMaW5rc0hhbmRsZXIuaGFuZGxlRXZlbnQuYmluZChzY2VuZS5wZGZMaW5rc0hhbmRsZXIpKTtcclxuICAgICAgICAgIHRlc3Quc3JjLmdldEhhbmRsZXIoKGhhbmRsZXIpPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGVyLmdldE91dGxpbmUoKS5cclxuICAgICAgICAgICAgICB0aGVuKChvdXRsaW5lKT0+IHtcclxuICAgICAgICAgICAgICAgIHNjZW5lLmJvb2ttYXJrcyA9IG5ldyBCb29rbWFya3Moc2NlbmUudmlldy5nZXRCb29rbWFya3NWaWV3KCksIG91dGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgc2NlbmUudG9jQ3RybC5zZXRCb29rbWFya3Moc2NlbmUuYm9va21hcmtzLCB0ZXN0LnNyYyk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlmKG9wdGlvbnMucGRmTGlua3MgJiYgb3B0aW9ucy5wZGZMaW5rcy5oYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHNjZW5lLnBkZkxpbmtzSGFuZGxlci5zZXRIYW5kbGVyKG9wdGlvbnMucGRmTGlua3MuaGFuZGxlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY2VuZS5zb3VuZHMgPSBuZXcgU291bmRzRW52aXJvbWVudChvcHRpb25zLnRlbXBsYXRlKTtcclxuICAgICAgICBzY2VuZS5jdHJsLnNldFNvdW5kcyhzY2VuZS5zb3VuZHMpO1xyXG4gICAgICAgIHNjZW5lLnNvdW5kcy5zdWJzY3JpYmVGbGlwcyhzY2VuZS5jdHJsKTtcclxuXHJcbiAgICAgICAgc2NlbmUucmVhZHkgPSB0cnVlO1xyXG4gICAgICAgIG5ldyBBdXRvTmF2aWdhdG9yKHNjZW5lLnZpc3VhbCwgc2NlbmUuY3RybCwgb3B0aW9ucy5hdXRvTmF2aWdhdGlvbikuZGlzcG9zZSgpO1xyXG4gICAgICAgIGlmKG9wdGlvbnMucmVhZHkpIHtcclxuICAgICAgICAgIG9wdGlvbnMucmVhZHkoc2NlbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzY2VuZS5wZW5kaW5nRGlzcG9zZSkge1xyXG4gICAgICAgICAgc2NlbmUuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgaWYob3B0aW9ucy5wZGYpIHtcclxuICAgICAgICBzY2VuZS5wcm9wc0J1aWxkZXIgPSBuZXcgUGRmQm9va1Byb3BzQnVpbGRlcihvcHRpb25zLnBkZiwgc2NlbmUuYm9va0J1aWxkZXIpO1xyXG4gICAgICAgIHNjZW5lLnByb3BzQnVpbGRlci5wZGYuc2V0TG9hZGluZ1Byb2dyZXNzQ2xiKHNjZW5lLmxvYWRpbmdDdHJsLnNldFByb2dyZXNzLmJpbmQoc2NlbmUubG9hZGluZ0N0cmwpKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKG9wdGlvbnMucGFnZUNhbGxiYWNrKSB7XHJcbiAgICAgICAgc2NlbmUucHJvcHNCdWlsZGVyID0gbmV3IENsYkJvb2tQcm9wc0J1aWxkZXIoc2NlbmUudmlzdWFsLCBvcHRpb25zLnBhZ2VDYWxsYmFjaywgb3B0aW9ucy5wYWdlcywgc2NlbmUuYm9va0J1aWxkZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNjZW5lLnByb3BzQnVpbGRlciA9IG5ldyBDbGJCb29rUHJvcHNCdWlsZGVyKHNjZW5lLnZpc3VhbCwgQm9vay5wYWdlQ2FsbGJhY2ssIDYsIHNjZW5lLmJvb2tCdWlsZGVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sIG9wdGlvbnMudGVtcGxhdGUpO1xyXG4gIHJldHVybiBzY2VuZTtcclxufVxyXG5cclxuJCgoKT0+IHtcclxuICBsZXQgY29udGFpbmVycyA9ICQoJy5mbGlwLWJvb2stY29udGFpbmVyJyk7XHJcbiAgZm9yKGxldCBpID0gMDsgaTxjb250YWluZXJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBjb25zdCBqQ29udGFpbmVyID0gJChjb250YWluZXJzW2ldKSwgc3JjID0gakNvbnRhaW5lci5hdHRyKCdzcmMnKTtcclxuICAgIGlmKCEhc3JjKSB7XHJcbiAgICAgIGpDb250YWluZXIuRmxpcEJvb2soe3BkZjogc3JjfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbndpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9ICQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2luZGV4LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vaW5kZXguanMiLCJpZiAoIUFycmF5LnByb3RvdHlwZS5maWxsKSB7XHJcbiAgQXJyYXkucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG5cclxuICAgIC8vINCo0LDQs9C4IDEtMi5cclxuICAgIGlmICh0aGlzID09IG51bGwpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGhpcyBpcyBudWxsIG9yIG5vdCBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XHJcblxyXG4gICAgLy8g0KjQsNCz0LggMy01LlxyXG4gICAgdmFyIGxlbiA9IE8ubGVuZ3RoID4+PiAwO1xyXG5cclxuICAgIC8vINCo0LDQs9C4IDYtNy5cclxuICAgIHZhciBzdGFydCA9IGFyZ3VtZW50c1sxXTtcclxuICAgIHZhciByZWxhdGl2ZVN0YXJ0ID0gc3RhcnQgPj4gMDtcclxuXHJcbiAgICAvLyDQqNCw0LMgOC5cclxuICAgIHZhciBrID0gcmVsYXRpdmVTdGFydCA8IDAgP1xyXG4gICAgICBNYXRoLm1heChsZW4gKyByZWxhdGl2ZVN0YXJ0LCAwKSA6XHJcbiAgICAgIE1hdGgubWluKHJlbGF0aXZlU3RhcnQsIGxlbik7XHJcblxyXG4gICAgLy8g0KjQsNCz0LggOS0xMC5cclxuICAgIHZhciBlbmQgPSBhcmd1bWVudHNbMl07XHJcbiAgICB2YXIgcmVsYXRpdmVFbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/XHJcbiAgICAgIGxlbiA6IGVuZCA+PiAwO1xyXG5cclxuICAgIC8vINCo0LDQsyAxMS5cclxuICAgIHZhciBmaW5hbCA9IHJlbGF0aXZlRW5kIDwgMCA/XHJcbiAgICAgIE1hdGgubWF4KGxlbiArIHJlbGF0aXZlRW5kLCAwKSA6XHJcbiAgICAgIE1hdGgubWluKHJlbGF0aXZlRW5kLCBsZW4pO1xyXG5cclxuICAgIC8vINCo0LDQsyAxMi5cclxuICAgIHdoaWxlIChrIDwgZmluYWwpIHtcclxuICAgICAgT1trXSA9IHZhbHVlO1xyXG4gICAgICBrKys7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KjQsNCzIDEzLlxyXG4gICAgcmV0dXJuIE87XHJcbiAgfTtcclxufVxyXG5cclxuaWYgKCFBcnJheS5wcm90b3R5cGUuZmluZCkge1xyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdmaW5kJywge1xyXG4gICAgdmFsdWU6IGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xyXG4gICAgICd1c2Ugc3RyaWN0JztcclxuICAgICBpZiAodGhpcyA9PSBudWxsKSB7XHJcbiAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5wcm90b3R5cGUuZmluZCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTtcclxuICAgICB9XHJcbiAgICAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICB9XHJcbiAgICAgdmFyIGxpc3QgPSBPYmplY3QodGhpcyk7XHJcbiAgICAgdmFyIGxlbmd0aCA9IGxpc3QubGVuZ3RoID4+PiAwO1xyXG4gICAgIHZhciB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xyXG4gICAgIHZhciB2YWx1ZTtcclxuXHJcbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgdmFsdWUgPSBsaXN0W2ldO1xyXG4gICAgICAgaWYgKHByZWRpY2F0ZS5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpLCBsaXN0KSkge1xyXG4gICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICB9XHJcbiAgICAgfVxyXG4gICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmlmICghQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCkge1xyXG4gIEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXggPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcclxuICAgIGlmICh0aGlzID09IG51bGwpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ByZWRpY2F0ZSBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgIH1cclxuICAgIHZhciBsaXN0ID0gT2JqZWN0KHRoaXMpO1xyXG4gICAgdmFyIGxlbmd0aCA9IGxpc3QubGVuZ3RoID4+PiAwO1xyXG4gICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XHJcbiAgICB2YXIgdmFsdWU7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICB2YWx1ZSA9IGxpc3RbaV07XHJcbiAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaSwgbGlzdCkpIHtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIC0xO1xyXG4gIH07XHJcbn1cclxuXHJcbmlmICghT2JqZWN0LnZhbHVlcykge1xyXG5cdE9iamVjdC52YWx1ZXMgPSBmdW5jdGlvbiB2YWx1ZXMoTykge1xyXG5cdFx0cmV0dXJuIE9iamVjdC5rZXlzKE8pLm1hcCgobmFtZSk9Pk9bbmFtZV0pIHx8IFtdO1xyXG5cdH07XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL3BvbHlmaWxsLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL3BvbHlmaWxsLmpzIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9OYXZpZ2F0b3Ige1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBib29rQ3RybCwgcHJvcHM9e30pIHtcclxuICAgIHByb3BzID0ge1xyXG4gICAgICAuLi5wcm9wcyxcclxuICAgICAgdXJsUGFyYW06IHByb3BzLnVybFBhcmFtIHx8ICdmYjNkLXBhZ2UnLFxyXG4gICAgICBuYXZpZ2F0ZXM6IHByb3BzLm5hdmlnYXRlcz09PXVuZGVmaW5lZD8gMTogcHJvcHMubmF2aWdhdGVzXHJcbiAgICB9O1xyXG4gICAgdGhpcy5wcm9wcyA9IHByb3BzO1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgIHRoaXMuYm9va0N0cmwgPSBib29rQ3RybDtcclxuICAgIHRoaXMudXJsUGFyYW0gPSBwcm9wcy51cmxQYXJhbTtcclxuICAgIHRoaXMud25kID0gY29udGV4dC53bmQ7XHJcblxyXG4gICAgdGhpcy53bmQuZmIzZCA9IHtcclxuICAgICAgLi4udGhpcy53bmQuZmIzZFxyXG4gICAgfTtcclxuICAgIHRoaXMud25kLmZiM2QubmF2aWdhdG9yID0ge1xyXG4gICAgICAuLi50aGlzLnduZC5mYjNkLm5hdmlnYXRvclxyXG4gICAgfTtcclxuICAgIHRoaXMubmF2aWdhdG9yID0gdGhpcy53bmQuZmIzZC5uYXZpZ2F0b3JbdGhpcy51cmxQYXJhbV0gPSB7XHJcbiAgICAgIC4uLnRoaXMud25kLmZiM2QubmF2aWdhdG9yW3RoaXMudXJsUGFyYW1dXHJcbiAgICB9O1xyXG4gICAgdGhpcy5uYXZpZ2F0b3IuaW5zdGFuY2VzID0gKHRoaXMubmF2aWdhdG9yLmluc3RhbmNlcyB8fCAwKSsxO1xyXG5cclxuICAgIGlmKHRoaXMubmF2aWdhdG9yLmluc3RhbmNlczw9dGhpcy5wcm9wcy5uYXZpZ2F0ZXMpIHtcclxuICAgICAgdGhpcy5ib29rQ3RybC5nb1RvUGFnZSh0aGlzLmdldFBhZ2VOdW1iZXIoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG5cclxuICB9XHJcblxyXG4gIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB1cmwpIHtcclxuICAgIGlmICghdXJsKSB7XHJcbiAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgfVxyXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKCdbPyZdJyArIG5hbWUgKyAnKD0oW15dKil8JnwjfCQpJyksXHJcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xyXG4gICAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcclxuICAgIGlmICghcmVzdWx0c1syXSkgcmV0dXJuICcnO1xyXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VOdW1iZXIoKSB7XHJcbiAgICBsZXQgbnVtYmVyID0gdGhpcy5nZXRQYXJhbWV0ZXJCeU5hbWUodGhpcy51cmxQYXJhbSk7XHJcbiAgICBudW1iZXIgPSBwYXJzZUludChudW1iZXIpO1xyXG4gICAgaWYoaXNOYU4obnVtYmVyKSkge1xyXG4gICAgICBudW1iZXIgPSAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bWJlci0xO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9BdXRvTmF2aWdhdG9yLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9BdXRvTmF2aWdhdG9yLmpzIiwiaW1wb3J0IHtUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBNYXRoVXRpbHMgZnJvbSAnTWF0aFV0aWxzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluZGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3IodmlzdWFsLCBwKSB7XHJcbiAgICB0aGlzLnZpc3VhbCA9IHZpc3VhbDtcclxuICAgIHRoaXMucCA9IHtcclxuICAgICAgLi4ucCxcclxuICAgICAgYmFja1NpemU6IDIqcC5jb3Zlci5kZXB0aCtwLnNoZWV0cypwLnBhZ2UuZGVwdGhcclxuICAgIH07XHJcbiAgICB0aGlzLk9aID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwwLDEpO1xyXG5cclxuICAgIHRoaXMuYmFja0cgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkocC5jb3Zlci5kZXB0aCwgdGhpcy5wLmJhY2tTaXplLCBwLmNvdmVyLmhlaWdodCk7XHJcblxyXG4gICAgdGhpcy5tYXRlcmlhbHMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe2NvbG9yOiBwLmNvdmVyLmNvbG9yfSlcclxuICAgICAgICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICBjb25zdCBiYWNrTSA9IG5ldyBUSFJFRS5NZXNoKHRoaXMuYmFja0csIG5ldyBUSFJFRS5NZXNoRmFjZU1hdGVyaWFsKHRoaXMubWF0ZXJpYWxzKSk7XHJcblxyXG4gICAgaWYocC5jb3Zlci5iaW5kZXJUZXh0dXJlIT09JycpIHtcclxuICAgICAgdGhpcy52aXN1YWwudGV4dHVyZUxvYWRlci5sb2FkKHAuY292ZXIuYmluZGVyVGV4dHVyZSwgKHRleHR1cmUpPT4ge1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzWzFdLmNvbG9yLnNldEhleCgweEZGRkZGRik7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHNbMV0ubWFwID0gdGV4dHVyZTtcclxuICAgICAgICB0ZXh0dXJlLm1pbkZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcclxuICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsc1sxXS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudGhyZWUgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIHRoaXMuYmFjayA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgdGhpcy5iYWNrUlQgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIHRoaXMuYmFja1JSID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLmJhY2tMVCA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xyXG4gICAgdGhpcy5iYWNrTFIgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuICAgIHRoaXMubGVmdFBpdm90ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLnJpZ2h0UGl2b3QgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcclxuXHJcbiAgICB0aGlzLmJhY2suYWRkKGJhY2tNKTtcclxuICAgIHRoaXMuYmFjay5hZGQodGhpcy5sZWZ0UGl2b3QpO1xyXG4gICAgdGhpcy5iYWNrLmFkZCh0aGlzLnJpZ2h0UGl2b3QpO1xyXG4gICAgdGhpcy5iYWNrUlQuYWRkKHRoaXMuYmFjayk7XHJcbiAgICB0aGlzLmJhY2tSUi5hZGQodGhpcy5iYWNrUlQpO1xyXG4gICAgdGhpcy5iYWNrTFQuYWRkKHRoaXMuYmFja1JSKTtcclxuICAgIHRoaXMuYmFja0xSLmFkZCh0aGlzLmJhY2tMVCk7XHJcbiAgICB0aGlzLnRocmVlLmFkZCh0aGlzLmJhY2tMUik7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgZm9yKGxldCBtIG9mIHRoaXMubWF0ZXJpYWxzKSB7XHJcbiAgICAgIGlmKG0ubWFwKSB7XHJcbiAgICAgICAgbS5tYXAgPSBudWxsO1xyXG4gICAgICAgIG0ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIG0uZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIHRoaXMubWF0ZXJpYWxzO1xyXG4gICAgdGhpcy5iYWNrRy5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICBzZXQoYW5nbGUpIHtcclxuICAgIGxldCByaWdodCwgbGVmdDtcclxuICAgIGlmKGFuZ2xlPk1hdGguUEkvMikge1xyXG4gICAgICByaWdodCA9IE1hdGguUEkvMjtcclxuICAgICAgbGVmdCA9IGFuZ2xlLU1hdGguUEkvMjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByaWdodCA9IGFuZ2xlO1xyXG4gICAgICBsZWZ0ID0gMDtcclxuICAgIH1cclxuICAgIGNvbnN0IHAgPSB0aGlzLnAsdHIxPXt4Oi0wLjUqcC5jb3Zlci5kZXB0aCx5OjAuNSpwLmJhY2tTaXplLXAuY292ZXIuZGVwdGh9O1xyXG4gICAgdGhpcy5iYWNrUlQucG9zaXRpb24uc2V0KHRyMS54LHRyMS55LDApO1xyXG4gICAgdGhpcy5iYWNrUlIucG9zaXRpb24uc2V0KC10cjEueCwtdHIxLnksMCk7XHJcbiAgICB0aGlzLmJhY2tSUi5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy5PWiwgcmlnaHQpO1xyXG5cclxuICAgIGNvbnN0IHRyMj17eDpwLmJhY2tTaXplLTIqcC5jb3Zlci5kZXB0aC0wLjUqcC5jb3Zlci5kZXB0aCx5OjAuNSpwLmJhY2tTaXplLXAuY292ZXIuZGVwdGh9O1xyXG4gICAgdGhpcy5iYWNrTFQucG9zaXRpb24uc2V0KHRyMi54LHRyMi55LDApO1xyXG4gICAgdGhpcy5iYWNrTFIucG9zaXRpb24uc2V0KC10cjIueCwtdHIyLnksMCk7XHJcbiAgICB0aGlzLmJhY2tMUi5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUodGhpcy5PWiwgbGVmdCk7XHJcbiAgfVxyXG5cclxuICBzZXRMZWZ0KGFuZ2xlKSB7XHJcbiAgICBjb25zdCBQSSA9IE1hdGguUEk7XHJcbiAgICB0aGlzLmxlZnRQaXZvdC5wb3NpdGlvbi5zZXQoTWF0aFV0aWxzLmludGVycG9sYXRlTGluZWFyKFstUEksLVBJLzJdLFswLHRoaXMucC5jb3Zlci5kZXB0aF0sYW5nbGUpLDAuNSp0aGlzLnAuYmFja1NpemUtMC41KnRoaXMucC5jb3Zlci5kZXB0aCwwKTtcclxuICAgIHRoaXMubGVmdFBpdm90LnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSh0aGlzLk9aLCBhbmdsZSk7XHJcbiAgfVxyXG5cclxuICBzZXRSaWdodChhbmdsZSkge1xyXG4gICAgY29uc3QgUEkgPSBNYXRoLlBJO1xyXG4gICAgICB0aGlzLnJpZ2h0UGl2b3QucG9zaXRpb24uc2V0KE1hdGhVdGlscy5pbnRlcnBvbGF0ZUxpbmVhcihbLVBJLzIsMF0sW3RoaXMucC5jb3Zlci5kZXB0aCwwXSxhbmdsZSksLTAuNSp0aGlzLnAuYmFja1NpemUrMC41KnRoaXMucC5jb3Zlci5kZXB0aCwwKTtcclxuICAgICAgdGhpcy5yaWdodFBpdm90LnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZSh0aGlzLk9aLCBhbmdsZSk7XHJcbiAgfVxyXG5cclxuICBqb2luTGVmdENvdmVyKGNvdmVyKSB7XHJcbiAgICBjb3Zlci50aHJlZS5wb3NpdGlvbi5zZXQoMCwtMC41KnRoaXMucC5jb3Zlci5kZXB0aCwwKTtcclxuICAgIHRoaXMubGVmdFBpdm90LmFkZChjb3Zlci50aHJlZSk7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0TGVmdENvdmVyKGNvdmVyKSB7XHJcbiAgICB0aGlzLmxlZnRQaXZvdC5yZW1vdmUoY292ZXIudGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgam9pblJpZ2h0Q292ZXIoY292ZXIpIHtcclxuICAgIGNvdmVyLnRocmVlLnBvc2l0aW9uLnNldCgwLC0wLjUqdGhpcy5wLmNvdmVyLmRlcHRoLDApO1xyXG4gICAgdGhpcy5yaWdodFBpdm90LmFkZChjb3Zlci50aHJlZSk7XHJcbiAgfVxyXG5cclxuICBkaXNjb25uZWN0UmlnaHRDb3Zlcihjb3Zlcikge1xyXG4gICAgdGhpcy5yaWdodFBpdm90LnJlbW92ZShjb3Zlci50aHJlZSk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9CaW5kZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0JpbmRlci5qcyIsImltcG9ydCB7JCwgVEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQge3Byb3BzIGFzICBib29rUHJvcHN9IGZyb20gJy4uL3Byb3BzL2Jvb2snO1xyXG5pbXBvcnQgR3JhcGhVdGlscyBmcm9tICdHcmFwaFV0aWxzJztcclxuaW1wb3J0IEJpbmRlciBmcm9tICcuL0JpbmRlcic7XHJcbmltcG9ydCBDb3ZlciBmcm9tICcuL0NvdmVyJztcclxuaW1wb3J0IFNoZWV0QmxvY2sgZnJvbSAnLi9TaGVldEJsb2NrJztcclxuaW1wb3J0IFNoZWV0UGh5c2ljcyBmcm9tICcuL1NoZWV0UGh5c2ljcyc7XHJcbmltcG9ydCBQYWdlTWFuYWdlciBmcm9tICcuL1BhZ2VNYW5hZ2VyJztcclxuaW1wb3J0IENTU0xheWVyIGZyb20gJ0NTU0xheWVyJztcclxuaW1wb3J0IENzc0xheWVyc01hbmFnZXIgZnJvbSAnLi9Dc3NMYXllcnNNYW5hZ2VyJztcclxuaW1wb3J0IFNlYXJjaEVuZ2luZSBmcm9tICcuL1NlYXJjaEVuZ2luZSc7XHJcbmltcG9ydCBDdXN0b21FdmVudENvbnZlcnRlciBmcm9tICdDdXN0b21FdmVudENvbnZlcnRlcic7XHJcbmltcG9ydCBDaXJjbGVUYXJnZXQgZnJvbSAndGFyZ2V0cy9DaXJjbGVUYXJnZXQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9vayBleHRlbmRzIFRIUkVFLkV2ZW50RGlzcGF0Y2hlciB7XHJcbiAgLy8gcGFnZUNhbGxiYWNrIHNhbXBsZXNcclxuXHJcbiAgLy8gKG4pPT4gKHtcclxuICAvLyAgIHR5cGU6ICdpbWFnZScsXHJcbiAgLy8gICBzcmM6ICdzYW1wbGUucG5nJyxcclxuICAvLyAgIGludGVyYWN0aXZlOiBmYWxzZVxyXG4gIC8vIH0pO1xyXG4gIC8vXHJcbiAgLy8gKG4pPT4gKHtcclxuICAvLyAgIHR5cGU6ICdodG1sJyxcclxuICAvLyAgIHNyYzogJ3NhbXBsZS5odG1sJyxcclxuICAvLyAgIGludGVyYWN0aXZlOiB0cnVlXHJcbiAgLy8gfSk7XHJcbiAgLy9cclxuICAvLyBjb25zdCBwZGYgPSBuZXcgUGRmKCdzYW1wbGUucGRmJyk7XHJcbiAgLy8gKG4pPT4gKHtcclxuICAvLyAgIHR5cGU6ICdwZGYnLFxyXG4gIC8vICAgc3JjOiBwZGYsXHJcbiAgLy8gICBpbnRlcmFjdGl2ZTogZmFsc2VcclxuICAvLyB9KTtcclxuXHJcbiAgY29uc3RydWN0b3IodmlzdWFsLCBzaGVldHMsIHBhZ2VDYWxsYmFjaywgcHJvcHMpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICBzaGVldHMgPSBNYXRoLm1pbigzLCBzaGVldHMpO1xyXG4gICAgdmlzdWFsLmpDb250YWluZXIuYXBwZW5kKGBcclxuICAgICAgPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPlxyXG4gICAgICAgIC5kZW1vLW1zZyB7XHJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICB0b3A6IDEwcHg7XHJcbiAgICAgICAgICByaWdodDogMTBweDtcclxuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZlNGUxO1xyXG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgICAgIH1cclxuICAgICAgPC9zdHlsZT5cclxuICAgICAgPGRpdiBjbGFzcz1cImRlbW8tbXNnXCI+XHJcbiAgICAgICAgVGhpcyBpcyB0aGUgZGVtbyB2ZXJzaW9uLCBvbmx5IDEwIHBhZ2VzIGFyZSBhdmFpbGFibGUuIFVzZSB0aGUgPGEgaHJlZj1cImh0dHBzOi8vZ29vLmdsL2J0M1poaFwiIHRhcmdldD1cIl9ibGFua1wiPmZ1bGwgdmVyc2lvbjwvYT4uXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYCk7XHJcbiAgICB0aGlzLnZpc3VhbCA9IHZpc3VhbDtcclxuICAgIHRoaXMubW91c2VDb250cm9sbGVyID0gdHJ1ZTtcclxuICAgIHRoaXMucCA9IHtcclxuICAgICAgLi4uQm9vay5wcmVwYXJlUHJvcHMocHJvcHMpLFxyXG4gICAgICBzaGVldHMsXHJcbiAgICAgIHBhZ2VDYWxsYmFjayxcclxuICAgICAgem9vbTogMSxcclxuICAgICAgc2luZ2xlUGFnZTogZmFsc2UsXHJcbiAgICAgIGF1dG9SZXNvbHV0aW9uOiB7XHJcbiAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICBrOiAxLjVcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMucGFnZU1hbmFnZXIgPSBuZXcgUGFnZU1hbmFnZXIodmlzdWFsLCB0aGlzLCB0aGlzLnApO1xyXG4gICAgQ1NTTGF5ZXIuaW5pdCh2aXN1YWwuZG9jKTtcclxuICAgIHRoaXMubGF5ZXJNYW5hZ2VyID0gbmV3IENzc0xheWVyc01hbmFnZXIodGhpcyk7XHJcbiAgICB0aGlzLnNlYXJjaEVuZ2luZSA9IG5ldyBTZWFyY2hFbmdpbmUocGFnZUNhbGxiYWNrLCAyKihzaGVldHMrMikpO1xyXG4gICAgdGhpcy5zZWFyY2hFbmdpbmUub25QYWdlSGl0c0NoYW5nZWQgPSAocGFnZSwgcXVlcnkpPT4ge1xyXG4gICAgICB0aGlzLnBhZ2VNYW5hZ2VyLnJlZnJlc2hQYWdlUXVlcnkocGFnZSwgcXVlcnkpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe1xyXG4gICAgICAgIHR5cGU6ICdzZWFyY2hSZXN1bHRzJyxcclxuICAgICAgICByZXN1bHRzOiB0aGlzLnNlYXJjaEVuZ2luZS5yZXN1bHRzLFxyXG4gICAgICAgIGxhc3RQYWdlOiBwYWdlLFxyXG4gICAgICAgIHF1ZXJ5XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRocmVlID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcblxyXG4gICAgdGhpcy5iaW5kZXIgPSBuZXcgQmluZGVyKHZpc3VhbCwgdGhpcy5wKTtcclxuICAgIHRoaXMudGhyZWUuYWRkKHRoaXMuYmluZGVyLnRocmVlKTtcclxuXHJcbiAgICB0aGlzLmxlZnRDb3ZlciA9IG5ldyBDb3Zlcih2aXN1YWwsIHsuLi50aGlzLnAsIHNldFRleHR1cmU6IHRoaXMuc2V0TGVmdENvdmVyVGV4dHVyZS5iaW5kKHRoaXMpfSwgTWF0aC5QSS8yLCAnb3BlbmVkJyk7XHJcbiAgICB0aGlzLmJpbmRlci5qb2luTGVmdENvdmVyKHRoaXMubGVmdENvdmVyKTtcclxuICAgIHRoaXMuc3Vic2NyaWJlU2hlZXRCbG9jayh0aGlzLmxlZnRDb3ZlciwgMCk7XHJcbiAgICB0aGlzLnJpZ2h0Q292ZXIgPSBuZXcgQ292ZXIodmlzdWFsLCB7Li4udGhpcy5wLCBzZXRUZXh0dXJlOiB0aGlzLnNldFJpZ2h0Q292ZXJUZXh0dXJlLmJpbmQodGhpcyl9LCAwLCAnY2xvc2VkJyk7XHJcbiAgICB0aGlzLmJpbmRlci5qb2luUmlnaHRDb3Zlcih0aGlzLnJpZ2h0Q292ZXIpO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVTaGVldEJsb2NrKHRoaXMucmlnaHRDb3ZlciwgMioodGhpcy5wLnNoZWV0cysxKSk7XHJcblxyXG4gICAgdGhpcy50aHJlZVNoZWV0QmxvY2tzID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XHJcbiAgICB0aGlzLnRocmVlLmFkZCh0aGlzLnRocmVlU2hlZXRCbG9ja3MpO1xyXG4gICAgdGhpcy50aHJlZVNoZWV0QmxvY2tzLnBvc2l0aW9uLnNldCgwLjUqdGhpcy5wLmNvdmVyLmRlcHRoLTAuNSpzaGVldHMqdGhpcy5wLnBhZ2UuZGVwdGgsLTAuNSpzaGVldHMqdGhpcy5wLnBhZ2UuZGVwdGgsMCk7XHJcblxyXG4gICAgdGhpcy5zaGVldEJsb2NrcyA9IFtdO1xyXG4gICAgaWYoc2hlZXRzPjApIHtcclxuICAgICAgdGhpcy5hZGRTaGVldEJsb2NrKDAsIG5ldyBTaGVldEJsb2NrKHZpc3VhbCwgey4uLnRoaXMucCwgc2V0VGV4dHVyZTogdGhpcy5zZXRQYWdlVGV4dHVyZS5iaW5kKHRoaXMpfSwgMCwgc2hlZXRzLCAwLCAnY2xvc2VkJykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYW5nbGUgPSB0aGlzLnAucnRsPyBNYXRoLlBJOiAwO1xyXG4gICAgdGhpcy5jbG9zZWRBbmdsZSA9IDA7XHJcbiAgICB0aGlzLnNldCh0aGlzLmFuZ2xlLDApO1xyXG4gICAgdGhpcy5sYXN0TW91c2VQb3MgPSB7XHJcbiAgICAgIHQ6IDBcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50aHJlZS5wb3NpdGlvbi5zZXQoLTAuNSp0aGlzLnAuY292ZXIuZGVwdGgrMC41KnNoZWV0cyp0aGlzLnAucGFnZS5kZXB0aCwwLDApO1xyXG4gICAgdGhpcy5zaGVldFBoeXNpY3MgPSBuZXcgU2hlZXRQaHlzaWNzKHRoaXMucC5wYWdlLndpZHRoL3RoaXMucC5zY2FsZSwgdGhpcy5wLmdyYXZpdHksIHRoaXMucC5wYWdlLmNvcm5lckRldmlhdGlvbik7XHJcblxyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgdXBkYXRlOiB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpLFxyXG4gICAgICBsYXN0TW91c2VQb3M6IChlKT0+IHtcclxuICAgICAgICB0aGlzLmxhc3RNb3VzZVBvcyA9IHtcclxuICAgICAgICAgIC4uLnRoaXMubGFzdE1vdXNlUG9zLFxyXG4gICAgICAgICAgcGFnZVg6IGUucGFnZVgsXHJcbiAgICAgICAgICBwYWdlWTogZS5wYWdlWVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLnZpc3VhbC5hZGRSZW5kZXJDYWxsYmFjayh0aGlzLmJpbmRzLnVwZGF0ZSk7XHJcbiAgICAkKHRoaXMudmlzdWFsLmVsZW1lbnQpLm9uKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLmxhc3RNb3VzZVBvcyk7XHJcblxyXG4gICAgdGhpcy5iaW5kcy5vblBpY2tDYWxsYmFjayA9IHRoaXMub25QaWNrQ2FsbGJhY2suYmluZCh0aGlzKVxyXG4gICAgdGhpcy52aXN1YWwuZHJhZy5vblBpY2tDYWxsYmFjayA9IHRoaXMuYmluZHMub25QaWNrQ2FsbGJhY2s7XHJcbiAgICB0aGlzLmJpbmRzLm9uRHJhZ0NhbGxiYWNrID0gdGhpcy5vbkRyYWdDYWxsYmFjay5iaW5kKHRoaXMpXHJcbiAgICB0aGlzLnZpc3VhbC5kcmFnLm9uRHJhZ0NhbGxiYWNrID0gdGhpcy5iaW5kcy5vbkRyYWdDYWxsYmFjaztcclxuICAgIHRoaXMuYmluZHMub25SZWxlYXNlQ2FsbGJhY2sgPSB0aGlzLm9uUmVsZWFzZUNhbGxiYWNrLmJpbmQodGhpcylcclxuICAgIHRoaXMudmlzdWFsLmRyYWcub25SZWxlYXNlQ2FsbGJhY2sgPSB0aGlzLmJpbmRzLm9uUmVsZWFzZUNhbGxiYWNrO1xyXG5cclxuICAgIHRoaXMuZHJhZ0FuZ2xlID0gMC4wNTtcclxuICAgIHRoaXMudG1wID0ge1xyXG4gICAgICBib3hzOiBbXHJcbiAgICAgICAgbmV3IFRIUkVFLkJveDMoKSxcclxuICAgICAgICBuZXcgVEhSRUUuQm94MygpXHJcbiAgICAgIF1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy52aXN1YWwuYWRkT2JqZWN0KHRoaXMudGhyZWUpO1xyXG4gICAgdGhpcy52aXN1YWwuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5wYWdlTWFuYWdlci5yZWZyZXNoWm9vbS5iaW5kKHRoaXMucGFnZU1hbmFnZXIpKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICB0aGlzLm5vdGlmeUJlZm9yZUFuaW1hdGlvbigpO1xyXG4gICAgICB0aGlzLm5vdGlmeUFmdGVyQW5pbWF0aW9uKCk7XHJcbiAgICB9LCAxMDApO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMudmlzdWFsLnJlbW92ZU9iamVjdCh0aGlzLnRocmVlKTtcclxuICAgIHRoaXMuc2hlZXRQaHlzaWNzLmRpc3Bvc2UoKTtcclxuICAgIGRlbGV0ZSB0aGlzLnZpc3VhbC5kcmFnLm9uUGlja0NhbGxiYWNrO1xyXG4gICAgZGVsZXRlIHRoaXMudmlzdWFsLmRyYWcub25EcmFnQ2FsbGJhY2s7XHJcbiAgICBkZWxldGUgdGhpcy52aXN1YWwuZHJhZy5vblJlbGVhc2VDYWxsYmFjaztcclxuICAgICQodGhpcy52aXN1YWwuZWxlbWVudCkub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLmxhc3RNb3VzZVBvcyk7XHJcbiAgICB0aGlzLnZpc3VhbC5yZW1vdmVSZW5kZXJDYWxsYmFjayh0aGlzLmJpbmRzLnVwZGF0ZSk7XHJcbiAgICB0aGlzLnJlbW92ZVNoZWV0QmxvY2tzKDAsIHRoaXMuc2hlZXRCbG9ja3MubGVuZ3RoKTtcclxuICAgIHRoaXMuYmluZGVyLmRpc2Nvbm5lY3RMZWZ0Q292ZXIodGhpcy5sZWZ0Q292ZXIpO1xyXG4gICAgdGhpcy5yZW1vdmVTaGVldEJsb2NrKHRoaXMubGVmdENvdmVyKTtcclxuICAgIHRoaXMuYmluZGVyLmRpc2Nvbm5lY3RSaWdodENvdmVyKHRoaXMucmlnaHRDb3Zlcik7XHJcbiAgICB0aGlzLnJlbW92ZVNoZWV0QmxvY2sodGhpcy5yaWdodENvdmVyKTtcclxuICAgIHRoaXMuYmluZGVyLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMubGF5ZXJNYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgIENTU0xheWVyLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMucGFnZU1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gcHVibGljcyB7XHJcblxyXG4gIHNldEF1dG9SZXNvbHV0aW9uKGVuYWJsZSwgaz0xLjUpIHtcclxuICAgIHRoaXMucC5hdXRvUmVzb2x1dGlvbiA9IHtcclxuICAgICAgLi4udGhpcy5wLmF1dG9SZXNvbHV0aW9uLFxyXG4gICAgICBlbmFibGUsXHJcbiAgICAgIGtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRab29tKHpvb20sIHNpbmdsZVBhZ2UpIHtcclxuICAgIGlmKE1hdGguYWJzKHRoaXMucC56b29tLXpvb20pPjFlLTMgfHwgc2luZ2xlUGFnZSE9PXRoaXMucC5zaW5nbGVQYWdlKSB7XHJcbiAgICAgIHRoaXMucC56b29tID0gem9vbTtcclxuICAgICAgdGhpcy5wLnNpbmdsZVBhZ2UgPSBzaW5nbGVQYWdlO1xyXG4gICAgICB0aGlzLnBhZ2VNYW5hZ2VyLnJlZnJlc2hab29tKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlQ2FsbGJhY2soKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wLnBhZ2VDYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHNldFF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICB0aGlzLnNlYXJjaEVuZ2luZS5zZXRRdWVyeShxdWVyeSk7XHJcbiAgfVxyXG5cclxuICBpc1Byb2Nlc3NpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zaGVldFBoeXNpY3MuZ2V0U2l6ZSgpIT09MDtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VzKCkge1xyXG4gICAgcmV0dXJuIDQrMip0aGlzLnAuc2hlZXRzO1xyXG4gIH1cclxuXHJcbiAgc2V0RmxpcFByb2dyZXNzQ2xiKGNsYikge1xyXG4gICAgdGhpcy5wLmZsaXBQcm9ncmVzc0NsYiA9IGNsYjtcclxuICB9XHJcblxyXG4gIHNldEluamVjdG9yKGluamVjdG9yKSB7XHJcbiAgICB0aGlzLnAuaW5qZWN0b3IgPSBpbmplY3RvcjtcclxuICB9XHJcblxyXG4gIGlzQWN0aXZlUGFnZShuKSB7XHJcbiAgICBsZXQgcmVzID0gdHJ1ZTtcclxuICAgIGlmKG4+MSAmJiBuPHRoaXMuZ2V0UGFnZXMoKS0yKSB7XHJcbiAgICAgIGZvcihsZXQgYiBvZiB0aGlzLnNoZWV0QmxvY2tzKSB7XHJcbiAgICAgICAgaWYobi0yPjIqYi5wLmZpcnN0ICYmIG4tMjwyKmIucC5sYXN0LTEpIHtcclxuICAgICAgICAgIHJlcyA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBnZXRCbG9ja0J5UGFnZShuKSB7XHJcbiAgICBsZXQgYmxvY2s7XHJcbiAgICBpZihuPDIpIHtcclxuICAgICAgYmxvY2sgPSB0aGlzLmxlZnRDb3ZlcjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYobjwyKih0aGlzLnAuc2hlZXRzKzEpKSB7XHJcbiAgICAgIGZvcihsZXQgYiBvZiB0aGlzLnNoZWV0QmxvY2tzKSB7XHJcbiAgICAgICAgaWYobi0yPj0yKmIucC5maXJzdCAmJiBuLTI8MipiLnAubGFzdCkge1xyXG4gICAgICAgICAgYmxvY2sgPSBiO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgYmxvY2sgPSB0aGlzLnJpZ2h0Q292ZXI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYmxvY2s7XHJcbiAgfVxyXG5cclxuICBnZXRCbG9ja1BhZ2VzKGJsb2NrKSB7XHJcbiAgICBsZXQgcmFuZ2U7XHJcbiAgICBzd2l0Y2ggKGJsb2NrKSB7XHJcbiAgICAgIGNhc2UgdGhpcy5sZWZ0Q292ZXI6IHtcclxuICAgICAgICAgIHJhbmdlID0gWzAsIDFdO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgdGhpcy5yaWdodENvdmVyOiB7XHJcbiAgICAgICAgcmFuZ2UgPSBbMioodGhpcy5wLnNoZWV0cysxKSwgMioodGhpcy5wLnNoZWV0cysxKSsxXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgcmFuZ2UgPSBibG9jaz8gWzIqKGJsb2NrLnAuZmlyc3QrMSksIDIqKGJsb2NrLnAubGFzdCsxKS0xXTogdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmFuZ2U7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlKCkge1xyXG4gICAgY29uc3QgUEkgPSBNYXRoLlBJO1xyXG4gICAgbGV0IHA7XHJcbiAgICBpZih0aGlzLmFuZ2xlID09PSBQSS8yIHx8IHRoaXMuYW5nbGUgPT09IDMqUEkvMikge1xyXG4gICAgICBmb3IobGV0IGJsb2NrIG9mIHRoaXMuc2hlZXRCbG9ja3MpIHtcclxuICAgICAgICBpZihibG9jay5hbmdsZTw9UEkvMikge1xyXG4gICAgICAgICAgcCA9IHRoaXMuZ2V0QmxvY2tQYWdlcyhibG9jaylbMF0tMTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZighcCkge1xyXG4gICAgICAgIHAgPSB0aGlzLmdldFBhZ2VzKCktMztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLmFuZ2xlPFBJLzIpIHtcclxuICAgICAgcCA9IDA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuYW5nbGU+MypQSS8yKSB7XHJcbiAgICAgIHAgPSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLmFuZ2xlPFBJKSB7XHJcbiAgICAgIHAgPSB0aGlzLmdldFBhZ2VzKCktMztcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5hbmdsZT49UEkpIHtcclxuICAgICAgcCA9IHRoaXMuZ2V0UGFnZXMoKS0xO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbiAgfVxyXG5cclxuICBnZXRUb3BQYWdlcygpIHtcclxuICAgIGNvbnN0IHAgPSB0aGlzLmdldFBhZ2UoKTtcclxuICAgIHJldHVybiBwPT09MCB8fCBwPT09dGhpcy5nZXRQYWdlcygpLTE/IFtwXTogW3AsIHArMV07XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlU3RhdGUobikge1xyXG4gICAgcmV0dXJuIHRoaXMucGFnZU1hbmFnZXIuZ2V0UGFnZVN0YXRlKG4pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlTG9hZGluZ0FuaW1hdGlvbihlbmFibGUpIHtcclxuICAgIHRoaXMucGFnZU1hbmFnZXIuZW5hYmxlTG9hZGluZ0FuaW1hdGlvbihlbmFibGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGVmdEZsaXBwaW5nKCkge1xyXG4gICAgbGV0IGJsb2NrO1xyXG4gICAgY29uc3QgbGVmdCA9IHRoaXMuc2hlZXRCbG9ja3NbMF0sIFBJID0gTWF0aC5QSTtcclxuICAgIGlmKHRoaXMuYW5nbGU9PT1QSSkge1xyXG4gICAgICBibG9jayA9IHRoaXMucmlnaHRDb3ZlcjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZihsZWZ0ICYmIGxlZnQuc3RhdGU9PT0nY2xvc2VkJyAmJiBsZWZ0LmFuZ2xlPlBJLzIpIHtcclxuICAgICAgICBibG9jayA9IGxlZnQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZih0aGlzLmFuZ2xlID09PSBQSS8yIHx8IHRoaXMuYW5nbGUgPT09IDMqUEkvMikge1xyXG4gICAgICAgIGJsb2NrID0gdGhpcy5sZWZ0Q292ZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBibG9jaztcclxuICB9XHJcblxyXG4gIGdldFJpZ2h0RmxpcHBpbmcoKSB7XHJcbiAgICBsZXQgYmxvY2s7XHJcbiAgICBjb25zdCByaWdodCA9IHRoaXMuc2hlZXRCbG9ja3NbdGhpcy5zaGVldEJsb2Nrcy5sZW5ndGgtMV0sIFBJID0gTWF0aC5QSTtcclxuICAgIGlmKHRoaXMuYW5nbGU9PT0wKSB7XHJcbiAgICAgIGJsb2NrID0gdGhpcy5sZWZ0Q292ZXI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYocmlnaHQgJiYgcmlnaHQuc3RhdGU9PT0nY2xvc2VkJyAmJiByaWdodC5hbmdsZTw9UEkvMikge1xyXG4gICAgICAgIGJsb2NrID0gcmlnaHQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZih0aGlzLmFuZ2xlPT09UEkvMiB8fCB0aGlzLmFuZ2xlID09PSAzKlBJLzIpIHtcclxuICAgICAgICBibG9jayA9IHRoaXMucmlnaHRDb3ZlcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2xvc2VkQmxvY2tBbmdsZShhbmdsZSkge1xyXG4gICAgbGV0IGNsb3NlZEFuZ2xlLCB7UEl9ID0gTWF0aDtcclxuXHJcbiAgICBpZih0aGlzLmxlZnRDb3Zlci5waHlzaWNJZCkge1xyXG4gICAgICBsZXQgdGVzdDtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0ZXN0ID0gTWF0aC5hYnModGhpcy5zaGVldFBoeXNpY3MuZ2V0UGFyYW1ldHIodGhpcy5sZWZ0Q292ZXIucGh5c2ljSWQsICdhbmdsZScpLWFuZ2xlKVxyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICB0ZXN0ID0gMDtcclxuICAgICAgfVxyXG4gICAgICBjbG9zZWRBbmdsZSA9IGFuZ2xlPlBJLzIgfHwgdGVzdD5QSS82PyBQSS8yOiB0aGlzLmNsb3NlZEFuZ2xlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLnJpZ2h0Q292ZXIucGh5c2ljSWQpIHtcclxuICAgICAgbGV0IHRlc3Q7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgdGVzdCA9IE1hdGguYWJzKHRoaXMuc2hlZXRQaHlzaWNzLmdldFBhcmFtZXRyKHRoaXMucmlnaHRDb3Zlci5waHlzaWNJZCwgJ2FuZ2xlJyktYW5nbGUpXHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgIHRlc3QgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGNsb3NlZEFuZ2xlID0gYW5nbGU8UEkvMiB8fCB0ZXN0PlBJLzY/IFBJLzIrMWUtNzogdGhpcy5jbG9zZWRBbmdsZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjbG9zZWRBbmdsZSA9IFBJLzIrKGFuZ2xlIT09MCkqMWUtNztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBvcGVuZWRBbmdsZTogYW5nbGUsXHJcbiAgICAgIGNsb3NlZEFuZ2xlLFxyXG4gICAgICBiaW5kZXJUdXJuOiB0aGlzLmNsb3NlZEFuZ2xlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZmxpcExlZnQoc2l6ZT0xLCBwcm9ncmVzc0NsYj10aGlzLnAuZmxpcFByb2dyZXNzQ2xiKSB7XHJcbiAgICBsZXQgYmxvY2ssIHJlcztcclxuICAgIGlmKHRoaXMuc2hlZXRQaHlzaWNzLmdldFNpemUoKTwyNSkge1xyXG4gICAgICBjb25zdCBsZWZ0ID0gdGhpcy5zaGVldEJsb2Nrc1swXSwgUEkgPSBNYXRoLlBJO1xyXG4gICAgICBpZih0aGlzLmFuZ2xlPT09UEkpIHtcclxuICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgYmxvY2s9dGhpcy5yaWdodENvdmVyLFxyXG4gICAgICAgICAgdGhpcy5wLmNvdmVyLm1hc3MsXHJcbiAgICAgICAgICBQSSxcclxuICAgICAgICAgIC10aGlzLnAuY292ZXIuc3RhcnRWZWxvY2l0eSxcclxuICAgICAgICAgIHRoaXMucC5jb3Zlci5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+dGhpcy5zZXQoMypQSS8yLWFuZ2xlLzIsaGVpZ2h0KSxcclxuICAgICAgICAgIChhbmdsZSxoZWlnaHQpPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNldCgzKlBJLzItYW5nbGUvMiwwKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhhbmdsZT8gUEk6IFBJLzIrMWUtNywnY2xvc2VkJyk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcHJvZ3Jlc3NDbGJcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmKGxlZnQgJiYgbGVmdC5zdGF0ZT09PSdjbG9zZWQnICYmIGxlZnQuYW5nbGU+UEkvMikge1xyXG4gICAgICAgICAgYmxvY2sgPSBzaXplPGxlZnQuZ2V0U2l6ZSgpPyB0aGlzLnNwbGl0U2hlZXRCbG9jaygwLCBsZWZ0LmdldFNpemUoKS1zaXplKVsxXTogbGVmdDtcclxuICAgICAgICAgIHJlcyA9IHRoaXMuY29ubmVjdFBoeXNpY3MoXHJcbiAgICAgICAgICAgIGJsb2NrLFxyXG4gICAgICAgICAgICB0aGlzLnAucGFnZS5tYXNzKmJsb2NrLmdldFNpemUoKSxcclxuICAgICAgICAgICAgUEksXHJcbiAgICAgICAgICAgIC10aGlzLnAucGFnZS5zdGFydFZlbG9jaXR5LFxyXG4gICAgICAgICAgICB0aGlzLnAucGFnZS5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PmJsb2NrLnNldCh0aGlzLmdldENsb3NlZEJsb2NrQW5nbGUoYW5nbGUpLCdvcGVuZWQnLGhlaWdodCksXHJcbiAgICAgICAgICAgIEJvb2suZmluaXNoQW5pbWF0aW9uQ2xiLmJpbmQoe2Jvb2s6IHRoaXMsIGJsb2NrfSksXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2xiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuYW5nbGUgPT09IFBJLzIgfHwgdGhpcy5hbmdsZSA9PT0gMypQSS8yKSB7XHJcbiAgICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgICBibG9jaz10aGlzLmxlZnRDb3ZlcixcclxuICAgICAgICAgICAgdGhpcy5wLmNvdmVyLm1hc3MsXHJcbiAgICAgICAgICAgIFBJLFxyXG4gICAgICAgICAgICAtdGhpcy5wLmNvdmVyLnN0YXJ0VmVsb2NpdHksXHJcbiAgICAgICAgICAgIHRoaXMucC5jb3Zlci5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXQoMipQSS1hbmdsZS8yLGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgaWYoYW5nbGU+UEkvMikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhhbmdsZT8gUEkvMjogMCwnY2xvc2VkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+IHRoaXMuc2V0KGFuZ2xlPT09MD8gMDogMipQSS1hbmdsZS8yLDApLFxyXG4gICAgICAgICAgICBwcm9ncmVzc0NsYlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICBmbGlwUmlnaHQoc2l6ZT0xLCBwcm9ncmVzc0NsYj10aGlzLnAuZmxpcFByb2dyZXNzQ2xiKSB7XHJcbiAgICBsZXQgYmxvY2ssIHJlcztcclxuICAgIGlmKHRoaXMuc2hlZXRQaHlzaWNzLmdldFNpemUoKTwyNSkge1xyXG4gICAgICBjb25zdCByaWdodCA9IHRoaXMuc2hlZXRCbG9ja3NbdGhpcy5zaGVldEJsb2Nrcy5sZW5ndGgtMV0sIFBJID0gTWF0aC5QSTtcclxuICAgICAgaWYodGhpcy5hbmdsZT09PTApIHtcclxuICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgYmxvY2s9dGhpcy5sZWZ0Q292ZXIsXHJcbiAgICAgICAgICB0aGlzLnAuY292ZXIubWFzcyxcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICB0aGlzLnAuY292ZXIuc3RhcnRWZWxvY2l0eSxcclxuICAgICAgICAgIHRoaXMucC5jb3Zlci5mbGV4aWJpbGl0eSxcclxuICAgICAgICAgIDAsXHJcbiAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+dGhpcy5zZXQoYW5nbGUvMixoZWlnaHQpLFxyXG4gICAgICAgICAgKGFuZ2xlLGhlaWdodCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0KGFuZ2xlLzIsMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2hlZXRCbG9ja3MoYW5nbGU/IFBJLzI6IDAsJ2Nsb3NlZCcpO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHByb2dyZXNzQ2xiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZihyaWdodCAmJiByaWdodC5zdGF0ZT09PSdjbG9zZWQnICYmIHJpZ2h0LmFuZ2xlPD1QSS8yKSB7XHJcbiAgICAgICAgICBibG9jayA9IHNpemU8cmlnaHQuZ2V0U2l6ZSgpPyB0aGlzLnNwbGl0U2hlZXRCbG9jayh0aGlzLnNoZWV0QmxvY2tzLmxlbmd0aC0xLCBzaXplKVswXTogcmlnaHQ7XHJcbiAgICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgICBibG9jayxcclxuICAgICAgICAgICAgdGhpcy5wLnBhZ2UubWFzcypibG9jay5nZXRTaXplKCksXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIHRoaXMucC5wYWdlLnN0YXJ0VmVsb2NpdHksXHJcbiAgICAgICAgICAgIHRoaXMucC5wYWdlLmZsZXhpYmlsaXR5LFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+YmxvY2suc2V0KHRoaXMuZ2V0Q2xvc2VkQmxvY2tBbmdsZShhbmdsZSksJ29wZW5lZCcsaGVpZ2h0KSxcclxuICAgICAgICAgICAgQm9vay5maW5pc2hBbmltYXRpb25DbGIuYmluZCh7Ym9vazogdGhpcywgYmxvY2t9KSxcclxuICAgICAgICAgICAgcHJvZ3Jlc3NDbGJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5hbmdsZT09PVBJLzIgfHwgdGhpcy5hbmdsZSA9PT0gMypQSS8yKSB7XHJcbiAgICAgICAgICByZXMgPSB0aGlzLmNvbm5lY3RQaHlzaWNzKFxyXG4gICAgICAgICAgICBibG9jaz10aGlzLnJpZ2h0Q292ZXIsXHJcbiAgICAgICAgICAgIHRoaXMucC5jb3Zlci5tYXNzLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICB0aGlzLnAuY292ZXIuc3RhcnRWZWxvY2l0eSxcclxuICAgICAgICAgICAgdGhpcy5wLmNvdmVyLmZsZXhpYmlsaXR5LFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+IHtcclxuICAgICAgICAgICAgICB0aGlzLnNldChQSS8yK2FuZ2xlLzIsaGVpZ2h0KTtcclxuICAgICAgICAgICAgICBpZihhbmdsZTxQSS8yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNoZWV0QmxvY2tzKFBJLzIrMWUtNywnY2xvc2VkJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAoYW5nbGUsaGVpZ2h0KT0+dGhpcy5zZXQoUEkvMithbmdsZS8yLDApLFxyXG4gICAgICAgICAgICBwcm9ncmVzc0NsYlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbiAgfVxyXG5cclxuICAvLyB9XHJcblxyXG4gIGNsZWFySG92ZXJJbmZvKCkge1xyXG4gICAgdGhpcy5wYWdlTWFuYWdlci50dXJuT25FdmVudHMoKTtcclxuICAgIGRlbGV0ZSB0aGlzLmhvdmVySW5mby5ibG9jay5mb3JjZTtcclxuICAgIGRlbGV0ZSB0aGlzLmhvdmVySW5mby5ibG9jay5jb3JuZXJGb3JjZTtcclxuICAgIGRlbGV0ZSB0aGlzLmhvdmVySW5mbztcclxuICB9XHJcblxyXG4gIHhTZWdtZW50KCkge1xyXG4gICAgY29uc3QgYm94cyA9IHRoaXMudG1wLmJveHMsIHJlcyA9IHt9O1xyXG4gICAgaWYodGhpcy5sZWZ0Q292ZXIucGh5c2ljSWQpIHtcclxuICAgICAgYm94c1swXS5zZXRGcm9tT2JqZWN0KHRoaXMucmlnaHRDb3Zlci50aHJlZSk7XHJcbiAgICAgIHJlcy5taW4gPSAtKHJlcy5tYXggPSBib3hzWzBdLm1heC54KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5yaWdodENvdmVyLnBoeXNpY0lkKSB7XHJcbiAgICAgIGJveHNbMF0uc2V0RnJvbU9iamVjdCh0aGlzLmxlZnRDb3Zlci50aHJlZSk7XHJcbiAgICAgIHJlcy5tYXggPSAtKHJlcy5taW4gPSBib3hzWzBdLm1pbi54KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBib3hzWzBdLnNldEZyb21PYmplY3QodGhpcy5sZWZ0Q292ZXIudGhyZWUpO1xyXG4gICAgICBib3hzWzFdLnNldEZyb21PYmplY3QodGhpcy5yaWdodENvdmVyLnRocmVlKTtcclxuICAgICAgYm94c1swXS51bmlvbihib3hzWzFdKTtcclxuICAgICAgcmVzLm1pbiA9IGJveHNbMF0ubWluLng7XHJcbiAgICAgIHJlcy5tYXggPSBib3hzWzBdLm1heC54O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIGNvbXB1dGVUYXJnZXQocG9pbnQpIHtcclxuICAgIGxldCB7eCwgeX0gPSBwb2ludCwgc2VnID0gdGhpcy54U2VnbWVudCgpLCBhbmdsZTtcclxuICAgIGFuZ2xlID0gKHNlZy5tYXgteCkvKHNlZy5tYXgtc2VnLm1pbikqTWF0aC5QSTtcclxuICAgIC8vIGFuZ2xlID0gTWF0aC5hY29zKHgvTWF0aC5zcXJ0KHgqeCt5KnkpKTtcclxuICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmRyYWdBbmdsZSwgTWF0aC5taW4oTWF0aC5QSS10aGlzLmRyYWdBbmdsZSwgYW5nbGUpKTtcclxuICB9XHJcblxyXG4gIG9uUGlja0NhbGxiYWNrKG9iamVjdCkge1xyXG4gICAgbGV0IHJlcyA9IGZhbHNlO1xyXG4gICAgY29uc3QgYmxvY2sgPSBvYmplY3Qub2JqZWN0LnVzZXJEYXRhLnNlbGYsXHJcbiAgICAgICAgICBwID0gey4uLm9iamVjdC51dn0sIGkgPSBvYmplY3QuZmFjZS5tYXRlcmlhbEluZGV4O1xyXG4gICAgaWYoaTwyKSB7XHJcbiAgICAgIHAueCA9IGk9PT0wPyBwLng6IDEtcC54O1xyXG4gICAgICBpZihibG9jay5jb3JuZXJUYXJnZXQudGVzdEludGVyc2VjdGlvbihudWxsLCBwKSAmJiBibG9jay5waHlzaWNJZCkge1xyXG4gICAgICAgIGlmKHRoaXMuaG92ZXJJbmZvKSB7XHJcbiAgICAgICAgICB0aGlzLmNsZWFySG92ZXJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJsb2NrLmZvcmNlID0gU2hlZXRQaHlzaWNzLmRyYWdGb3JjZUNsYjtcclxuICAgICAgICBibG9jay5jb3JuZXJGb3JjZSA9IFNoZWV0UGh5c2ljcy5nZXREcmFnQ29ybmVyRm9yY2VDbGIodGhpcy5jb21wdXRlVGFyZ2V0KG9iamVjdC5wb2ludCkpO1xyXG4gICAgICAgIHRoaXMuZHJhZ0luZm8gPSB7XHJcbiAgICAgICAgICBvYmplY3QsXHJcbiAgICAgICAgICBibG9ja1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnBhZ2VNYW5hZ2VyLnR1cm5PZmZFdmVudHMoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIG9uRHJhZ0NhbGxiYWNrKHBvaW50KSB7XHJcbiAgICBjb25zdCBibG9jayA9IHRoaXMuZHJhZ0luZm8uYmxvY2ssIHAgPSBibG9jay5nZXRQcm9wcygpO1xyXG4gICAgYmxvY2suZm9yY2UgPSBTaGVldFBoeXNpY3MuZHJhZ0ZvcmNlQ2xiO1xyXG4gICAgYmxvY2suY29ybmVyRm9yY2UgPSBTaGVldFBoeXNpY3MuZ2V0RHJhZ0Nvcm5lckZvcmNlQ2xiKHRoaXMuY29tcHV0ZVRhcmdldChwb2ludCkpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBvblJlbGVhc2VDYWxsYmFjaygpIHtcclxuICAgIGRlbGV0ZSB0aGlzLmRyYWdJbmZvLmJsb2NrLmZvcmNlO1xyXG4gICAgZGVsZXRlIHRoaXMuZHJhZ0luZm8uYmxvY2suY29ybmVyRm9yY2U7XHJcbiAgICBkZWxldGUgdGhpcy5kcmFnSW5mbztcclxuICAgIHRoaXMucGFnZU1hbmFnZXIudHVybk9uRXZlbnRzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRGbGlwcGluZyhpKSB7XHJcbiAgICByZXR1cm4gaT8gdGhpcy5nZXRMZWZ0RmxpcHBpbmcoKTogdGhpcy5nZXRSaWdodEZsaXBwaW5nKCk7XHJcbiAgfVxyXG5cclxuICBmbGlwKGksIHNpemU9MSkge1xyXG4gICAgcmV0dXJuIGk/IHRoaXMuZmxpcExlZnQoc2l6ZSk6IHRoaXMuZmxpcFJpZ2h0KHNpemUpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlTW91c2UoZW5hYmxlKSB7XHJcbiAgICB0aGlzLm1vdXNlQ29udHJvbGxlciA9IGVuYWJsZTtcclxuICB9XHJcblxyXG4gIGNvcm5lckNhbGxiYWNrKGUsIGRhdGEpIHtcclxuICAgIGlmKHRoaXMubW91c2VDb250cm9sbGVyKSB7XHJcbiAgICAgIGNvbnN0IHtpLCBufSA9IGRhdGEuZGF0YTtcclxuICAgICAgaWYoZS50eXBlPT09J21vdXNlb3ZlcicpIHtcclxuICAgICAgICBpZih0aGlzLmhvdmVySW5mbyAmJiB0aGlzLmhvdmVySW5mby5wZW5kaW5ncyE9PXVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgKyt0aGlzLmhvdmVySW5mby5wZW5kaW5ncztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBpZih0aGlzLmhvdmVySW5mbykge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1dyb25nIHN0YXRlOiBlbGVtZW50IGlzIGFscmVhZHkgaG92ZXInKTtcclxuICAgICAgICAgICAgaWYodGhpcy5ob3ZlckluZm8ubiE9PW4pIHtcclxuICAgICAgICAgICAgICB0aGlzLmNsZWFySG92ZXJJbmZvKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKCF0aGlzLmhvdmVySW5mbyAmJiAhdGhpcy5kcmFnSW5mbykge1xyXG4gICAgICAgICAgICBsZXQgcmVzID0gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdmVyQW5nbGUgPSAwLjAyLFxyXG4gICAgICAgICAgICAgICAgICBob3ZlciA9IHRoaXMuZ2V0QmxvY2tCeVBhZ2UobiksXHJcbiAgICAgICAgICAgICAgICAgIHBvc3NpYmxlID0gdGhpcy5nZXRGbGlwcGluZyhpKTtcclxuICAgICAgICAgICAgaWYobj4xICYmIG48MioodGhpcy5wLnNoZWV0cysxKSAmJiBob3Zlci5waHlzaWNJZCAmJiAoaG92ZXIuYW5nbGU8aG92ZXJBbmdsZSB8fCBob3Zlci5hbmdsZT5NYXRoLlBJLWhvdmVyQW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgcmVzID0gUHJvbWlzZS5yZXNvbHZlKGhvdmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGhvdmVyPT09cG9zc2libGUpIHtcclxuICAgICAgICAgICAgICBjb25zdCBzaGVldEJsb2NrcyA9IFtcclxuICAgICAgICAgICAgICAgIHRoaXMubGVmdENvdmVyLFxyXG4gICAgICAgICAgICAgICAgLi4udGhpcy5zaGVldEJsb2NrcyxcclxuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRDb3ZlclxyXG4gICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgY29uc3QgaiA9IHNoZWV0QmxvY2tzLmluZGV4T2YoaG92ZXIpLCBuZXh0QmxvY2sgPSB+aj8gc2hlZXRCbG9ja3NbaisyKmktMV06IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICBpZighbmV4dEJsb2NrIHx8ICFuZXh0QmxvY2sucGh5c2ljSWQgfHwgbmV4dEJsb2NrLmFuZ2xlPmhvdmVyQW5nbGUgJiYgbmV4dEJsb2NrLmFuZ2xlPE1hdGguUEktaG92ZXJBbmdsZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gdGhpcy5mbGlwKGksIDEpLnRoZW4oKGJsb2NrKT0+IHtcclxuICAgICAgICAgICAgICAgICAgaWYoIWJsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaG92ZXJJbmZvO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRQaHlzaWNzLnNldFBhcmFtZXRyKGJsb2NrLnBoeXNpY0lkLCAndmVsb2NpdHknLCAwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICBwZW5kaW5nczogMVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzLnRoZW4oKGJsb2NrKT0+IHtcclxuICAgICAgICAgICAgICBpZih0aGlzLmhvdmVySW5mbyAmJiB0aGlzLmhvdmVySW5mby5wZW5kaW5nczwxKSB7XHJcbiAgICAgICAgICAgICAgICBibG9jayA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmhvdmVySW5mbztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYoYmxvY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFnZU1hbmFnZXIudHVybk9mZkV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgIHAgPSBibG9jay5nZXRQcm9wcygpO1xyXG4gICAgICAgICAgICAgICAgYmxvY2suZm9yY2UgPSB0aGlzLnNoZWV0UGh5c2ljcy5nZXRUYXJnZXRGb3JjZUNsYihwLm1hc3MqYmxvY2suZ2V0U2l6ZSgpLCBpPyBNYXRoLlBJLWhvdmVyQW5nbGU6IGhvdmVyQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgYmxvY2suY29ybmVyRm9yY2UgPSAoKT0+IChpPyAtMTogMSkqU2hlZXRQaHlzaWNzLmhvdmVyQ29ybmVyRm9yY2VDbGIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRQaHlzaWNzLnNldFBhcmFtZXRyKGJsb2NrLnBoeXNpY0lkLCAnYW5nbGUnLCBpPyBNYXRoLlBJLTAuNSpob3ZlckFuZ2xlOiAwLjUqaG92ZXJBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvdmVySW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgbixcclxuICAgICAgICAgICAgICAgICAgYmxvY2tcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgxLzMwKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZih0aGlzLmhvdmVySW5mbyAmJiBlLnR5cGU9PT0nbW91c2VvdXQnKSB7XHJcbiAgICAgICAgaWYodGhpcy5ob3ZlckluZm8ucGVuZGluZ3MhPT11bmRlZmluZWQpIHtcclxuICAgICAgICAgIC0tdGhpcy5ob3ZlckluZm8ucGVuZGluZ3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobj09PXRoaXMuaG92ZXJJbmZvLm4pIHtcclxuICAgICAgICAgIHRoaXMuY2xlYXJIb3ZlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihlLnR5cGU9PT0nbW91c2Vkb3duJykge1xyXG4gICAgICAgIHRoaXMuY29ybmVyQ2xpY2tEYXRhID0ge1xyXG4gICAgICAgICAgeDogZS5wYWdlWCxcclxuICAgICAgICAgIHk6IGUucGFnZVlcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZS50eXBlPT09J2NsaWNrJykge1xyXG4gICAgICAgIGlmKE1hdGguc3FydChNYXRoLnBvdyh0aGlzLmNvcm5lckNsaWNrRGF0YS54LWUucGFnZVgsMikrTWF0aC5wb3codGhpcy5jb3JuZXJDbGlja0RhdGEueS1lLnBhZ2VZLDIpKTw1KSB7XHJcbiAgICAgICAgICBjb25zdCBob3ZlciA9IHRoaXMuZ2V0QmxvY2tCeVBhZ2Uobik7XHJcbiAgICAgICAgICBpZihob3Zlci5waHlzaWNJZCkge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IGhvdmVyLnBoeXNpY0lkLFxyXG4gICAgICAgICAgICAgICAgICBwcm9wcyA9IGhvdmVyLmdldFByb3BzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXRQaHlzaWNzLnNldFBhcmFtZXRyKGlkLCAndmVsb2NpdHknLCAoaT8gLTE6IDEpKnByb3BzLnN0YXJ0VmVsb2NpdHkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5jb3JuZXJDbGlja0RhdGE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZFNoZWV0QmxvY2socCwgYmxvY2spIHtcclxuICAgIHRoaXMuc2hlZXRCbG9ja3Muc3BsaWNlKHAsIDAsIGJsb2NrKTtcclxuICAgIHRoaXMuc3Vic2NyaWJlU2hlZXRCbG9jayhibG9jaywgMik7XHJcbiAgICB0aGlzLnRocmVlU2hlZXRCbG9ja3MuYWRkKGJsb2NrLnRocmVlKTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZVNoZWV0QmxvY2soYmxvY2ssIG9mZnNldCkge1xyXG4gICAgY29uc3QgZXZlbnRDb252ZXJ0ZXIgPSBuZXcgQ3VzdG9tRXZlbnRDb252ZXJ0ZXIodGhpcy52aXN1YWwud25kLCB0aGlzLnZpc3VhbC5kb2MsIENpcmNsZVRhcmdldC50ZXN0KSxcclxuICAgICAgICAgIHIgPSAwLjE1LFxyXG4gICAgICAgICAgdGFyZ2V0ID0gbmV3IENpcmNsZVRhcmdldCgxLTAuNSpyLCAwLjUqciwgcik7XHJcbiAgICB0YXJnZXQuYmxvY2sgPSBibG9jaztcclxuICAgIHRhcmdldC5jYWxsYmFjayA9IHRoaXMuY29ybmVyQ2FsbGJhY2suYmluZCh0aGlzKTtcclxuICAgIGV2ZW50Q29udmVydGVyLmFkZEN1c3RvbSh0YXJnZXQpO1xyXG4gICAgYmxvY2suY29ybmVyVGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgYmxvY2sudGhyZWUudXNlckRhdGEubW91c2VDYWxsYmFjayA9IChlLCBkYXRhKT0+IHtcclxuICAgICAgY29uc3QgaSA9IGRhdGEuZmFjZS5tYXRlcmlhbEluZGV4O1xyXG4gICAgICBpZihpPDIpIHtcclxuICAgICAgICBjb25zdCBuID0gaT09PTA/IG9mZnNldCsyKmJsb2NrLnAuZmlyc3Q6IG9mZnNldCsyKmJsb2NrLnAubGFzdC0xO1xyXG4gICAgICAgIGV2ZW50Q29udmVydGVyLmNvbnZlcnQoZSwge3g6IGk9PT0wPyBkYXRhLnV2Lng6IDEtZGF0YS51di54LCB5OiBkYXRhLnV2LnksIGksIG59KTtcclxuICAgICAgICB0aGlzLnBhZ2VNYW5hZ2VyLnRyYW5zZmVyRXZlbnRUb1RleHR1cmUobiwgZSwgZGF0YSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBibG9jay50aHJlZS51c2VyRGF0YS50b3VjaENhbGxiYWNrID0gKGUsIGRhdGEpPT4ge1xyXG4gICAgICBjb25zdCBpID0gZGF0YS5mYWNlLm1hdGVyaWFsSW5kZXg7XHJcbiAgICAgIGlmKGk8Mikge1xyXG4gICAgICAgIGNvbnN0IG4gPSBpPT09MD8gb2Zmc2V0KzIqYmxvY2sucC5maXJzdDogb2Zmc2V0KzIqYmxvY2sucC5sYXN0LTE7XHJcbiAgICAgICAgdGhpcy5wYWdlTWFuYWdlci50cmFuc2ZlckV2ZW50VG9UZXh0dXJlKG4sIGUsIGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhpcy52aXN1YWwuZHJhZy5hZGRUaHJlZShibG9jay50aHJlZSk7XHJcbiAgICB0aGlzLnZpc3VhbC5tb3VzZUV2ZW50cy5hZGRUaHJlZShibG9jay50aHJlZSk7XHJcbiAgICB0aGlzLnZpc3VhbC50b3VjaEV2ZW50cy5hZGRUaHJlZShibG9jay50aHJlZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVTaGVldEJsb2NrKGJsb2NrKSB7XHJcbiAgICB0aGlzLnZpc3VhbC5tb3VzZUV2ZW50cy5yZW1vdmVUaHJlZShibG9jay50aHJlZSk7XHJcbiAgICB0aGlzLnZpc3VhbC50b3VjaEV2ZW50cy5yZW1vdmVUaHJlZShibG9jay50aHJlZSk7XHJcbiAgICB0aGlzLnZpc3VhbC5kcmFnLnJlbW92ZVRocmVlKGJsb2NrLnRocmVlKTtcclxuICAgIHRoaXMudGhyZWVTaGVldEJsb2Nrcy5yZW1vdmUoYmxvY2sudGhyZWUpO1xyXG4gICAgYmxvY2suZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU2hlZXRCbG9ja3MoZmlyc3QsIHNpemUpIHtcclxuICAgIGNvbnN0IGJsb2NrcyA9IHRoaXMuc2hlZXRCbG9ja3Muc3BsaWNlKGZpcnN0LCBzaXplKTtcclxuICAgIGZvcihsZXQgYmxvY2sgb2YgYmxvY2tzKSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlU2hlZXRCbG9jayhibG9jayk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRUZXh0dXJlKG1hdGVyaWFsLCBuKSB7XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyLnNldFRleHR1cmUobWF0ZXJpYWwsIG4pO1xyXG4gIH1cclxuXHJcbiAgc2V0UGFnZVRleHR1cmUobWF0ZXJpYWwsIG4pIHtcclxuICAgIHRoaXMuc2V0VGV4dHVyZShtYXRlcmlhbCwgbisyKTtcclxuICB9XHJcblxyXG4gIHNldExlZnRDb3ZlclRleHR1cmUobWF0ZXJpYWwsIG4pIHtcclxuICAgIHRoaXMuc2V0VGV4dHVyZShtYXRlcmlhbCwgbik7XHJcbiAgfVxyXG5cclxuICBzZXRSaWdodENvdmVyVGV4dHVyZShtYXRlcmlhbCwgbikge1xyXG4gICAgdGhpcy5zZXRUZXh0dXJlKG1hdGVyaWFsLCBuKzIqKHRoaXMucC5zaGVldHMrMSkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZpbmlzaEFuaW1hdGlvbkNsYihhbmdsZSkge1xyXG4gICAgdGhpcy5ibG9jay5zZXQodGhpcy5ib29rLmdldENsb3NlZEJsb2NrQW5nbGUoYW5nbGUpLmNsb3NlZEFuZ2xlLCdjbG9zZWQnLDApO1xyXG4gICAgY29uc3QgaSA9IHRoaXMuYm9vay5zaGVldEJsb2Nrcy5pbmRleE9mKHRoaXMuYmxvY2spO1xyXG4gICAgaWYofmkpIHtcclxuICAgICAgaWYoYW5nbGU9PT0wKSB7XHJcbiAgICAgICAgdGhpcy5ib29rLm1lcmdlU2hlZXRCbG9ja3MoaSwgdGhpcy5ib29rLnNoZWV0QmxvY2tzLmxlbmd0aC1pKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB0aGlzLmJvb2subWVyZ2VTaGVldEJsb2NrcygwLCBpKzEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxjQmxvY2tGb3JjZShibG9jaywgb2JqZWN0LCBhbmdsZSwgdmVsb2NpdHksIGNvcm5lckhlaWdodCkge1xyXG4gICAgcmV0dXJuIGJsb2NrLmZvcmNlPyBibG9jay5mb3JjZShvYmplY3QsIGFuZ2xlLCB2ZWxvY2l0eSwgY29ybmVySGVpZ2h0KTogMDtcclxuICB9XHJcblxyXG4gIGNhbGNCbG9ja0Nvcm5lckZvcmNlKGJsb2NrLCBvYmplY3QsIGFuZ2xlLCB2ZWxvY2l0eSwgY29ybmVySGVpZ2h0KSB7XHJcbiAgICByZXR1cm4gYmxvY2suY29ybmVyRm9yY2U/IGJsb2NrLmNvcm5lckZvcmNlKG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpOiAwO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5QmVmb3JlQW5pbWF0aW9uKCkge1xyXG4gICAgbGV0IHJlcztcclxuICAgIGlmKHRoaXMuYW5pbWF0aW9uTm90aWZpY2F0aW9uKSB7XHJcbiAgICAgIHJlcyA9IFByb21pc2UucmVqZWN0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5hbmltYXRpb25Ob3RpZmljYXRpb24gPSB0cnVlO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe1xyXG4gICAgICAgIHR5cGU6ICdiZWZvcmVBbmltYXRpb24nXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXMgPSB0aGlzLmxheWVyTWFuYWdlci5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5QWZ0ZXJBbmltYXRpb24oKSB7XHJcbiAgICBpZih0aGlzLmFuaW1hdGlvbk5vdGlmaWNhdGlvbikge1xyXG4gICAgICBkZWxldGUgdGhpcy5hbmltYXRpb25Ob3RpZmljYXRpb247XHJcbiAgICAgIHRoaXMubGF5ZXJNYW5hZ2VyLnNob3coKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgICB0eXBlOiAnYWZ0ZXJBbmltYXRpb24nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29ubmVjdFBoeXNpY3MoYmxvY2ssIG1hc3MsIGFuZ2xlLCB2ZWxvY2l0eSwgZmxleGliaWxpdHksIGNvdmVySGVpZ2h0LCBzaW11bGF0ZUNsYiwgcmVtb3ZlQ2xiLCBwcm9ncmVzc0NsYikge1xyXG4gICAgY29uc3QgdHlwZSA9ICgpPT4gdGhpcy5ob3ZlckluZm8/ICdob3Zlcic6ICh0aGlzLmRyYWdJbmZvPyAnZHJhZyc6ICdmcmVlJyksXHJcbiAgICAgIHJlcyA9IHRoaXMuc2hlZXRQaHlzaWNzLmdldFNpemUoKT8gUHJvbWlzZS5yZXNvbHZlKCk6IHRoaXMubm90aWZ5QmVmb3JlQW5pbWF0aW9uKCk7XHJcbiAgICByZXR1cm4gcmVzLnRoZW4oKCk9PiB7XHJcbiAgICAgIGJsb2NrLnBoeXNpY0lkID0gdGhpcy5zaGVldFBoeXNpY3MuYWRkT2JqZWN0KFxyXG4gICAgICAgIG1hc3MsXHJcbiAgICAgICAgYW5nbGUsXHJcbiAgICAgICAgdmVsb2NpdHksXHJcbiAgICAgICAgZmxleGliaWxpdHksXHJcbiAgICAgICAgY292ZXJIZWlnaHQsXHJcbiAgICAgICAgKGFuZ2wsIGNoKT0+IHtcclxuICAgICAgICAgIHNpbXVsYXRlQ2xiKGFuZ2wsIGNoKTtcclxuICAgICAgICAgIHByb2dyZXNzQ2xiKGJsb2NrLCBNYXRoLmFicyhhbmdsZS1hbmdsKS9NYXRoLlBJLCAncHJvY2VzcycsIHR5cGUoKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAoYW5nbCwgY2gpPT4ge1xyXG4gICAgICAgICAgcmVtb3ZlQ2xiKGFuZ2wsIGNoKTtcclxuICAgICAgICAgIGRlbGV0ZSBibG9jay5waHlzaWNJZDtcclxuICAgICAgICAgIHByb2dyZXNzQ2xiKGJsb2NrLCBNYXRoLmFicyhhbmdsZS1hbmdsKS9NYXRoLlBJLCAnZmluaXNoJywgdHlwZSgpKTtcclxuICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLnNoZWV0UGh5c2ljcy5nZXRTaXplKCkpIHtcclxuICAgICAgICAgICAgICB0aGlzLm5vdGlmeUFmdGVyQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgKG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpPT4gdGhpcy5jYWxjQmxvY2tGb3JjZShibG9jaywgb2JqZWN0LCBhbmdsZSwgdmVsb2NpdHksIGNvcm5lckhlaWdodCksXHJcbiAgICAgICAgKG9iamVjdCwgYW5nbGUsIHZlbG9jaXR5LCBjb3JuZXJIZWlnaHQpPT4gdGhpcy5jYWxjQmxvY2tDb3JuZXJGb3JjZShibG9jaywgb2JqZWN0LCBhbmdsZSwgdmVsb2NpdHksIGNvcm5lckhlaWdodClcclxuICAgICAgKTtcclxuICAgICAgcHJvZ3Jlc3NDbGIoYmxvY2ssIDAsICdpbml0JywgdHlwZSgpKTtcclxuICAgICAgcmV0dXJuIGJsb2NrO1xyXG4gICAgfSkuY2F0Y2goKCk9PiB1bmRlZmluZWQpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGR0KSB7XHJcbiAgICB0aGlzLmxhc3RNb3VzZVBvcy50Kz1kdDtcclxuICAgIGlmKHRoaXMuaXNQcm9jZXNzaW5nKCkgJiYgdGhpcy5sYXN0TW91c2VQb3MucGFnZVghPT11bmRlZmluZWQgJiYgdGhpcy5sYXN0TW91c2VQb3MudC0odGhpcy5sYXN0TW91c2VQb3MubGFzdFQgfHwgMCk+MC4yNSAmJiAhdGhpcy5ob3ZlckluZm8gJiYgIXRoaXMuZHJhZ0luZm8pIHtcclxuICAgICAgdGhpcy5sYXN0TW91c2VQb3MubGFzdFQgPSB0aGlzLmxhc3RNb3VzZVBvcy50O1xyXG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT4ge1xyXG4gICAgICAgICQodGhpcy52aXN1YWwuZWxlbWVudCkudHJpZ2dlcigkLkV2ZW50KCdtb3VzZW1vdmUnLCB0aGlzLmxhc3RNb3VzZVBvcykpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuc2hlZXRQaHlzaWNzLnNpbXVsYXRlKGR0KTtcclxuICB9XHJcblxyXG4gIHNwbGl0U2hlZXRCbG9jayhpLCBsZWZ0U2l6ZSkge1xyXG4gICAgY29uc3QgYmxvY2sgPSB0aGlzLnNoZWV0QmxvY2tzW2ldO1xyXG4gICAgaWYoYmxvY2sgJiYgbGVmdFNpemU8YmxvY2suZ2V0U2l6ZSgpKSB7XHJcbiAgICAgIGNvbnN0IG5ld0Jsb2NrID0gbmV3IFNoZWV0QmxvY2sodGhpcy52aXN1YWwsIHsuLi50aGlzLnAsIHNldFRleHR1cmU6IHRoaXMuc2V0UGFnZVRleHR1cmUuYmluZCh0aGlzKX0sIGJsb2NrLnAuZmlyc3QsIGJsb2NrLnAuZmlyc3QrbGVmdFNpemUsIGJsb2NrLmFuZ2xlLCBibG9jay5zdGF0ZSk7XHJcbiAgICAgIGJsb2NrLnNldChibG9jay5hbmdsZSwgYmxvY2suc3RhdGUsIGJsb2NrLmNvcm5lci5oZWlnaHQsIGJsb2NrLnAuZmlyc3QrbGVmdFNpemUsIGJsb2NrLnAubGFzdCk7XHJcbiAgICAgIHRoaXMuYWRkU2hlZXRCbG9jayhpLCBuZXdCbG9jayk7XHJcbiAgICAgIHJldHVybiBbbmV3QmxvY2ssIGJsb2NrXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1lcmdlU2hlZXRCbG9ja3MoZmlyc3QsIHNpemUpIHtcclxuICAgIGlmKGZpcnN0PHRoaXMuc2hlZXRCbG9ja3MubGVuZ3RoKSB7XHJcbiAgICAgIHNpemUgPSBNYXRoLm1pbih0aGlzLnNoZWV0QmxvY2tzLmxlbmd0aC1maXJzdCwgc2l6ZSk7XHJcbiAgICAgIGNvbnN0IGZpcnN0QmxvY2sgPSB0aGlzLnNoZWV0QmxvY2tzW2ZpcnN0XSwgbGFzdEJsb2NrID0gdGhpcy5zaGVldEJsb2Nrc1tmaXJzdCtzaXplLTFdO1xyXG4gICAgICBmaXJzdEJsb2NrLnNldChmaXJzdEJsb2NrLmFuZ2xlLCBmaXJzdEJsb2NrLnN0YXRlLCBmaXJzdEJsb2NrLmNvcm5lci5oZWlnaHQsIGZpcnN0QmxvY2sucC5maXJzdCwgbGFzdEJsb2NrLnAubGFzdCk7XHJcbiAgICAgIHRoaXMucmVtb3ZlU2hlZXRCbG9ja3MoZmlyc3QrMSwgc2l6ZS0xKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFNoZWV0QmxvY2tzKGFuZ2xlLCBzdGF0ZSkge1xyXG4gICAgaWYoc3RhdGU9PT0nY2xvc2VkJykge1xyXG4gICAgICB0aGlzLmNsb3NlZEFuZ2xlID0gYW5nbGU7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNoZWV0QmxvY2tzLmZvckVhY2goKHMpPT4ge1xyXG4gICAgICBpZighcy5waHlzaWNJZCkge1xyXG4gICAgICAgIHMuc2V0KGFuZ2xlLCBzdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0KGFuZ2xlLCBoZWlnaHQ9MCkge1xyXG4gICAgdGhpcy5hbmdsZSA9IGFuZ2xlO1xyXG4gICAgY29uc3QgUEkgPSBNYXRoLlBJO1xyXG4gICAgaWYoYW5nbGU8UEkvNCkge1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoMCk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRMZWZ0KC1QSS8yKzIqYW5nbGUpO1xyXG4gICAgICB0aGlzLmxlZnRDb3Zlci5zZXQoUEkvMiwnb3BlbmVkJyxoZWlnaHQpO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcygwLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KDApO1xyXG4gICAgICB0aGlzLnJpZ2h0Q292ZXIuc2V0KDAsJ2Nsb3NlZCcsMCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGFuZ2xlPDIqUEkvNCkge1xyXG4gICAgICBjb25zdCBhPTIqKGFuZ2xlLVBJLzQpO1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoYSk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRMZWZ0KC1hKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLzIrYSwnb3BlbmVkJyxoZWlnaHQpO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhhLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1hKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldChhLCdjbG9zZWQnLDApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTwzKlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS1QSS8yKTtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KFBJLzIpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtUEkvMik7XHJcbiAgICAgIHRoaXMubGVmdENvdmVyLnNldChQSSwnb3BlbmVkJywwKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSS8yKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldChhLCdvcGVuZWQnLGhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGFuZ2xlPDQqUEkvNCkge1xyXG4gICAgICBjb25zdCBhPTIqKGFuZ2xlLTMqUEkvNCkrUEkvMjtcclxuICAgICAgdGhpcy5iaW5kZXIuc2V0KGEpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtYSk7XHJcbiAgICAgIHRoaXMubGVmdENvdmVyLnNldChhLCdjbG9zZWQnLDApO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhhLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSS8yKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldChQSS8yLCdvcGVuZWQnLGhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGFuZ2xlPDUqUEkvNCkge1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoUEkpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0TGVmdCgtUEkpO1xyXG4gICAgICB0aGlzLmxlZnRDb3Zlci5zZXQoUEksJ2Nsb3NlZCcsMCk7XHJcblxyXG4gICAgICB0aGlzLnNldFNoZWV0QmxvY2tzKFBJLCdjbG9zZWQnKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSS8yLTIqKGFuZ2xlLVBJKSk7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoUEkvMiwnb3BlbmVkJyxoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTw2KlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS01KlBJLzQpO1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoUEktYSk7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRMZWZ0KC1QSSthKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLWEsJ2Nsb3NlZCcsMCk7XHJcblxyXG4gICAgICB0aGlzLnNldFNoZWV0QmxvY2tzKFBJLWEsJ2Nsb3NlZCcpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0UmlnaHQoLVBJK2EpO1xyXG4gICAgICB0aGlzLnJpZ2h0Q292ZXIuc2V0KFBJLzItYSwnb3BlbmVkJyxoZWlnaHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTw3KlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS02KlBJLzQpO1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoUEkvMik7XHJcblxyXG4gICAgICB0aGlzLmJpbmRlci5zZXRMZWZ0KC1QSS8yKTtcclxuICAgICAgdGhpcy5sZWZ0Q292ZXIuc2V0KFBJLWEsJ29wZW5lZCcsaGVpZ2h0KTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldFJpZ2h0KC1QSS8yKTtcclxuICAgICAgdGhpcy5yaWdodENvdmVyLnNldCgwLCdvcGVuZWQnLDApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihhbmdsZTw4KlBJLzQpIHtcclxuICAgICAgY29uc3QgYT0yKihhbmdsZS03KlBJLzQpO1xyXG4gICAgICB0aGlzLmJpbmRlci5zZXQoUEkvMi1hKTtcclxuXHJcbiAgICAgIHRoaXMuYmluZGVyLnNldExlZnQoLVBJLzIpO1xyXG4gICAgICB0aGlzLmxlZnRDb3Zlci5zZXQoUEkvMiwnb3BlbmVkJyxoZWlnaHQpO1xyXG5cclxuICAgICAgdGhpcy5zZXRTaGVldEJsb2NrcyhQSS8yLWEsJ2Nsb3NlZCcpO1xyXG5cclxuICAgICAgdGhpcy5iaW5kZXIuc2V0UmlnaHQoLVBJLzIrYSk7XHJcbiAgICAgIHRoaXMucmlnaHRDb3Zlci5zZXQoUEkvMi1hLCdjbG9zZWQnLDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZVNpZGVUZXh0dXJlKGNvbG9yKSB7XHJcbiAgICBjb25zdCBqQyA9ICQoJzxjYW52YXMgd2lkdGg9XCI4XCIgaGVpZ2h0PVwiOFwiPjwvY2FudmFzPicpO1xyXG4gICAgY29uc3QgY3R4ID0gakNbMF0uZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5maWxsU3R5bGUgPSBHcmFwaFV0aWxzLmNvbG9yMlJnYmEoY29sb3IsIDEpO1xyXG4gICAgY3R4LnJlY3QoMCwgMCwgOCwgNyk7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYShHcmFwaFV0aWxzLmludmVyc2VDb2xvcihjb2xvciwwLjUpLCAxKTtcclxuICAgIGN0eC5yZWN0KDAsIDcsIDgsIDEpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuICAgIHJldHVybiBqQ1swXTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBwcmVwYXJlUHJvcHMocHJvcHMpIHtcclxuICAgIHJldHVybiBCb29rLmNhbGNQcm9wcyhCb29rLm1lcmdlUHJvcHMoYm9va1Byb3BzKCksIHByb3BzKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWVyZ2VQcm9wcyhmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICBzZWNvbmQgPSBzZWNvbmQgfHwge307XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5maXJzdCxcclxuICAgICAgLi4uc2Vjb25kLFxyXG4gICAgICBzaGVldDoge1xyXG4gICAgICAgIC4uLmZpcnN0LnNoZWV0LFxyXG4gICAgICAgIC4uLnNlY29uZC5zaGVldCxcclxuICAgICAgfSxcclxuICAgICAgY292ZXI6IHtcclxuICAgICAgICAuLi5maXJzdC5jb3ZlcixcclxuICAgICAgICAuLi5zZWNvbmQuY292ZXIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhZ2U6IHtcclxuICAgICAgICAuLi5maXJzdC5wYWdlLFxyXG4gICAgICAgIC4uLnNlY29uZC5wYWdlLFxyXG4gICAgICB9LFxyXG4gICAgICBjc3NMYXllclByb3BzOiB7XHJcbiAgICAgICAgLi4uZmlyc3QuY3NzTGF5ZXJQcm9wcyxcclxuICAgICAgICAuLi5zZWNvbmQuY3NzTGF5ZXJQcm9wcyxcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYWxjUHJvcHMocHJvcHMpIHtcclxuICAgIGNvbnN0IHAgPSB7XHJcbiAgICAgIC4uLnByb3BzLFxyXG4gICAgICBzaGVldDoge1xyXG4gICAgICAgIC4uLnByb3BzLnNoZWV0XHJcbiAgICAgIH0sXHJcbiAgICAgIGNvdmVyOiB7XHJcbiAgICAgICAgLi4ucHJvcHMuc2hlZXQsXHJcbiAgICAgICAgLi4ucHJvcHMuY292ZXJcclxuICAgICAgfSxcclxuICAgICAgcGFnZToge1xyXG4gICAgICAgIC4uLnByb3BzLnNoZWV0LFxyXG4gICAgICAgIC4uLnByb3BzLnBhZ2VcclxuICAgICAgfSxcclxuICAgICAgY3NzTGF5ZXJQcm9wczoge1xyXG4gICAgICAgIC4uLnByb3BzLmNzc0xheWVyUHJvcHMsXHJcbiAgICAgICAgJFxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2NhbGUgPSAxMCxcclxuICAgIGhlaWdodCA9IHNjYWxlKnAuaGVpZ2h0LFxyXG4gICAgd2lkdGggPSBzY2FsZSpwLndpZHRoLFxyXG4gICAgZmxpcFByb2dyZXNzQ2xiID0gKCk9PiB1bmRlZmluZWQsXHJcbiAgICBzaGVldCA9IHtcclxuICAgICAgc2lkZVRleHR1cmU6IHAuc2hlZXQuc2lkZVRleHR1cmUgfHwgQm9vay5jcmVhdGVTaWRlVGV4dHVyZShwLnNoZWV0LmNvbG9yKSxcclxuICAgIH0sXHJcbiAgICBjb3ZlciA9IHtcclxuICAgICAgLi4uc2hlZXQsXHJcbiAgICAgIC4uLnAuY292ZXIsXHJcbiAgICAgIGRlcHRoOiBzY2FsZSpwLmNvdmVyLmRlcHRoLFxyXG4gICAgICB3aWR0aDogd2lkdGgsXHJcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxyXG4gICAgICBwYWRkaW5nOiBzY2FsZSpwLmNvdmVyLnBhZGRpbmdcclxuICAgIH0sXHJcbiAgICBwYWdlID0ge1xyXG4gICAgICAuLi5zaGVldCxcclxuICAgICAgLi4ucC5wYWdlLFxyXG4gICAgICBkZXB0aDogc2NhbGUqcC5wYWdlLmRlcHRoLFxyXG4gICAgICB3aWR0aDogY292ZXIud2lkdGggLSBjb3Zlci5wYWRkaW5nLFxyXG4gICAgICBoZWlnaHQ6IGNvdmVyLmhlaWdodCAtIDIqY292ZXIucGFkZGluZ1xyXG4gICAgfSxcclxuICAgIG1hcmtlciA9IHtcclxuICAgICAgdXNlOiBmYWxzZSxcclxuICAgICAgY29sb3I6IDBYRkYwMDAwLFxyXG4gICAgICBzaXplOiBzY2FsZSowLjAwMVxyXG4gICAgfTtcclxuICAgIGlmKGNvdmVyLmNvbG9yIT09c2hlZXQuY29sb3IgJiYgIXAuY292ZXIuc2lkZVRleHR1cmUpIHtcclxuICAgICAgY292ZXIuc2lkZVRleHR1cmUgPSBCb29rLmNyZWF0ZVNpZGVUZXh0dXJlKGNvdmVyLmNvbG9yKTtcclxuICAgIH1cclxuICAgIGlmKHBhZ2UuY29sb3IhPT1zaGVldC5jb2xvciAmJiAhcC5wYWdlLnNpZGVUZXh0dXJlKSB7XHJcbiAgICAgIHBhZ2Uuc2lkZVRleHR1cmUgPSBCb29rLmNyZWF0ZVNpZGVUZXh0dXJlKHBhZ2UuY29sb3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsuLi5wLCBzY2FsZSwgaGVpZ2h0LCB3aWR0aCwgZmxpcFByb2dyZXNzQ2xiLCBjb3ZlciwgcGFnZSwgbWFya2VyfTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQm9vay5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9vay5qcyIsImltcG9ydCB7JCwgVEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgQ29udHJvbGxlciBmcm9tICdDb250cm9sbGVyJztcclxuaW1wb3J0IHtwcm9wcyBhcyAgYm9va0NvbnRyb2xsZXJQcm9wc30gZnJvbSAnLi4vcHJvcHMvYm9va0NvbnRyb2xsZXInO1xyXG5pbXBvcnQgRXZlbnRzVG9BY3Rpb25zIGZyb20gJ0V2ZW50c1RvQWN0aW9ucyc7XHJcbmltcG9ydCBTdGF0cyBmcm9tICdzdGF0cy5qcyc7XHJcbmltcG9ydCBPYmplY3QzRFdhdGNoZXIgZnJvbSAnT2JqZWN0M0RXYXRjaGVyJztcclxuaW1wb3J0IEZ1bGxTY3JlZW4gZnJvbSAnRnVsbFNjcmVlbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29rQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihib29rLCB2aWV3LCBwcm9wcykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzID0gdHJ1ZTtcclxuICAgIHRoaXMuYm9vayA9IGJvb2s7XHJcbiAgICB0aGlzLnZpc3VhbCA9IGJvb2sudmlzdWFsO1xyXG4gICAgdGhpcy5wID0gQm9va0NvbnRyb2xsZXIucHJlcGFyZVByb3BzKHByb3BzKTtcclxuICAgIHRoaXMucC5ydGwgPSBib29rLnAucnRsO1xyXG4gICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvID0gdGhpcy52aXN1YWwud25kLmRldmljZVBpeGVsUmF0aW8gfHwgMTtcclxuXHJcbiAgICB0aGlzLm9yYml0ID0gYm9vay52aXN1YWwuZ2V0T3JiaXQoKTtcclxuICAgIGJvb2suc2V0RmxpcFByb2dyZXNzQ2xiKHRoaXMudXBkYXRlVmlld0lmU3RhdGUuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgdGhpcy5iaW5kQWN0aW9ucygpO1xyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHNtYXJ0UGFuOiAhdGhpcy5hY3Rpb25zWydjbWRTbWFydFBhbiddLmFjdGl2ZSxcclxuICAgICAgc2luZ2xlUGFnZTogdGhpcy5hY3Rpb25zWydjbWRTaW5nbGVQYWdlJ10uYWN0aXZlIHx8IHRoaXMuYWN0aW9uc1snY21kU2luZ2xlUGFnZSddLmFjdGl2ZUZvck1vYmlsZSAmJiB0aGlzLmRldmljZVBpeGVsUmF0aW8+MSxcclxuICAgICAgc3RhdHM6IHRoaXMuYWN0aW9uc1snY21kU3RhdHMnXS5hY3RpdmUsXHJcbiAgICAgIGxpZ2h0aW5nOiB0aGlzLnAubGlnaHRpbmcuZGVmYXVsdCxcclxuICAgICAgYWN0aXZlU2lkZTogMVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmJveHMgPSBbbmV3IFRIUkVFLkJveDMoKSwgbmV3IFRIUkVFLkJveDMoKV07XHJcbiAgICB0aGlzLmJvb2tXYXRjaGVyID0gbmV3IE9iamVjdDNEV2F0Y2hlcih0aGlzLnZpc3VhbCwgKCk9PiB7XHJcbiAgICAgIGlmKHRoaXMuc3RhdGUuc2luZ2xlUGFnZSkge1xyXG4gICAgICAgIGlmKHRoaXMuc3RhdGUuYWN0aXZlU2lkZSkge1xyXG4gICAgICAgICAgdGhpcy5ib3hzWzBdLnNldEZyb21PYmplY3QoYm9vay5yaWdodENvdmVyLnRocmVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmJveHNbMF0uc2V0RnJvbU9iamVjdChib29rLmxlZnRDb3Zlci50aHJlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYm94c1swXS5zZXRGcm9tT2JqZWN0KGJvb2subGVmdENvdmVyLnRocmVlKTtcclxuICAgICAgICB0aGlzLmJveHNbMV0uc2V0RnJvbU9iamVjdChib29rLnJpZ2h0Q292ZXIudGhyZWUpO1xyXG4gICAgICAgIHRoaXMuYm94c1swXS51bmlvbih0aGlzLmJveHNbMV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmJveHNbMF07XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYm9va1dhdGNoZXIuc2NhbGUgPSB0aGlzLnAuc2NhbGUuZGVmYXVsdDtcclxuICAgIHRoaXMuYm9vay5zZXRab29tKHRoaXMuYm9va1dhdGNoZXIuc2NhbGUsIHRoaXMuc3RhdGUuc2luZ2xlUGFnZSk7XHJcblxyXG4gICAgdGhpcy5TdGF0cyA9IG5ldyBTdGF0cygpO1xyXG4gICAgdGhpcy5TdGF0cy5kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIHRoaXMuU3RhdHMuZG9tRWxlbWVudC5zdHlsZS50b3AgPSAnMHB4JztcclxuXHJcbiAgICB0aGlzLnZpc3VhbC5zZXRFeHRyYUxpZ2h0aW5nKHRoaXMuc3RhdGUubGlnaHRpbmcpO1xyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgb25TY3JlZW5Nb2RlQ2hhbmdlZDogdGhpcy5vblNjcmVlbk1vZGVDaGFuZ2VkLmJpbmQodGhpcyksXHJcbiAgICAgIHN0YXRzOiB0aGlzLlN0YXRzLnVwZGF0ZS5iaW5kKHRoaXMuU3RhdHMpLFxyXG4gICAgICBvblVwZGF0ZVZpZXc6IHRoaXMudXBkYXRlVmlldy5iaW5kKHRoaXMpXHJcbiAgICB9XHJcbiAgICBGdWxsU2NyZWVuLmFkZEV2ZW50TGlzdGVuZXIodGhpcy52aWV3LmdldFBhcmVudENvbnRhaW5lcigpLm93bmVyRG9jdW1lbnQsIHRoaXMuYmluZHMub25TY3JlZW5Nb2RlQ2hhbmdlZCk7XHJcblxyXG4gICAgdGhpcy5jbWRTbWFydFBhbigpO1xyXG5cclxuICAgIGlmKHRoaXMudmlldy50ZW1wbGF0ZU9iamVjdC5hcHBMb2FkZWQpIHtcclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbih0aGlzLnZpZXcudGVtcGxhdGVPYmplY3QuYXBwTG9hZGVkKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJvb2suZW5hYmxlTG9hZGluZ0FuaW1hdGlvbih0aGlzLnAubG9hZGluZ0FuaW1hdGlvbi5ib29rKTtcclxuICAgIGlmKHRoaXMucC5sb2FkaW5nQW5pbWF0aW9uLnNraW4pIHtcclxuICAgICAgdGhpcy5pbml0TG9hZGluZ0FuaW1hdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYm9vay5lbmFibGVMb2FkaW5nQW5pbWF0aW9uKHRoaXMucC5sb2FkaW5nQW5pbWF0aW9uLmJvb2spO1xyXG4gICAgdGhpcy5ib29rLnNldEF1dG9SZXNvbHV0aW9uKHRoaXMucC5hdXRvUmVzb2x1dGlvbi5lbmFibGVkLCB0aGlzLnAuYXV0b1Jlc29sdXRpb24uY29lZmZpY2llbnQpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIEZ1bGxTY3JlZW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnZpZXcuZ2V0UGFyZW50Q29udGFpbmVyKCkub3duZXJEb2N1bWVudCwgdGhpcy5iaW5kcy5vblNjcmVlbk1vZGVDaGFuZ2VkKTtcclxuICAgIGRlbGV0ZSB0aGlzLmJvb2s7XHJcbiAgICBkZWxldGUgdGhpcy52aWV3O1xyXG4gICAgZGVsZXRlIHRoaXMudmlzdWFsO1xyXG4gIH1cclxuXHJcbiAgaW5pdExvYWRpbmdBbmltYXRpb24oKSB7XHJcbiAgICBjb25zdCBoYW5kbGVyID0gKCk9PiB7XHJcbiAgICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5ib29rLmdldFRvcFBhZ2VzKCk7XHJcbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgIGZvcihsZXQgbiBvZiBwYWdlcykge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5ib29rLmdldFBhZ2VTdGF0ZShuKTtcclxuICAgICAgICB2aXNpYmxlID0gc3RhdGU9PT11bmRlZmluZWQgfHwgc3RhdGU9PT0nbG9hZGluZyc7XHJcbiAgICAgICAgaWYodmlzaWJsZSkge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnd2lkTG9hZGluZycsIHtcclxuICAgICAgICB2aXNpYmxlXHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYm9vay5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVBbmltYXRpb24nLCBoYW5kbGVyKTtcclxuICAgIHRoaXMuYm9vay5hZGRFdmVudExpc3RlbmVyKCdhZnRlckFuaW1hdGlvbicsIGhhbmRsZXIpO1xyXG4gICAgdGhpcy5ib29rLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRQYWdlJywgaGFuZGxlcik7XHJcbiAgICB0aGlzLmJvb2suYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkUGFnZScsIGhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlTmF2aWdhdGlvbihlbmFibGUpIHtcclxuICAgIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzID0gZW5hYmxlO1xyXG4gIH1cclxuXHJcbiAgc2V0VG9jQ3RybCh0b2NDdHJsKSB7XHJcbiAgICB0aGlzLnRvY0N0cmwgPSB0b2NDdHJsO1xyXG4gICAgdGhpcy50b2NDdHJsLm9uQ2hhbmdlID0gdGhpcy51cGRhdGVWaWV3LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIHNldFByaW50ZXIocHJpbnRlcikge1xyXG4gICAgdGhpcy5wcmludGVyID0gcHJpbnRlcjtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgc2V0U291bmRzKHNvdW5kcykge1xyXG4gICAgdGhpcy5zb3VuZHMgPSBzb3VuZHM7XHJcbiAgICBzb3VuZHMuc2V0RW5hYmxlZCh0aGlzLmFjdGlvbnNbJ2NtZFNvdW5kcyddLmFjdGl2ZSk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG5cclxuICBvblNjcmVlbk1vZGVDaGFuZ2VkKGUpIHtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY2FuWm9vbUluKCkge1xyXG4gICAgcmV0dXJuICF0aGlzLnN0YXRlLnNtYXJ0UGFuIHx8IE1hdGguYWJzKHRoaXMuYm9va1dhdGNoZXIuc2NhbGUtdGhpcy5wLnNjYWxlLm1heCk+dGhpcy5wLmVwcztcclxuICB9XHJcblxyXG4gIGNhblpvb21PdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuc3RhdGUuc21hcnRQYW4gfHwgTWF0aC5hYnModGhpcy5ib29rV2F0Y2hlci5zY2FsZS10aGlzLnAuc2NhbGUubWluKT50aGlzLnAuZXBzO1xyXG4gIH1cclxuXHJcbiAgY2FuRGVmYXVsdFpvb20oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5zbWFydFBhbjtcclxuICB9XHJcblxyXG4gIHNldEJvb2tab29tKHNjYWxlKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICBpZih0aGlzLmJvb2tXYXRjaGVyLnNjYWxlPT09c2NhbGUpIHtcclxuICAgICAgICB0aGlzLmJvb2suc2V0Wm9vbShzY2FsZSwgdGhpcy5zdGF0ZS5zaW5nbGVQYWdlKTtcclxuICAgICAgfVxyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBjbWRab29tSW4oKSB7XHJcbiAgICBpZih0aGlzLnN0YXRlLnNtYXJ0UGFuKSB7XHJcbiAgICAgIHRoaXMuYm9va1dhdGNoZXIuc2NhbGUgPSBNYXRoLm1pbih0aGlzLnAuc2NhbGUubWF4LCB0aGlzLmJvb2tXYXRjaGVyLnNjYWxlK3RoaXMucC5zY2FsZS5kZWx0YSk7XHJcbiAgICAgIHRoaXMuc2V0Qm9va1pvb20odGhpcy5ib29rV2F0Y2hlci5zY2FsZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5vcmJpdC56b29tSW4oNi42KnRoaXMucC5zY2FsZS5kZWx0YS8wLjMyKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY21kWm9vbU91dCgpIHtcclxuICAgIGlmKHRoaXMuc3RhdGUuc21hcnRQYW4pIHtcclxuICAgICAgdGhpcy5ib29rV2F0Y2hlci5zY2FsZSA9IE1hdGgubWF4KHRoaXMucC5zY2FsZS5taW4sIHRoaXMuYm9va1dhdGNoZXIuc2NhbGUtdGhpcy5wLnNjYWxlLmRlbHRhKTtcclxuICAgICAgdGhpcy5zZXRCb29rWm9vbSh0aGlzLmJvb2tXYXRjaGVyLnNjYWxlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLm9yYml0Lnpvb21PdXQoNi42KnRoaXMucC5zY2FsZS5kZWx0YS8wLjMyKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY21kRGVmYXVsdFpvb20oKSB7XHJcbiAgICBpZih0aGlzLnN0YXRlLnNtYXJ0UGFuKSB7XHJcbiAgICAgIHRoaXMuYm9va1dhdGNoZXIuc2NhbGUgPSB0aGlzLnAuc2NhbGUuZGVmYXVsdDtcclxuICAgICAgdGhpcy5zZXRCb29rWm9vbSh0aGlzLmJvb2tXYXRjaGVyLnNjYWxlKTtcclxuICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbWRUb2MoKSB7XHJcbiAgICBpZih0aGlzLnRvY0N0cmwpIHtcclxuICAgICAgdGhpcy50b2NDdHJsLnRvZ2xlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbWRGYXN0QmFja3dhcmQoKSB7XHJcbiAgICB0aGlzLnN0YXJ0RmxpcCh0aGlzLmJvb2suZmxpcExlZnQoNSkpO1xyXG4gIH1cclxuXHJcbiAgY21kQmFja3dhcmQoKSB7XHJcbiAgICBpZih0aGlzLnN0YXRlLnNpbmdsZVBhZ2UpIHtcclxuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVTaWRlID0gKHRoaXMuZ2V0UGFnZSgpKzEpJTI7XHJcbiAgICAgIGlmKHRoaXMuc3RhdGUuYWN0aXZlU2lkZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlU2lkZSA9IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBMZWZ0KDEpKS50aGVuKChibG9jayk9PiB7XHJcbiAgICAgICAgICBpZihibG9jaykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZVNpZGUgPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBMZWZ0KDEpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNtZEZvcndhcmQoKSB7XHJcbiAgICBpZih0aGlzLnN0YXRlLnNpbmdsZVBhZ2UpIHtcclxuICAgICAgdGhpcy5zdGF0ZS5hY3RpdmVTaWRlID0gKHRoaXMuZ2V0UGFnZSgpKzEpJTI7XHJcbiAgICAgIGlmKCF0aGlzLnN0YXRlLmFjdGl2ZVNpZGUpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmFjdGl2ZVNpZGUgPSAxO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc3RhcnRGbGlwKHRoaXMuYm9vay5mbGlwUmlnaHQoMSkpLnRoZW4oKGJsb2NrKT0+IHtcclxuICAgICAgICAgIGlmKGJsb2NrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWN0aXZlU2lkZSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXJ0RmxpcCh0aGlzLmJvb2suZmxpcFJpZ2h0KDEpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNtZEZhc3RGb3J3YXJkKCkge1xyXG4gICAgdGhpcy5zdGFydEZsaXAodGhpcy5ib29rLmZsaXBSaWdodCg1KSk7XHJcbiAgfVxyXG5cclxuICBjbWRTYXZlKCkge1xyXG4gICAgd2luZG93Lm9wZW4odGhpcy5wLmRvd25sb2FkVVJMLCAnX2JsYW5rJyk7XHJcbiAgfVxyXG5cclxuICBjbWRQcmludCgpIHtcclxuICAgIHRoaXMucHJpbnRlci5wcmludCgpO1xyXG4gIH1cclxuXHJcbiAgY21kRnVsbFNjcmVlbigpIHtcclxuICAgIGlmKCFGdWxsU2NyZWVuLmFjdGl2YXRlZCgpKSB7XHJcbiAgICAgIEZ1bGxTY3JlZW4ucmVxdWVzdCh0aGlzLnZpZXcuZ2V0UGFyZW50Q29udGFpbmVyKCkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIEZ1bGxTY3JlZW4uY2FuY2VsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbWRTbWFydFBhbigpIHtcclxuICAgIHRoaXMuc3RhdGUuc21hcnRQYW4gPSAhdGhpcy5zdGF0ZS5zbWFydFBhbjtcclxuICAgIGlmKHRoaXMuc3RhdGUuc21hcnRQYW4pIHtcclxuICAgICAgdGhpcy5vcmJpdC5taW5BemltdXRoQW5nbGUgPSAwO1xyXG4gICAgICB0aGlzLm9yYml0Lm1heEF6aW11dGhBbmdsZSA9IDA7XHJcbiAgICAgIHRoaXMub3JiaXQubWluUG9sYXJBbmdsZSA9IDA7XHJcbiAgICBcdHRoaXMub3JiaXQubWF4UG9sYXJBbmdsZSA9IE1hdGguUEkvNDtcclxuICAgICAgdGhpcy5ib29rV2F0Y2hlci5lbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLm9yYml0Lm1pbkF6aW11dGhBbmdsZSA9IC1JbmZpbml0eTtcclxuICAgICAgdGhpcy5vcmJpdC5tYXhBemltdXRoQW5nbGUgPSBJbmZpbml0eTtcclxuICAgICAgdGhpcy5vcmJpdC5taW5Qb2xhckFuZ2xlID0gMDtcclxuICAgIFx0dGhpcy5vcmJpdC5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSTtcclxuICAgICAgdGhpcy5ib29rV2F0Y2hlci5lbmFibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZFNpbmdsZVBhZ2UoKSB7XHJcbiAgICB0aGlzLnN0YXRlLnNpbmdsZVBhZ2UgPSAhdGhpcy5zdGF0ZS5zaW5nbGVQYWdlO1xyXG4gICAgdGhpcy5zZXRCb29rWm9vbSh0aGlzLmJvb2tXYXRjaGVyLnNjYWxlKTtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY21kU291bmRzKCkge1xyXG4gICAgaWYodGhpcy5zb3VuZHMpIHtcclxuICAgICAgdGhpcy5zb3VuZHMudG9nbGUoKTtcclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY21kU3RhdHMoKSB7XHJcbiAgICB0aGlzLnN0YXRlLnN0YXRzID0gIXRoaXMuc3RhdGUuc3RhdHM7XHJcbiAgICBpZih0aGlzLnN0YXRlLnN0YXRzKSB7XHJcbiAgICAgICQodGhpcy52aWV3LmdldENvbnRhaW5lcigpKS5hcHBlbmQodGhpcy5TdGF0cy5kb21FbGVtZW50KTtcclxuICAgICAgdGhpcy52aXN1YWwuYWRkUmVuZGVyQ2FsbGJhY2sodGhpcy5iaW5kcy5zdGF0cyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgJCh0aGlzLnZpZXcuZ2V0Q29udGFpbmVyKCkpLmZpbmQodGhpcy5TdGF0cy5kb21FbGVtZW50KS5yZW1vdmUoKTtcclxuICAgICAgdGhpcy52aXN1YWwucmVtb3ZlUmVuZGVyQ2FsbGJhY2sodGhpcy5iaW5kcy5zdGF0cyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGNtZExpZ2h0aW5nVXAoKSB7XHJcbiAgICB0aGlzLnN0YXRlLmxpZ2h0aW5nID0gTWF0aC5taW4odGhpcy5zdGF0ZS5saWdodGluZyt0aGlzLnAubGlnaHRpbmcuZGVsdGEsIHRoaXMucC5saWdodGluZy5tYXgpO1xyXG4gICAgdGhpcy52aXN1YWwuc2V0RXh0cmFMaWdodGluZyh0aGlzLnN0YXRlLmxpZ2h0aW5nKTtcclxuICAgIHRoaXMudXBkYXRlVmlldygpO1xyXG4gIH1cclxuXHJcbiAgY21kTGlnaHRpbmdEb3duKCkge1xyXG4gICAgdGhpcy5zdGF0ZS5saWdodGluZyA9IE1hdGgubWF4KHRoaXMuc3RhdGUubGlnaHRpbmctdGhpcy5wLmxpZ2h0aW5nLmRlbHRhLCB0aGlzLnAubGlnaHRpbmcubWluKTtcclxuICAgIHRoaXMudmlzdWFsLnNldEV4dHJhTGlnaHRpbmcodGhpcy5zdGF0ZS5saWdodGluZyk7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIGdvVG9QYWdlKHBhZ2UpIHtcclxuICAgIGlmKHRoaXMucC5ydGwpIHtcclxuICAgICAgcGFnZSA9IHRoaXMuYm9vay5nZXRQYWdlcygpLTEtcGFnZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBhZ2VOdW0gPSBNYXRoLm1heChNYXRoLm1pbihwYWdlLCB0aGlzLmJvb2suZ2V0UGFnZXMoKS0xKSwwKTtcclxuICAgIHRoaXMuc3RhdGUuYWN0aXZlU2lkZSA9IChwYWdlTnVtKzEpJTI7XHJcbiAgICBsZXQgdGFyZ2V0ID0gTWF0aC5tYXgoTWF0aC5taW4ocGFnZS0xK3BhZ2UlMiwgdGhpcy5ib29rLmdldFBhZ2VzKCktMSksMCksIGN1cnJlbnQgPSB0aGlzLmJvb2suZ2V0UGFnZSgpLCBmbGlwcyA9IFtdLCBjb3ZzID0gMDs7XHJcbiAgICBpZih0YXJnZXQhPWN1cnJlbnQpIHtcclxuICAgICAgaWYoY3VycmVudD09PTApIHtcclxuICAgICAgICBmbGlwcy5wdXNoKDEpO1xyXG4gICAgICAgIGN1cnJlbnQrPTE7XHJcbiAgICAgICAgKytjb3ZzO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoY3VycmVudD09PXRoaXMuYm9vay5nZXRQYWdlcygpLTEpIHtcclxuICAgICAgICBmbGlwcy5wdXNoKC0xKTtcclxuICAgICAgICBjdXJyZW50LT0yO1xyXG4gICAgICAgICsrY292cztcclxuICAgICAgfVxyXG4gICAgICBsZXQgY3YgPSAwO1xyXG4gICAgICBpZih0YXJnZXQ9PT0wKSB7XHJcbiAgICAgICAgY3YgPSAtMTtcclxuICAgICAgICB0YXJnZXQrPTE7XHJcbiAgICAgICAgKytjb3ZzO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYodGFyZ2V0PT09dGhpcy5ib29rLmdldFBhZ2VzKCktMSkge1xyXG4gICAgICAgIGN2ID0gMTtcclxuICAgICAgICB0YXJnZXQtPTI7XHJcbiAgICAgICAgKytjb3ZzO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHRhcmdldC1jdXJyZW50KSB7XHJcbiAgICAgICAgZmxpcHMucHVzaChNYXRoLmNlaWwoKHRhcmdldC1jdXJyZW50KS8yKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYoY3YpIHtcclxuICAgICAgICBmbGlwcy5wdXNoKGN2KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNldENsYiA9IChmbCwgdGltZSwgY2xiKT0+IHtcclxuICAgICAgc2V0VGltZW91dCgoKT0+IHtcclxuICAgICAgICBpZihmbDwwKSB7XHJcbiAgICAgICAgICB0aGlzLnN0YXJ0RmxpcCh0aGlzLmJvb2suZmxpcExlZnQoLWZsLCBjbGIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnN0YXJ0RmxpcCh0aGlzLmJvb2suZmxpcFJpZ2h0KGZsLCBjbGIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRpbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZihjb3ZzPT09Mikge1xyXG4gICAgICBzZXRDbGIoZmxpcHNbMF0sIDAsIChibG9jaywgcHJvZ3Jlc3MsIHN0YXRlKT0+IHtcclxuICAgICAgICBpZihzdGF0ZT09J2ZpbmlzaCcgJiYgcHJvZ3Jlc3M9PTEpIHtcclxuICAgICAgICAgIHNldENsYihmbGlwc1tmbGlwcy5sZW5ndGgtMV0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHNldENsYihmbGlwc1sxXSwgNTAwKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBsZXQgdGltZSA9IDA7XHJcbiAgICAgIGZvcihsZXQgZmwgb2YgZmxpcHMpIHtcclxuICAgICAgICBzZXRDbGIoZmwsIHRpbWUpO1xyXG4gICAgICAgIHRpbWUrPTI1MDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhcnRGbGlwKGZsaXBSZXMpIHtcclxuICAgIHJldHVybiBmbGlwUmVzPyBmbGlwUmVzLnRoZW4oKGJsb2NrKT0+IHtcclxuICAgICAgaWYoYmxvY2spIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoQXN5bmMoe1xyXG4gICAgICAgICAgdHlwZTogJ3N0YXJ0RmxpcCdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYmxvY2s7XHJcbiAgICB9KTogUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XHJcbiAgfVxyXG5cclxuICBlbmRGbGlwKGJsb2NrKSB7XHJcbiAgICB0aGlzLmRpc3BhdGNoQXN5bmMoe1xyXG4gICAgICB0eXBlOiAnZW5kRmxpcCdcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGJsb2NrO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFnZSgpIHtcclxuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmJvb2suZ2V0UGFnZSgpO1xyXG4gICAgcmV0dXJuIHBhZ2U/IE1hdGgubWluKHRoaXMuYm9vay5nZXRQYWdlKCkrdGhpcy5zdGF0ZS5hY3RpdmVTaWRlLCB0aGlzLmJvb2suZ2V0UGFnZXMoKS0xKTogMDtcclxuICB9XHJcblxyXG4gIGdldFBhZ2VGb3JHVUkoKSB7XHJcbiAgICBsZXQgbiA9ICh0aGlzLnN0YXRlLnNpbmdsZVBhZ2U/IHRoaXMuZ2V0UGFnZSgpOiB0aGlzLmJvb2suZ2V0UGFnZSgpKSsxO1xyXG4gICAgaWYodGhpcy5wLnJ0bCkge1xyXG4gICAgICBuID0gdGhpcy5ib29rLmdldFBhZ2VzKCktbisxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG47XHJcbiAgfVxyXG5cclxuICBpbnBQYWdlKGUsIGRhdGEpIHtcclxuICAgIHRoaXMuZ29Ub1BhZ2UoZGF0YS0xKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXdJZlN0YXRlKGJsb2NrLCBwcm9ncmVzcywgc3RhdGUsIHR5cGUpIHtcclxuICAgIGlmKHN0YXRlPT09J2luaXQnIHx8IHN0YXRlPT09J2ZpbmlzaCcpIHtcclxuICAgICAgc2V0VGltZW91dCh0aGlzLnVwZGF0ZVZpZXcuYmluZCh0aGlzKSwgMTAwKTtcclxuICAgIH1cclxuICAgIGlmKHN0YXRlPT09J2ZpbmlzaCcpIHtcclxuICAgICAgdGhpcy5lbmRGbGlwKGJsb2NrKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXdTdGF0ZSgpIHtcclxuICAgIHRoaXMudmlld1N0YXRlID0ge1xyXG4gICAgICAnY21kWm9vbUluJzoge1xyXG4gICAgICAgIGVuYWJsZTogdGhpcy5jYW5ab29tSW4oKSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFpvb21JbiddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kWm9vbU91dCc6IHtcclxuICAgICAgICBlbmFibGU6IHRoaXMuY2FuWm9vbU91dCgpLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kWm9vbU91dCddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kRGVmYXVsdFpvb20nOiB7XHJcbiAgICAgICAgZW5hYmxlOiB0aGlzLmNhbkRlZmF1bHRab29tKCksXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWREZWZhdWx0Wm9vbSddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLmNhbkRlZmF1bHRab29tKCkgJiYgTWF0aC5hYnModGhpcy5ib29rV2F0Y2hlci5zY2FsZS10aGlzLnAuc2NhbGUuZGVmYXVsdCk8dGhpcy5wLmVwc1xyXG4gICAgICB9LFxyXG4gICAgICAnY21kVG9jJzoge1xyXG4gICAgICAgIGVuYWJsZTogISF0aGlzLnRvY0N0cmwsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRUb2MnXS5lbmFibGVkICYmIHRoaXMudG9jQ3RybCxcclxuICAgICAgICBhY3RpdmU6IHRoaXMudG9jQ3RybCAmJiB0aGlzLnRvY0N0cmwudmlzaWJsZVxyXG4gICAgICB9LFxyXG4gICAgICAnaW5wUGFnZXMnOiB7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICB2YWx1ZTogdGhpcy5ib29rLmdldFBhZ2VzKClcclxuICAgICAgfSxcclxuICAgICAgJ2lucFBhZ2UnOiB7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBlbmFibGU6ICF0aGlzLmJvb2suaXNQcm9jZXNzaW5nKCkgJiYgdGhpcy5uYXZpZ2F0aW9uQ29udHJvbHMsXHJcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0UGFnZUZvckdVSSgpXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRTYXZlJzoge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFNhdmUnXS5lbmFibGVkICYmICEhdGhpcy5wLmRvd25sb2FkVVJMLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFByaW50Jzoge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFByaW50J10uZW5hYmxlZCAmJiAhIXRoaXMucHJpbnRlcixcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRGdWxsU2NyZWVuJzoge1xyXG4gICAgICAgIGVuYWJsZTogRnVsbFNjcmVlbi5hdmFpbGFibGUoKSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZEZ1bGxTY3JlZW4nXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogRnVsbFNjcmVlbi5hdmFpbGFibGUoKSAmJiBGdWxsU2NyZWVuLmFjdGl2YXRlZCgpXHJcbiAgICAgIH0sXHJcbiAgICAgICd3aWRTZXR0aW5ncyc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWyd3aWRTZXR0aW5ncyddLmVuYWJsZWQsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kU21hcnRQYW4nOiB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRoaXMuYWN0aW9uc1snY21kU21hcnRQYW4nXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogdGhpcy5zdGF0ZS5zbWFydFBhblxyXG4gICAgICB9LFxyXG4gICAgICAnY21kU2luZ2xlUGFnZSc6IHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRTaW5nbGVQYWdlJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IHRoaXMuc3RhdGUuc2luZ2xlUGFnZVxyXG4gICAgICB9LFxyXG4gICAgICAnY21kU291bmRzJzoge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiAgdGhpcy5hY3Rpb25zWydjbWRTb3VuZHMnXS5lbmFibGVkICYmICEhdGhpcy5zb3VuZHMsXHJcbiAgICAgICAgYWN0aXZlOiAhIXRoaXMuc291bmRzICYmIHRoaXMuc291bmRzLmVuYWJsZWRcclxuICAgICAgfSxcclxuICAgICAgJ2NtZFN0YXRzJzoge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbJ2NtZFN0YXRzJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IHRoaXMuc3RhdGUuc3RhdHNcclxuICAgICAgfSxcclxuICAgICAgJ2NtZExpZ2h0aW5nVXAnOiB7XHJcbiAgICAgICAgZW5hYmxlOiBNYXRoLmFicyh0aGlzLnN0YXRlLmxpZ2h0aW5nLXRoaXMucC5saWdodGluZy5tYXgpPnRoaXMucC5lcHMsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRMaWdodGluZ1VwJ10uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgICdjbWRMaWdodGluZ0Rvd24nOiB7XHJcbiAgICAgICAgZW5hYmxlOiBNYXRoLmFicyh0aGlzLnN0YXRlLmxpZ2h0aW5nLXRoaXMucC5saWdodGluZy5taW4pPnRoaXMucC5lcHMsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy5hY3Rpb25zWydjbWRMaWdodGluZ0Rvd24nXS5lbmFibGVkLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBsZWZ0ID0gdGhpcy5ib29rLmdldExlZnRGbGlwcGluZygpLFxyXG4gICAgICAgICAgcmlnaHQgPSB0aGlzLmJvb2suZ2V0UmlnaHRGbGlwcGluZygpO1xyXG4gICAgY29uc3QgZmxpcHBlcnNFbmFibGUgPSB7XHJcbiAgICAgIGNtZEZhc3RCYWNrd2FyZDogISFsZWZ0ICYmIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzLFxyXG4gICAgICBjbWRCYWNrd2FyZDogISFsZWZ0ICYmIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzLFxyXG4gICAgICBjbWRGb3J3YXJkOiAhIXJpZ2h0ICYmIHRoaXMubmF2aWdhdGlvbkNvbnRyb2xzLFxyXG4gICAgICBjbWRGYXN0Rm9yd2FyZDogISFyaWdodCAmJiB0aGlzLm5hdmlnYXRpb25Db250cm9sc1xyXG4gICAgfTtcclxuICAgIGZvcihsZXQgbmFtZSBvZiBPYmplY3Qua2V5cyhmbGlwcGVyc0VuYWJsZSkpIHtcclxuICAgICAgdGhpcy52aWV3U3RhdGVbbmFtZV0gPSB7XHJcbiAgICAgICAgZW5hYmxlOiBmbGlwcGVyc0VuYWJsZVtuYW1lXSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLmFjdGlvbnNbbmFtZV0uZW5hYmxlZCxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVmlldygpIHtcclxuICAgIGlmKHRoaXMudmlldykge1xyXG4gICAgICB0aGlzLnVwZGF0ZVZpZXdTdGF0ZSgpO1xyXG4gICAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXModGhpcy52aWV3U3RhdGUpKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LnNldFN0YXRlKG5hbWUsIHRoaXMudmlld1N0YXRlW25hbWVdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aW9ucygpIHtcclxuICAgIGNvbnN0IGlzU3dpcHBpbmcgPSAobmFtZSk9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMudG91Y2hDbWRTd2lwZS5lbmFibGVkICYmIHRoaXMuYWN0aW9ucy50b3VjaENtZFN3aXBlLmNvZGU9PT10aGlzLmFjdGlvbnNbbmFtZV0uY29kZSAmJiB0aGlzLnN0YXRlLnNtYXJ0UGFuICYmIHRoaXMuYm9va1dhdGNoZXIuc2NhbGU8PTE7XHJcbiAgICB9LCBjbWRzID0ge307XHJcblxyXG4gICAgZm9yKGxldCBuYW1lIGluIHRoaXMpIHtcclxuICAgICAgaWYobmFtZS5pbmRleE9mKCdjbWQnKT09PTApIHtcclxuICAgICAgICBjbWRzW25hbWVdID0ge1xyXG4gICAgICAgICAgYWN0aXZhdGU6ICguLi5hcmdzKT0+IHtcclxuICAgICAgICAgICAgaWYodGhpcy52aWV3U3RhdGUgJiYgdGhpcy52aWV3U3RhdGVbbmFtZV0uZW5hYmxlKSB7XHJcbiAgICAgICAgICAgICAgdGhpc1tuYW1lXSguLi5hcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi5jbWRzLFxyXG4gICAgICBjbWRQYW5MZWZ0OiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlKT0+IHRoaXMub3JiaXQuYWN0aW9ucy5wYW4oZSwge1xyXG4gICAgICAgICAgc3RhdGU6ICdtb3ZlJyxcclxuICAgICAgICAgIGR4OiAtdGhpcy5wLnBhbi5zcGVlZCxcclxuICAgICAgICAgIGR5OiAwXHJcbiAgICAgICAgfSlcclxuICAgICAgfSxcclxuICAgICAgY21kUGFuUmlnaHQ6IHtcclxuICAgICAgICBhY3RpdmF0ZTogKGUpPT4gdGhpcy5vcmJpdC5hY3Rpb25zLnBhbihlLCB7XHJcbiAgICAgICAgICBzdGF0ZTogJ21vdmUnLFxyXG4gICAgICAgICAgZHg6IHRoaXMucC5wYW4uc3BlZWQsXHJcbiAgICAgICAgICBkeTogMFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhblVwOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlKT0+IHRoaXMub3JiaXQuYWN0aW9ucy5wYW4oZSwge1xyXG4gICAgICAgICAgc3RhdGU6ICdtb3ZlJyxcclxuICAgICAgICAgIGR4OiAwLFxyXG4gICAgICAgICAgZHk6IC10aGlzLnAucGFuLnNwZWVkXHJcbiAgICAgICAgfSlcclxuICAgICAgfSxcclxuICAgICAgY21kUGFuRG93bjoge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSk9PiB0aGlzLm9yYml0LmFjdGlvbnMucGFuKGUsIHtcclxuICAgICAgICAgIHN0YXRlOiAnbW92ZScsXHJcbiAgICAgICAgICBkeDogMCxcclxuICAgICAgICAgIGR5OiB0aGlzLnAucGFuLnNwZWVkXHJcbiAgICAgICAgfSlcclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWRSb3RhdGU6IHtcclxuICAgICAgICBhY3RpdmF0ZTogdGhpcy5vcmJpdC5hY3Rpb25zLnJvdGF0ZVxyXG4gICAgICB9LFxyXG4gICAgICBtb3VzZUNtZERyYWdab29tOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlLCBkYXRhKT0+IHtcclxuICAgICAgICAgIGlmKGRhdGEuZHk+MCkge1xyXG4gICAgICAgICAgICB0aGlzLmNtZFpvb21PdXQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYoZGF0YS5keTwwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY21kWm9vbUluKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBtb3VzZUNtZFBhbjoge1xyXG4gICAgICAgIGFjdGl2YXRlOiB0aGlzLm9yYml0LmFjdGlvbnMucGFuXHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdXNlQ21kV2hlZWxab29tOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlKT0+IHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGlmKGUuZGVsdGFZPDApIHtcclxuICAgICAgICAgICAgdGhpcy5jbWRab29tT3V0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGUuZGVsdGFZPjApIHtcclxuICAgICAgICAgICAgdGhpcy5jbWRab29tSW4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kUm90YXRlOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlLCBkYXRhKT0+IHtcclxuICAgICAgICAgIGlmKCFpc1N3aXBwaW5nKCd0b3VjaENtZFJvdGF0ZScpKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5vcmJpdC5hY3Rpb25zLnJvdGF0ZShlLCBkYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kWm9vbToge1xyXG4gICAgICAgIGFjdGl2YXRlOiAoZSwgZGF0YSk9PiB7XHJcbiAgICAgICAgICBpZighaXNTd2lwcGluZygndG91Y2hDbWRab29tJykpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZihkYXRhLmR5PjApIHtcclxuICAgICAgICAgICAgICB0aGlzLmNtZFpvb21PdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGRhdGEuZHk8MCkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY21kWm9vbUluKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kUGFuOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6IChlLCBkYXRhKT0+IHtcclxuICAgICAgICAgIGlmKCFpc1N3aXBwaW5nKCd0b3VjaENtZFBhbicpKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5vcmJpdC5hY3Rpb25zLnBhbihlLCBkYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kU3dpcGU6IHtcclxuICAgICAgICBhY3RpdmF0ZTogKGUsIGRhdGEpPT4ge1xyXG4gICAgICAgICAgaWYoaXNTd2lwcGluZygndG91Y2hDbWRTd2lwZScpKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYoZGF0YS5zdGF0ZT09PSdzdGFydCcpIHtcclxuICAgICAgICAgICAgICBjb25zdCB0b3VjaCA9IChlLnRvdWNoZXMgfHwgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMpW3RoaXMuYWN0aW9ucy50b3VjaENtZFN3aXBlLmNvZGUtMV07XHJcbiAgICAgICAgICAgICAgdGhpcy5zd2lwZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHgwOiB0b3VjaC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHkwOiB0b3VjaC5wYWdlWSxcclxuICAgICAgICAgICAgICAgIHg6IHRvdWNoLnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgeTogdG91Y2gucGFnZVlcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoZGF0YS5zdGF0ZT09PSdtb3ZlJykge1xyXG4gICAgICAgICAgICAgIGlmKCF0aGlzLnN3aXBlRGF0YS5oYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXBlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgLi4udGhpcy5zd2lwZURhdGEsXHJcbiAgICAgICAgICAgICAgICAgIHg6IHRoaXMuc3dpcGVEYXRhLngrZGF0YS5keCxcclxuICAgICAgICAgICAgICAgICAgeTogdGhpcy5zd2lwZURhdGEueStkYXRhLmR5XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihNYXRoLmFicyh0aGlzLnN3aXBlRGF0YS54MC10aGlzLnN3aXBlRGF0YS54KT4xMDApIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zd2lwZURhdGEueDA+dGhpcy5zd2lwZURhdGEueD8gdGhpcy5jbWRGb3J3YXJkKCk6IHRoaXMuY21kQmFja3dhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zd2lwZURhdGEuaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN3aXBlRGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgd2lkU2V0dGluZ3M6IHtcclxuICAgICAgICBhY3RpdmF0ZTogKCk9PiB1bmRlZmluZWRcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGJpbmRBY3Rpb25zKCkge1xyXG4gICAgdGhpcy5lVG9BID0gbmV3IEV2ZW50c1RvQWN0aW9ucygkKHRoaXMudmlzdWFsLmVsZW1lbnQpKTtcclxuICAgIHRoaXMuZVRvQS5hZGRBY3Rpb24oKGUpPT4gZS5wcmV2ZW50RGVmYXVsdCgpLCAnY29udGV4dG1lbnUnLCBFdmVudHNUb0FjdGlvbnMubW91c2VCdXR0b25zLlJpZ2h0LCAwKTtcclxuXHJcbiAgICB0aGlzLmFjdGlvbnMgPSB0aGlzLmdldEFjdGlvbnMoKTtcclxuICAgIGZvcihsZXQgbmFtZSBvZiBPYmplY3Qua2V5cyh0aGlzLmFjdGlvbnMpKSB7XHJcbiAgICAgIGNvbnN0IGFjdGlvbiA9IHtcclxuICAgICAgICAuLi50aGlzLmFjdGlvbnNbbmFtZV0sXHJcbiAgICAgICAgLi4udGhpcy5wLmFjdGlvbnNbbmFtZV1cclxuICAgICAgfTtcclxuICAgICAgdGhpcy5hY3Rpb25zW25hbWVdID0gYWN0aW9uO1xyXG4gICAgICBpZihhY3Rpb24uZW5hYmxlZCkge1xyXG4gICAgICAgIGNvbnN0IGZsYWdzID0gYWN0aW9uLmZsYWdzIHx8IDA7XHJcbiAgICAgICAgaWYoYWN0aW9uLnR5cGUpIHtcclxuICAgICAgICAgIHRoaXMuZVRvQS5hZGRBY3Rpb24oYWN0aW9uLmFjdGl2YXRlLCBhY3Rpb24udHlwZSwgYWN0aW9uLmNvZGUsIGZsYWdzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihhY3Rpb24uY29kZSE9PXVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgdGhpcy5lVG9BLmFkZEFjdGlvbihhY3Rpb24uYWN0aXZhdGUsICdrZXlkb3duJywgYWN0aW9uLmNvZGUsIGZsYWdzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBwcmVwYXJlUHJvcHMocHJvcHMpIHtcclxuICAgIHJldHVybiBCb29rQ29udHJvbGxlci5jYWxjUHJvcHMoQm9va0NvbnRyb2xsZXIubWVyZ2VQcm9wcyhib29rQ29udHJvbGxlclByb3BzKCksIHByb3BzKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0QWN0aW9ucyhwcm9wcywgYWN0aW9ucykge1xyXG4gICAgZm9yKGxldCBuYW1lIG9mIE9iamVjdC5rZXlzKGFjdGlvbnMgfHwge30pKSB7XHJcbiAgICAgIHByb3BzLmFjdGlvbnNbbmFtZV0gPSB7XHJcbiAgICAgICAgLi4ucHJvcHMuYWN0aW9uc1tuYW1lXSxcclxuICAgICAgICAuLi5hY3Rpb25zW25hbWVdXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWVyZ2VQcm9wcyhmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICBzZWNvbmQgPSBzZWNvbmQgfHwge307XHJcbiAgICBmdW5jdGlvbiBtZXJnZShmaXJzdCwgc2Vjb25kKSB7XHJcbiAgICAgIHNlY29uZCA9IHNlY29uZCB8fCB7fTtcclxuICAgICAgY29uc3QgcHJvcHMgPSB7XHJcbiAgICAgICAgLi4uZmlyc3QsXHJcbiAgICAgICAgLi4uc2Vjb25kXHJcbiAgICAgIH07XHJcbiAgICAgIGZvcihsZXQgbmFtZSBvZiBPYmplY3Qua2V5cyhmaXJzdCkpIHtcclxuICAgICAgICBpZih0eXBlb2YgZmlyc3RbbmFtZV09PT0nb2JqZWN0Jykge1xyXG4gICAgICAgICAgcHJvcHNbbmFtZV0gPSBtZXJnZShmaXJzdFtuYW1lXSwgc2Vjb25kW25hbWVdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHByb3BzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvcHMgPSBtZXJnZShmaXJzdCwgc2Vjb25kKTtcclxuICAgIEJvb2tDb250cm9sbGVyLnNldEFjdGlvbnMocHJvcHMsIGZpcnN0LmFjdGlvbnMpO1xyXG4gICAgQm9va0NvbnRyb2xsZXIuc2V0QWN0aW9ucyhwcm9wcywgc2Vjb25kLmFjdGlvbnMpO1xyXG4gICAgcmV0dXJuIHByb3BzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNhbGNQcm9wcyhwcm9wcykge1xyXG4gICAgcHJvcHMuc2NhbGUuZGVsdGEgPSAocHJvcHMuc2NhbGUubWF4LXByb3BzLnNjYWxlLm1pbikvcHJvcHMuc2NhbGUubGV2ZWxzO1xyXG4gICAgcHJvcHMubGlnaHRpbmcuZGVsdGEgPSAocHJvcHMubGlnaHRpbmcubWF4LXByb3BzLmxpZ2h0aW5nLm1pbikvcHJvcHMubGlnaHRpbmcubGV2ZWxzO1xyXG4gICAgcmV0dXJuIHByb3BzO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9Cb29rQ29udHJvbGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va0NvbnRyb2xsZXIuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9va1ByaW50ZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBib29rLCBzdHlsZVNoZWV0KSB7XHJcbiAgICB0aGlzLmJvb2sgPSBib29rO1xyXG4gICAgdGhpcy5zdHlsZVNoZWV0ID0gc3R5bGVTaGVldDtcclxuICAgIHRoaXMud25kID0gY29udGV4dC53bmQ7XHJcbiAgICB0aGlzLmRvYyA9IGNvbnRleHQuZG9jO1xyXG4gICAgdGhpcy5wYWdlQ2FsbGJhY2sgPSBib29rLmdldFBhZ2VDYWxsYmFjaygpO1xyXG4gICAgY29uc3QgdGVzdCA9IHRoaXMucGFnZUNhbGxiYWNrKDApO1xyXG4gICAgdGhpcy50eXBlID0gdGVzdC50eXBlO1xyXG4gICAgaWYodGhpcy50eXBlPT09J3BkZicpIHtcclxuICAgICAgdGhpcy5wZGZTcmMgPSB0ZXN0LnNyYy5zcmM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYW5jZWwoKSB7XHJcbiAgICB0aGlzLmNhbmNlbGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBpZih0aGlzLmZyYW1lKSB7XHJcbiAgICAgIHRoaXMuZnJhbWUucmVtb3ZlKCk7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLmZyYW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpbnQoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5jYW5jZWxlZDtcclxuICAgIGlmKHRoaXMudHlwZT09PSdwZGYnKSB7XHJcbiAgICAgIGxldCBwcmludFduZCwgY2FsbE1hbnVhbGx5ID0gZmFsc2U7XHJcbiAgICAgIGlmKHRoaXMudXNlSUZyYW1lKCkpIHtcclxuICAgICAgICBjYWxsTWFudWFsbHkgPSAhIXRoaXMuZnJhbWU7XHJcbiAgICAgICAgaWYoIXRoaXMuZnJhbWUpIHtcclxuICAgICAgICAgIHRoaXMuZnJhbWUgPSAkKCc8aWZyYW1lIHNyYz1cIicrdGhpcy5wZGZTcmMrJ1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj48L2lmcmFtZT4nKS5hcHBlbmRUbyh0aGlzLmRvYy5ib2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpbnRXbmQgPSB0aGlzLmZyYW1lWzBdLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcHJpbnRXbmQgPSB0aGlzLnduZC5vcGVuKHRoaXMucGRmU3JjKTtcclxuICAgICAgfVxyXG4gICAgICBpZihjYWxsTWFudWFsbHkpIHtcclxuICAgICAgICBwcmludFduZC5wcmludCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICQocHJpbnRXbmQpLm9uKCdsb2FkJywgKCk9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBwcmludFduZC5wcmludCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCkuXHJcbiAgICAgICAgdGhlbigoY29udGVudCk9PiB7XHJcbiAgICAgICAgICBjb25zdCBwcmludFduZCA9IHRoaXMud25kLm9wZW4oKSxcclxuICAgICAgICAgIHByaW50RG9jID0gcHJpbnRXbmQuZG9jdW1lbnQsXHJcbiAgICAgICAgICBodG1sID0gYFxyXG4gICAgICAgICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgICAgICAgPGh0bWw+XHJcbiAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cclxuICAgICAgICAgICAgICAgIDx0aXRsZT4zRCBGbGlwQm9vayAtIFByaW50aW5nPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICR7Y29udGVudC5oZWFkfVxyXG4gICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+XHJcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByaW50RG9jdW1lbnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHByaW50RG9jdW1lbnQsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICA8Ym9keSBvbmxvYWQ9XCJpbml0KClcIj5cclxuICAgICAgICAgICAgICAgICR7Y29udGVudC5ib2R5fVxyXG4gICAgICAgICAgICAgIDwvYm9keT5cclxuICAgICAgICAgICAgPC9odG1sPlxyXG4gICAgICAgICAgYDtcclxuICAgICAgICAgIHByaW50RG9jLm9wZW4oKTtcclxuICAgICAgICAgIHByaW50RG9jLndyaXRlKGh0bWwpO1xyXG4gICAgICAgICAgcHJpbnREb2MuY2xvc2UoKTtcclxuICAgICAgICB9KS5cclxuICAgICAgICBjYXRjaCgoZSk9PiBjb25zb2xlLndhcm4oJzNEIEZsaXBCb29rIC0gUHJpbnRpbmcgd2FzIGNhbmNlbGVkJykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvZ3Jlc3Modikge1xyXG4gICAgaWYodGhpcy5jYW5jZWxlZCkge1xyXG4gICAgICB0aHJvdyAnQ2FuY2VsIFByaW50aW5nJztcclxuICAgIH1cclxuICAgIGlmKHRoaXMub25Qcm9ncmVzcykge1xyXG4gICAgICB0aGlzLm9uUHJvZ3Jlc3MoTWF0aC5mbG9vcih2KjEwMCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5ib29rLmdldFBhZ2VzKCksIGhlYWQgPSBuZXcgU2V0KCksIGJvZHkgPSBbXTtcclxuICAgIGxldCBkb25lID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICBmb3IobGV0IHBhZ2U9MDsgcGFnZTxwYWdlczsgKytwYWdlKSB7XHJcbiAgICAgIGNvbnN0IGluZm8gPSB0aGlzLnBhZ2VDYWxsYmFjayhwYWdlKTtcclxuICAgICAgaWYoaW5mby50eXBlPT09J2ltYWdlJykge1xyXG4gICAgICAgIGRvbmUgPSBkb25lLnRoZW4oKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLnByb2dyZXNzKHBhZ2UvcGFnZXMpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVySW1hZ2UoaGVhZCwgYm9keSwgaW5mby5zcmMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoaW5mby50eXBlPT09J2h0bWwnKSB7XHJcbiAgICAgICAgZG9uZSA9IGRvbmUudGhlbigoKT0+IHtcclxuICAgICAgICAgIHRoaXMucHJvZ3Jlc3MocGFnZS9wYWdlcyk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJIdG1sKGhlYWQsIGJvZHksIGluZm8uc3JjKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRvbmUudGhlbigoKT0+IHtcclxuICAgICAgdGhpcy5wcm9ncmVzcygxKTtcclxuICAgICAgcmV0dXJuIHtoZWFkOiB0aGlzLnJlbmRlckhlYWQoaGVhZCksIGJvZHk6IGJvZHkuam9pbignXFxuJyl9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB3cmFwKGNvbnRlbnQpIHtcclxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImZiM2QtcHJpbnRlci1wYWdlXCI+JHtjb250ZW50fTwvZGl2PmA7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJbWFnZShoZWFkLCBib2R5LCBzcmMpIHtcclxuICAgIGJvZHkucHVzaChCb29rUHJpbnRlci53cmFwKGA8aW1nIHNyYz1cIiR7c3JjfVwiIC8+YCkpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySHRtbChoZWFkLCBib2R5LCBzcmMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+IHtcclxuICAgICAgJC5nZXQoc3JjLCAoaHRtbCk9PiB7XHJcbiAgICAgICAgY29uc3QgbGlua3MgPSBodG1sLm1hdGNoKC88bGluay4qPz4vaWcpIHx8IFtdO1xyXG4gICAgICAgIGZvcihsZXQgbGluayBvZiBsaW5rcykge1xyXG4gICAgICAgICAgaWYobGluay5tYXRjaCgvc3R5bGVzaGVldC9pKSkge1xyXG4gICAgICAgICAgICBjb25zdCBocmVmID0gbGluay5tYXRjaCgvaHJlZlxccyo9XFxzKlsnXCJdKC4qKVsnXCJdL2kpO1xyXG4gICAgICAgICAgICBpZihocmVmKSB7XHJcbiAgICAgICAgICAgICAgaGVhZC5hZGQoaHJlZlsxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IGh0bWwubWF0Y2goLzxib2R5Lio/PihbXFxTXFxzXSopPFxcL2JvZHk+L2kpO1xyXG4gICAgICAgIGlmKGNvbnRlbnQpIHtcclxuICAgICAgICAgIGJvZHkucHVzaChCb29rUHJpbnRlci53cmFwKGNvbnRlbnRbMV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9KS5mYWlsKChlKT0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICByZWplY3QoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVySGVhZChoZWFkKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gW107XHJcbiAgICBoZWFkLmZvckVhY2goKGspPT4gY29udGVudC5wdXNoKGA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIiR7a31cIj5gKSk7XHJcbiAgICBjb250ZW50LnB1c2godGhpcy5zdHlsZVNoZWV0PyBgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIke3RoaXMuc3R5bGVTaGVldH1cIj5gOiBCb29rUHJpbnRlci5kZWZhdWx0U3R5bGVTaGVldCgpKTtcclxuICAgIHJldHVybiBjb250ZW50LmpvaW4oJ1xcbicpO1xyXG4gIH1cclxuXHJcbiAgdXNlSUZyYW1lKCkge1xyXG4gICAgY29uc3QgaXNDaHJvbWl1bSA9IHRoaXMud25kLmNocm9tZSxcclxuICAgICAgd2luTmF2ID0gdGhpcy53bmQubmF2aWdhdG9yLFxyXG4gICAgICB2ZW5kb3JOYW1lID0gd2luTmF2LnZlbmRvcixcclxuICAgICAgaXNJRWVkZ2UgPSB3aW5OYXYudXNlckFnZW50LmluZGV4T2YoXCJFZGdlXCIpPi0xLFxyXG4gICAgICBpc0lPU0Nocm9tZSA9IHdpbk5hdi51c2VyQWdlbnQubWF0Y2goXCJDcmlPU1wiKTtcclxuICAgIGxldCB1c2U7XHJcbiAgICBpZihpc0lPU0Nocm9tZSl7XHJcbiAgICAgIHVzZSA9IHRydWU7XHJcbiAgICB9IGVsc2UgaWYoaXNDaHJvbWl1bSAmJiB2ZW5kb3JOYW1lPT09J0dvb2dsZSBJbmMuJyAmJiAhaXNJRWVkZ2UpIHtcclxuICAgICAgdXNlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHVzZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkZWZhdWx0U3R5bGVTaGVldCgpIHtcclxuICAgIHJldHVybiBgXHJcbiAgICAgIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cclxuICAgICAgICBib2R5IHtcclxuICAgICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICAgIHBhZGRpbmc6IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5mYjNkLXByaW50ZXItcGFnZSB7XHJcbiAgICAgICAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7XHJcbiAgICAgICAgfVxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgYDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQm9va1ByaW50ZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL0Jvb2tQcmludGVyLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IFZpZXcgZnJvbSAnVmlldyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29rVmlldyBleHRlbmRzIFZpZXcge1xyXG5cclxuICBzdGF0aWMgUEFHRV9IQU5ETEVSX0RFTEFZID0gMTAwMDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBvbkxvYWQsIHRlbXBsYXRlLCBoYW5kbGVyKSB7XHJcbiAgICBzdXBlcihjb250YWluZXIsIG9uTG9hZCwgdGVtcGxhdGUsIGhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgaW5pdFZpZXcoKSB7XHJcbiAgICB0aGlzLnZpZXcgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcudmlldycpO1xyXG4gICAgdGhpcy5ib29rbWFya3NWaWV3ID0gdGhpcy5jb250YWluZXIuZmluZCgnLndpZEJvb2ttYXJrcycpO1xyXG4gICAgdGhpcy50aHVtYm5haWxzVmlldyA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy53aWRUaHVtYm5haWxzJyk7XHJcbiAgICB0aGlzLnNlYXJjaFZpZXcgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcud2lkU2VhcmNoJyk7XHJcbiAgfVxyXG5cclxuICBnZXRIYW5kbGVycyhpZCkge1xyXG4gICAgbGV0IGhhbmRsZXJzO1xyXG4gICAgaWYoaWQ9PT0naW5wUGFnZScpIHtcclxuICAgICAgaGFuZGxlcnMgPSBbe1xyXG4gICAgICAgIGlucFBhZ2U6IChlLCBkYXRhKT0+IHRoaXMuY2FsbExhdGVyKHN1cGVyLmdldEhhbmRsZXJzKGlkKSwgaWQsIGUsIGRhdGEsIEJvb2tWaWV3LlBBR0VfSEFORExFUl9ERUxBWSlcclxuICAgICAgfV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaGFuZGxlcnMgPSBzdXBlci5nZXRIYW5kbGVycyhpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFuZGxlcnM7XHJcbiAgfVxyXG5cclxuICBvbkl0ZW1TdGF0ZUNoYW5nZWQoaWQsIHN0YXRlKSB7XHJcbiAgICBpZihpZD09PSdjbWRGdWxsU2NyZWVuJykge1xyXG4gICAgICBpZihzdGF0ZS5hY3RpdmUpIHtcclxuICAgICAgICB0aGlzLnBhcmVudENvbnRhaW5lci5hZGRDbGFzcygnZnVsbHNjcmVlbicpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMucGFyZW50Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdmdWxsc2NyZWVuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy52aWV3O1xyXG4gIH1cclxuXHJcbiAgZ2V0Qm9va21hcmtzVmlldygpIHtcclxuICAgIHJldHVybiB0aGlzLmJvb2ttYXJrc1ZpZXc7XHJcbiAgfVxyXG5cclxuICBnZXRUaHVtYm5haWxzVmlldygpIHtcclxuICAgIHJldHVybiB0aGlzLnRodW1ibmFpbHNWaWV3O1xyXG4gIH1cclxuXHJcbiAgZ2V0U2VhcmNoVmlldygpIHtcclxuICAgIHJldHVybiB0aGlzLnNlYXJjaFZpZXc7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtcygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlua3MoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAnY21kWm9vbUluJyxcclxuICAgICAgJ2NtZFpvb21PdXQnLFxyXG4gICAgICAnY21kRGVmYXVsdFpvb20nLFxyXG4gICAgICAnY21kVG9jJyxcclxuICAgICAgJ2NtZEZhc3RCYWNrd2FyZCcsXHJcbiAgICAgICdjbWRCYWNrd2FyZCcsXHJcbiAgICAgICdjbWRGb3J3YXJkJyxcclxuICAgICAgJ2NtZEZhc3RGb3J3YXJkJyxcclxuICAgICAgJ2NtZFNhdmUnLFxyXG4gICAgICAnY21kUHJpbnQnLFxyXG4gICAgICAnY21kRnVsbFNjcmVlbicsXHJcbiAgICAgICdjbWRTbWFydFBhbicsXHJcbiAgICAgICdjbWRTaW5nbGVQYWdlJyxcclxuICAgICAgJ2NtZFNvdW5kcycsXHJcbiAgICAgICdjbWRTdGF0cycsXHJcbiAgICAgICdjbWRMaWdodGluZ1VwJyxcclxuICAgICAgJ2NtZExpZ2h0aW5nRG93bicsXHJcbiAgICAgICdjbWRDbG9zZVRvYycsXHJcbiAgICAgICdjbWRCb29rbWFya3MnLFxyXG4gICAgICAnY21kU2VhcmNoJyxcclxuICAgICAgJ2NtZFRodW1ibmFpbHMnXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0V2lkZ2V0cygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICd3aWRMb2FkaW5nUHJvZ3Jlc3MnLFxyXG4gICAgICAnd2lkRmxvYXRXbmQnLFxyXG4gICAgICAnd2lkVG9jTWVudScsXHJcbiAgICAgICd3aWRCb29rbWFya3MnLFxyXG4gICAgICAnd2lkVGh1bWJuYWlscycsXHJcbiAgICAgICd3aWRTZWFyY2gnLFxyXG4gICAgICAnd2lkU2V0dGluZ3MnLFxyXG4gICAgICAnd2lkTG9hZGluZydcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dHMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAnaW5wUGFnZScsXHJcbiAgICAgICdpbnBQYWdlcydcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBnZXRUZXh0cygpIHtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICd0eHRMb2FkaW5nUHJvZ3Jlc3MnXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBodG1sOiAndGVtcGxhdGVzL2RlZmF1bHQtYm9vay12aWV3Lmh0bWwnLFxyXG4gICAgICBzdHlsZXM6IFtcclxuICAgICAgICAnY3NzL2JsYWNrLWJvb2stdmlldy5jc3MnXHJcbiAgICAgIF0sXHJcbiAgICAgIGxpbmtzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmVsOiAnc3R5bGVzaGVldCcsXHJcbiAgICAgICAgICBocmVmOiAnY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgc2NyaXB0OiAnanMvZGVmYXVsdC1ib29rLXZpZXcuanMnXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9Cb29rVmlldy5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQm9va1ZpZXcuanMiLCJpbXBvcnQgQm9va1Byb3BzQnVpbGRlciBmcm9tICcuL0Jvb2tQcm9wc0J1aWxkZXInO1xyXG5pbXBvcnQgSW1hZ2VGYWN0b3J5IGZyb20gJ0ltYWdlRmFjdG9yeSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDbGJCb29rUHJvcHNCdWlsZGVyIGV4dGVuZHMgQm9va1Byb3BzQnVpbGRlciB7XHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgcGFnZUNhbGxiYWNrLCBwYWdlcywgb25SZWFkeSkge1xyXG4gICAgc3VwZXIob25SZWFkeSk7XHJcbiAgICB0aGlzLmNhbGNTaGVldHMocGFnZXMpO1xyXG4gICAgdGhpcy5wYWdlQ2FsbGJhY2sgPSBwYWdlQ2FsbGJhY2s7XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBwYWdlQ2FsbGJhY2s6IHBhZ2VDYWxsYmFjay5iaW5kKHRoaXMpXHJcbiAgICB9O1xyXG4gICAgdGhpcy5pbWFnZUZhY3RvcnkgPSBuZXcgSW1hZ2VGYWN0b3J5KGNvbnRleHQpO1xyXG5cclxuICAgIGlmKHBhZ2VzPjApIHtcclxuICAgICAgY29uc3QgdGVzdCA9IHRoaXMuaW1hZ2VGYWN0b3J5LmJ1aWxkKHBhZ2VDYWxsYmFjaygwKSwgMCwgdGhpcy5kZWZhdWx0cy5zaGVldC53aWR0aFRleGVscywgdGhpcy5kZWZhdWx0cy5zaGVldC5oZWlnaHRUZXhlbHMsIHRoaXMuZGVmYXVsdHMuc2hlZXQuY29sb3IpO1xyXG4gICAgICB0ZXN0Lm9uTG9hZCA9ICgpPT4ge1xyXG4gICAgICAgIHRoaXMuY2FsY1Byb3BzKHRlc3Qud2lkdGgsIHRlc3QuaGVpZ2h0KTtcclxuICAgICAgICB0ZXN0LmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5wcm9wcyA9IHRoaXMuZGVmYXVsdHM7XHJcbiAgICAgIHRoaXMucmVhZHkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQ2xiQm9va1Byb3BzQnVpbGRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQ2xiQm9va1Byb3BzQnVpbGRlci5qcyIsImltcG9ydCBTaGVldEJsb2NrIGZyb20gJy4vU2hlZXRCbG9jayc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb3ZlciBleHRlbmRzIFNoZWV0QmxvY2sge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aXN1YWwsIHAsIGFuZ2xlLCBzdGF0ZSkge1xyXG4gICAgc3VwZXIodmlzdWFsLCBwLCAwLCAxLCBhbmdsZSwgc3RhdGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvcHMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi50aGlzLnAuY292ZXIsXHJcbiAgICAgIHNoZWV0czogMVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGxvYWRQb2ludHMoKSB7XHJcbiAgICBjb25zdCBvcGVuZWRJbnRlcnBvbGF0aW9uSW5kZWNlcyA9IFtcclxuICAgICAgWzIsMyw0XSxcclxuICAgICAgWzIsMyw0LDUsNl1cclxuICAgIF0sXHJcbiAgICBjbG9zZWRJbnRlcnBvbGF0aW9uSW5kZWNlcyA9IFtcclxuICAgICAgWzAsMSwyXSxcclxuICAgICAgWzAsMSwyXVxyXG4gICAgXSxcclxuICAgIGludGVycG9sYXRpb25Qb2ludHMgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICB4OiBbXHJcbiAgICAgICAgICAgICBbMCwwLjI4NzcsMC42MzQ3LDAuODE3NCwxLjAwMDBdLFxyXG4gICAgICAgICAgICAgWzAsMC4yODMxLDAuNjI1NiwwLjgwODIsMC45OTA5XSxcclxuICAgICAgICAgICAgIFswLDAuMjYwMywwLjU5MzYsMC43NzYzLDAuOTU4OV0sXHJcbiAgICAgICAgICAgICBbMCwwLjEzNzAsMC4zODgxLDAuNTM0MiwwLjY3NThdLFxyXG4gICAgICAgICAgICAgWzAsMCwwLDAsMF1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHk6IFtcclxuICAgICAgICAgICAgIFswLDAsMCwwLDBdLFxyXG4gICAgICAgICAgICAgWzAsMC4wMiwwLjAwNSwtMC4wMDEsLTAuMDAyNV0sXHJcbiAgICAgICAgICAgICBbMCwwLjA0LDAuMDEsLTAuMDAyLC0wLjAwNV0sXHJcbiAgICAgICAgICAgICBbMCwgMC4yNDY2LCAwLjQ3OTUsIDAuNTcwOCwgMC42NzU4XSxcclxuICAgICAgICAgICAgIFswLCAwLjI4NzcsIDAuNjM0NywgMC44MTc0LCAxLjAwMDBdXHJcbiAgICAgICAgXVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgeDogW1xyXG4gICAgICAgICAgICAgWzAsMC4yODc3LDAuNjM0NywwLjgxNzQsMS4wMDAwXSxcclxuICAgICAgICAgICAgIFswLDAuMjgzMSwwLjYyNTYsMC44MDgyLDAuOTkwOV0sXHJcbiAgICAgICAgICAgICBbMCwwLjI2MDMsMC41OTM2LDAuNzc2MywwLjk1ODldLFxyXG4gICAgICAgICAgICAgWzAuMDAwLDAuMjMzLDAuNTYzLDAuNzQ2LDAuOTI3XSxcclxuICAgICAgICAgICAgIFswLjAwMCwwLjE0NCwwLjQzMywwLjYxMywwLjc5Nl0sXHJcbiAgICAgICAgICAgICBbMC4wMDAsMC4wNzAsMC4yODgsMC40NTUsMC42MjZdLFxyXG4gICAgICAgICAgICAgWzAsMCwwLDAsMF1cclxuICAgICAgICBdLFxyXG4gICAgICAgIHk6IFtcclxuICAgICAgICAgICAgIFswLDAsMCwwLDBdLFxyXG4gICAgICAgICAgICAgWzAsMC4wMiwwLjAwNSwtMC4wMDEsLTAuMDAyNV0sXHJcbiAgICAgICAgICAgICBbMCwwLjA0LDAuMDEsLTAuMDAyLC0wLjAwNV0sXHJcbiAgICAgICAgICAgICBbMC4wMDAsMC4xNjgsMC4yNjksMC4yNzAsMC4yNTVdLFxyXG4gICAgICAgICAgICAgWzAuMDAwLDAuMjQ1LDAuNDM1LDAuNDU4LDAuNDYwXSxcclxuICAgICAgICAgICAgIFswLjAwMCwwLjI3OCwwLjU0NCwwLjYxNCwwLjY3M10sXHJcbiAgICAgICAgICAgICBbMCwgMC4yODc3LCAwLjYzNDcsIDAuODE3NCwgMS4wMDAwXVxyXG4gICAgICAgIF1cclxuICAgICAgfVxyXG4gICAgXTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGludGVycG9sYXRpb25Qb2ludHMsXHJcbiAgICAgIG9wZW5lZEludGVycG9sYXRpb25JbmRlY2VzLFxyXG4gICAgICBjbG9zZWRJbnRlcnBvbGF0aW9uSW5kZWNlc1xyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9Db3Zlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQ292ZXIuanMiLCJpbXBvcnQgU2hlZXRDc3NMYXllciBmcm9tICcuL1NoZWV0Q3NzTGF5ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3NzTGF5ZXJzTWFuYWdlciB7XHJcbiAgY29uc3RydWN0b3IoYm9vaykge1xyXG4gICAgdGhpcy5ib29rID0gYm9vaztcclxuICAgIHRoaXMucHJvcHMgPSBib29rLnAuY3NzTGF5ZXJQcm9wcztcclxuICAgIHRoaXMudmlzdWFsID0gYm9vay52aXN1YWw7XHJcbiAgICB0aGlzLnBhZ2VNYW5hZ2VyID0gYm9vay5wYWdlTWFuYWdlcjtcclxuICAgIHRoaXMud3JhcHBlcnMgPSB7fTtcclxuICB9XHJcblxyXG4gIGdldEFjdGl2ZXMoKSB7XHJcbiAgICBjb25zdCBwYWdlID0gdGhpcy5ib29rLmdldFBhZ2UoKSwgcGFnZXMgPSB0aGlzLmJvb2suZ2V0UGFnZXMoKTtcclxuICAgIHJldHVybiBwYWdlPT09MCB8fCBwYWdlPT09cGFnZXMtMT8gW3BhZ2VdOiBbcGFnZSwgcGFnZSsxXTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBmb3IobGV0IHcgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLndyYXBwZXJzKSkge1xyXG4gICAgICB3LmxheWVycy5mb3JFYWNoKChsKT0+IGwuZGlzcG9zZSgpKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLndyYXBwZXJzO1xyXG4gIH1cclxuXHJcbiAgc2hvdygpIHtcclxuICAgIHRoaXMuaGlkZGVuID0gZmFsc2U7XHJcbiAgICBmb3IobGV0IG4gb2YgdGhpcy5nZXRBY3RpdmVzKCkpIHtcclxuICAgICAgY29uc3QgdyA9IHRoaXMud3JhcHBlcnNbbl07XHJcbiAgICAgIGlmKHcpIHtcclxuICAgICAgICBpZih3LnN0YXRlPT09J3JlYWR5JyAmJiB3LmxheWVycy5sZW5ndGgpIHtcclxuICAgICAgICAgIGNvbnN0IGJsb2NrID0gdGhpcy5ib29rLmdldEJsb2NrQnlQYWdlKG4pO1xyXG4gICAgICAgICAgdy5sYXllcnMuZm9yRWFjaCgobCk9PiB7XHJcbiAgICAgICAgICAgIGlmKGwuaXNIaWRkZW4oKSkge1xyXG4gICAgICAgICAgICAgIGwudXBkYXRlKGJsb2NrKTtcclxuICAgICAgICAgICAgICBsLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLndyYXBwZXJzW25dID0ge1xyXG4gICAgICAgICAgc3RhdGU6ICdsb2FkaW5nJyxcclxuICAgICAgICAgIGxheWVyczogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLnBhZ2VNYW5hZ2VyLmdldExheWVycyhuLCAobGF5ZXJzKT0+IHtcclxuICAgICAgICAgICAgaWYobGF5ZXJzLmxlbmd0aCAmJiB0aGlzLndyYXBwZXJzKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSB0aGlzLmJvb2suZ2V0QmxvY2tCeVBhZ2Uobik7XHJcbiAgICAgICAgICAgICAgZm9yKGxldCBsIG9mIGxheWVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2wgPSBuZXcgU2hlZXRDc3NMYXllcih0aGlzLnZpc3VhbCwgYmxvY2ssIHRoaXMucHJvcHMpO1xyXG4gICAgICAgICAgICAgICAgdy5sYXllcnMucHVzaChzbCk7XHJcbiAgICAgICAgICAgICAgICBzbC5zZXQobC5jc3MsIGwuaHRtbCwgbC5qcyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5oaWRkZW4gJiYgfnRoaXMuZ2V0QWN0aXZlcygpLmluZGV4T2YobikpIHtcclxuICAgICAgICAgICAgICAgICAgdy5sYXllcnMuZm9yRWFjaCgobCk9PiBsLnNob3coKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHcuc3RhdGUgPSAncmVhZHknO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgaGlkZSgpIHtcclxuICAgIHRoaXMuaGlkZGVuID0gdHJ1ZTtcclxuICAgIGNvbnN0IHdhaXQgPSBbXTtcclxuICAgIGZvcihsZXQgdyBvZiBPYmplY3QudmFsdWVzKHRoaXMud3JhcHBlcnMpKSB7XHJcbiAgICAgIHcubGF5ZXJzLmZvckVhY2goKGwpPT4gd2FpdC5wdXNoKGwuaGlkZSgpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwod2FpdCk7XHJcbiAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvQ3NzTGF5ZXJzTWFuYWdlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvQ3NzTGF5ZXJzTWFuYWdlci5qcyIsImltcG9ydCB7JCwgVEhSRUV9IGZyb20gJy4uL2xpYnMnXHJcbmltcG9ydCBDYWNoZSBmcm9tICdDYWNoZSc7XHJcbmltcG9ydCBMb2FkaW5nQW5pbWF0aW9uIGZyb20gJ0xvYWRpbmdBbmltYXRpb24nO1xyXG5pbXBvcnQgSW1hZ2VGYWN0b3J5IGZyb20gJ0ltYWdlRmFjdG9yeSc7XHJcbmltcG9ydCBCYXNlTWF0aFV0aWxzIGZyb20gJ0Jhc2VNYXRoVXRpbHMnO1xyXG5pbXBvcnQgVGV4dHVyZUFuaW1hdG9yIGZyb20gJ1RleHR1cmVBbmltYXRvcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWdlTWFuYWdlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpc3VhbCwgYm9vaywgcCkge1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWw7XHJcbiAgICB0aGlzLmJvb2sgPSBib29rO1xyXG4gICAgdGhpcy5wYWdlUXVlcnkgPSAnJztcclxuICAgIHRoaXMucCA9IHA7XHJcbiAgICB0aGlzLnBhZ2VDYWNoZSA9IG5ldyBDYWNoZShwLmNhY2hlZFBhZ2VzKTtcclxuICAgIHRoaXMucmVzb3VyY2VzQ2FjaGUgPSBuZXcgQ2FjaGUoKTtcclxuICAgIHRoaXMuY2FudmFzID0gJCgnPGNhbnZhcz4nKVswXTtcclxuICAgIHRoaXMuaW1hZ2VGYWN0b3J5ID0gbmV3IEltYWdlRmFjdG9yeSh7Li4udmlzdWFsLCBkaXNwYXRjaEV2ZW50OiBib29rLmRpc3BhdGNoRXZlbnQuYmluZChib29rKSwgcmVuZGVyQ2FudmFzOiB0aGlzLmNhbnZhcywgcmVuZGVyQ2FudmFzQ3R4OiB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpfSwgdGhpcy5yZXNvdXJjZXNDYWNoZSk7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5ncyA9IFtdO1xyXG4gICAgdGhpcy5yZW5kZXJRdWV1ZSA9IFtdO1xyXG4gICAgdGhpcy5wYWdlUmVxdWVzdHMgPSBbXTtcclxuICAgIHRoaXMucHJlZGljdGVkUmVxdWVzdHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLnRtcE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCk7XHJcbiAgICB2aXN1YWwuYWRkT2JqZWN0KG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KDAsIDApLCB0aGlzLnRtcE1hdGVyaWFsKSk7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMubG9hZGluZyA9IHt9O1xyXG4gICAgdGhpcy5sb2FkaW5nW3AuY292ZXIuY29sb3JdID0gdGhpcy5jcmVhdGVMb2FkaW5nVGV4dHVyZShwLmNvdmVyKTtcclxuICAgIGlmKHAucGFnZS5jb2xvciE9PXAuY292ZXIuY29sb3IpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nW3AucGFnZS5jb2xvcl0gPSB0aGlzLmNyZWF0ZUxvYWRpbmdUZXh0dXJlKHAucGFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50dXJuT25FdmVudHMoKTtcclxuXHJcbiAgICB2aXN1YWwuYWRkUmVuZGVyQ2FsbGJhY2sodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgc2V0VGltZW91dCh0aGlzLnVwZGF0ZVJlbmRlclF1ZXVlLmJpbmQodGhpcyksIDI1MCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVMb2FkaW5nVGV4dHVyZShwKSB7XHJcbiAgICBjb25zdCBzcHJpdGVUaWxlcyA9IDYsXHJcbiAgICAgIHNjYWxlID0gTWF0aC5zcXJ0KDQuNSoyMTAqNC41KjI5Ny8ocC53aWR0aFRleGVscypwLmhlaWdodFRleGVscykpLFxyXG4gICAgICBhbmltYXRpb24gPSBuZXcgTG9hZGluZ0FuaW1hdGlvbihzY2FsZSpwLndpZHRoVGV4ZWxzLCBzY2FsZSpwLmhlaWdodFRleGVscywgcC5jb2xvciksXHJcbiAgICAgIGFuaW1hdG9yID0gbmV3IFRleHR1cmVBbmltYXRvcihhbmltYXRpb24uY3JlYXRlU3ByaXRlKHNwcml0ZVRpbGVzKSwgc3ByaXRlVGlsZXMsIDEsIHNwcml0ZVRpbGVzLCAwLjIpO1xyXG4gICAgYW5pbWF0aW9uLmRpc3Bvc2UoKTtcclxuICAgIHJldHVybiBhbmltYXRvcjtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLnR1cm5PZmZFdmVudHMoKTtcclxuICAgIGZvcihsZXQgY29sb3Igb2YgT2JqZWN0LmtleXModGhpcy5sb2FkaW5nKSkge1xyXG4gICAgICB0aGlzLmxvYWRpbmdbY29sb3JdLmRpc3Bvc2UoKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLmxvYWRpbmc7XHJcbiAgICB0aGlzLnJlc291cmNlc0NhY2hlLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMucGFnZUNhY2hlLmRpc3Bvc2UoKTtcclxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuY2FudmFzLndpZHRoID0gMDtcclxuICAgIGRlbGV0ZSB0aGlzLmNhbnZhcztcclxuICB9XHJcblxyXG4gIGlzQ292ZXIobikge1xyXG4gICAgcmV0dXJuIG48MiB8fCBuPj0yKih0aGlzLnAuc2hlZXRzKzEpO1xyXG4gIH1cclxuXHJcbiAgaXNNb2JpbGUoKSB7XHJcbiAgICByZXR1cm4gKHRoaXMudmlzdWFsLnduZC5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpPjE7XHJcbiAgfVxyXG5cclxuICBnZXRQYWdlU3RhdGUobikge1xyXG4gICAgY29uc3Qgb2JqZWN0ID0gdGhpcy5wYWdlQ2FjaGUuZ2V0KG4pO1xyXG4gICAgcmV0dXJuIG9iamVjdD8gb2JqZWN0LnN0YXRlOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBlbmFibGVMb2FkaW5nQW5pbWF0aW9uKGVuYWJsZSkge1xyXG4gICAgdGhpcy5sb2FkaW5nQW5pbWF0aW9uID0gZW5hYmxlO1xyXG4gICAgZm9yKGxldCBvIG9mIHRoaXMubG9hZGluZ3MpIHtcclxuICAgICAgdGhpcy5zZXR1cE1hdGVyaWFsKG8pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlKGR0KSB7XHJcbiAgICBpZih0aGlzLmxvYWRpbmdBbmltYXRpb24pIHtcclxuICAgICAgY29uc3QgbG9hZGluZyA9IHt9O1xyXG4gICAgICBmb3IobGV0IG8gb2YgdGhpcy5sb2FkaW5ncykge1xyXG4gICAgICAgIGlmKG8uaXNBY3RpdmUoKSkge1xyXG4gICAgICAgICAgbG9hZGluZ1tvLmNvbG9yXSA9IHRydWU7O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmb3IobGV0IGNvbG9yIG9mIE9iamVjdC5rZXlzKGxvYWRpbmcpKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nW2NvbG9yXS51cGRhdGUoZHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVGcm9tTG9hZGluZ3Mobykge1xyXG4gICAgY29uc3QgaSA9IHRoaXMubG9hZGluZ3MuaW5kZXhPZihvKTtcclxuICAgIGlmKH5pKSB7XHJcbiAgICAgIHRoaXMubG9hZGluZ3Muc3BsaWNlKGksIDEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRnJvbVJlbmRlclF1ZXVlKG8pIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnJlbmRlclF1ZXVlLmluZGV4T2Yobyk7XHJcbiAgICBpZih+aSkge1xyXG4gICAgICB0aGlzLnJlbmRlclF1ZXVlLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZnJlc2hQYWdlUXVlcnkobiwgcXVlcnk9JycpIHtcclxuICAgIHRoaXMucGFnZVF1ZXJ5ID0gcXVlcnk7XHJcbiAgICBjb25zdCBvYmplY3QgPSB0aGlzLnBhZ2VDYWNoZS5nZXQobik7XHJcbiAgICBpZihvYmplY3QgJiYgb2JqZWN0LndyYXBwZXIgJiYgb2JqZWN0LndyYXBwZXIuc2V0UXVlcnkpIHtcclxuICAgICAgaWYoIXRoaXMucGFnZUNhY2hlLnJlbW92ZShuKSkge1xyXG4gICAgICAgIG9iamVjdC53cmFwcGVyLnNldFF1ZXJ5KHF1ZXJ5KTtcclxuICAgICAgICB0aGlzLnB1c2hJblJlbmRlclF1ZXVlKG9iamVjdCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZnJlc2hab29tKCkge1xyXG4gICAgaWYodGhpcy5wLmF1dG9SZXNvbHV0aW9uLmVuYWJsZSkge1xyXG4gICAgICBjb25zdCBlcyA9IFtdO1xyXG4gICAgICB0aGlzLnBhZ2VDYWNoZS5mb3JFYWNoKChlKT0+IHtcclxuICAgICAgICBlcy5wdXNoKGUpO1xyXG4gICAgICB9KTtcclxuICAgICAgZXMuZm9yRWFjaCgoZSk9PiB7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0ID0gZVsxXTtcclxuICAgICAgICBpZihvYmplY3QgJiYgb2JqZWN0LndyYXBwZXIpIHtcclxuICAgICAgICAgIGlmKCF0aGlzLnBhZ2VDYWNoZS5yZW1vdmUoZVswXSkpIHtcclxuICAgICAgICAgICAgdGhpcy5wdXNoSW5SZW5kZXJRdWV1ZShvYmplY3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRMYXllcnMobiwgY2xiKSB7XHJcbiAgICBpZih0aGlzLnAuY3NzTGF5ZXJzTG9hZGVyKSB7XHJcbiAgICAgIHRoaXMucC5jc3NMYXllcnNMb2FkZXIobiwgKC4uLmFyZ3MpPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iamVjdCA9IHRoaXMucGFnZUNhY2hlLmdldChuKTtcclxuICAgICAgICBpZihvYmplY3QpIHtcclxuICAgICAgICAgIGlmKG9iamVjdC5zdGF0ZSE9PSdhY3RpdmUnKSB7XHJcbiAgICAgICAgICAgIG9iamVjdC5wZW5kaW5ncy5wdXNoKHtjbGIsIGFyZ3N9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjbGIoLi4uYXJncyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjbGIoW10pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzb2x2ZVBlbmRpbmdzKHBlbmRpbmdzKSB7XHJcbiAgICBmb3IobGV0IHAgb2YgcGVuZGluZ3MpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBwLmNsYiguLi5wLmFyZ3MpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwZW5kaW5ncy5zcGxpY2UoMCwgcGVuZGluZ3MubGVuZ3RoKTtcclxuICB9XHJcblxyXG4gIHJ0bFBhZ2VOKG4pIHtcclxuICAgIHJldHVybiB0aGlzLnAucnRsPyAyKih0aGlzLnAuc2hlZXRzKzIpLTEtbjogbjtcclxuICB9XHJcblxyXG4gIGxvYWQobWF0ZXJpYWwsIG4pIHtcclxuICAgIGNvbnN0IHBpID0gdGhpcy5wLnBhZ2VDYWxsYmFjayh0aGlzLnJ0bFBhZ2VOKG4pKSwgcCA9IHRoaXMuaXNDb3ZlcihuKT8gdGhpcy5wLmNvdmVyOiB0aGlzLnAucGFnZTtcclxuICAgIGNvbnN0IG8gPSB7XHJcbiAgICAgIG4sXHJcbiAgICAgIHRleHR1cmU6IG5ldyBUSFJFRS5UZXh0dXJlKCksXHJcbiAgICAgIHdyYXBwZXI6IG51bGwsXHJcbiAgICAgIHN0YXRlOiAnbG9hZGluZycsXHJcbiAgICAgIGxvY2tlZDogKG4pPT4gby5zdGF0ZSA9PT0gJ2xvYWRpbmcnIHx8IG8uc3RhdGUgPT09ICdyZW5kZXJpbmcnIHx8IHRoaXMuYm9vay5pc0FjdGl2ZVBhZ2UobiksXHJcbiAgICAgIGNvbG9yOiBwLmNvbG9yLFxyXG4gICAgICBpc0FjdGl2ZTogKCk9PiB0aGlzLmJvb2suaXNBY3RpdmVQYWdlKG4pLFxyXG4gICAgICBpc1RvcDogKCk9PiB+dGhpcy5ib29rLmdldFRvcFBhZ2VzKCkuaW5kZXhPZihuKSxcclxuICAgICAgZGlzcG9zZTogKCk9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tTG9hZGluZ3Mobyk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tUmVuZGVyUXVldWUobyk7XHJcbiAgICAgICAgaWYoby53cmFwcGVyICYmIG8ud3JhcHBlci5kaXNwb3NlKSB7XHJcbiAgICAgICAgICBvLndyYXBwZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvLnRleHR1cmUuZGlzcG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZSBvLnRleHR1cmU7XHJcbiAgICAgICAgZGVsZXRlIG8ud3JhcHBlcjtcclxuICAgICAgfSxcclxuICAgICAgcGVuZGluZ3M6IFtdXHJcbiAgICB9O1xyXG4gICAgby50ZXh0dXJlLm1pbkZpbHRlciA9IFRIUkVFLkxpbmVhckZpbHRlcjtcclxuICAgIHRoaXMubG9hZGluZ3MucHVzaChvKTtcclxuICAgIHRoaXMuc2V0TWF0ZXJpYWwobywgbWF0ZXJpYWwpO1xyXG5cclxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCk9PiB7XHJcbiAgICAgIGlmKG8udGV4dHVyZSkge1xyXG4gICAgICAgIG8ud2lkdGhUZXhlbHMgPSBwaS53aWR0aFRleGVscyB8fCBwLndpZHRoVGV4ZWxzO1xyXG4gICAgICAgIG8uaGVpZ2h0VGV4ZWxzID0gcGkuaGVpZ2h0VGV4ZWxzIHx8IHAuaGVpZ2h0VGV4ZWxzO1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuY2FsY1Jlc29sdXRpb24obyk7XHJcbiAgICAgICAgby53cmFwcGVyID0gdGhpcy5pbWFnZUZhY3RvcnkuYnVpbGQocGksIHBpLm51bWJlcj09PXVuZGVmaW5lZD8gbjogcGkubnVtYmVyLCByZXMud2lkdGgsIHJlcy5oZWlnaHQsIHAuY29sb3IsIHRoaXMucC5pbmplY3Rvcik7XHJcbiAgICAgICAgaWYoby53cmFwcGVyLnNldFF1ZXJ5KSB7XHJcbiAgICAgICAgICBvLndyYXBwZXIuc2V0UXVlcnkodGhpcy5wYWdlUXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvLnNpbXVsYXRlID0gcGkuaW50ZXJhY3RpdmU/IChvLndyYXBwZXIuc2ltdWxhdGUgfHwgKCgpPT4gdW5kZWZpbmVkKSkuYmluZChvLndyYXBwZXIpOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgby53cmFwcGVyLm9uTG9hZCA9ICgpPT4ge1xyXG4gICAgICAgICAgdGhpcy5wdXNoSW5SZW5kZXJRdWV1ZShvKTtcclxuICAgICAgICAgIHRoaXMuYm9vay5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgICAgICAgdHlwZTogJ2xvYWRlZFBhZ2UnLFxyXG4gICAgICAgICAgICBwYWdlOiBuXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIG8ud3JhcHBlci5vbkNoYW5nZSA9IChpbWFnZSk9PiB7XHJcbiAgICAgICAgICBpZihvLnRleHR1cmUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tTG9hZGluZ3Mobyk7XHJcbiAgICAgICAgICAgIGlmKG8ubWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICBvLm1hdGVyaWFsLm1hcCA9IG8udGV4dHVyZTtcclxuICAgICAgICAgICAgICBvLm1hdGVyaWFsLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKDB4RkZGRkZGKTtcclxuICAgICAgICAgICAgICBvLm1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvLnRleHR1cmUuaW1hZ2UgPSBpbWFnZTtcclxuICAgICAgICAgICAgby50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgby50ZXh0dXJlLm9uVXBkYXRlID0gKCk9PiB7XHJcbiAgICAgICAgICAgICAgaWYoby5zdGF0ZSAhPT0gJ3F1ZXVlZEZvclJlbmRlcicpIHtcclxuICAgICAgICAgICAgICAgIG8uc3RhdGUgPSAnYWN0aXZlJztcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZVBlbmRpbmdzKG8ucGVuZGluZ3MpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBkZWxldGUgdGhpcy5yZW5kZXJpbmc7XHJcbiAgICAgICAgICAgICAgLy90aGlzLnVwZGF0ZVJlbmRlclF1ZXVlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudG1wTWF0ZXJpYWwubWFwID0gby50ZXh0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLnRtcE1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYm9vay5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgdHlwZTogJ2xvYWRQYWdlJyxcclxuICAgICAgcGFnZTogblxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5wYWdlQ2FjaGUucHV0KG4sIG8pO1xyXG4gIH1cclxuXHJcbiAgaXNTaW5nbGVQYWdlKG8pIHtcclxuICAgIHJldHVybiB0aGlzLnAuc2luZ2xlUGFnZSB8fCAhby5uIHx8IG8ubj09PXRoaXMuYm9vay5nZXRQYWdlcygpLTE7XHJcbiAgfVxyXG5cclxuICBjYWxjUmVzb2x1dGlvbihvKSB7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgaWYodGhpcy5wLmF1dG9SZXNvbHV0aW9uLmVuYWJsZSkge1xyXG4gICAgICBjb25zdCBrID0gTWF0aC5taW4oKHRoaXMuaXNTaW5nbGVQYWdlKG8pPyAxOiAwLjUpKnRoaXMudmlzdWFsLndpZHRoKCkvby53aWR0aFRleGVscywgdGhpcy52aXN1YWwuaGVpZ2h0KCkvby5oZWlnaHRUZXhlbHMpO1xyXG4gICAgICByZXMgPSB7XHJcbiAgICAgICAgd2lkdGg6IHRoaXMucC5hdXRvUmVzb2x1dGlvbi5rKnRoaXMucC56b29tKmsqby53aWR0aFRleGVscyxcclxuICAgICAgICBoZWlnaHQ6IHRoaXMucC5hdXRvUmVzb2x1dGlvbi5rKnRoaXMucC56b29tKmsqby5oZWlnaHRUZXhlbHNcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXMgPSB7XHJcbiAgICAgICAgd2lkdGg6IG8ud2lkdGhUZXhlbHMsXHJcbiAgICAgICAgaGVpZ2h0OiBvLmhlaWdodFRleGVsc1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHB1c2hJblJlbmRlclF1ZXVlKG8pIHtcclxuICAgIGlmKG8uc3RhdGUgIT09ICdxdWV1ZWRGb3JSZW5kZXInKSB7XHJcbiAgICAgIG8uc3RhdGUgPSAncXVldWVkRm9yUmVuZGVyJztcclxuICAgICAgdGhpcy5yZW5kZXJRdWV1ZS5wdXNoKG8pO1xyXG4gICAgICAvLyB0aGlzLnVwZGF0ZVJlbmRlclF1ZXVlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVSZW5kZXJRdWV1ZSgpIHtcclxuICAgIGlmKHRoaXMuY2FudmFzKSB7XHJcbiAgICAgIGNvbnN0IHAgPSB0aGlzLnA7XHJcbiAgICAgIGlmKCF0aGlzLnJlbmRlcmluZyAmJiAocC5yZW5kZXJXaGlsZUZsaXBwaW5nIHx8ICF0aGlzLmJvb2suaXNQcm9jZXNzaW5nKCkpKSB7XHJcbiAgICAgICAgbGV0IGFjdGl2ZSwgdG9wO1xyXG4gICAgICAgIGZvcihsZXQgbyBvZiB0aGlzLnJlbmRlclF1ZXVlKSB7XHJcbiAgICAgICAgICBpZighYWN0aXZlICYmIG8uaXNBY3RpdmUoKSkge1xyXG4gICAgICAgICAgICBhY3RpdmUgPSBvO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoby5pc1RvcCgpKSB7XHJcbiAgICAgICAgICAgIHRvcCA9IG87XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlcmluZyA9IHRvcCB8fCBhY3RpdmU7XHJcbiAgICAgICAgaWYodGhpcy5pc01vYmlsZSgpICYmIHAucmVuZGVySW5hY3RpdmVQYWdlc09uTW9iaWxlIHx8ICF0aGlzLmlzTW9iaWxlKCkgJiYgcC5yZW5kZXJJbmFjdGl2ZVBhZ2VzKSB7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlcmluZyA9IHRoaXMucmVuZGVyaW5nIHx8IHRoaXMucmVuZGVyUXVldWVbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMucmVuZGVyaW5nKSB7XHJcbiAgICAgICAgICBpZih0aGlzLnJlbmRlcmluZy53cmFwcGVyLnN0YXJ0UmVuZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVJlbmRlclF1ZXVlKHRoaXMucmVuZGVyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmcuc3RhdGUgPSAncmVuZGVyaW5nJztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmcud3JhcHBlci5zZXRSZXNvbHV0aW9uKHRoaXMuY2FsY1Jlc29sdXRpb24odGhpcy5yZW5kZXJpbmcpKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJpbmcud3JhcHBlci5zdGFydFJlbmRlcigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlcmluZztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc2V0VGltZW91dCh0aGlzLnVwZGF0ZVJlbmRlclF1ZXVlLmJpbmQodGhpcyksIDI1MCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0dXJuT25FdmVudHMoKSB7XHJcbiAgICB0aGlzLnRyYW5zZmVyRXZlbnRzID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHR1cm5PZmZFdmVudHMoKSB7XHJcbiAgICBjb25zdCBtb3VzZXVwID0gJC5FdmVudCgnbW91c2V1cCcpLCBtb3VzZW91dCA9ICQuRXZlbnQoJ21vdXNlb3V0Jyk7XHJcbiAgICB0aGlzLnBhZ2VDYWNoZS5mb3JFYWNoKChlbnQpPT4ge1xyXG4gICAgICBjb25zdCBvYmplY3QgPSBlbnRbMV07XHJcbiAgICAgIGlmKG9iamVjdC5zaW11bGF0ZSkge1xyXG4gICAgICAgIG9iamVjdC5zaW11bGF0ZShtb3VzZXVwLCB1bmRlZmluZWQsIDAsIDApO1xyXG4gICAgICAgIG9iamVjdC5zaW11bGF0ZShtb3VzZW91dCwgdW5kZWZpbmVkLCAwLCAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnRyYW5zZmVyRXZlbnRzID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICB0cmFuc2ZlckV2ZW50VG9UZXh0dXJlKG4sIGUsIGRhdGEpIHtcclxuICAgIGlmKHRoaXMudHJhbnNmZXJFdmVudHMpIHtcclxuICAgICAgY29uc3QgdG9PYmplY3QgPSB0aGlzLmdldE9yTG9hZFRleHR1cmVPYmplY3QodW5kZWZpbmVkLCBuKTtcclxuICAgICAgaWYodG9PYmplY3Qud3JhcHBlcikge1xyXG4gICAgICAgIGNvbnN0IHt1dn0gPSBkYXRhLCB0b0RvYyA9IHRvT2JqZWN0LndyYXBwZXIuZ2V0U2ltdWxhdGVkRG9jKCk7XHJcbiAgICAgICAgdGhpcy5wYWdlQ2FjaGUuZm9yRWFjaCgoZW50KT0+IHtcclxuICAgICAgICAgIGNvbnN0IG9iamVjdCA9IGVudFsxXTtcclxuICAgICAgICAgIGlmKG9iamVjdC5zaW11bGF0ZSkge1xyXG4gICAgICAgICAgICBvYmplY3Quc2ltdWxhdGUoZSwgdG9Eb2MsIHV2LngsIHV2LnkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsb2FkUHJlZGljdGVkUGFnZXMoKSB7XHJcbiAgICB0aGlzLnByZWRpY3RlZFJlcXVlc3RzID0gQmFzZU1hdGhVdGlscy5wcmVkaWN0KHRoaXMucGFnZVJlcXVlc3RzLCB0aGlzLnAucHJlbG9hZFBhZ2VzKTtcclxuICAgIGZvcihsZXQgcCBvZiB0aGlzLnByZWRpY3RlZFJlcXVlc3RzKSB7XHJcbiAgICAgIGlmKHA8dGhpcy5ib29rLmdldFBhZ2VzKCkgJiYgIXRoaXMucGFnZUNhY2hlLmdldChwKSkge1xyXG4gICAgICAgIHRoaXMubG9hZCh1bmRlZmluZWQsIHApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRQYWdlUmVxdWVzdChuKSB7XHJcbiAgICB0aGlzLnBhZ2VSZXF1ZXN0cy5wdXNoKG4pO1xyXG4gICAgaWYodGhpcy5wYWdlUmVxdWVzdHMubGVuZ3RoPnRoaXMucC5wYWdlc0ZvclByZWRpY3RpbmcpIHtcclxuICAgICAgdGhpcy5wYWdlUmVxdWVzdHMuc2hpZnQoKTtcclxuICAgIH1cclxuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4odGhpcy5sb2FkUHJlZGljdGVkUGFnZXMuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBzZXRNYXRlcmlhbChvLCBtYXRlcmlhbCkge1xyXG4gICAgdGhpcy5wYWdlQ2FjaGUuZm9yRWFjaCgoZSk9PiB7XHJcbiAgICAgIGNvbnN0IG9iID0gZVsxXTtcclxuICAgICAgaWYobyE9PW9iICYmIG9iLm1hdGVyaWFsPT09bWF0ZXJpYWwpIHtcclxuICAgICAgICBkZWxldGUgb2IubWF0ZXJpYWw7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYobWF0ZXJpYWwgJiYgbWF0ZXJpYWwhPT1vLm1hdGVyaWFsKSB7XHJcbiAgICAgIG8ubWF0ZXJpYWwgPSBtYXRlcmlhbDtcclxuICAgICAgdGhpcy5zZXR1cE1hdGVyaWFsKG8pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0dXBNYXRlcmlhbChvKSB7XHJcbiAgICBvLm1hdGVyaWFsLm1hcCA9IG8udGV4dHVyZS5pbWFnZT8gby50ZXh0dXJlOiAodGhpcy5sb2FkaW5nQW5pbWF0aW9uPyB0aGlzLmxvYWRpbmdbby5jb2xvcl0udGV4dHVyZTogbnVsbCk7XHJcbiAgICBpZighby5tYXRlcmlhbC5tYXApIHtcclxuICAgICAgby5tYXRlcmlhbC5jb2xvciA9IG5ldyBUSFJFRS5Db2xvcihvLmNvbG9yKTtcclxuICAgIH1cclxuICAgIG8ubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0T3JMb2FkVGV4dHVyZU9iamVjdChtYXRlcmlhbCwgbikge1xyXG4gICAgbGV0IG9iamVjdCA9IHRoaXMucGFnZUNhY2hlLmdldChuKTtcclxuICAgIGlmKCFvYmplY3QpIHtcclxuICAgICAgb2JqZWN0ID0gdGhpcy5sb2FkKG1hdGVyaWFsLCBuKTtcclxuICAgICAgdGhpcy5hZGRQYWdlUmVxdWVzdChuKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnNldE1hdGVyaWFsKG9iamVjdCwgbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmplY3Q7XHJcbiAgfVxyXG5cclxuICBzZXRUZXh0dXJlKG1hdGVyaWFsLCBuKSB7XHJcbiAgICBpZih+dGhpcy5wcmVkaWN0ZWRSZXF1ZXN0cy5pbmRleE9mKG4pKSB7XHJcbiAgICAgIHRoaXMuYWRkUGFnZVJlcXVlc3Qobik7XHJcbiAgICB9XHJcbiAgICB0aGlzLmdldE9yTG9hZFRleHR1cmVPYmplY3QobWF0ZXJpYWwsIG4pO1xyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1BhZ2VNYW5hZ2VyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9QYWdlTWFuYWdlci5qcyIsImltcG9ydCBCb29rUHJvcHNCdWlsZGVyIGZyb20gJy4vQm9va1Byb3BzQnVpbGRlcic7XHJcbmltcG9ydCBQZGYgZnJvbSAnUGRmJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBkZkJvb2tQcm9wc0J1aWxkZXIgZXh0ZW5kcyBCb29rUHJvcHNCdWlsZGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Ioc3JjLCBvblJlYWR5KSB7XHJcbiAgICBzdXBlcihvblJlYWR5KTtcclxuICAgIHRoaXMucGRmID0gbmV3IFBkZihzcmMpO1xyXG4gICAgdGhpcy5wYWdlRGVzY3JpcHRpb24gPSB7XHJcbiAgICAgIHR5cGU6ICdwZGYnLFxyXG4gICAgICBzcmM6IHRoaXMucGRmLFxyXG4gICAgICBpbnRlcmFjdGl2ZTogdHJ1ZVxyXG4gICAgfTtcclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIHBhZ2VDYWxsYmFjazogdGhpcy5wYWdlQ2FsbGJhY2suYmluZCh0aGlzKVxyXG4gICAgfTtcclxuICAgIHRoaXMucGRmLmdldEhhbmRsZXIodGhpcy5pbml0LmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMucGRmLmRpc3Bvc2UoKTtcclxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICB9XHJcblxyXG4gIGluaXQoaGFuZGxlcikge1xyXG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLnBkZi5nZXRQYWdlc051bSgpO1xyXG4gICAgdGhpcy5jYWxjU2hlZXRzKHBhZ2VzKTtcclxuICAgIGlmKHBhZ2VzPjApIHtcclxuICAgICAgaGFuZGxlci5nZXRQYWdlKDEpLlxyXG4gICAgICB0aGVuKChwYWdlKT0+IHtcclxuICAgICAgICBjb25zdCBzaXplID0gUGRmLmdldFBhZ2VTaXplKHBhZ2UpO1xyXG4gICAgICAgIHRoaXMuY2FsY1Byb3BzKHNpemUud2lkdGgsIHNpemUuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICAgIH0pLlxyXG4gICAgICBjYXRjaCgoZSk9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5wcm9wcyA9IHRoaXMuZGVmYXVsdHM7XHJcbiAgICAgIHRoaXMucmVhZHkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhZ2VDYWxsYmFjayhuKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wYWdlRGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9jbGFzc2VzL1BkZkJvb2tQcm9wc0J1aWxkZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9jbGFzc2VzL1BkZkJvb2tQcm9wc0J1aWxkZXIuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQZGZMaW5rc0hhbmRsZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihwZGYsIGN0cmwsIGVsZW1lbnQpIHtcclxuICAgIHRoaXMucGRmID0gcGRmO1xyXG4gICAgdGhpcy5jdHJsID0gY3RybDtcclxuICAgIHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcbiAgICB0aGlzLmN1cnNvcnMgPSBbXTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgc2V0SGFuZGxlcihoYW5kbGVyKSB7XHJcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgZGVmYXVsdEhhbmRsZXIodHlwZSwgZGVzdGluYXRpb24pIHtcclxuICAgIGlmKHR5cGU9PT0naW50ZXJuYWwnKSB7XHJcbiAgICAgIHRoaXMuY3RybC5nb1RvUGFnZShkZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHR5cGU9PT0nZXh0ZXJuYWwnKSB7XHJcbiAgICAgIHdpbmRvdy5vcGVuKGRlc3RpbmF0aW9uLCAnX2JsYW5rJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjYWxsSGFuZGxlcnModHlwZSwgZGVzdGluYXRpb24pIHtcclxuICAgIGlmKCF0aGlzLmhhbmRsZXIgfHwgIXRoaXMuaGFuZGxlcih0eXBlLCBkZXN0aW5hdGlvbikpIHtcclxuICAgICAgdGhpcy5kZWZhdWx0SGFuZGxlcih0eXBlLCBkZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVFdmVudChkYXRhKSB7XHJcbiAgICBjb25zdCBlID0gZGF0YS5ldmVudCwgYW5ubyA9IGRhdGEuYW5ub3RhdGlvbjtcclxuICAgIHN3aXRjaChlLnR5cGUpIHtcclxuICAgICAgY2FzZSAnbW91c2VvdmVyJzoge1xyXG4gICAgICAgIHRoaXMuY3Vyc29ycy5wdXNoKHRoaXMuZWxlbWVudC5jc3MoJ2N1cnNvcicpKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY3NzKCdjdXJzb3InLCAncG9pbnRlcicpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNlb3V0Jzoge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jc3MoJ2N1cnNvcicsIHRoaXMuY3Vyc29ycy5wb3AoKSB8fCAnJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAndG91Y2h0YXAnOlxyXG4gICAgICBjYXNlICdjbGljayc6IHtcclxuICAgICAgICBpZihhbm5vLnVybCkge1xyXG4gICAgICAgICAgdGhpcy5jYWxsSGFuZGxlcnMoJ2V4dGVybmFsJywgYW5uby51cmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGFubm8uZGVzdCkge1xyXG4gICAgICAgICAgbGV0IGRlc3RQcm9taXNlO1xyXG4gICAgICAgICAgaWYodHlwZW9mIGFubm8uZGVzdD09PSdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGRlc3RQcm9taXNlID0gdGhpcy5wZGYuaGFuZGxlci5nZXREZXN0aW5hdGlvbihhbm5vLmRlc3QpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRlc3RQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGFubm8uZGVzdCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkZXN0UHJvbWlzZS5cclxuICAgICAgICAgICAgdGhlbigoZGVzdCk9PiB0eXBlb2YgZGVzdFswXT09PSdudW1iZXInPyBkZXN0WzBdOiB0aGlzLnBkZi5oYW5kbGVyLmdldFBhZ2VJbmRleChkZXN0WzBdKSkuXHJcbiAgICAgICAgICAgIHRoZW4oKG51bWJlcik9PiB0aGlzLmNhbGxIYW5kbGVycygnaW50ZXJuYWwnLCBudW1iZXIpKS5cclxuICAgICAgICAgICAgY2F0Y2goKCk9PiBjb25zb2xlLmVycm9yKCdCYWQgbGluaycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvUGRmTGlua3NIYW5kbGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9QZGZMaW5rc0hhbmRsZXIuanMiLCJpbXBvcnQgRmluZGVyIGZyb20gJ0ZpbmRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2hFbmdpbmUge1xyXG4gIGNvbnN0cnVjdG9yKHBhZ2VDYWxsYmFjaywgcGFnZXMpIHtcclxuICAgIHRoaXMucGFnZUNhbGxiYWNrID0gcGFnZUNhbGxiYWNrO1xyXG4gICAgdGhpcy5wYWdlcyA9IHBhZ2VzO1xyXG4gICAgdGhpcy5yZXN1bHRzID0gW107XHJcbiAgfVxyXG5cclxuICBzZXRRdWVyeShxdWVyeSkge1xyXG4gICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgdGhpcy51cGRhdGUgPSB0cnVlO1xyXG4gICAgdGhpcy5wcm9jZXNzKCk7XHJcbiAgfVxyXG5cclxuICBwcm9jZXNzKCkge1xyXG4gICAgaWYodGhpcy51cGRhdGUpIHtcclxuICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucmVzdWx0cztcclxuICAgICAgdGhpcy5yZXN1bHRzID0gW107XHJcbiAgICAgIGlmKHRoaXMub25QYWdlSGl0c0NoYW5nZWQpIHtcclxuICAgICAgICBmb3IobGV0IHJlcyBvZiByZXN1bHRzKSB7XHJcbiAgICAgICAgICB0aGlzLm9uUGFnZUhpdHNDaGFuZ2VkKHVuZGVmaW5lZCwgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnBhZ2UgPSAwO1xyXG4gICAgICB0aGlzLnN0YW1wID0gRGF0ZS5ub3coKTtcclxuICAgICAgaWYodGhpcy5xdWVyeS5sZW5ndGg+MSkge1xyXG4gICAgICAgIHRoaXMucHJvY2VzcygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYodGhpcy5wYWdlPHRoaXMucGFnZXMpIHtcclxuICAgICAgICBjb25zdCBzdGFtcCA9IHRoaXMuc3RhbXA7XHJcbiAgICAgICAgdGhpcy5maW5kKHRoaXMucGFnZUNhbGxiYWNrKHRoaXMucGFnZSkpLlxyXG4gICAgICAgICAgdGhlbigoY29udGV4dHMpPT4ge1xyXG4gICAgICAgICAgICBpZihzdGFtcCA9PT0gdGhpcy5zdGFtcCkge1xyXG4gICAgICAgICAgICAgIGlmKGNvbnRleHRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgIGNvbnRleHRzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKyt0aGlzLnBhZ2U7XHJcbiAgICAgICAgICAgICAgaWYodGhpcy5vblBhZ2VIaXRzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblBhZ2VIaXRzQ2hhbmdlZCh0aGlzLnBhZ2UsIHRoaXMucXVlcnkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmQocGkpIHtcclxuICAgIGxldCBuZXh0O1xyXG4gICAgaWYocGkudHlwZT09PSdwZGYnKSB7XHJcbiAgICAgIG5leHQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PiB7XHJcbiAgICAgICAgcGkuc3JjLmdldEhhbmRsZXIoKCk9PiB7XHJcbiAgICAgICAgICBjb25zdCBuID0gcGkubnVtYmVyPT09dW5kZWZpbmVkPyB0aGlzLnBhZ2U6IHBpLm51bWJlcjtcclxuICAgICAgICAgIGlmKHBpLnNyYy5nZXRQYWdlVHlwZShuKT09PSdyaWdodCcpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGkuc3JjLmdldFBhZ2UobikuXHJcbiAgICAgICAgICAgIHRoZW4oKHBhZ2UpPT4ge1xyXG4gICAgICAgICAgICAgIHBhZ2UuZ2V0VGV4dENvbnRlbnQoKS5cclxuICAgICAgICAgICAgICB0aGVuKCh0ZXh0Q29udGVudCk9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBGaW5kZXIodGV4dENvbnRlbnQuaXRlbXMubWFwKChpdGVtKT0+IGl0ZW0uc3RyKSwgdGhpcy5xdWVyeSwge2hpdHM6IGZhbHNlfSkuZ2V0Q29udGV4dHMoKSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pLlxyXG4gICAgICAgICAgICBjYXRjaCgoKT0+IHJlc29sdmUoW10pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbmV4dCA9IFByb21pc2UucmVzb2x2ZShbXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV4dDtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvU2VhcmNoRW5naW5lLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9TZWFyY2hFbmdpbmUuanMiLCJpbXBvcnQgQ1NTTGF5ZXIgZnJvbSAnQ1NTTGF5ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hlZXRDc3NMYXllciB7XHJcbiAgY29uc3RydWN0b3IodmlzdWFsLCBibG9jaywgcHJvcHMpIHtcclxuICAgIHRoaXMudmlzdWFsID0gdmlzdWFsO1xyXG4gICAgY29uc3Qgc2l6ZSA9IGJsb2NrLmdldFRvcFNpemUoKTtcclxuICAgIHRoaXMubGF5ZXIgPSBuZXcgQ1NTTGF5ZXIoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQsIHByb3BzKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZShibG9jayk7XHJcbiAgICB0aGlzLnZpc3VhbC5hZGRDc3NPYmplY3QodGhpcy5sYXllcik7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5sYXllci5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLnZpc3VhbC5yZW1vdmVDc3NPYmplY3QodGhpcy5sYXllcik7XHJcbiAgfVxyXG5cclxuICBpc0hpZGRlbigpIHtcclxuICAgIHJldHVybiB0aGlzLmxheWVyLmlzSGlkZGVuKCk7XHJcbiAgfVxyXG5cclxuICBoaWRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubGF5ZXIuaGlkZSgpO1xyXG4gIH1cclxuXHJcbiAgc2hvdygpIHtcclxuICAgIHJldHVybiB0aGlzLmxheWVyLnNob3coKTtcclxuICB9XHJcblxyXG4gIHNldChjc3MsIGh0bWwsIGpzKSB7XHJcbiAgICB0aGlzLmxheWVyLnNldERhdGEoY3NzLCBodG1sLCBqcyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoYmxvY2spIHtcclxuICAgIHRoaXMuYmxvY2sgPSBibG9jaztcclxuICAgIHRoaXMuYmxvY2suZ2V0VG9wV29ybGRSb3RhdGlvbih0aGlzLmxheWVyLnJvdGF0aW9uKTtcclxuICAgIHRoaXMuYmxvY2suZ2V0VG9wV29ybGRQb3NpdGlvbih0aGlzLmxheWVyLnBvc2l0aW9uKTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9TaGVldENzc0xheWVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9TaGVldENzc0xheWVyLmpzIiwiaW1wb3J0IE1hdGhVdGlscyBmcm9tICdNYXRoVXRpbHMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hlZXRQaHlzaWNzIHtcclxuXHJcbiAgc3RhdGljIHRhcmdldEZvcmNlQ2xiKG8sYSx2LGNoKSB7XHJcbiAgICBjb25zdCBsID0gYSp0aGlzLnI7XHJcbiAgICByZXR1cm4gMTAwKnRoaXMubSp0aGlzLmcqKDIvKDErTWF0aC5leHAoMTAqKGwtdGhpcy50bCkpKS0xKS10aGlzLm0qNDAqdjtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBob3ZlckNvcm5lckZvcmNlQ2xiKG8sdixsLGNoKSB7XHJcbiAgICByZXR1cm4gNTtcclxuICB9XHJcblxyXG4gIGdldFRhcmdldEZvcmNlQ2xiKG1hc3MsIHRhcmdldEFuZ2xlKSB7XHJcbiAgICByZXR1cm4gU2hlZXRQaHlzaWNzLnRhcmdldEZvcmNlQ2xiLmJpbmQoe1xyXG4gICAgICBnOiB0aGlzLnAuZ3Jhdml0eSxcclxuICAgICAgbTogbWFzcyxcclxuICAgICAgdGw6IHRhcmdldEFuZ2xlKnRoaXMucC5yLFxyXG4gICAgICByOiB0aGlzLnAuclxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZHJhZ0ZvcmNlQ2xiKG8sYSx2LGNoKSB7XHJcbiAgICByZXR1cm4gby5mbGJ0Km8ubSooMTAqby5nKmNoLTUwKnYvKDErTWF0aC5leHAoMy41Kk1hdGguYWJzKGNoKSkpKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBkcmFnQ29ybmVyRm9yY2VDbGIobyxhLHYsY2gpIHtcclxuICAgIHJldHVybiAxNSooMi8oMStNYXRoLmV4cCgxMCooYS10aGlzLnRhKSpvLnIpKS0xKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXREcmFnQ29ybmVyRm9yY2VDbGIodGFyZ2V0QW5nbGUpIHtcclxuICAgIHJldHVybiBTaGVldFBoeXNpY3MuZHJhZ0Nvcm5lckZvcmNlQ2xiLmJpbmQoe1xyXG4gICAgICB0YTogdGFyZ2V0QW5nbGVcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3Iocj0xLCBncmF2aXR5PTEsIGNvcm5lckRldmlhdGlvbj0wLjE1LCBmcHM9MjQwKSB7XHJcbiAgICB0aGlzLnAgPSB7XHJcbiAgICAgIHIsXHJcbiAgICAgIGNvcm5lckRldmlhdGlvbixcclxuICAgICAgbDogTWF0aC5QSSpyLFxyXG4gICAgICBzdGFydER0OiAxL2ZwcyxcclxuICAgICAgZ3Jhdml0eSxcclxuICAgICAgbWFyZ2luOiAwLjAwMipyLFxyXG4gICAgICBpbmZNOiAxZTQsXHJcbiAgICAgIGF0dGVtcHRzOiAxNixcclxuICAgICAgbWF4SXRlcmF0aW9uczogMTAwXHJcbiAgICB9O1xyXG4gICAgdGhpcy5vcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMub3MgPSBbXTtcclxuICB9XHJcblxyXG4gIGdldFNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5vcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBhZGRPYmplY3QobWFzcywgYW5nbGUsIHZlbG9jaXR5LCBmbGV4aWJpbGl0eSwgY29ybmVySGVpZ2h0LCBzaW11bGF0ZUNsYiwgcmVtb3ZlQ2xiLCBmb3JjZUNsYj0oKT0+IDAsIGNvcm5lckZvcmNlQ2xiPSgpPT4gMCkge1xyXG4gICAgY29uc3Qgbm8gPSB7XHJcbiAgICAgIGlkOiBNYXRoVXRpbHMuZ2V0VW5pcXVlKCksXHJcbiAgICAgIG06IG1hc3MsXHJcbiAgICAgIHY6IHZlbG9jaXR5LFxyXG4gICAgICBsOiBhbmdsZSp0aGlzLnAucixcclxuICAgICAgZjogZm9yY2VDbGIsXHJcbiAgICAgIGNmOiBjb3JuZXJGb3JjZUNsYixcclxuICAgICAgY2g6IGNvcm5lckhlaWdodCxcclxuICAgICAgZmxidDogZmxleGliaWxpdHksXHJcbiAgICAgIHNpbXVsYXRlQ2xiLFxyXG4gICAgICByZW1vdmVDbGJcclxuICAgIH07XHJcbiAgICBsZXQgaSA9IHRoaXMub3MuZmluZEluZGV4KChvKT0+IG5vLmw8PW8ubCk7XHJcbiAgICBpID0gfmk/IGk6IHRoaXMub3MubGVuZ3RoO1xyXG4gICAgdGhpcy5vcy5zcGxpY2UoaSwgMCwgbm8pO1xyXG4gICAgcmV0dXJuIG5vLmlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFyYW1ldHJNYXAobmFtZSkge1xyXG4gICAgY29uc3QgbWFwID0ge1xyXG4gICAgICBtYXNzOiAnbScsXHJcbiAgICAgIHZlbG9jaXR5OiAndicsXHJcbiAgICAgIGZsZXhpYmlsaXR5OiAnZmxidCcsXHJcbiAgICAgIGNvcm5lckhlaWdodDogJ2NoJyxcclxuICAgICAgc2ltdWxhdGVDbGI6ICdzaW11bGF0ZUNsYicsXHJcbiAgICAgIHJlbW92ZUNsYjogJ3JlbW92ZUNsYicsXHJcbiAgICAgIGZvcmNlQ2xiOiAnZicsXHJcbiAgICAgIGNvcm5lckZvcmNlQ2xiOiAnY2YnXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG1hcFtuYW1lXTtcclxuICB9XHJcblxyXG4gIHNldFBhcmFtZXRyKGlkLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgY29uc3QgbyA9IHRoaXMub3MuZmluZCgobyk9PiBvLmlkPT09aWQpO1xyXG4gICAgaWYobmFtZSA9PT0gJ2FuZ2xlJykge1xyXG4gICAgICBvLmwgPSB2YWx1ZSp0aGlzLnAucjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBvW3RoaXMuZ2V0UGFyYW1ldHJNYXAobmFtZSldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQYXJhbWV0cihpZCwgbmFtZSkge1xyXG4gICAgY29uc3QgbyA9IHRoaXMub3MuZmluZCgobyk9PiBvLmlkPT09aWQpO1xyXG4gICAgbGV0IHZhbHVlO1xyXG4gICAgaWYobmFtZSA9PT0gJ2FuZ2xlJykge1xyXG4gICAgICB2YWx1ZSA9IG8ubC90aGlzLnAucjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IG9bdGhpcy5nZXRQYXJhbWV0ck1hcChuYW1lKV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBzaW11bGF0ZShUKSB7XHJcbiAgICBsZXQgdD0wLFxyXG4gICAgICAgIGR0PXRoaXMucC5zdGFydER0LFxyXG4gICAgICAgIGF0dGVtcHQ9MCxcclxuICAgICAgICBpdD0wO1xyXG5cclxuICAgIHdoaWxlKHQ8VCAmJiBpdDx0aGlzLnAubWF4SXRlcmF0aW9ucykge1xyXG4gICAgICBpZihkdD5ULXQpIHtcclxuICAgICAgICBkdCA9IFQtdDtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBub3MgPSB0aGlzLmludGVncmF0ZSh0aGlzLm9zLCBkdCksXHJcbiAgICAgICAgICAgIGNpID0gdGhpcy5maW5kQ29sbGlzaW9ucyhub3MpO1xyXG4gICAgICBpZihjaS5udW0+MSAmJiBhdHRlbXB0PHRoaXMucC5hdHRlbXB0cykge1xyXG4gICAgICAgIGR0Lz0yO1xyXG4gICAgICAgICsrYXR0ZW1wdDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBpZihjaS5udW09PT0xKSB7XHJcbiAgICAgICAgICBjb25zdCBzY29zID0gdGhpcy5zb2x2ZUNvbGxpc2lvbihub3NbY2kubGFzdC0xXSwgbm9zW2NpLmxhc3RdKTtcclxuICAgICAgICAgIG5vc1tjaS5sYXN0LTFdID0gc2Nvc1swXTtcclxuICAgICAgICAgIG5vc1tjaS5sYXN0XSA9IHNjb3NbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY2kubnVtPjEpIHtcclxuICAgICAgICAgIGNvbnN0IGdzID0gW107XHJcbiAgICAgICAgICBsZXQgbGFzdCA9IC0yO1xyXG4gICAgICAgICAgZm9yKGxldCBpIG9mIGNpLmFsbCkge1xyXG4gICAgICAgICAgICBpZihpLWxhc3Q+MSkge1xyXG4gICAgICAgICAgICAgIGdzLnB1c2goW10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdzW2dzLmxlbmd0aC0xXS5wdXNoKGkpO1xyXG4gICAgICAgICAgICBsYXN0ID0gaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvcihsZXQgZyBvZiBncykge1xyXG4gICAgICAgICAgICBsZXQgc2csIGkwO1xyXG4gICAgICAgICAgICBpZihub3NbZ1swXV0ubD5NYXRoLlBJLzIqdGhpcy5wLnIpIHtcclxuICAgICAgICAgICAgICBzZyA9IC0xO1xyXG4gICAgICAgICAgICAgIGkwID0gZ1tnLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBzZyA9IDE7XHJcbiAgICAgICAgICAgICAgaTAgPSBnWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT1pMDsgaTxub3MubGVuZ3RoICYmIGk+LTE7IGkrPXNnKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbyA9IG5vc1tpK3NnXTtcclxuICAgICAgICAgICAgICBpZihvICYmIHNnKihvLmwtbm9zW2ldLmwpPD10aGlzLnAubWFyZ2luKSB7XHJcbiAgICAgICAgICAgICAgICBvLmw9bm9zW2ldLmwrc2cqMip0aGlzLnAubWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgaWYoby5sPnRoaXMucC5sIHx8IG8ubDwwKSB7XHJcbiAgICAgICAgICAgICAgICAgIG8ubCA9IG8ubD50aGlzLnAubD8gdGhpcy5wLmw6IDA7XHJcbiAgICAgICAgICAgICAgICAgIG8uY2ggPSAwO1xyXG4gICAgICAgICAgICAgICAgICBvLnY9MDtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQmFkIGNvbGxpc2lvbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9zID0gbm9zO1xyXG4gICAgICAgIHRoaXMuZmluZEFuZFNvbHZlQ29ybmVyQ29sbGlzaW9ucygpO1xyXG4gICAgICAgIHQrPWR0O1xyXG4gICAgICAgIGR0PXRoaXMucC5zdGFydER0O1xyXG4gICAgICAgIGF0dGVtcHQ9MDtcclxuICAgICAgfVxyXG4gICAgICArK2l0O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVtb3ZlU3RhdGljcygpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU3RhdGljcygpIHtcclxuICAgIGNvbnN0IG5vcyA9IFtdLCBub3RpZnkgPSBbW10sW11dO1xyXG4gICAgZm9yKGxldCBvIG9mIHRoaXMub3MpIHtcclxuICAgICAgaWYoby5zaW11bGF0ZUNsYikge1xyXG4gICAgICAgIG8uc2ltdWxhdGVDbGIoby5sL3RoaXMucC5yLCBvLmNoKTtcclxuICAgICAgfVxyXG4gICAgICBpZigoby5sPT09dGhpcy5wLmwgfHwgby5sPT09MCkgJiYgby52PT09MCkge1xyXG4gICAgICAgIGlmKG8ucmVtb3ZlQ2xiICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIG5vdGlmeVsoby5sIT09dGhpcy5wLmwpKzBdLnB1c2gobyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIG5vcy5wdXNoKG8pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm9zID0gbm9zO1xyXG4gICAgZm9yKGxldCBvIG9mIG5vdGlmeVswXS5yZXZlcnNlKCkpIHtcclxuICAgICAgby5yZW1vdmVDbGIoTWF0aC5QSSwgby5jaCk7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IG8gb2Ygbm90aWZ5WzFdKSB7XHJcbiAgICAgIG8ucmVtb3ZlQ2xiKDAsIG8uY2gpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmluZEFuZFNvbHZlQ29ybmVyQ29sbGlzaW9ucygpIHtcclxuICAgIGlmKHRoaXMub3MubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IG9zID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIC4uLnRoaXMub3NbMF0sXHJcbiAgICAgICAgICBsOiAwLFxyXG4gICAgICAgICAgbTogdGhpcy5wLmluZk0sXHJcbiAgICAgICAgICBjaDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLi4udGhpcy5vcyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAuLi50aGlzLm9zWzBdLFxyXG4gICAgICAgICAgbDogMS4wNSp0aGlzLnAubCxcclxuICAgICAgICAgIG06IHRoaXMucC5pbmZNLFxyXG4gICAgICAgICAgY2g6IDBcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmb3IobGV0IGk9MTsgaTxvcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGE9b3NbaS0xXSwgYj1vc1tpXSxcclxuICAgICAgICAgICAgICBhbD1hLmwrdGhpcy5wLmNvcm5lckRldmlhdGlvbiphLmNoKnRoaXMucC5yLFxyXG4gICAgICAgICAgICAgIGJsPWIubCt0aGlzLnAuY29ybmVyRGV2aWF0aW9uKmIuY2gqdGhpcy5wLnI7XHJcbiAgICAgICAgaWYoMS4wNSphbD5ibCAmJiBhLmNoPmIuY2gpIHtcclxuICAgICAgICAgIGNvbnN0IGRDaCA9IGEuY2gtYi5jaCwgZHY9YS5tL2EuZmxidCtiLm0vYi5mbGJ0LCBrYT1hLm0vYS5mbGJ0L2R2LCBrYj1iLm0vYi5mbGJ0L2R2O1xyXG4gICAgICAgICAgYS5jaD1hLmNoLWtiKmRDaDtcclxuICAgICAgICAgIGIuY2g9Yi5jaCtrYSpkQ2g7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzb2x2ZUNvbGxpc2lvbihhLCBiKSB7XHJcbiAgICBjb25zdCBtbT0oYi5tK2EubSksXHJcbiAgICAgIGF2ID0gKC1hLnYqYi5tK2EubSphLnYrMipiLm0qYi52KS9tbSxcclxuICAgICAgYnYgPSAoYi5tKmIudi1iLnYqYS5tKzIqYS5tKmEudikvbW07XHJcbiAgICByZXR1cm4gW3suLi5hLCB2OiBhdn0sIHsuLi5iLCB2OiBidn1dO1xyXG4gIH1cclxuXHJcbiAgZmluZENvbGxpc2lvbnMob3MpIHtcclxuICAgIGNvbnN0IGNpID0ge1xyXG4gICAgICBudW06IDAsXHJcbiAgICAgIGxhc3Q6IDAsXHJcbiAgICAgIGFsbDogW11cclxuICAgIH07XHJcbiAgICBmb3IobGV0IGkgPSAxOyBpPG9zLmxlbmd0aCAmJiBjaS5udW08MjsgKytpKSB7XHJcbiAgICAgIGlmKG9zW2ktMV0ubD5vc1tpXS5sIHx8IHRoaXMuaXNDb2xsaXNpb24ob3NbaS0xXSwgb3NbaV0pKSB7XHJcbiAgICAgICAgaWYob3NbaS0xXS5sPm9zW2ldLmwpIHtcclxuICAgICAgICAgICsrY2kubnVtO1xyXG4gICAgICAgIH1cclxuICAgICAgICArK2NpLm51bTtcclxuICAgICAgICBjaS5sYXN0ID0gaTtcclxuICAgICAgICBpZihjaS5hbGwuaW5kZXhPZihpLTEpPT09LTEpIHtcclxuICAgICAgICAgIGNpLmFsbC5wdXNoKGktMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNpLmFsbC5pbmRleE9mKGkpPT09LTEpIHtcclxuICAgICAgICAgIGNpLmFsbC5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNpO1xyXG4gIH1cclxuXHJcbiAgaXNDb2xsaXNpb24oYSwgYikge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGEubC1iLmwpPHRoaXMucC5tYXJnaW4gJiYgYS52PmIudjtcclxuICB9XHJcblxyXG4gIGludGVncmF0ZShvcywgZHQpIHtcclxuICAgIGNvbnN0IG5vcyA9IFtdO1xyXG4gICAgZm9yKGxldCBvIG9mIG9zKSB7XHJcbiAgICAgIGNvbnN0IHZsID0gTWF0aFV0aWxzLnJrNChcclxuICAgICAgICB0aGlzLmR5LmJpbmQoe1xyXG4gICAgICAgICAgZzogdGhpcy5wLmdyYXZpdHksXHJcbiAgICAgICAgICByOiB0aGlzLnAucixcclxuICAgICAgICAgIG06IG8ubSxcclxuICAgICAgICAgIGY6IG8uZixcclxuICAgICAgICAgIGNmOiBvLmNmLFxyXG4gICAgICAgICAgY2g6IG8uY2gsXHJcbiAgICAgICAgICBmbGJ0OiBvLmZsYnRcclxuICAgICAgICB9KSxcclxuICAgICAgICAwLFxyXG4gICAgICAgIGR0LFxyXG4gICAgICAgIFtvLnYsIG8ubCwgby5jaF1cclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgbm8gPSB7XHJcbiAgICAgICAgLi4ubyxcclxuICAgICAgICB2OiB2bFswXSxcclxuICAgICAgICBsOiB2bFsxXSxcclxuICAgICAgICBjaDogdmxbMl1cclxuICAgICAgfTtcclxuICAgICAgaWYobm8ubDw9MCB8fCBuby5sPj10aGlzLnAubCkge1xyXG4gICAgICAgIG5vLmw9bm8ubDw9MD8gMDogdGhpcy5wLmw7XHJcbiAgICAgICAgbm8udj0wO1xyXG4gICAgICAgIG5vLmNoPTA7XHJcbiAgICAgIH1cclxuICAgICAgbm9zLnB1c2gobm8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vcztcclxuICB9XHJcblxyXG4gIGR5KHQseSkge1xyXG4gICAgY29uc3Qgdj15WzBdLCBsPXlbMV0sIGNoPXlbMl0sIGY9dGhpcy5mKHRoaXMsbC90aGlzLnIsdixjaCksIGNmPXRoaXMuY2YodGhpcyxsL3RoaXMucix2LGNoKTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICgtdGhpcy5nKk1hdGguY29zKGwvdGhpcy5yKSp0aGlzLm0rZikvdGhpcy5tLFxyXG4gICAgICB2KzAuMDEqKE1hdGgucmFuZG9tKCktMC41KSxcclxuICAgICAgdGhpcy5mbGJ0KigoMi8oMStNYXRoLmV4cCgtMC4yKmNmKSktMSkqKDEtMi8oMStNYXRoLmV4cCgtNSooTWF0aC5hYnMoY2gpLTIpKSkpLWNoKVxyXG4gICAgXTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvU2hlZXRQaHlzaWNzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9TaGVldFBoeXNpY3MuanMiLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNvdW5kc0Vudmlyb21lbnQge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZT17fSkge1xyXG4gICAgdGhpcy5zb3VuZHMgPSB0ZW1wbGF0ZS5zb3VuZHMgfHwge307XHJcbiAgICB0aGlzLmF1ZGlvID0ge307XHJcbiAgICBpZih0aGlzLnNvdW5kcy5zdGFydEZsaXApIHtcclxuICAgICAgdGhpcy5hdWRpby5zdGFydEZsaXAgPSBuZXcgQXVkaW8odGhpcy5zb3VuZHMuc3RhcnRGbGlwKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuc291bmRzLmVuZEZsaXApIHtcclxuICAgICAgdGhpcy5hdWRpby5lbmRGbGlwID0gbmV3IEF1ZGlvKHRoaXMuc291bmRzLmVuZEZsaXApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RW5hYmxlZChlbmFibGVkKSB7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSBlbmFibGVkO1xyXG4gIH1cclxuXHJcbiAgdG9nbGUoKSB7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSAhdGhpcy5lbmFibGVkO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGRlbGV0ZSB0aGlzLmF1ZGlvLnN0YXJ0RmxpcDtcclxuICAgIGRlbGV0ZSB0aGlzLmF1ZGlvLmVuZEZsaXA7XHJcbiAgfVxyXG5cclxuICBzdGFydEZsaXAoKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQgJiYgdGhpcy5hdWRpby5zdGFydEZsaXApIHtcclxuICAgICAgdGhpcy5hdWRpby5zdGFydEZsaXAucGxheSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5kRmxpcCgpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmF1ZGlvLnN0YXJ0RmxpcCkge1xyXG4gICAgICB0aGlzLmF1ZGlvLnN0YXJ0RmxpcC5wYXVzZSgpO1xyXG4gICAgICB0aGlzLmF1ZGlvLnN0YXJ0RmxpcC5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmVuYWJsZWQgJiYgdGhpcy5hdWRpby5lbmRGbGlwKSB7XHJcbiAgICAgIHRoaXMuYXVkaW8uZW5kRmxpcC5wbGF5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmVGbGlwcyhlbWl0dGVyKSB7XHJcbiAgICBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXJ0RmxpcCcsIHRoaXMuc3RhcnRGbGlwLmJpbmQodGhpcykpO1xyXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKCdlbmRGbGlwJywgdGhpcy5lbmRGbGlwLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvY2xhc3Nlcy9Tb3VuZHNFbnZpcm9tZW50LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vanMvY2xhc3Nlcy9Tb3VuZHNFbnZpcm9tZW50LmpzIiwiaW1wb3J0IFdpZGdldENvbnRyb2xsZXIgZnJvbSAnV2lkZ2V0Q29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2NDb250cm9sbGVyIGV4dGVuZHMgV2lkZ2V0Q29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGJvb2tDdHJsKSB7XHJcbiAgICBzdXBlcih2aWV3KTtcclxuICAgIHRoaXMuYm9va0N0cmwgPSBib29rQ3RybDtcclxuICAgIHRoaXMudGFiID0gJ25vbmUnO1xyXG4gIH1cclxuXHJcbiAgc2V0VGh1bWJuYWlscyh0aHVtYm5haWxzKSB7XHJcbiAgICB0aGlzLnRodW1ibmFpbHMgPSB0aHVtYm5haWxzO1xyXG4gICAgdGh1bWJuYWlscy5vbk5hdmlnYXRlID0gdGhpcy5uYXZpZ2F0ZVRodW1ibmFpbHMuYmluZCh0aGlzKTtcclxuICAgIGlmKHRoaXMudGFiID09PSAnbm9uZScpIHtcclxuICAgICAgdGhpcy50YWIgPSAndGh1bWJuYWlscyc7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpcmVDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIHNldFNlYXJjaChzZWFyY2gpIHtcclxuICAgIHRoaXMuc2VhcmNoID0gc2VhcmNoO1xyXG4gICAgc2VhcmNoLm9uTmF2aWdhdGUgPSB0aGlzLm5hdmlnYXRlU2VhcmNoLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmZpcmVDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIHNldEJvb2ttYXJrcyhib29rbWFya3MsIHBkZikge1xyXG4gICAgdGhpcy5ib29rbWFya3MgPSBib29rbWFya3M7XHJcbiAgICB0aGlzLnBkZiA9IHBkZjtcclxuICAgIGJvb2ttYXJrcy5vbk5hdmlnYXRlID0gdGhpcy5uYXZpZ2F0ZUJvb2ttYXJrcy5iaW5kKHRoaXMpO1xyXG4gICAgaWYoYm9va21hcmtzLmdldFNpemUoKSkge1xyXG4gICAgICB0aGlzLnRhYiA9ICdib29rbWFya3MnO1xyXG4gICAgICB0aGlzLmlzQm9va21hcmtzID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgY21kQm9va21hcmtzKCkge1xyXG4gICAgdGhpcy50YWIgPSAnYm9va21hcmtzJztcclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgY21kVGh1bWJuYWlscygpIHtcclxuICAgIHRoaXMudGFiID0gJ3RodW1ibmFpbHMnO1xyXG4gICAgdGhpcy5maXJlQ2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBjbWRTZWFyY2goKSB7XHJcbiAgICB0aGlzLnRhYiA9ICdzZWFyY2gnO1xyXG4gICAgdGhpcy5maXJlQ2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBjbWRDbG9zZVRvYygpIHtcclxuICAgIHRoaXMuaGlkZSgpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVUaHVtYm5haWxzKG51bWJlcikge1xyXG4gICAgdGhpcy5ib29rQ3RybC5nb1RvUGFnZShudW1iZXIpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGVTZWFyY2gobnVtYmVyKSB7XHJcbiAgICB0aGlzLmJvb2tDdHJsLmdvVG9QYWdlKG51bWJlcik7XHJcbiAgfVxyXG5cclxuICBuYXZpZ2F0ZUJvb2ttYXJrcyhpdGVtKSB7XHJcbiAgICBpZihpdGVtLnVybCkge1xyXG4gICAgICB3aW5kb3cub3BlbihpdGVtLnVybCwgJ19ibGFuaycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihpdGVtLmRlc3QpIHtcclxuICAgICAgbGV0IGRlc3RQcm9taXNlO1xyXG4gICAgICBpZih0eXBlb2YgaXRlbS5kZXN0PT09J3N0cmluZycpIHtcclxuICAgICAgICBkZXN0UHJvbWlzZSA9IHRoaXMucGRmLmhhbmRsZXIuZ2V0RGVzdGluYXRpb24oaXRlbS5kZXN0KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBkZXN0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShpdGVtLmRlc3QpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlc3RQcm9taXNlLlxyXG4gICAgICAgIHRoZW4oKGRlc3QpPT4gdGhpcy5wZGYuaGFuZGxlci5nZXRQYWdlSW5kZXgoZGVzdFswXSkpLlxyXG4gICAgICAgIHRoZW4oKG51bWJlcik9PiB0aGlzLmJvb2tDdHJsLmdvVG9QYWdlKG51bWJlcikpLlxyXG4gICAgICAgIGNhdGNoKCgpPT4gY29uc29sZS5lcnJvcignQmFkIGJvb2ttYXJrJykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlVmlldygpIHtcclxuICAgIGlmKHRoaXMudmlldykge1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ3dpZFRvY01lbnUnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd3aWRUaHVtYm5haWxzJywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLnRhYj09PSd0aHVtYm5haWxzJyxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ3dpZFNlYXJjaCcsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy50YWI9PT0nc2VhcmNoJyxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ3dpZEJvb2ttYXJrcycsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy50YWI9PT0nYm9va21hcmtzJyxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ2NtZEJvb2ttYXJrcycsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IHRoaXMudGFiPT09J2Jvb2ttYXJrcydcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnY21kQ2xvc2VUb2MnLCB7XHJcbiAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCdjbWRUaHVtYm5haWxzJywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogdGhpcy50YWI9PT0ndGh1bWJuYWlscydcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnY21kU2VhcmNoJywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogdGhpcy50YWI9PT0nc2VhcmNoJ1xyXG4gICAgICB9KTtcclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+IHRoaXMudGh1bWJuYWlscy5zZXRFbmFibGUodGhpcy52aXNpYmxlICYmIHRoaXMudGFiPT09J3RodW1ibmFpbHMnKSk7XHJcbiAgICAgIHN1cGVyLnVwZGF0ZVZpZXcoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2NsYXNzZXMvVG9jQ29udHJvbGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL2NsYXNzZXMvVG9jQ29udHJvbGxlci5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgVGhyZWVVdGlscyBmcm9tICdUaHJlZVV0aWxzJztcclxuXHJcbmNvbnN0IHJlc1ggPSAxMSxcclxuICAgICAgcmVzWSA9IDIsXHJcbiAgICAgIHJlc1ogPSAxNSxcclxuICAgICAgc2NhbGUgPSAxLFxyXG4gICAgICBmYWNlcyA9IFtdO1xyXG5cclxuY29uc3QgZnJvbnRHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KHNjYWxlLCBzY2FsZSwgcmVzWC0xLCByZXNZLTEpO1xyXG5mcm9udEdlb21ldHJ5LnRyYW5zbGF0ZSgwLjUqc2NhbGUsMC41KnNjYWxlLHNjYWxlKTtcclxuY29uc3QgYmFja0dlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoc2NhbGUsIHNjYWxlLCByZXNYLTEsIHJlc1ktMSk7XHJcbmJhY2tHZW9tZXRyeS5yb3RhdGVZKE1hdGguUEkpO1xyXG5iYWNrR2VvbWV0cnkudHJhbnNsYXRlKDAuNSpzY2FsZSwwLjUqc2NhbGUsMCk7XHJcbmNvbnN0IGxlZnRHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KHNjYWxlLCBzY2FsZSwgcmVzWi0xLCByZXNZLTEpO1xyXG5sZWZ0R2VvbWV0cnkucm90YXRlWSgtTWF0aC5QSS8yKTtcclxubGVmdEdlb21ldHJ5LnRyYW5zbGF0ZSgwLDAuNSpzY2FsZSwwLjUqc2NhbGUpO1xyXG5jb25zdCByaWdodEdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoc2NhbGUsIHNjYWxlLCByZXNaLTEsIHJlc1ktMSk7XHJcbnJpZ2h0R2VvbWV0cnkucm90YXRlWShNYXRoLlBJLzIpO1xyXG5yaWdodEdlb21ldHJ5LnRyYW5zbGF0ZShzY2FsZSwwLjUqc2NhbGUsMC41KnNjYWxlKTtcclxuY29uc3QgdG9wR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeShzY2FsZSwgc2NhbGUsIHJlc1gtMSwgcmVzWi0xKTtcclxudG9wR2VvbWV0cnkucm90YXRlWCgtTWF0aC5QSS8yKTtcclxudG9wR2VvbWV0cnkudHJhbnNsYXRlKDAuNSpzY2FsZSxzY2FsZSwwLjUqc2NhbGUpO1xyXG5jb25zdCBib3R0b21HZW9tZXRyeSA9IHRvcEdlb21ldHJ5LmNsb25lKCk7XHJcbmJvdHRvbUdlb21ldHJ5LnRyYW5zbGF0ZSgwLC1zY2FsZSwwKTtcclxuZm9yKGxldCBmIG9mIGJvdHRvbUdlb21ldHJ5LmZhY2VzKSB7XHJcbiAgW2YuYSwgZi5iXSA9IFtmLmIsIGYuYV07XHJcbn1cclxuXHJcbmNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkdlb21ldHJ5KCk7XHJcbmdlb21ldHJ5LnZlcnRpY2VzID0gWy4uLmJvdHRvbUdlb21ldHJ5LnZlcnRpY2VzLCAuLi50b3BHZW9tZXRyeS52ZXJ0aWNlc107XHJcblxyXG5jb25zdCBhZGRGYWNlcyA9IChmcywgbWFwKT0+IHtcclxuICBmb3IobGV0IGYgb2YgZnMpIHtcclxuICAgIGdlb21ldHJ5LmZhY2VzLnB1c2gobmV3IFRIUkVFLkZhY2UzKG1hcChmLmEpLCBtYXAoZi5iKSwgbWFwKGYuYykpKTtcclxuICB9XHJcbiAgZmFjZXMucHVzaChnZW9tZXRyeS5mYWNlcy5sZW5ndGgpO1xyXG59O1xyXG5cclxuY29uc3QgbWFwVmVydGljZXMgPSAoc3JjLCBkc3QpPT4ge1xyXG4gIGNvbnN0IG1hcCA9IFtdO1xyXG4gIGNvbnN0IGVxID0gKGEsIGIpPT4gTWF0aC5hYnMoYS54LWIueCkrTWF0aC5hYnMoYS55LWIueSkrTWF0aC5hYnMoYS56LWIueik8MWUtNDtcclxuICBmb3IobGV0IGk9MDsgaTxzcmMubGVuZ3RoOyArK2kpIHtcclxuICAgIGZvcihsZXQgaj0wOyBqPGRzdC5sZW5ndGg7ICsraikge1xyXG4gICAgICBpZihlcShzcmNbaV0sIGRzdFtqXSkpIHtcclxuICAgICAgICBtYXBbaV09ajtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbWFwO1xyXG59O1xyXG5cclxuY29uc3QgZnJvbnRNYXAgPSBtYXBWZXJ0aWNlcyhmcm9udEdlb21ldHJ5LnZlcnRpY2VzLCBnZW9tZXRyeS52ZXJ0aWNlcyk7XHJcbmNvbnN0IGJhY2tNYXAgPSBtYXBWZXJ0aWNlcyhiYWNrR2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LnZlcnRpY2VzKTtcclxuY29uc3QgbGVmdE1hcCA9IG1hcFZlcnRpY2VzKGxlZnRHZW9tZXRyeS52ZXJ0aWNlcywgZ2VvbWV0cnkudmVydGljZXMpO1xyXG5jb25zdCByaWdodE1hcCA9IG1hcFZlcnRpY2VzKHJpZ2h0R2VvbWV0cnkudmVydGljZXMsIGdlb21ldHJ5LnZlcnRpY2VzKTtcclxuXHJcbmFkZEZhY2VzKHRvcEdlb21ldHJ5LmZhY2VzLCAoaSk9PiBpK2JvdHRvbUdlb21ldHJ5LnZlcnRpY2VzLmxlbmd0aCk7XHJcbmFkZEZhY2VzKGJvdHRvbUdlb21ldHJ5LmZhY2VzLCAoaSk9PiBpKTtcclxuYWRkRmFjZXMoZnJvbnRHZW9tZXRyeS5mYWNlcywgKGkpPT4gZnJvbnRNYXBbaV0pO1xyXG5hZGRGYWNlcyhiYWNrR2VvbWV0cnkuZmFjZXMsIChpKT0+IGJhY2tNYXBbaV0pO1xyXG5hZGRGYWNlcyhsZWZ0R2VvbWV0cnkuZmFjZXMsIChpKT0+IGxlZnRNYXBbaV0pO1xyXG5hZGRGYWNlcyhyaWdodEdlb21ldHJ5LmZhY2VzLCAoaSk9PiByaWdodE1hcFtpXSk7XHJcbmZhY2VzLnBvcCgpO1xyXG5cclxuVGhyZWVVdGlscy5jb21wdXRlRmFjZVZlcnRleFV2cyhnZW9tZXRyeSwgZmFjZXMpO1xyXG5cclxuZ2VvbWV0cnkuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTtcclxuLy9nZW9tZXRyeS5jb21wdXRlRmFjZU5vcm1hbHMoKTtcclxuZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7XHJcbi8vZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nQm94KCk7XHJcbmdlb21ldHJ5LnZlcnRpY2VzTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcblx0cmVzWCxcclxuXHRyZXNZLFxyXG5cdHJlc1osXHJcblx0ZmFjZXMsXHJcblx0Z2VvbWV0cnlcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbW9kZWxzL3NoZWV0QmxvY2suanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9qcy9tb2RlbHMvc2hlZXRCbG9jay5qcyIsImNvbnN0IG1vdXNlQnV0dG9ucyA9IHtcclxuICBMZWZ0OiAwLFxyXG4gIE1pZGRsZTogMSxcclxuICBSaWdodDogMlxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByb3BzKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICBlcHM6IDFlLTQsXHJcbiAgICBza2luOiB7XHJcbiAgICAgIGRlZmF1bHQ6ICdzaG9ydC13aGl0ZS1ib29rLXZpZXcnLFxyXG4gICAgfSxcclxuICAgIHNjYWxlOiB7XHJcbiAgICAgIGRlZmF1bHQ6IDAuOSxcclxuICAgICAgbWluOiAwLjksXHJcbiAgICAgIG1heDogMi41LFxyXG4gICAgICBsZXZlbHM6IDdcclxuICAgIH0sXHJcbiAgICBsaWdodGluZzoge1xyXG4gICAgICBkZWZhdWx0OiAwLjcsXHJcbiAgICAgIG1pbjogMCxcclxuICAgICAgbWF4OiAxLFxyXG4gICAgICBsZXZlbHM6IDdcclxuICAgIH0sXHJcbiAgICBwYW46IHtcclxuICAgICAgc3BlZWQ6IDUwXHJcbiAgICB9LFxyXG4gICAgbG9hZGluZ0FuaW1hdGlvbjoge1xyXG4gICAgICBza2luOiBmYWxzZSxcclxuICAgICAgYm9vazogdHJ1ZVxyXG4gICAgfSxcclxuICAgIGF1dG9SZXNvbHV0aW9uOiB7XHJcbiAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIGNvZWZmaWNpZW50OiAxLjVcclxuICAgIH0sXHJcbiAgICBhY3Rpb25zOiB7XHJcbiAgICAgIGNtZFpvb21Jbjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFpvb21PdXQ6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZERlZmF1bHRab29tOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiAnZGJsY2xpY2snLFxyXG4gICAgICAgIGNvZGU6IDBcclxuICAgICAgfSxcclxuICAgICAgY21kVG9jOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRGYXN0QmFja3dhcmQ6IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRCYWNrd2FyZDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kRm9yd2FyZDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kRmFzdEZvcndhcmQ6IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRTYXZlOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRQcmludDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY21kRnVsbFNjcmVlbjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgd2lkU2V0dGluZ3M6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFNtYXJ0UGFuOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFNpbmdsZVBhZ2U6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgYWN0aXZlRm9yTW9iaWxlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRTb3VuZHM6IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIGFjdGl2ZTogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRTdGF0czoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRMaWdodGluZ1VwOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRMaWdodGluZ0Rvd246IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhbkxlZnQ6IHtcclxuICAgICAgICBlbmFibGVkOiBmYWxzZVxyXG4gICAgICB9LFxyXG4gICAgICBjbWRQYW5SaWdodDoge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIGNtZFBhblVwOiB7XHJcbiAgICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgY21kUGFuRG93bjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdXNlQ21kUm90YXRlOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiAnbW91c2VkcmFnJyxcclxuICAgICAgICBjb2RlOiBtb3VzZUJ1dHRvbnMuUmlnaHRcclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWREcmFnWm9vbToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ21vdXNlZHJhZycsXHJcbiAgICAgICAgY29kZTogbW91c2VCdXR0b25zLk1pZGRsZVxyXG4gICAgICB9LFxyXG4gICAgICBtb3VzZUNtZFBhbjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ21vdXNlZHJhZycsXHJcbiAgICAgICAgY29kZTogbW91c2VCdXR0b25zLkxlZnRcclxuICAgICAgfSxcclxuICAgICAgbW91c2VDbWRXaGVlbFpvb206IHtcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHR5cGU6ICdtb3VzZXdoZWVsJyxcclxuICAgICAgICBjb2RlOiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kUm90YXRlOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiAndG91Y2hkcmFnJyxcclxuICAgICAgICBjb2RlOiAzXHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdWNoQ21kWm9vbToge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ3RvdWNoZHJhZycsXHJcbiAgICAgICAgY29kZTogMlxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFBhbjoge1xyXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHlwZTogJ3RvdWNoZHJhZycsXHJcbiAgICAgICAgY29kZTogMVxyXG4gICAgICB9LFxyXG4gICAgICB0b3VjaENtZFN3aXBlOiB7XHJcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB0eXBlOiAndG91Y2hkcmFnJyxcclxuICAgICAgICBjb2RlOiAxXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wcm9wcy9ib29rQ29udHJvbGxlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2pzL3Byb3BzL2Jvb2tDb250cm9sbGVyLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEltYWdlQmFzZSBmcm9tICcuL0ltYWdlQmFzZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbGFua0ltYWdlIGV4dGVuZHMgSW1hZ2VCYXNlIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29sb3IpIHtcclxuICAgIHN1cGVyKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKTtcclxuXHJcbiAgICBQcm9taXNlLnJlc29sdmUoKS5cclxuICAgICAgdGhlbigoKT0+IHtcclxuICAgICAgICB0aGlzLnN0YXJ0UmVuZGVyID0gKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckJsYW5rUGFnZSgpO1xyXG4gICAgICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvQmxhbmtJbWFnZS5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0JsYW5rSW1hZ2UuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9va21hcmtzIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyLCBpdGVtcywgZ2V0VGl0bGU9KGkpPT4gaS50aXRsZSwgZ2V0SXRlbXM9KGkpPT5pLml0ZW1zKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMubWFwID0gW107XHJcbiAgICB0aGlzLmdldFRpdGxlID0gZ2V0VGl0bGU7XHJcbiAgICB0aGlzLmdldEl0ZW1zID0gZ2V0SXRlbXM7XHJcbiAgICB0aGlzLm5vZGVzID0gdGhpcy5tYXBOb2RlcyhpdGVtcywgdGhpcy5tYXApO1xyXG5cclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIHRvZ2xlOiAoZSk9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGxldCBsaSA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgIHdoaWxlKGxpWzBdICYmIGxpWzBdIT09Y29udGFpbmVyWzBdICYmICFsaS5oYXNDbGFzcygnaXRlbScpKSB7XHJcbiAgICAgICAgICBsaSA9ICQobGlbMF0ucGFyZW50Tm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGxpLmhhc0NsYXNzKCdpdGVtJykpIHtcclxuICAgICAgICAgIGxldCBjbWQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgIHdoaWxlKGNtZFswXSAmJiBjbWRbMF0hPT1saVswXSAmJiAhY21kLmhhc0NsYXNzKCdjbWQnKSkge1xyXG4gICAgICAgICAgICBjbWQgPSAkKGNtZFswXS5wYXJlbnROb2RlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmKGNtZC5oYXNDbGFzcygnY21kJykpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubWFwW2xpLmF0dHIoJ2RhdGEtaWQnKV07XHJcbiAgICAgICAgICAgIGlmKGNtZC5oYXNDbGFzcygndG9nbGUnKSkge1xyXG4gICAgICAgICAgICAgIG5vZGUubWluaW1pemVkID0gIW5vZGUubWluaW1pemVkO1xyXG4gICAgICAgICAgICAgIGlmKG5vZGUubWluaW1pemVkKSB7XHJcbiAgICAgICAgICAgICAgICBsaS5maW5kKCd1bCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgbGkuZmluZCgnLnRvZ2xlJykuYWRkQ2xhc3MoJ21pbmltaXplZCcpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxpLmZpbmQoJy50b2dsZScpLnJlbW92ZUNsYXNzKCdtaW5pbWl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIGxpLmFwcGVuZCgodGhpcy5yZW5kZXJOb2RlKG5vZGUpLm1hdGNoKC88dWwuKjxcXC91bD4vKSB8fCBbJyddKVswXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmKHRoaXMub25OYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5hdmlnYXRlKG5vZGUuaXRlbSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29udGFpbmVyLm9uKCdjbGljaycsIHRoaXMuYmluZHMudG9nbGUpO1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICB9XHJcblxyXG4gIGdldFNpemUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tYXAubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIHRoaXMuY29udGFpbmVyLm9mZignY2xpY2snLCB0aGlzLmJpbmRzLnRvZ2xlKTtcclxuICAgIHRoaXMuY29udGFpbmVyLmh0bWwoJycpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgdGhpcy5jb250YWluZXIuaHRtbCh0aGlzLnJlbmRlck5vZGVzKHRoaXMubm9kZXMpKTtcclxuICB9XHJcblxyXG4gIGZvckVhY2goZiwgbm9kZXM9dGhpcy5ub2Rlcykge1xyXG4gICAgZm9yKGxldCBub2RlIG9mIChub2RlcyB8fCBbXSkpIHtcclxuICAgICAgZihub2RlKTtcclxuICAgICAgdGhpcy5mb3JFYWNoKGYsIG5vZGUuY2hpbGRyZW4pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZXhwYW5kKCkge1xyXG4gICAgdGhpcy5mb3JFYWNoKChuKT0+IG4ubWluaW1pemVkID0gZmFsc2UpO1xyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICB9XHJcblxyXG4gIG1pbmltaXplKCkge1xyXG4gICAgdGhpcy5mb3JFYWNoKChuKT0+IG4ubWluaW1pemVkID0gdHJ1ZSk7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gWyc8ZGl2IGNsYXNzPVwiYXJlYVwiPicsXHJcbiAgICAgIG5vZGUuY2hpbGRyZW4/ICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiY21kIHRvZ2xlJyArIChub2RlLm1pbmltaXplZD8gJyBtaW5pbWl6ZWQnOiAnJykgKyAnXCI+PGkgY2xhc3M9XCJmYSBmYS1hbmdsZS1yaWdodFwiPjwvaT48L2E+ICc6ICc8aSBjbGFzcz1cIndoaXRlLXNwYWNlXCI+PC9pPiAnLFxyXG4gICAgICAnPGEgY2xhc3M9XCJjbWRcIiB0aXRsZT1cIicsIG5vZGUudGl0bGUsJ1wiIGhyZWY9XCIjXCI+Jywgbm9kZS50aXRsZSwgJzwvYT48L2Rpdj4nLFxyXG4gICAgICBub2RlLm1pbmltaXplZD8gJyc6IHRoaXMucmVuZGVyTm9kZXMobm9kZS5jaGlsZHJlbilcclxuICAgIF0uam9pbignJyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJOb2Rlcyhub2Rlcykge1xyXG4gICAgbGV0IHJlcyA9IFsnPGRpdiBjbGFzcz1cImJvb2ttYXJrc1wiPiddO1xyXG4gICAgaWYobm9kZXMgJiYgbm9kZXMubGVuZ3RoKSB7XHJcbiAgICAgIHJlcy5wdXNoKCc8dWwgY2xhc3M9XCJsZXZlbC0nLCBub2Rlc1swXS5sZXZlbCwgJ1wiPicpO1xyXG4gICAgICBmb3IobGV0IG5vZGUgb2Ygbm9kZXMpIHtcclxuICAgICAgICByZXMucHVzaChbXHJcbiAgICAgICAgICAnPGxpIGNsYXNzPVwiaXRlbVwiIGRhdGEtaWQ9XCInLCBub2RlLmlkLCdcIj4nLFxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlck5vZGUobm9kZSksXHJcbiAgICAgICAgICAnPC9saT4nXS5qb2luKCcnKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzLnB1c2goJzwvdWw+Jyk7XHJcbiAgICB9XHJcbiAgICByZXMucHVzaCgnPC9kaXY+Jyk7XHJcbiAgICByZXR1cm4gcmVzLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcbiAgbWFwTm9kZXMoaXRlbXMsIG1hcD1bXSwgbGV2ZWw9MCkge1xyXG4gICAgbGV0IG5vZGVzID0gbnVsbDtcclxuICAgIGlmKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICBub2Rlcz1bXTtcclxuICAgICAgZm9yKGxldCBpdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBtYXAubGVuZ3RoO1xyXG4gICAgICAgIG1hcC5wdXNoKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHtcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgdGl0bGU6IHRoaXMuZ2V0VGl0bGUoaXRlbSksXHJcbiAgICAgICAgICBsZXZlbCxcclxuICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICBtaW5pbWl6ZWQ6IHRydWUsXHJcbiAgICAgICAgICBjaGlsZHJlbjogdGhpcy5tYXBOb2Rlcyh0aGlzLmdldEl0ZW1zKGl0ZW0pLCBtYXAsIGxldmVsKzEpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIG1hcFtpZF0gPSBub2RlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9kZXM7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9Cb29rbWFya3MuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Cb29rbWFya3MuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGV0ZWN0b3Ige1xyXG5cclxuXHRzdGF0aWMgY2FudmFzID0gISEgd2luZG93LkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcblx0c3RhdGljIHdlYmdsID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHRcdHJldHVybiAhISAod2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiAoY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJykgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcpKSk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSkoKTtcclxuXHJcblx0c3RhdGljIHdvcmtlcnMgPSAhISB3aW5kb3cuV29ya2VyO1xyXG5cclxuXHRzdGF0aWMgZmlsZWFwaSA9IHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYjtcclxuXHJcblx0c3RhdGljIGdldFdlYkdMRXJyb3JNZXNzYWdlKCkge1xyXG5cdFx0Y29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdFx0ZWxlbWVudC5pZCA9ICd3ZWJnbC1lcnJvci1tZXNzYWdlJztcclxuXHRcdGVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9ICdtb25vc3BhY2UnO1xyXG5cdFx0ZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxM3B4JztcclxuXHRcdGVsZW1lbnQuc3R5bGUuZm9udFdlaWdodCA9ICdub3JtYWwnO1xyXG5cdFx0ZWxlbWVudC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuXHRcdGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICcjZmZmJztcclxuXHRcdGVsZW1lbnQuc3R5bGUuY29sb3IgPSAnIzAwMCc7XHJcblx0XHRlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMS41ZW0nO1xyXG5cdFx0ZWxlbWVudC5zdHlsZS53aWR0aCA9ICc0MDBweCc7XHJcblx0XHRlbGVtZW50LnN0eWxlLm1hcmdpbiA9ICc1ZW0gYXV0byAwJztcclxuXHJcblx0XHRpZiAoIURldGVjdG9yLndlYmdsKSB7XHJcblx0XHRcdGVsZW1lbnQuaW5uZXJIVE1MID0gd2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dCA/IFtcclxuXHRcdFx0XHQnWW91ciBncmFwaGljcyBjYXJkIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPVwiaHR0cDovL2tocm9ub3Mub3JnL3dlYmdsL3dpa2kvR2V0dGluZ19hX1dlYkdMX0ltcGxlbWVudGF0aW9uXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+V2ViR0w8L2E+LjxiciAvPicsXHJcblx0XHRcdFx0J0ZpbmQgb3V0IGhvdyB0byBnZXQgaXQgPGEgaHJlZj1cImh0dHA6Ly9nZXQud2ViZ2wub3JnL1wiIHN0eWxlPVwiY29sb3I6IzAwMFwiPmhlcmU8L2E+LidcclxuXHRcdFx0XS5qb2luKCdcXG4nKSA6IFtcclxuXHRcdFx0XHQnWW91ciBicm93c2VyIGRvZXMgbm90IHNlZW0gdG8gc3VwcG9ydCA8YSBocmVmPVwiaHR0cDovL2tocm9ub3Mub3JnL3dlYmdsL3dpa2kvR2V0dGluZ19hX1dlYkdMX0ltcGxlbWVudGF0aW9uXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+V2ViR0w8L2E+Ljxici8+JyxcclxuXHRcdFx0XHQnRmluZCBvdXQgaG93IHRvIGdldCBpdCA8YSBocmVmPVwiaHR0cDovL2dldC53ZWJnbC5vcmcvXCIgc3R5bGU9XCJjb2xvcjojMDAwXCI+aGVyZTwvYT4uJ1xyXG5cdFx0XHRdLmpvaW4oJ1xcbicpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgYWRkR2V0V2ViR0xNZXNzYWdlKHBhcmFtZXRlcnMpIHtcclxuXHRcdGxldCBwYXJlbnQsIGlkLCBlbGVtZW50O1xyXG5cdFx0cGFyYW1ldGVycyA9IHBhcmFtZXRlcnMgfHwge307XHJcblxyXG5cdFx0cGFyZW50ID0gcGFyYW1ldGVycy5wYXJlbnQgfHwgJChkb2N1bWVudC5ib2R5KTtcclxuXHRcdGlkID0gcGFyYW1ldGVycy5pZCB8fCAnb2xkaWUnO1xyXG5cclxuXHRcdGVsZW1lbnQgPSBEZXRlY3Rvci5nZXRXZWJHTEVycm9yTWVzc2FnZSgpO1xyXG5cdFx0Ly9lbGVtZW50LmlkID0gaWQ7XHJcblxyXG5cdFx0cGFyZW50LmFwcGVuZChlbGVtZW50KTtcclxuXHR9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL0RldGVjdG9yLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRGV0ZWN0b3IuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb2NNb3VzZVNpbXVsYXRvciB7XHJcblxyXG4gIHN0YXRpYyBIT1ZFUiA9ICdTSU1VTEFURUQtSE9WRVInO1xyXG4gIHN0YXRpYyBBQ1RJVkUgPSAnU0lNVUxBVEVELUFDVElWRSc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGpGcmFtZSwgZWxlbWVudCwgYkVsZW1lbnQ9ZG9jdW1lbnQuYm9keSkge1xyXG4gICAgdGhpcy5qRnJhbWUgPSBqRnJhbWU7XHJcbiAgICB0aGlzLnduZCA9IGpGcmFtZVswXS5jb250ZW50V2luZG93O1xyXG4gICAgdGhpcy5kb2MgPSBqRnJhbWVbMF0uY29udGVudERvY3VtZW50O1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCB8fCBkb2MuYm9keTtcclxuICAgIHRoaXMuYkVsZW1lbnQgPSBiRWxlbWVudDtcclxuICAgIHRoaXMucmVzZW5kUHJvcGVydGllcyA9IHRoaXMuZ2V0RGVmYXVsdFJlc2VuZFByb3BlcnRpZXMoKTtcclxuICAgIHRoaXMudW5kZWZpbmVkUHJvcGVydGllcyA9IHRoaXMuZ2V0RGVmYXVsdFVuZGVmaW5lZFByb3BlcnRpZXMoKTtcclxuICAgIHRoaXMuY3Vyc29ycyA9IFtdO1xyXG4gICAgdGhpcy5vbkRvY0NoYW5nZUNsYnMgPSBbXTtcclxuICAgIGNvbnN0IHRlcm1zID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZpbmQ6ICc6aG92ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZTogJy4nK0RvY01vdXNlU2ltdWxhdG9yLkhPVkVSXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaW5kOiAnOmFjdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiAnLicrRG9jTW91c2VTaW11bGF0b3IuQUNUSVZFXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBdO1xyXG4gICAgbGV0IHN0eWxlID0gWyc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+J107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZG9jLnN0eWxlU2hlZXRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGxldCBzcyA9IHRoaXMuZG9jLnN0eWxlU2hlZXRzW2ldO1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNzLmNzc1J1bGVzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgbGV0IHIgPSBzcy5jc3NSdWxlc1tqXSwgY3NzVGV4dDtcclxuICAgICAgICBmb3IobGV0IHRlcm0gb2YgdGVybXMpIHtcclxuICAgICAgICAgIGlmICh+ci5zZWxlY3RvclRleHQuaW5kZXhPZih0ZXJtLmZpbmQpKSB7XHJcbiAgICAgICAgICAgIGNzc1RleHQgPSAoY3NzVGV4dCB8fCByLmNzc1RleHQpLnJlcGxhY2UobmV3IFJlZ0V4cCh0ZXJtLmZpbmQsICdnJyksIHRlcm0ucmVwbGFjZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNzc1RleHQpIHtcclxuICAgICAgICAgIHN0eWxlLnB1c2goY3NzVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzdHlsZS5wdXNoKCc8L3N0eWxlPicpO1xyXG4gICAgJCh0aGlzLmRvYy5oZWFkKS5hcHBlbmQoJChzdHlsZS5qb2luKCcnKSkpO1xyXG4gIH1cclxuXHJcbiAgY29udmVydENvb3Jkcyh4LCB5KSB7XHJcbiAgICBjb25zdCBqRWxlbWVudCA9ICQodGhpcy5lbGVtZW50KTtcclxuICAgIGNvbnN0IG9mZnNldCA9IGpFbGVtZW50Lm9mZnNldCgpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogb2Zmc2V0LmxlZnQrakVsZW1lbnQud2lkdGgoKSp4LFxyXG4gICAgICB5OiBvZmZzZXQudG9wK2pFbGVtZW50LmhlaWdodCgpKigxLXkpXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlckV2ZW50KGVsZW1lbnQsIGUsIHAsIHR5cGUsIGFkdmFuY2VkUHJvcHMpIHtcclxuICAgIGNvbnN0IHByb3BzID0ge307XHJcbiAgICBmb3IobGV0IG4gb2YgdGhpcy5yZXNlbmRQcm9wZXJ0aWVzKSB7XHJcbiAgICAgIHByb3BzW25dID0gZVtuXTtcclxuICAgIH1cclxuICAgIGZvcihsZXQgbiBvZiB0aGlzLnVuZGVmaW5lZFByb3BlcnRpZXMpIHtcclxuICAgICAgcHJvcHNbbl0gPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBmb3IobGV0IG4gaW4gYWR2YW5jZWRQcm9wcykge1xyXG4gICAgICBpZihhZHZhbmNlZFByb3BzLmhhc093blByb3BlcnR5KG4pKSB7XHJcbiAgICAgICAgcHJvcHNbbl0gPSBhZHZhbmNlZFByb3BzW25dO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwcm9wcy52aWV3ID0gdGhpcy53bmQ7XHJcbiAgICBwcm9wcy5wYWdlWCA9IHAueDtcclxuICAgIHByb3BzLnBhZ2VZID0gcC55O1xyXG4gICAgY29uc3QgakUgPSAkLkV2ZW50KHR5cGUsIHByb3BzKTtcclxuICAgIGpFLnRpbWVTdGFtcCA9IGUudGltZVN0YW1wO1xyXG4gICAgJChlbGVtZW50KS50cmlnZ2VyKGpFKTtcclxuICB9XHJcblxyXG4gIGFkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcclxuICAgICQoZWxlbWVudCkuYWRkQ2xhc3MobmFtZSk7XHJcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMud25kLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XHJcbiAgICB0aGlzLmN1cnNvcnMucHVzaCgkKHRoaXMuYkVsZW1lbnQpLmNzcygnY3Vyc29yJykpO1xyXG4gICAgJCh0aGlzLmJFbGVtZW50KS5jc3MoJ2N1cnNvcicsIHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2N1cnNvcicpKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNsYXNzKGVsZW1lbnQsIG5hbWUpIHtcclxuICAgICQoZWxlbWVudCkucmVtb3ZlQ2xhc3MobmFtZSk7XHJcbiAgICAkKHRoaXMuYkVsZW1lbnQpLmNzcygnY3Vyc29yJywgdGhpcy5jdXJzb3JzLnBvcCgpKTtcclxuICB9XHJcblxyXG4gIGVudGVyRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICB0aGlzLmFkZENsYXNzKGVsZW1lbnQsIERvY01vdXNlU2ltdWxhdG9yLkhPVkVSKTtcclxuICB9XHJcblxyXG4gIGxlYXZlRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICB0aGlzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIERvY01vdXNlU2ltdWxhdG9yLkhPVkVSKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICB0aGlzLmFkZENsYXNzKGVsZW1lbnQsIERvY01vdXNlU2ltdWxhdG9yLkFDVElWRSk7XHJcbiAgfVxyXG5cclxuICBkZWFjdGl2YXRlRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICB0aGlzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIERvY01vdXNlU2ltdWxhdG9yLkFDVElWRSk7XHJcbiAgfVxyXG5cclxuICBhZGREb2NDaGFuZ2VDbGIoY2xiKSB7XHJcbiAgICB0aGlzLm9uRG9jQ2hhbmdlQ2xicy5wdXNoKGNsYik7XHJcbiAgfVxyXG5cclxuICBub3RpZnkoKSB7XHJcbiAgICBmb3IobGV0IGNsYiBvZiB0aGlzLm9uRG9jQ2hhbmdlQ2xicykge1xyXG4gICAgICBjbGIodGhpcy53bmQsIHRoaXMuZG9jKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVsZW1lbnRGcm9tUG9pbnQocCkge1xyXG4gICAgbGV0IG5vZGUgPSB0aGlzLmRvYy5ib2R5LCBuZXh0ID0gdHJ1ZTtcclxuICAgIHdoaWxlKG5leHQpIHtcclxuICAgICAgbmV4dCA9IGZhbHNlO1xyXG4gICAgICBmb3IobGV0IGk9MDsgaTxub2RlLmNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGROb2Rlc1tpXTtcclxuICAgICAgICBpZihjaGlsZCBpbnN0YW5jZW9mIHRoaXMud25kLkVsZW1lbnQpIHtcclxuICAgICAgICAgIGNvbnN0IGpDID0gJChjaGlsZCksIG9mZnNldCA9IGpDLm9mZnNldCgpLCBoZWlnaHQgPSBqQy5oZWlnaHQoKSwgd2lkdGggPSBqQy53aWR0aCgpO1xyXG4gICAgICAgICAgaWYocC54Pm9mZnNldC5sZWZ0ICYmIHAueDxvZmZzZXQubGVmdCt3aWR0aCAmJiBwLnk+b2Zmc2V0LnRvcCAmJiBwLnk8b2Zmc2V0LnRvcCtoZWlnaHQpIHtcclxuICAgICAgICAgICAgbm9kZSA9IGNoaWxkO1xyXG4gICAgICAgICAgICBuZXh0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnQocCkge1xyXG4gICAgY29uc3Qgb2ZmMCA9IHRoaXMuakZyYW1lLm9mZnNldCgpO1xyXG4gICAgdGhpcy5qRnJhbWUub2Zmc2V0KHtsZWZ0OiAwLjUqd2luZG93LmlubmVyV2lkdGgtcC54LCB0b3A6IDAuNSp3aW5kb3cuaW5uZXJIZWlnaHQtcC55fSk7XHJcbiAgICBsZXQgZWxlbWVudCA9IHRoaXMuZG9jLmVsZW1lbnRGcm9tUG9pbnQocC54LCBwLnkpO1xyXG4gICAgaWYoIWVsZW1lbnQpIHsgLy8gaXQgaXNuJ3QgYSBqb2tlIGl0J3MgSUVcclxuICAgICAgZWxlbWVudCA9IHRoaXMuZG9jLmVsZW1lbnRGcm9tUG9pbnQocC54LCBwLnkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5qRnJhbWUub2Zmc2V0KG9mZjApO1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ/IGVsZW1lbnQ6IHRoaXMuZWxlbWVudEZyb21Qb2ludChwKTtcclxuICB9XHJcblxyXG4gIHNpbXVsYXRlKGUsIGRvYywgeCwgeSkge1xyXG4gICAgY29uc3QgcCA9IHRoaXMuY29udmVydENvb3Jkcyh4LCB5KSxcclxuICAgICAgICAgIGVsZW1lbnQgPSBkb2M9PT10aGlzLmRvYz8gdGhpcy5nZXRFbGVtZW50KHApOiB1bmRlZmluZWQ7XHJcbiAgICBsZXQgdHJpZ2dlciA9IGVsZW1lbnQgIT09IHVuZGVmaW5lZCwgbm90aWZ5ID0gZmFsc2U7XHJcblxyXG4gICAgc3dpdGNoKGUudHlwZSkge1xyXG4gICAgICBjYXNlICdtb3VzZWRvd24nOiB7XHJcbiAgICAgICAgaWYodGhpcy5jYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICB0aGlzLmRlYWN0aXZhdGVFbGVtZW50KHRoaXMuY2FwRWxlbWVudCk7XHJcbiAgICAgICAgICBub3RpZnkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhcEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIGlmKHRoaXMuY2FwRWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy5hY3RpdmF0ZUVsZW1lbnQodGhpcy5jYXBFbGVtZW50KTtcclxuICAgICAgICAgIG5vdGlmeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNldXAnOiB7XHJcbiAgICAgICAgaWYodGhpcy5jYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICB0aGlzLmRlYWN0aXZhdGVFbGVtZW50KHRoaXMuY2FwRWxlbWVudCk7XHJcbiAgICAgICAgICBub3RpZnkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVTdGFtcCA9IGUudGltZVN0YW1wO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ2NsaWNrJzoge1xyXG4gICAgICAgIHRyaWdnZXIgPSBlbGVtZW50ICYmIHRoaXMuY2FwRWxlbWVudCA9PT0gZWxlbWVudCAmJiBlLnRpbWVTdGFtcCA9PT0gdGhpcy50aW1lU3RhbXA7XHJcbiAgICAgICAgdGhpcy5jYXBFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgJ21vdXNlZW50ZXInOlxyXG4gICAgICBjYXNlICdtb3VzZW92ZXInOlxyXG4gICAgICBjYXNlICdtb3VzZW1vdmUnOiB7XHJcbiAgICAgICAgbGV0IGxlYXZlZCA9IG51bGw7XHJcbiAgICAgICAgaWYodGhpcy5ob3ZFbGVtZW50ICE9PSBlbGVtZW50ICYmIHRoaXMuaG92RWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQodGhpcy5ob3ZFbGVtZW50LCBlLCBwLCAnbW91c2VvdXQnLCB7cmVsYXRlZFRhcmdldDogZWxlbWVudD8gZWxlbWVudDogbnVsbH0pO1xyXG4gICAgICAgICAgdGhpcy5sZWF2ZUVsZW1lbnQodGhpcy5ob3ZFbGVtZW50KTtcclxuICAgICAgICAgIGxlYXZlZCA9IHRoaXMuaG92RWxlbWVudDtcclxuICAgICAgICAgIHRoaXMuaG92RWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIG5vdGlmeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF0aGlzLmhvdkVsZW1lbnQgJiYgZWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoZWxlbWVudCwgZSwgcCwgJ21vdXNlb3ZlcicsIHtyZWxhdGVkVGFyZ2V0OiBsZWF2ZWR9KTtcclxuICAgICAgICAgIHRoaXMuZW50ZXJFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5ob3ZFbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgIG5vdGlmeSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyaWdnZXIgPSBlbGVtZW50ICYmIGUudHlwZSA9PT0gJ21vdXNlbW92ZSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAnbW91c2VsZWF2ZSc6XHJcbiAgICAgIGNhc2UgJ21vdXNlb3V0Jzoge1xyXG4gICAgICAgIGlmKHRoaXMuaG92RWxlbWVudCkge1xyXG4gICAgICAgICAgdGhpcy50cmlnZ2VyRXZlbnQodGhpcy5ob3ZFbGVtZW50LCBlLCBwLCAnbW91c2VvdXQnLCB7cmVsYXRlZFRhcmdldDogZS5yZWxhdGVkVGFyZ2V0fSk7XHJcbiAgICAgICAgICB0aGlzLmxlYXZlRWxlbWVudCh0aGlzLmhvdkVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5ob3ZFbGVtZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgbm90aWZ5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlciA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZih0cmlnZ2VyKSB7XHJcbiAgICAgIHRoaXMudHJpZ2dlckV2ZW50KGVsZW1lbnQsIGUsIHAsIGUudHlwZSk7XHJcbiAgICB9XHJcbiAgICBpZihub3RpZnkpIHtcclxuICAgICAgdGhpcy5ub3RpZnkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERlZmF1bHRVbmRlZmluZWRQcm9wZXJ0aWVzKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgJ2NsaWVudFgnLFxyXG4gICAgICAnY2xpZW50WScsXHJcbiAgICAgICdvZmZzZXRYJyxcclxuICAgICAgJ29mZnNldFknLFxyXG4gICAgICAnc2NyZWVuWCcsXHJcbiAgICAgICdzY3JlZW5ZJ1xyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGdldERlZmF1bHRSZXNlbmRQcm9wZXJ0aWVzKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgJ2FsdEtleScsXHJcbiAgICAgICdidWJibGVzJyxcclxuICAgICAgJ2J1dHRvbicsXHJcbiAgICAgICdidXR0b25zJyxcclxuICAgICAgJ2NhbmNlbGFibGUnLFxyXG4gICAgICAnY2hhbmdlZFRvdWNoZXMnLFxyXG4gICAgICAnY2hhcicsXHJcbiAgICAgICdjaGFyQ29kZScsXHJcbiAgICAgICdjdHJsS2V5JyxcclxuICAgICAgJ2RhdGEnLFxyXG4gICAgICAnZGV0YWlsJyxcclxuICAgICAgJ2V2ZW50UGhhc2UnLFxyXG4gICAgICAnaXNEZWZhdWx0UHJldmVudGVkJyxcclxuICAgICAgJ2tleScsXHJcbiAgICAgICdrZXlDb2RlJyxcclxuICAgICAgJ21ldGFLZXknLFxyXG4gICAgICAncG9pbnRlcklkJyxcclxuICAgICAgJ3BvaW50ZXJUeXBlJyxcclxuICAgICAgJ3NoaWZ0S2V5JyxcclxuICAgICAgJ3RhcmdldFRvdWNoZXMnLFxyXG4gICAgICAndG91Y2hlcycsXHJcbiAgICAgICd3aGljaCdcclxuICAgIF07XHJcbiAgfVxyXG5cclxufVxyXG5cclxuLypcclxuYWx0S2V5LFxyXG5idWJibGVzLFxyXG5idXR0b24sXHJcbmJ1dHRvbnMsXHJcbmNhbmNlbGFibGUsXHJcbmNoYW5nZWRUb3VjaGVzLFxyXG5jaGFyLFxyXG5jaGFyQ29kZSxcclxuY2xpZW50WCxcclxuY2xpZW50WSxcclxuY3RybEtleSxcclxuY3VycmVudFRhcmdldCxcclxuZGF0YSxcclxuZGVsZWdhdGVUYXJnZXQsXHJcbmRldGFpbCxcclxuZXZlbnRQaGFzZSxcclxuaGFuZGxlT2JqLFxyXG5pc0RlZmF1bHRQcmV2ZW50ZWQsXHJcbmtleSxcclxua2V5Q29kZSxcclxubWV0YUtleSxcclxub2Zmc2V0WCxcclxub2Zmc2V0WSxcclxub3JpZ2luYWxFdmVudCxcclxucGFnZVgsXHJcbnBhZ2VZLFxyXG5wb2ludGVySWQsXHJcbnBvaW50ZXJUeXBlLFxyXG5yZWxhdGVkVGFyZ2V0LFxyXG5zY3JlZW5YLFxyXG5zY3JlZW5ZLFxyXG5zaGlmdEtleSxcclxudGFyZ2V0LFxyXG50YXJnZXRUb3VjaGVzLFxyXG50aW1lU3RhbXAsXHJcbnRvRWxlbWVudCxcclxudG91Y2hlcyxcclxudHlwZSxcclxudmlldyxcclxud2hpY2hcclxuKi9cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRG9jTW91c2VTaW11bGF0b3IuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Eb2NNb3VzZVNpbXVsYXRvci5qcyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERvbTJJbWFnZSB7XG5cbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIGNhY2hlKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy53aW5kb3cgPSB3bmQ7XG4gICAgdGhpcy5kb2N1bWVudCA9IGRvYztcbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG5cbiAgICBjb25zdCB1dGlsID0gbmV3VXRpbCgpO1xuICAgIGNvbnN0IGlubGluZXIgPSBuZXdJbmxpbmVyKCk7XG4gICAgY29uc3QgZm9udEZhY2VzID0gbmV3Rm9udEZhY2VzKCk7XG4gICAgY29uc3QgaW1hZ2VzID0gbmV3SW1hZ2VzKCk7XG5cbiAgICB0aGlzLnRvU3ZnID0gdG9Tdmc7XG4gICAgdGhpcy50b1BuZyA9IHRvUG5nO1xuICAgIHRoaXMudG9KcGVnID0gdG9KcGVnO1xuICAgIHRoaXMudG9CbG9iID0gdG9CbG9iO1xuICAgIHRoaXMudG9QaXhlbERhdGEgPSB0b1BpeGVsRGF0YTtcbiAgICB0aGlzLmltcGwgPSB7XG4gICAgICAgICAgICAgICAgICBmb250RmFjZXM6IGZvbnRGYWNlcyxcbiAgICAgICAgICAgICAgICAgIGltYWdlczogaW1hZ2VzLFxuICAgICAgICAgICAgICAgICAgdXRpbDogdXRpbCxcbiAgICAgICAgICAgICAgICAgIGlubGluZXI6IGlubGluZXJcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5maWx0ZXIgLSBTaG91bGQgcmV0dXJuIHRydWUgaWYgcGFzc2VkIG5vZGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBvdXRwdXRcbiAgICAgKiAgICAgICAgICAoZXhjbHVkaW5nIG5vZGUgbWVhbnMgZXhjbHVkaW5nIGl0J3MgY2hpbGRyZW4gYXMgd2VsbCkuIE5vdCBjYWxsZWQgb24gdGhlIHJvb3Qgbm9kZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5iZ2NvbG9yIC0gY29sb3IgZm9yIHRoZSBiYWNrZ3JvdW5kLCBhbnkgdmFsaWQgQ1NTIGNvbG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLndpZHRoIC0gd2lkdGggdG8gYmUgYXBwbGllZCB0byBub2RlIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMuaGVpZ2h0IC0gaGVpZ2h0IHRvIGJlIGFwcGxpZWQgdG8gbm9kZSBiZWZvcmUgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLnN0eWxlIC0gYW4gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgdG8gYmUgY29waWVkIHRvIG5vZGUncyBzdHlsZSBiZWZvcmUgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnF1YWxpdHkgLSBhIE51bWJlciBiZXR3ZWVuIDAgYW5kIDEgaW5kaWNhdGluZyBpbWFnZSBxdWFsaXR5IChhcHBsaWNhYmxlIHRvIEpQRUcgb25seSksXG4gICAgICAgICAgICAgICAgZGVmYXVsdHMgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBTVkcgaW1hZ2UgZGF0YSBVUkxcbiAgICAgKiAqL1xuXG4gICAgZnVuY3Rpb24gdG9Tdmcobm9kZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmVOb2RlKG5vZGUsIG9wdGlvbnMuZmlsdGVyLCB0cnVlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihlbWJlZEZvbnRzKVxuICAgICAgICAgICAgLnRoZW4oaW5saW5lSW1hZ2VzKVxuICAgICAgICAgICAgLnRoZW4oYXBwbHlPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNsb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VTdmdEYXRhVXJpKGNsb25lLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLndpZHRoIHx8IHV0aWwud2lkdGgobm9kZSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVpZ2h0IHx8IHV0aWwuaGVpZ2h0KG5vZGUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhjbG9uZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYmdjb2xvcikgY2xvbmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gb3B0aW9ucy5iZ2NvbG9yO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy53aWR0aCkgY2xvbmUuc3R5bGUud2lkdGggPSBvcHRpb25zLndpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhlaWdodCkgY2xvbmUuc3R5bGUuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgKyAncHgnO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zdHlsZSlcbiAgICAgICAgICAgICAgICBzZWxmLndpbmRvdy5PYmplY3Qua2V5cyhvcHRpb25zLnN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZS5zdHlsZVtwcm9wZXJ0eV0gPSBvcHRpb25zLnN0eWxlW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgVWludDhBcnJheSBjb250YWluaW5nIFJHQkEgcGl4ZWwgZGF0YS5cbiAgICAgKiAqL1xuICAgIGZ1bmN0aW9uIHRvUGl4ZWxEYXRhKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucyB8fCB7fSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLndpZHRoKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICB1dGlsLmhlaWdodChub2RlKVxuICAgICAgICAgICAgICAgICkuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtIFRoZSBET00gTm9kZSBvYmplY3QgdG8gcmVuZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBSZW5kZXJpbmcgb3B0aW9ucywgQHNlZSB7QGxpbmsgdG9Tdmd9XG4gICAgICogQHJldHVybiB7UHJvbWlzZX0gLSBBIHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2l0aCBhIFBORyBpbWFnZSBkYXRhIFVSTFxuICAgICAqICovXG4gICAgZnVuY3Rpb24gdG9Qbmcobm9kZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZHJhdyhub2RlLCBvcHRpb25zIHx8IHt9KVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgLSBUaGUgRE9NIE5vZGUgb2JqZWN0IHRvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gUmVuZGVyaW5nIG9wdGlvbnMsIEBzZWUge0BsaW5rIHRvU3ZnfVxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9IC0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYSBKUEVHIGltYWdlIGRhdGEgVVJMXG4gICAgICogKi9cbiAgICBmdW5jdGlvbiB0b0pwZWcobm9kZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIGRyYXcobm9kZSwgb3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvanBlZycsIG9wdGlvbnMucXVhbGl0eSB8fCAxLjApO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIC0gVGhlIERPTSBOb2RlIG9iamVjdCB0byByZW5kZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFJlbmRlcmluZyBvcHRpb25zLCBAc2VlIHtAbGluayB0b1N2Z31cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIEEgcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aXRoIGEgUE5HIGltYWdlIGJsb2JcbiAgICAgKiAqL1xuICAgIGZ1bmN0aW9uIHRvQmxvYihub2RlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBkcmF3KG5vZGUsIG9wdGlvbnMgfHwge30pXG4gICAgICAgICAgICAudGhlbih1dGlsLmNhbnZhc1RvQmxvYik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZHJhdyhkb21Ob2RlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0b1N2Zyhkb21Ob2RlLCBvcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4odXRpbC5tYWtlSW1hZ2UpXG4gICAgICAgICAgICAudGhlbih1dGlsLmRlbGF5KDEwMCkpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBuZXdDYW52YXMoZG9tTm9kZSk7XG4gICAgICAgICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gbmV3Q2FudmFzKGRvbU5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSBvcHRpb25zLndpZHRoIHx8IHV0aWwud2lkdGgoZG9tTm9kZSk7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgdXRpbC5oZWlnaHQoZG9tTm9kZSk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmJnY29sb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gb3B0aW9ucy5iZ2NvbG9yO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUsIGZpbHRlciwgcm9vdCkge1xuICAgICAgICBpZiAoIXJvb3QgJiYgZmlsdGVyICYmICFmaWx0ZXIobm9kZSkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5vZGUpXG4gICAgICAgICAgICAudGhlbihtYWtlTm9kZUNvcHkpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmVDaGlsZHJlbihub2RlLCBjbG9uZSwgZmlsdGVyKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0Nsb25lKG5vZGUsIGNsb25lKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VOb2RlQ29weShub2RlKSB7XG4gICAgICAgICAgICBpZiAodXRpbC5pc0NhbnZhcyhub2RlKSkgcmV0dXJuIHV0aWwubWFrZUltYWdlKG5vZGUudG9EYXRhVVJMKCkpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb25lQ2hpbGRyZW4ob3JpZ2luYWwsIGNsb25lLCBmaWx0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gb3JpZ2luYWwuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDApIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2xvbmUpO1xuXG4gICAgICAgICAgICByZXR1cm4gY2xvbmVDaGlsZHJlbkluT3JkZXIoY2xvbmUsIHV0aWwuYXNBcnJheShjaGlsZHJlbiksIGZpbHRlcilcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xvbmVDaGlsZHJlbkluT3JkZXIocGFyZW50LCBjaGlsZHJlbiwgZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvbmUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gZG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZU5vZGUoY2hpbGQsIGZpbHRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNoaWxkQ2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRDbG9uZSkgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkQ2xvbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzQ2xvbmUob3JpZ2luYWwsIGNsb25lKSB7XG4gICAgICAgICAgICBpZiAoIXV0aWwuaXNFbGVtZW50KGNsb25lKSkgcmV0dXJuIGNsb25lO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihjbG9uZVN0eWxlKVxuICAgICAgICAgICAgICAgIC50aGVuKGNsb25lUHNldWRvRWxlbWVudHMpXG4gICAgICAgICAgICAgICAgLnRoZW4oY29weVVzZXJJbnB1dClcbiAgICAgICAgICAgICAgICAudGhlbihmaXhTdmcpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsb25lU3R5bGUoKSB7XG4gICAgICAgICAgICAgICAgY29weVN0eWxlKHNlbGYud2luZG93LmdldENvbXB1dGVkU3R5bGUob3JpZ2luYWwpLCBjbG9uZS5zdHlsZSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb3B5U3R5bGUoc291cmNlLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jc3NUZXh0KSB0YXJnZXQuY3NzVGV4dCA9IHNvdXJjZS5jc3NUZXh0O1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGNvcHlQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb3B5UHJvcGVydGllcyhzb3VyY2UsIHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5hc0FycmF5KHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLmdldFByb3BlcnR5VmFsdWUobmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRQcm9wZXJ0eVByaW9yaXR5KG5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbG9uZVBzZXVkb0VsZW1lbnRzKCkge1xuICAgICAgICAgICAgICAgIFsnOmJlZm9yZScsICc6YWZ0ZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lUHNldWRvRWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsb25lUHNldWRvRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gc2VsZi53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShvcmlnaW5hbCwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgPT09ICcnIHx8IGNvbnRlbnQgPT09ICdub25lJykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHV0aWwudWlkKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lLmNsYXNzTmFtZSA9IGNsb25lLmNsYXNzTmFtZSArICcgJyArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVFbGVtZW50ID0gc2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZm9ybWF0UHNldWRvRWxlbWVudFN0eWxlKGNsYXNzTmFtZSwgZWxlbWVudCwgc3R5bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRQc2V1ZG9FbGVtZW50U3R5bGUoY2xhc3NOYW1lLCBlbGVtZW50LCBzdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSAnLicgKyBjbGFzc05hbWUgKyAnOicgKyBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3NzVGV4dCA9IHN0eWxlLmNzc1RleHQgPyBmb3JtYXRDc3NUZXh0KHN0eWxlKSA6IGZvcm1hdENzc1Byb3BlcnRpZXMoc3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2VsZWN0b3IgKyAneycgKyBjc3NUZXh0ICsgJ30nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0Q3NzVGV4dChzdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdjb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlLmNzc1RleHQgKyAnIGNvbnRlbnQ6ICcgKyBjb250ZW50ICsgJzsnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3JtYXRDc3NQcm9wZXJ0aWVzKHN0eWxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5hc0FycmF5KHN0eWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZvcm1hdFByb3BlcnR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignOyAnKSArICc7JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgKyAnOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkobmFtZSkgPyAnICFpbXBvcnRhbnQnIDogJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY29weVVzZXJJbnB1dCgpIHtcbiAgICAgICAgICAgICAgICBpZiAodXRpbC5pc1RleHRBcmVhKG9yaWdpbmFsKSkgY2xvbmUuaW5uZXJIVE1MID0gb3JpZ2luYWwudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWwuaXNJbnB1dChvcmlnaW5hbCkpIGNsb25lLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG9yaWdpbmFsLnZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZml4U3ZnKCkge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc1NWRyhjbG9uZSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNTVkdSZWN0KGNsb25lKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFsnd2lkdGgnLCAnaGVpZ2h0J10uZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2xvbmUuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5zdHlsZS5zZXRQcm9wZXJ0eShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtYmVkRm9udHMobm9kZSkge1xuICAgICAgICByZXR1cm4gZm9udEZhY2VzLnJlc29sdmVBbGwoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGNzc1RleHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZU5vZGUgPSBzZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChzdHlsZU5vZGUpO1xuICAgICAgICAgICAgICAgIHN0eWxlTm9kZS5hcHBlbmRDaGlsZChzZWxmLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzc1RleHQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubGluZUltYWdlcyhub2RlKSB7XG4gICAgICAgIHJldHVybiBpbWFnZXMuaW5saW5lQWxsKG5vZGUpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlU3ZnRGF0YVVyaShub2RlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3htbG5zJywgJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHNlbGYud2luZG93LlhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhub2RlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbih1dGlsLmVzY2FwZVhodG1sKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHhodG1sKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJyxcbiAgICAgICAgICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCInLCB3aWR0aCwgJ1wiIGhlaWdodD1cIicsIGhlaWdodCwgJ1wiPicsXG4gICAgICAgICAgICAgICAgICAnPGZvcmVpZ25PYmplY3QgeD1cIjBcIiB5PVwiMFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj4nLCB4aHRtbCwgJzwvZm9yZWlnbk9iamVjdD4nLFxuICAgICAgICAgICAgICAgICc8L3N2Zz4nXS5qb2luKCcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld1V0aWwoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlc2NhcGU6IGVzY2FwZSxcbiAgICAgICAgICAgIHBhcnNlRXh0ZW5zaW9uOiBwYXJzZUV4dGVuc2lvbixcbiAgICAgICAgICAgIG1pbWVUeXBlOiBtaW1lVHlwZSxcbiAgICAgICAgICAgIGRhdGFBc1VybDogZGF0YUFzVXJsLFxuICAgICAgICAgICAgaXNEYXRhVXJsOiBpc0RhdGFVcmwsXG4gICAgICAgICAgICBjYW52YXNUb0Jsb2I6IGNhbnZhc1RvQmxvYixcbiAgICAgICAgICAgIHJlc29sdmVVcmw6IHJlc29sdmVVcmwsXG4gICAgICAgICAgICBnZXRBbmRFbmNvZGU6IGdldEFuZEVuY29kZSxcbiAgICAgICAgICAgIHVpZDogdWlkKCksXG4gICAgICAgICAgICBkZWxheTogZGVsYXksXG4gICAgICAgICAgICBhc0FycmF5OiBhc0FycmF5LFxuICAgICAgICAgICAgZXNjYXBlWGh0bWw6IGVzY2FwZVhodG1sLFxuICAgICAgICAgICAgbWFrZUltYWdlOiBtYWtlSW1hZ2UsXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcblxuICAgICAgICAgICAgaXNFbGVtZW50LFxuICAgICAgICAgICAgaXNDYW52YXMsXG4gICAgICAgICAgICBpc1RleHRBcmVhLFxuICAgICAgICAgICAgaXNJbnB1dCxcbiAgICAgICAgICAgIGlzU1ZHLFxuICAgICAgICAgICAgaXNTVkdSZWN0LFxuICAgICAgICAgICAgaXNJbWFnZVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIG1pbWVzKCkge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIE9ubHkgV09GRiBhbmQgRU9UIG1pbWUgdHlwZXMgZm9yIGZvbnRzIGFyZSAncmVhbCdcbiAgICAgICAgICAgICAqIHNlZSBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL21lZGlhLXR5cGVzL21lZGlhLXR5cGVzLnhodG1sXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IFdPRkYgPSAnYXBwbGljYXRpb24vZm9udC13b2ZmJztcbiAgICAgICAgICAgIGNvbnN0IEpQRUcgPSAnaW1hZ2UvanBlZyc7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ3dvZmYnOiBXT0ZGLFxuICAgICAgICAgICAgICAgICd3b2ZmMic6IFdPRkYsXG4gICAgICAgICAgICAgICAgJ3R0Zic6ICdhcHBsaWNhdGlvbi9mb250LXRydWV0eXBlJyxcbiAgICAgICAgICAgICAgICAnZW90JzogJ2FwcGxpY2F0aW9uL3ZuZC5tcy1mb250b2JqZWN0JyxcbiAgICAgICAgICAgICAgICAncG5nJzogJ2ltYWdlL3BuZycsXG4gICAgICAgICAgICAgICAgJ2pwZyc6IEpQRUcsXG4gICAgICAgICAgICAgICAgJ2pwZWcnOiBKUEVHLFxuICAgICAgICAgICAgICAgICdnaWYnOiAnaW1hZ2UvZ2lmJyxcbiAgICAgICAgICAgICAgICAndGlmZic6ICdpbWFnZS90aWZmJyxcbiAgICAgICAgICAgICAgICAnc3ZnJzogJ2ltYWdlL3N2Zyt4bWwnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGFyc2VFeHRlbnNpb24odXJsKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IC9cXC4oW15cXC5cXC9dKj8pJC9nLmV4ZWModXJsKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkgcmV0dXJuIG1hdGNoWzFdO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtaW1lVHlwZSh1cmwpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHBhcnNlRXh0ZW5zaW9uKHVybCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHJldHVybiBtaW1lcygpW2V4dGVuc2lvbl0gfHwgJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0RhdGFVcmwodXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsLnNlYXJjaCgvXihkYXRhOikvKSAhPT0gLTE7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b0Jsb2IoY2FudmFzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBzZWxmLndpbmRvdy5hdG9iKGNhbnZhcy50b0RhdGFVUkwoKS5zcGxpdCgnLCcpWzFdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmFyeUFycmF5ID0gbmV3IHNlbGYud2luZG93LlVpbnQ4QXJyYXkobGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGJpbmFyeUFycmF5W2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBzZWxmLndpbmRvdy5CbG9iKFtiaW5hcnlBcnJheV0sIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlL3BuZydcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbnZhc1RvQmxvYihjYW52YXMpIHtcbiAgICAgICAgICAgIGlmIChjYW52YXMudG9CbG9iKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMudG9CbG9iKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdG9CbG9iKGNhbnZhcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlVXJsKHVybCwgYmFzZVVybCkge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gc2VsZi5kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2UgPSBkb2MuY3JlYXRlRWxlbWVudCgnYmFzZScpO1xuICAgICAgICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7XG4gICAgICAgICAgICBjb25zdCBhID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgYmFzZS5ocmVmID0gYmFzZVVybDtcbiAgICAgICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgICAgIHJldHVybiBhLmhyZWY7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1aWQoKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAndScgKyBmb3VyUmFuZG9tQ2hhcnMoKSArIGluZGV4Kys7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmb3VyUmFuZG9tQ2hhcnMoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82MjQ4NzIyLzI1MTkzNzMgKi9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnMDAwMCcgKyAoc2VsZi53aW5kb3cuTWF0aC5yYW5kb20oKSAqIHNlbGYud2luZG93Lk1hdGgucG93KDM2LCA0KSA8PCAwKS50b1N0cmluZygzNikpLnNsaWNlKC00KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbWFrZUltYWdlKHVyaSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBzZWxmLndpbmRvdy5JbWFnZSgpO1xuICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpbWFnZSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgIGltYWdlLnNyYyA9IHVyaTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0QW5kRW5jb2RlKHVybCkge1xuICAgICAgICAgIGxldCBkYXRhID0gc2VsZi5jYWNoZS5nZXQodXJsKTtcbiAgICAgICAgICBpZihkYXRhKSB7XG4gICAgICAgICAgICBpZihkYXRhLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpPT4ge1xuICAgICAgICAgICAgICAgIGlmKGRhdGEuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGRhdGEucGVuZGluZ3MucHVzaChyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSBzZWxmLmNhY2hlLnB1dCh1cmwsIHtwZW5kaW5nczogW119KTtcblxuICAgICAgICAgICAgY29uc3QgVElNRU9VVCA9IDMwMDAwO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IHNlbGYud2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGRvbmU7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICAgICAgICAgICAgICAgIHJlcXVlc3QudGltZW91dCA9IFRJTUVPVVQ7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9uZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCdjYW5ub3QgZmV0Y2ggcmVzb3VyY2U6ICcgKyB1cmwgKyAnLCBzdGF0dXM6ICcgKyByZXF1ZXN0LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IHNlbGYud2luZG93LkZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNvbnRlbnQgPSBlbmNvZGVyLnJlc3VsdC5zcGxpdCgvLC8pWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCByZXNvbHZlIG9mIGRhdGEucGVuZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wZW5kaW5ncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBlbmNvZGVyLnJlYWRBc0RhdGFVUkwocmVxdWVzdC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdGltZW91dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbCgndGltZW91dCBvZiAnICsgVElNRU9VVCArICdtcyBvY2N1cmVkIHdoaWxlIGZldGNoaW5nIHJlc291cmNlOiAnICsgdXJsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGF0YUFzVXJsKGNvbnRlbnQsIHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBbJ2RhdGE6Jyx0eXBlLCc7YmFzZTY0LCcsY29udGVudF0uam9pbignJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbLiorP14ke30oKXxcXFtcXF1cXC9cXFxcXSkvZywgJ1xcXFwkMScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZGVsYXkobXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhcmcpO1xuICAgICAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXNBcnJheShhcnJheUxpa2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgYXJyYXkucHVzaChhcnJheUxpa2VbaV0pO1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXNjYXBlWGh0bWwoc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLygjfFxcbikvZywgKGMpPT4gYz09PScjJz8gJyUyMyc6ICclMEEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHdpZHRoKG5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRCb3JkZXIgPSBweChub2RlLCAnYm9yZGVyLWxlZnQtd2lkdGgnKTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0Qm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci1yaWdodC13aWR0aCcpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuc2Nyb2xsV2lkdGggKyBsZWZ0Qm9yZGVyICsgcmlnaHRCb3JkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoZWlnaHQobm9kZSkge1xuICAgICAgICAgICAgY29uc3QgdG9wQm9yZGVyID0gcHgobm9kZSwgJ2JvcmRlci10b3Atd2lkdGgnKTtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbUJvcmRlciA9IHB4KG5vZGUsICdib3JkZXItYm90dG9tLXdpZHRoJyk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5zY3JvbGxIZWlnaHQgKyB0b3BCb3JkZXIgKyBib3R0b21Cb3JkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBweChub2RlLCBzdHlsZVByb3BlcnR5KSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNlbGYud2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSkuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZVByb3BlcnR5KTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJ3B4JywgJycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5FbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNDYW52YXMobm9kZSkge1xuICAgICAgICAgIHJldHVybiBub2RlIGluc3RhbmNlb2Ygc2VsZi53aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc1RleHRBcmVhKG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIHNlbGYud2luZG93LkhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc0lucHV0KG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIHNlbGYud2luZG93LkhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc1NWRyhub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5TVkdFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNTVkdSZWN0KG5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIHNlbGYud2luZG93LlNWR1JlY3RFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaXNJbWFnZShub2RlKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBzZWxmLndpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3SW5saW5lcigpIHtcbiAgICAgICAgY29uc3QgVVJMX1JFR0VYID0gL3VybFxcKFsnXCJdPyhbXidcIl0rPylbJ1wiXT9cXCkvZztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5saW5lQWxsOiBpbmxpbmVBbGwsXG4gICAgICAgICAgICBzaG91bGRQcm9jZXNzOiBzaG91bGRQcm9jZXNzLFxuICAgICAgICAgICAgaW1wbDoge1xuICAgICAgICAgICAgICAgIHJlYWRVcmxzOiByZWFkVXJscyxcbiAgICAgICAgICAgICAgICBpbmxpbmU6IGlubGluZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHNob3VsZFByb2Nlc3Moc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nLnNlYXJjaChVUkxfUkVHRVgpICE9PSAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlYWRVcmxzKHN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gVVJMX1JFR0VYLmV4ZWMoc3RyaW5nKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChtYXRjaFsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF1dGlsLmlzRGF0YVVybCh1cmwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbmxpbmUoc3RyaW5nLCB1cmwsIGJhc2VVcmwsIGdldCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1cmwpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVVybCA/IHV0aWwucmVzb2x2ZVVybCh1cmwsIGJhc2VVcmwpIDogdXJsO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0IHx8IHV0aWwuZ2V0QW5kRW5jb2RlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLmRhdGFBc1VybChkYXRhLCB1dGlsLm1pbWVUeXBlKHVybCkpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGFVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHVybEFzUmVnZXgodXJsKSwgWyckMScsIGRhdGFVcmwsICckMyddLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdXJsQXNSZWdleCh1cmwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHNlbGYud2luZG93LlJlZ0V4cChbJyh1cmxcXFxcKFtcXCdcIl0/KSgnLCB1dGlsLmVzY2FwZSh1cmwpLCAnKShbXFwnXCJdP1xcXFwpKSddLmpvaW4oJycpLCAnZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5saW5lQWxsKHN0cmluZywgYmFzZVVybCwgZ2V0KSB7XG4gICAgICAgICAgICBpZiAobm90aGluZ1RvSW5saW5lKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RyaW5nKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzdHJpbmcpXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVhZFVybHMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVybHMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvbmUgPSBQcm9taXNlLnJlc29sdmUoc3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgdXJscy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUgPSBkb25lLnRoZW4oZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmxpbmUoc3RyaW5nLCB1cmwsIGJhc2VVcmwsIGdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb25lO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBub3RoaW5nVG9JbmxpbmUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRQcm9jZXNzKHN0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdGb250RmFjZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXNvbHZlQWxsOiByZXNvbHZlQWxsLFxuICAgICAgICAgICAgaW1wbDoge1xuICAgICAgICAgICAgICAgIHJlYWRBbGw6IHJlYWRBbGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiByZXNvbHZlQWxsKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRBbGwoc2VsZi5kb2N1bWVudClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAod2ViRm9udHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgd2ViRm9udHMubWFwKGZ1bmN0aW9uICh3ZWJGb250KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdlYkZvbnQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjc3NTdHJpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjc3NTdHJpbmdzLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVhZEFsbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXRpbC5hc0FycmF5KHNlbGYuZG9jdW1lbnQuc3R5bGVTaGVldHMpKVxuICAgICAgICAgICAgICAgIC50aGVuKGdldENzc1J1bGVzKVxuICAgICAgICAgICAgICAgIC50aGVuKHNlbGVjdFdlYkZvbnRSdWxlcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocnVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzLm1hcChuZXdXZWJGb250KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc2VsZWN0V2ViRm9udFJ1bGVzKGNzc1J1bGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNzc1J1bGVzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBydWxlLnR5cGUgPT09IENTU1J1bGUuRk9OVF9GQUNFX1JVTEU7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmxpbmVyLnNob3VsZFByb2Nlc3MocnVsZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzcmMnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRDc3NSdWxlcyhzdHlsZVNoZWV0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNzc1J1bGVzID0gW107XG4gICAgICAgICAgICAgICAgc3R5bGVTaGVldHMuZm9yRWFjaChmdW5jdGlvbiAoc2hlZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuYXNBcnJheShzaGVldC5jc3NSdWxlcyB8fCBbXSkuZm9yRWFjaChjc3NSdWxlcy5wdXNoLmJpbmQoY3NzUnVsZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHJlYWRpbmcgQ1NTIHJ1bGVzIGZyb20gJyArIHNoZWV0LmhyZWYsIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3NzUnVsZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG5ld1dlYkZvbnQod2ViRm9udFJ1bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVVybCA9ICh3ZWJGb250UnVsZS5wYXJlbnRTdHlsZVNoZWV0IHx8IHt9KS5ocmVmO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlubGluZXIuaW5saW5lQWxsKHdlYkZvbnRSdWxlLmNzc1RleHQsIGJhc2VVcmwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzcmM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWJGb250UnVsZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdzcmMnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdJbWFnZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbmxpbmVBbGw6IGlubGluZUFsbCxcbiAgICAgICAgICAgIGltcGw6IHtcbiAgICAgICAgICAgICAgICBuZXdJbWFnZTogbmV3SW1hZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBuZXdJbWFnZShlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlubGluZTogaW5saW5lXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbmxpbmUoZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHV0aWwuaXNEYXRhVXJsKGVsZW1lbnQuc3JjKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbGVtZW50LnNyYylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZ2V0IHx8IHV0aWwuZ2V0QW5kRW5jb2RlKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHV0aWwuZGF0YUFzVXJsKGRhdGEsIHV0aWwubWltZVR5cGUoZWxlbWVudC5zcmMpKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGFVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5vbmxvYWQgPSByZXNvbHZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNyYyA9IGRhdGFVcmw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbmxpbmVBbGwobm9kZSkge1xuICAgICAgICAgICAgaWYgKCF1dGlsLmlzRWxlbWVudChub2RlKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub2RlKTtcblxuICAgICAgICAgICAgcmV0dXJuIGlubGluZUJhY2tncm91bmQobm9kZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1dGlsLmlzSW1hZ2Uobm9kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3SW1hZ2Uobm9kZSkuaW5saW5lKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLmFzQXJyYXkobm9kZS5jaGlsZE5vZGVzKS5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmxpbmVBbGwoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbmxpbmVCYWNrZ3JvdW5kKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdiYWNrZ3JvdW5kJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWJhY2tncm91bmQpIHJldHVybiBQcm9taXNlLnJlc29sdmUobm9kZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaW5saW5lci5pbmxpbmVBbGwoYmFja2dyb3VuZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGlubGluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KCdiYWNrZ3JvdW5kJylcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRG9tMkltYWdlLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRG9tMkltYWdlLmpzIiwiaW1wb3J0IHskLCBUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmFnIHtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIHZpc3VhbFdvcmxkKSB7XHJcbiAgICB0aGlzLnduZCA9IHduZDtcclxuICAgIHRoaXMuZG9jID0gZG9jO1xyXG4gICAgdGhpcy52aXN1YWwgPSB2aXN1YWxXb3JsZDtcclxuICAgIHRoaXMuY29vcmRzID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgIHRoaXMucmF5Y2FzdGVyID0gdGhpcy52aXN1YWwucmF5Y2FzdGVyO1xyXG4gICAgdGhpcy5jYW1lcmEgPSB0aGlzLnZpc3VhbC5jYW1lcmE7XHJcbiAgICB0aGlzLnBsYW5lID0gbmV3IFRIUkVFLlBsYW5lKCk7XHJcbiAgICB0aGlzLnRocmVlcyA9IFtdO1xyXG4gICAgdGhpcy5zZWxlY3RlZCA9IG51bGw7XHJcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5jb250cm9sc1N0YXRlID0gdGhpcy52aXN1YWwuZ2V0Q29udHJvbHNTdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMudmlzdWFsLmVsZW1lbnQ7XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBvbk1vdXNlTW92ZTogdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpLFxyXG4gICAgICBvbk1vdXNlRG93bjogdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpLFxyXG4gICAgICBvbk1vdXNlVXA6IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcylcclxuICAgIH07XHJcbiAgICAkKHRoaXMuZWxlbWVudCkub24oJ21vdXNlbW92ZScsIHRoaXMuYmluZHMub25Nb3VzZU1vdmUpO1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9uKCdtb3VzZWRvd24nLCB0aGlzLmJpbmRzLm9uTW91c2VEb3duKTtcclxuICAgICQodGhpcy5kb2MpLm9uKCdtb3VzZXVwJywgdGhpcy5iaW5kcy5vbk1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgYWRkVGhyZWUodGhyZWUpIHtcclxuICAgIHRoaXMudGhyZWVzLnB1c2godGhyZWUpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlVGhyZWUodGhyZWUpIHtcclxuICAgIGNvbnN0IGkgPSB0aGlzLnRocmVlcy5pbmRleE9mKHRocmVlKTtcclxuICAgIGlmKH5pKSB7XHJcbiAgICAgIHRoaXMudGhyZWVzLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uUGlja0NhbGxiYWNrKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBvbkRyYWdDYWxsYmFjaygpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgb25SZWxlYXNlQ2FsbGJhY2soKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgICQodGhpcy5lbGVtZW50KS5vZmYoJ21vdXNlbW92ZScsIHRoaXMuYmluZHMub25Nb3VzZU1vdmUpO1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9mZignbW91c2Vkb3duJywgdGhpcy5iaW5kcy5vbk1vdXNlRG93bik7XHJcbiAgICAkKHRoaXMuZG9jKS5vZmYoJ21vdXNldXAnLCB0aGlzLmJpbmRzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG5cclxuICBzZXRDb29yZHNGcm9tRXZlbnQoZSkge1xyXG4gICAgY29uc3QgakVsZW1lbnQgPSAkKHRoaXMuZWxlbWVudCk7XHJcbiAgICBjb25zdCBvZmZzZXQgPSBqRWxlbWVudC5vZmZzZXQoKTtcclxuICAgIHRoaXMuY29vcmRzLnggPSAoKGUucGFnZVgtb2Zmc2V0LmxlZnQpL2pFbGVtZW50LndpZHRoKCkpKjItMTtcclxuICAgIHRoaXMuY29vcmRzLnkgPSAtKChlLnBhZ2VZLW9mZnNldC50b3ApL2pFbGVtZW50LmhlaWdodCgpKSoyKzE7XHJcbiAgICByZXR1cm4gdGhpcy5jb29yZHM7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93bihlKSB7XHJcbiAgICBpZighdGhpcy5lbmFibGVkKSByZXR1cm47XHJcblxyXG4gICAgaWYodGhpcy5zZWxlY3RlZCkgdGhpcy5vbk1vdXNlVXAoZSk7XHJcblxyXG4gICAgdGhpcy5zZXRDb29yZHNGcm9tRXZlbnQoZSk7XHJcbiAgXHR0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKHRoaXMuY29vcmRzLCB0aGlzLmNhbWVyYSk7XHJcblxyXG4gIFx0Y29uc3QgaW50ZXJzZWN0cyA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHModGhpcy50aHJlZXMpO1xyXG4gIFx0aWYoaW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gaW50ZXJzZWN0c1swXS5vYmplY3Q7XHJcbiAgICAgIGlmKCF0aGlzLm9uUGlja0NhbGxiYWNrKGludGVyc2VjdHNbMF0pKSByZXR1cm47XHJcbiAgICAgIGNvbnN0IHYgPSBpbnRlcnNlY3RzWzBdLnBvaW50LmNsb25lKCk7XHJcbiAgICAgIHRoaXMuZGlzdGFuY2UgPSB2LnN1Yih0aGlzLnJheWNhc3Rlci5yYXkub3JpZ2luKS5sZW5ndGgoKTs7XHJcbiAgICAgIHRoaXMuY29udHJvbHNTdGF0ZSA9IHRoaXMudmlzdWFsLmdldENvbnRyb2xzU3RhdGUoKTtcclxuICAgICAgdGhpcy52aXN1YWwuc2V0Q29udHJvbHNTdGF0ZShmYWxzZSk7XHJcbiAgICAgIHRoaXMucGxhbmUuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodGhpcy52aXN1YWwuY2FtZXJhLmdldFdvcmxkRGlyZWN0aW9uKHRoaXMucGxhbmUubm9ybWFsKSwgaW50ZXJzZWN0c1swXS5wb2ludCk7XHJcbiAgICAgIC8vdGhpcy5wbGFuZS5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCh0aGlzLnBsYW5lLm5vcm1hbC5zZXQoMCwwLDEpLCBuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XHJcbiAgXHR9XHJcblxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZU1vdmUoZSkge1xyXG4gICAgaWYoIXRoaXMuZW5hYmxlZCkgcmV0dXJuO1xyXG4gIFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBcdGlmKHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgdGhpcy5zZXRDb29yZHNGcm9tRXZlbnQoZSk7XHJcbiAgICBcdHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5jb29yZHMsIHRoaXMuY2FtZXJhKTtcclxuXHQgICAgaWYodGhpcy5yYXljYXN0ZXIucmF5LmludGVyc2VjdFBsYW5lKHRoaXMucGxhbmUsIHRoaXMuaW50ZXJzZWN0aW9uKSkge1xyXG4gICAgICAgIGlmKCF0aGlzLm9uRHJhZ0NhbGxiYWNrKHRoaXMuaW50ZXJzZWN0aW9uKSkgdGhpcy5vbk1vdXNlVXAoZSk7XHJcbiAgICAgIH0vKiovXHJcbiAgICAgIC8vdGhpcy5pbnRlcnNlY3Rpb24uY29weSh0aGlzLnJheWNhc3Rlci5yYXkuZGlyZWN0aW9uKS5ub3JtYWxpemUoKS5tdWx0aXBseVNjYWxhcih0aGlzLmRpc3RhbmNlKS5hZGQodGhpcy5yYXljYXN0ZXIucmF5Lm9yaWdpbik7LyoqL1xyXG4gICAgICAvL2lmKCF0aGlzLm9uRHJhZ0NhbGxiYWNrKHRoaXMuc2VsZWN0ZWQsIHRoaXMuaW50ZXJzZWN0aW9uKSkgdGhpcy5vbk1vdXNlVXAoZSk7XHJcbiAgXHR9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlVXAoZSkge1xyXG4gICAgaWYodGhpcy5zZWxlY3RlZCkge1xyXG4gICAgICB0aGlzLm9uUmVsZWFzZUNhbGxiYWNrKCk7XHJcbiAgXHRcdHRoaXMuc2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgICB0aGlzLnZpc3VhbC5zZXRDb250cm9sc1N0YXRlKHRoaXMuY29udHJvbHNTdGF0ZSk7XHJcbiAgXHR9XHJcbiAgICBpZighdGhpcy5lbmFibGVkKSByZXR1cm47XHJcbiAgXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9EcmFnLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRHJhZy5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbnJlcXVpcmUoJ2ltcG9ydHMtbG9hZGVyP2RlZmluZT0+ZmFsc2UhanF1ZXJ5LW1vdXNld2hlZWwnKSgkKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50c1RvQWN0aW9ucyB7XHJcblxyXG4gIHN0YXRpYyBtb2RLZXlzID0ge1xyXG4gICAgQ3RybDogMSxcclxuICAgIFNoaWZ0OiAyLFxyXG4gICAgQWx0OiA0XHJcbiAgfTtcclxuXHJcbiAgc3RhdGljIG1vdXNlQnV0dG9ucyA9IHtcclxuICAgIExlZnQ6IDAsXHJcbiAgICBNaWRkbGU6IDEsXHJcbiAgICBSaWdodDogMlxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyBnZXRFdmVudEZsYWdzKGUpIHtcclxuICAgIHJldHVybiBlLmN0cmxLZXk8PDAgfCBlLnNoaWZ0S2V5PDwxIHwgZS5hbHRLZXk8PDI7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0UG9zaXRpb24odG91Y2hlcykge1xyXG4gICAgbGV0IHgsIHk7XHJcbiAgICBpZih0b3VjaGVzLmxlbmd0aD09PTIpIHtcclxuICAgICAgeCA9IHRvdWNoZXNbMV0ucGFnZVgtdG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgeSA9IHRvdWNoZXNbMV0ucGFnZVktdG91Y2hlc1swXS5wYWdlWTtcclxuICAgICAgeSA9IC1NYXRoLnNxcnQoeCp4K3kqeSk7XHJcbiAgICAgIHggPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHggPSB0b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICB5ID0gdG91Y2hlc1swXS5wYWdlWTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHgsXHJcbiAgICAgIHlcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBhY3Rpb25zKSB7XHJcbiAgICB0aGlzLmFjdGlvbnMgPSBhY3Rpb25zIHx8IHt9O1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIHRoaXMuZG9jID0gZWxlbWVudFswXS5vd25lckRvY3VtZW50O1xyXG4gICAgdGhpcy53bmQgPSB0aGlzLmRvYy5kZWZhdWx0VmlldztcclxuICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgdGhpcy5iaW5kcyA9IHtcclxuICAgICAgY29udGV4dE1lbnU6IHRoaXMuY29udGV4dE1lbnUuYmluZCh0aGlzKSxcclxuXHJcbiAgICAgIG1vdXNlRG93bjogdGhpcy5tb3VzZURvd24uYmluZCh0aGlzKSxcclxuICAgICAgbW91c2VNb3ZlOiB0aGlzLm1vdXNlTW92ZS5iaW5kKHRoaXMpLFxyXG4gICAgICBtb3VzZVVwOiB0aGlzLm1vdXNlVXAuYmluZCh0aGlzKSxcclxuICAgICAgbW91c2VXaGVlbDogdGhpcy5tb3VzZVdoZWVsLmJpbmQodGhpcyksXHJcblxyXG4gICAgICBtb3VzZU1vdmVEb2M6IHRoaXMubW91c2VNb3ZlRG9jLmJpbmQodGhpcyksXHJcbiAgICAgIG1vdXNlVXBEb2M6IHRoaXMubW91c2VVcERvYy5iaW5kKHRoaXMpLFxyXG5cclxuICAgICAgY2xpY2s6IHRoaXMuY2xpY2suYmluZCh0aGlzKSxcclxuICAgICAgZGJsY2xpY2s6IHRoaXMuZGJsY2xpY2suYmluZCh0aGlzKSxcclxuXHJcbiAgICAgIHRvdWNoU3RhcnQ6IHRoaXMudG91Y2hTdGFydC5iaW5kKHRoaXMpLFxyXG4gICAgICB0b3VjaE1vdmU6IHRoaXMudG91Y2hNb3ZlLmJpbmQodGhpcyksXHJcbiAgICAgIHRvdWNoRW5kOiB0aGlzLnRvdWNoRW5kLmJpbmQodGhpcyksXHJcblxyXG4gICAgICBrZXlEb3duOiB0aGlzLmtleURvd24uYmluZCh0aGlzKSxcclxuICAgICAga2V5UHJlc3M6IHRoaXMua2V5UHJlc3MuYmluZCh0aGlzKSxcclxuICAgICAga2V5VXA6IHRoaXMua2V5VXAuYmluZCh0aGlzKVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ2NvbnRleHRtZW51JywgdGhpcy5iaW5kcy5jb250ZXh0TWVudSk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdtb3VzZWRvd24nLCB0aGlzLmJpbmRzLm1vdXNlRG93bik7XHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ21vdXNlbW92ZScsIHRoaXMuYmluZHMubW91c2VNb3ZlKTtcclxuICAgIHRoaXMuZWxlbWVudC5vbignbW91c2V1cCcsIHRoaXMuYmluZHMubW91c2VVcCk7XHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ21vdXNld2hlZWwnLCB0aGlzLmJpbmRzLm1vdXNlV2hlZWwpO1xyXG5cclxuICAgICQodGhpcy5kb2MpLm9uKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm1vdXNlTW92ZURvYyk7XHJcbiAgICAkKHRoaXMuZG9jKS5vbignbW91c2V1cCcsIHRoaXMuYmluZHMubW91c2VVcERvYyk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdjbGljaycsIHRoaXMuYmluZHMuY2xpY2spO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9uKCdkYmxjbGljaycsIHRoaXMuYmluZHMuZGJsY2xpY2spO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vbigndG91Y2hzdGFydCcsIHRoaXMuYmluZHMudG91Y2hTdGFydCk7XHJcbiAgICB0aGlzLmVsZW1lbnQub24oJ3RvdWNobW92ZScsIHRoaXMuYmluZHMudG91Y2hNb3ZlKTtcclxuICAgIHRoaXMuZWxlbWVudC5vbigndG91Y2hlbmQnLCB0aGlzLmJpbmRzLnRvdWNoRW5kKTtcclxuXHJcbiAgICAkKHRoaXMud25kKS5vbigna2V5ZG93bicsIHRoaXMuYmluZHMua2V5RG93bik7XHJcbiAgICAkKHRoaXMud25kKS5vbigna2V5cHJlc3MnLCB0aGlzLmJpbmRzLmtleVByZXNzKTtcclxuICAgICQodGhpcy53bmQpLm9uKCdrZXl1cCcsIHRoaXMuYmluZHMua2V5VXApO1xyXG4gIH1cclxuXHJcbiAgYWRkQWN0aW9uKGFjdGlvbiwgdHlwZSwgY29kZSwgZmxhZ3MpIHtcclxuICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZighdGhpcy5hY3Rpb25zW3R5cGVdKSB7XHJcbiAgICAgIHRoaXMuYWN0aW9uc1t0eXBlXSA9IHt9O1xyXG4gICAgfVxyXG4gICAgaWYoIXRoaXMuYWN0aW9uc1t0eXBlXVtjb2RlXSkge1xyXG4gICAgICB0aGlzLmFjdGlvbnNbdHlwZV1bY29kZV0gPSB7fVxyXG4gICAgfVxyXG4gICAgaWYoIXRoaXMuYWN0aW9uc1t0eXBlXVtjb2RlXVtmbGFnc10pIHtcclxuICAgICAgdGhpcy5hY3Rpb25zW3R5cGVdW2NvZGVdW2ZsYWdzXSA9IFtdO1xyXG4gICAgfVxyXG4gICAgdGhpcy5hY3Rpb25zW3R5cGVdW2NvZGVdW2ZsYWdzXS5wdXNoKGFjdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXRBY3Rpb25zKHR5cGUsIGNvZGUsIGZsYWdzKSB7XHJcbiAgICByZXR1cm4gKCh0aGlzLmFjdGlvbnNbdHlwZV0gfHwge30pW2NvZGVdIHx8IHt9KVtmbGFnc10gfHwgW107XHJcbiAgfVxyXG5cclxuICBmaXJlQWN0aW9ucyhhY3Rpb25zLCBlLCBkYXRhKSB7XHJcbiAgICBmb3IobGV0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XHJcbiAgICAgIGFjdGlvbihlLCBkYXRhKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnRleHRNZW51KGUpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygnY29udGV4dG1lbnUnLCBlLmJ1dHRvbiwgZmxhZ3MpLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlRG93bihlKSB7XHJcbiAgICBpZih0aGlzLnBpY2tlZCkge1xyXG4gICAgICB0aGlzLm1vdXNlVXBEb2MoKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygnbW91c2Vkb3duJywgZS5idXR0b24sIGZsYWdzKSwgZSk7XHJcbiAgICAgIHRoaXMucGlja2VkID0ge1xyXG4gICAgICAgIHg6IGUucGFnZVgsXHJcbiAgICAgICAgeTogZS5wYWdlWSxcclxuICAgICAgICBhY3Rpb25zOiB0aGlzLmdldEFjdGlvbnMoJ21vdXNlZHJhZycsIGUuYnV0dG9uLCBmbGFncylcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLnBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgICAgc3RhdGU6ICdzdGFydCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3VzZU1vdmUoZSkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIGNvbnN0IGZsYWdzID0gRXZlbnRzVG9BY3Rpb25zLmdldEV2ZW50RmxhZ3MoZSk7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5nZXRBY3Rpb25zKCdtb3VzZW1vdmUnLCBlLmJ1dHRvbiwgZmxhZ3MpLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlTW92ZURvYyhlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQgJiYgdGhpcy5waWNrZWQpIHtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLnBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgICAgc3RhdGU6ICdtb3ZlJyxcclxuICAgICAgICBkeDogZS5wYWdlWC10aGlzLnBpY2tlZC54LFxyXG4gICAgICAgIGR5OiBlLnBhZ2VZLXRoaXMucGlja2VkLnlcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucGlja2VkID0ge1xyXG4gICAgICAgIHg6IGUucGFnZVgsXHJcbiAgICAgICAgeTogZS5wYWdlWSxcclxuICAgICAgICBhY3Rpb25zOiB0aGlzLnBpY2tlZC5hY3Rpb25zXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3VzZVVwKGUpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygnbW91c2V1cCcsIGUuYnV0dG9uLCBmbGFncyksIGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW91c2VVcERvYyhlKSB7XHJcbiAgICBpZih0aGlzLnBpY2tlZCkge1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMucGlja2VkLmFjdGlvbnMsIGUsIHtcclxuICAgICAgICBzdGF0ZTogJ2VuZCdcclxuICAgICAgfSk7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLnBpY2tlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1vdXNlV2hlZWwoZSkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIGNvbnN0IGZsYWdzID0gRXZlbnRzVG9BY3Rpb25zLmdldEV2ZW50RmxhZ3MoZSk7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy5nZXRBY3Rpb25zKCdtb3VzZXdoZWVsJywgMCwgZmxhZ3MpLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsaWNrcyhlLCB0eXBlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnModHlwZSwgZS5idXR0b24sIGZsYWdzKSwgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbGljayhlKSB7XHJcbiAgICB0aGlzLmNsaWNrcyhlLCAnY2xpY2snKTtcclxuICB9XHJcblxyXG4gIGRibGNsaWNrKGUpIHtcclxuICAgIHRoaXMuY2xpY2tzKGUsICdkYmxjbGljaycpO1xyXG4gIH1cclxuXHJcbiAgdG91Y2hQaWNrKGUsIGZsYWdzLCB0b3VjaGVzKSB7XHJcbiAgICB0aGlzLnRvdWNoUGlja2VkID0ge1xyXG4gICAgICAuLi5FdmVudHNUb0FjdGlvbnMuZ2V0UG9zaXRpb24odG91Y2hlcyksXHJcbiAgICAgIGFjdGlvbnM6IHRoaXMuZ2V0QWN0aW9ucygndG91Y2hkcmFnJywgdG91Y2hlcy5sZW5ndGgsIGZsYWdzKSxcclxuICAgICAgY29kZTogdG91Y2hlcy5sZW5ndGgsXHJcbiAgICAgIGZsYWdzXHJcbiAgICB9O1xyXG4gICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLnRvdWNoUGlja2VkLmFjdGlvbnMsIGUsIHtcclxuICAgICAgc3RhdGU6ICdzdGFydCdcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG91Y2hTdGFydChlKSB7XHJcbiAgICBpZih0aGlzLnRvdWNoUGlja2VkKSB7XHJcbiAgICAgIHRoaXMudG91Y2hFbmQoZSk7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKSwgdG91Y2hlcyA9IGUudG91Y2hlcyB8fCBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcztcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnMoJ3RvdWNoc3RhcnQnLCB0b3VjaGVzLmxlbmd0aCwgZmxhZ3MpLCBlKTtcclxuICAgICAgdGhpcy50b3VjaFBpY2soZSwgZmxhZ3MsIHRvdWNoZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG91Y2hNb3ZlKGUpIHtcclxuICAgIGlmKHRoaXMuZW5hYmxlZCkge1xyXG4gICAgICBjb25zdCBmbGFncyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRFdmVudEZsYWdzKGUpLCB0b3VjaGVzID0gZS50b3VjaGVzIHx8IGUub3JpZ2luYWxFdmVudC50b3VjaGVzO1xyXG4gICAgICB0aGlzLmZpcmVBY3Rpb25zKHRoaXMuZ2V0QWN0aW9ucygndG91Y2htb3ZlJywgdG91Y2hlcy5sZW5ndGgsIGZsYWdzKSwgZSk7XHJcbiAgICAgIGlmKHRoaXMudG91Y2hQaWNrZWQpIHtcclxuICAgICAgICBpZih0aGlzLnRvdWNoUGlja2VkLmNvZGU9PT10b3VjaGVzLmxlbmd0aCAmJiB0aGlzLnRvdWNoUGlja2VkLmZsYWdzPT09ZmxhZ3MpIHtcclxuICAgICAgICAgIGNvbnN0IHBvcyA9IEV2ZW50c1RvQWN0aW9ucy5nZXRQb3NpdGlvbih0b3VjaGVzKTtcclxuICAgICAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy50b3VjaFBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgICAgICAgIHN0YXRlOiAnbW92ZScsXHJcbiAgICAgICAgICAgIGR4OiBwb3MueC10aGlzLnRvdWNoUGlja2VkLngsXHJcbiAgICAgICAgICAgIGR5OiBwb3MueS10aGlzLnRvdWNoUGlja2VkLnlcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy50b3VjaFBpY2tlZCA9IHtcclxuICAgICAgICAgICAgLi4udGhpcy50b3VjaFBpY2tlZCxcclxuICAgICAgICAgICAgLi4ucG9zXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudG91Y2hFbmQoZSk7XHJcbiAgICAgICAgICB0aGlzLnRvdWNoUGljayhlLCBmbGFncywgdG91Y2hlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b3VjaEVuZChlKSB7XHJcbiAgICBpZih0aGlzLnRvdWNoUGlja2VkKSB7XHJcbiAgICAgIHRoaXMuZmlyZUFjdGlvbnModGhpcy50b3VjaFBpY2tlZC5hY3Rpb25zLCBlLCB7XHJcbiAgICAgICAgc3RhdGU6ICdlbmQnXHJcbiAgICAgIH0pO1xyXG4gICAgICBkZWxldGUgdGhpcy50b3VjaFBpY2tlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGtleShlLCB0eXBlKSB7XHJcbiAgICBpZih0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgY29uc3QgZmxhZ3MgPSBFdmVudHNUb0FjdGlvbnMuZ2V0RXZlbnRGbGFncyhlKTtcclxuICAgICAgdGhpcy5maXJlQWN0aW9ucyh0aGlzLmdldEFjdGlvbnModHlwZSwgZS5rZXlDb2RlLCBmbGFncyksIGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAga2V5RG93bihlKSB7XHJcbiAgICB0aGlzLmtleShlLCAna2V5ZG93bicpO1xyXG4gIH1cclxuXHJcbiAga2V5UHJlc3MoZSkge1xyXG4gICAgdGhpcy5rZXkoZSwgJ2tleXByZXNzJyk7XHJcbiAgfVxyXG5cclxuICBrZXlVcChlKSB7XHJcbiAgICB0aGlzLmtleShlLCAna2V5dXAnKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdjb250ZXh0bWVudScsIHRoaXMuYmluZHMuY29udGV4dE1lbnUpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ21vdXNlZG93bicsIHRoaXMuYmluZHMubW91c2VEb3duKTtcclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ21vdXNlbW92ZScsIHRoaXMuYmluZHMubW91c2VNb3ZlKTtcclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ21vdXNldXAnLCB0aGlzLmJpbmRzLm1vdXNlVXApO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9mZignbW91c2V3aGVlbCcsIHRoaXMuYmluZHMubW91c2VXaGVlbCk7XHJcblxyXG4gICAgJCh0aGlzLmRvYykub2ZmKCdtb3VzZW1vdmUnLCB0aGlzLmJpbmRzLm1vdXNlTW92ZURvYyk7XHJcbiAgICAkKHRoaXMuZG9jKS5vZmYoJ21vdXNldXAnLCB0aGlzLmJpbmRzLm1vdXNlVXBEb2MpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ2NsaWNrJywgdGhpcy5iaW5kcy5jbGljayk7XHJcbiAgICB0aGlzLmVsZW1lbnQub2ZmKCdkYmxjbGljaycsIHRoaXMuYmluZHMuZGJsY2xpY2spO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLmJpbmRzLnRvdWNoU3RhcnQpO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9mZigndG91Y2htb3ZlJywgdGhpcy5iaW5kcy50b3VjaE1vdmUpO1xyXG4gICAgdGhpcy5lbGVtZW50Lm9mZigndG91Y2hlbmQnLCB0aGlzLmJpbmRzLnRvdWNoRW5kKTtcclxuXHJcbiAgICAkKHRoaXMud25kKS5vZmYoJ2tleWRvd24nLCB0aGlzLmJpbmRzLmtleURvd24pO1xyXG4gICAgJCh0aGlzLnduZCkub2ZmKCdrZXlwcmVzcycsIHRoaXMuYmluZHMua2V5UHJlc3MpO1xyXG4gICAgJCh0aGlzLnduZCkub2ZmKCdrZXl1cCcsIHRoaXMuYmluZHMua2V5VXApO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvRXZlbnRzVG9BY3Rpb25zLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRXZlbnRzVG9BY3Rpb25zLmpzIiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZ1bGxTY3JlZW4ge1xyXG5cclxuXHRzdGF0aWMgX2hhc1dlYmtpdEZ1bGxTY3JlZW5cdD0gISFkb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuO1xyXG5cdHN0YXRpYyBfaGFzTW96RnVsbFNjcmVlblx0PSAhIWRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW47XHJcblx0c3RhdGljIF9oYXNNc0Z1bGxzY3JlZW4gPSAhIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuO1xyXG5cclxuXHRzdGF0aWMgYXZhaWxhYmxlKCkge1xyXG5cdFx0cmV0dXJuIEZ1bGxTY3JlZW4uX2hhc1dlYmtpdEZ1bGxTY3JlZW4gfHwgRnVsbFNjcmVlbi5faGFzTW96RnVsbFNjcmVlbiB8fCBGdWxsU2NyZWVuLl9oYXNNc0Z1bGxzY3JlZW47XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgYWN0aXZhdGVkKCkge1xyXG5cdFx0aWYoRnVsbFNjcmVlbi5faGFzV2Via2l0RnVsbFNjcmVlbikge1xyXG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihGdWxsU2NyZWVuLl9oYXNNb3pGdWxsU2NyZWVuKSB7XHJcblx0XHRcdHJldHVybiBkb2N1bWVudC5tb3pGdWxsU2NyZWVuO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihGdWxsU2NyZWVuLl9oYXNNc0Z1bGxzY3JlZW4pIHtcclxuXHRcdFx0cmV0dXJuICEhZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudDtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmFzc2VydChmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBoYW5kbGVyKSB7XHJcblx0XHRpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XHJcblx0XHQgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0ICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZXIsIGZhbHNlKTtcclxuXHRcdCAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHQgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBoYW5kbGVyKSB7XHJcblx0XHRpZiAoZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XHJcblx0XHQgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgaGFuZGxlciwgZmFsc2UpO1xyXG5cdFx0ICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW96ZnVsbHNjcmVlbmNoYW5nZScsIGhhbmRsZXIsIGZhbHNlKTtcclxuXHRcdCAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHQgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLCBoYW5kbGVyLCBmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgcmVxdWVzdChlbGVtZW50KSB7XHJcblx0XHRlbGVtZW50XHQ9IGVsZW1lbnRcdHx8IGRvY3VtZW50LmJvZHk7XHJcblx0XHRpZihGdWxsU2NyZWVuLl9oYXNXZWJraXRGdWxsU2NyZWVuKSB7XHJcblx0XHRcdGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oKTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoRnVsbFNjcmVlbi5faGFzTW96RnVsbFNjcmVlbikge1xyXG5cdFx0XHRlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKEZ1bGxTY3JlZW4uX2hhc01zRnVsbHNjcmVlbikge1xyXG5cdFx0XHRlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmFzc2VydChmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgY2FuY2VsKCkge1xyXG5cdFx0aWYoRnVsbFNjcmVlbi5faGFzV2Via2l0RnVsbFNjcmVlbikge1xyXG5cdFx0XHRkb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuKCk7XHJcblx0XHR9ZWxzZSBpZihGdWxsU2NyZWVuLl9oYXNNb3pGdWxsU2NyZWVuKSB7XHJcblx0XHRcdGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoRnVsbFNjcmVlbi5faGFzTXNGdWxsc2NyZWVuKSB7XHJcblx0XHRcdGRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4oKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmFzc2VydChmYWxzZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9GdWxsU2NyZWVuLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvRnVsbFNjcmVlbi5qcyIsImltcG9ydCB7JCwgaHRtbDJjYW52YXN9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlJztcclxuaW1wb3J0IEJhc2VNYXRoVXRpbHMgZnJvbSAnLi9CYXNlTWF0aFV0aWxzJztcclxuaW1wb3J0IERvbTJJbWFnZSBmcm9tICcuL0RvbTJJbWFnZSc7XHJcbmltcG9ydCBEb2NNb3VzZVNpbXVsYXRvciBmcm9tICcuL0RvY01vdXNlU2ltdWxhdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludGVyYWN0aXZlSW1hZ2UgZXh0ZW5kcyBJbWFnZUJhc2Uge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCB3aWR0aCwgaGVpZ2h0LCBjb2xvciwgc3JjLCBjYWNoZSwgaW5qZWN0b3IpIHtcclxuICAgIHN1cGVyKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKTtcclxuXHJcbiAgICB0aGlzLmlJZCA9ICdpJytCYXNlTWF0aFV0aWxzLmdldFVuaXF1ZSgpO1xyXG4gICAgY29uc3QgakZyYW1lID0gJCgnPGlmcmFtZSBpZD1cIicrdGhpcy5pSWQrJ1wiIHNyYz1cIicgKyBzcmMgKyAnXCIgc3R5bGU9XCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwcHg7XCI+PC9pZnJhbWU+Jyk7XHJcbiAgICAkKHRoaXMuZG9jLmJvZHkpLmFwcGVuZChqRnJhbWUpO1xyXG4gICAgdGhpcy5mcmFtZSA9IGpGcmFtZVswXTtcclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge307XHJcblxyXG4gICAgaWYoaW5qZWN0b3IpIHtcclxuICAgICAgaW5qZWN0b3IodGhpcy5mcmFtZS5jb250ZW50V2luZG93KTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLmRvYy5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCd3d3cuaHR0cDovL3czLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHknLCAnMS4xJykpIHsgLy8gc3ZnIGZvcmVpZ25PYmplY3QgcmVuZGVyZXJcclxuICAgICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICB0aGlzLmJpbmRzLmltYWdlTG9hZCA9ICgpPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVySW1hZ2UodGhpcy5pbWFnZSk7XHJcbiAgICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgICAgfTtcclxuICAgICAgJCh0aGlzLmltYWdlKS5vbignbG9hZCcsIHRoaXMuYmluZHMuaW1hZ2VMb2FkKTtcclxuICAgICAgdGhpcy5zdmdSZW5kZXIgPSBuZXcgRG9tMkltYWdlKHRoaXMuZnJhbWUuY29udGVudFdpbmRvdywgdGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQsIGNhY2hlKTtcclxuICAgIH0gLy8gb3RoZXJ3aXNlIC0gaHRtbDJjYW52YXNcclxuXHJcbiAgICB0aGlzLmJpbmRzLmZyYW1lTG9hZCA9ICgpPT4ge1xyXG4gICAgICBpZih+dGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQudGl0bGUuaW5kZXhPZignNDA0JykpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0UmVuZGVyID0gKCk9PiB7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlck5vdEZvdW5kUGFnZSgpO1xyXG4gICAgICAgICAgdGhpcy5maW5pc2hSZW5kZXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PiB7XHJcbiAgICAgICAgICBpZih0aGlzLmZyYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSAkKHRoaXMuZnJhbWUuY29udGVudERvY3VtZW50LmJvZHkpLndpZHRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gJCh0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5KS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgakZyYW1lLmNzcygnd2lkdGgnLCB0aGlzLndpZHRoKydweCcpLmNzcygnaGVpZ2h0JywgdGhpcy5oZWlnaHQrJ3B4Jyk7XHJcbiAgICAgICAgICAgIGpGcmFtZS5vZmZzZXQoe2xlZnQ6IC10aGlzLndpZHRoLTEwMCwgdG9wOiAwfSk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc3ZnUmVuZGVyKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zaW11bGF0b3IgPSBuZXcgRG9jTW91c2VTaW11bGF0b3IoakZyYW1lLCB0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5LCB0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2ltdWxhdG9yLmFkZERvY0NoYW5nZUNsYih0aGlzLmZpbmlzaExvYWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdGFydFJlbmRlciA9ICgpPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICAkKHRoaXMuZnJhbWUuY29udGVudFdpbmRvdykub24oJ2xvYWQnLCB0aGlzLmJpbmRzLmZyYW1lTG9hZCk7XHJcbiAgfVxyXG5cclxuICBnZXRTaW11bGF0ZWREb2MoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZih0aGlzLnN2Z1JlbmRlcikge1xyXG4gICAgICB0aGlzLnN2Z1JlbmRlci50b1N2Zyh0aGlzLnNpbXVsYXRvci5lbGVtZW50LCB7aGVpZ2h0OiB0aGlzLmhlaWdodCsncHgnLCB3aWR0aDogdGhpcy53aWR0aCsncHgnfSlcclxuICAgICAgICAudGhlbigoZGF0YVVybCk9PiB7XHJcbiAgICAgICAgICB0aGlzLmltYWdlLnNyYyA9IGRhdGFVcmw7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKT0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RvbTJJbWFnZTogJywgZXJyb3IpO1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJCbGFua1BhZ2UoKTtcclxuICAgICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaHRtbDJjYW52YXModGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQuYm9keSwge3RpbWVvdXQ6IDMwMDAwfSkuXHJcbiAgICAgICAgdGhlbigoY2FudmFzKT0+IHtcclxuICAgICAgICAgIHRoaXMucmVuZGVySW1hZ2UoY2FudmFzKTtcclxuICAgICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgJCh0aGlzLmltYWdlKS5vZmYoJ2xvYWQnLCB0aGlzLmJpbmRzLmltYWdlTG9hZCk7XHJcbiAgICAkKHRoaXMuZnJhbWUuY29udGVudFdpbmRvdykub2ZmKCdsb2FkJywgdGhpcy5iaW5kcy5mcmFtZUxvYWQpO1xyXG4gICAgJCh0aGlzLmRvYy5ib2R5KS5maW5kKCcjJyt0aGlzLmlJZCkucmVtb3ZlKCk7XHJcbiAgICBpZih0aGlzLmltYWdlKSB7XHJcbiAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gJyc7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLmltYWdlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mcmFtZS5zcmMgPSAnJztcclxuICAgIGRlbGV0ZSB0aGlzLmZyYW1lO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgc2ltdWxhdGUoZSwgZG9jLCB4LCB5KSB7XHJcbiAgICBpZih0aGlzLnNpbXVsYXRvcikge1xyXG4gICAgICB0aGlzLnNpbXVsYXRvci5zaW11bGF0ZShlLCBkb2MsIHgsIHkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvSW50ZXJhY3RpdmVJbWFnZS5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL0ludGVyYWN0aXZlSW1hZ2UuanMiLCJpbXBvcnQgeyQsIHRyfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEdyYXBoVXRpbHMgZnJvbSAnLi9HcmFwaFV0aWxzJztcclxuaW1wb3J0IE1hdGhVdGlscyBmcm9tICcuL01hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nQW5pbWF0aW9uIHtcclxuXHJcbiAgZHkodCx5KSB7XHJcbiAgICBjb25zdCB3PXlbMF0sIGE9eVsxXTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIC10aGlzLmcqTWF0aC5jb3MoYSksXHJcbiAgICAgIHdcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBpbnRlZ3JhdGUoVCkge1xyXG4gICAgbGV0IHQ9MCwgZHQ9dGhpcy5wLmR0LCBvcyA9IHRoaXMub3M7XHJcbiAgICB3aGlsZSh0PFQpIHtcclxuICAgICAgaWYodCtkdD5UKSB7XHJcbiAgICAgICAgZHQ9VC10O1xyXG4gICAgICB9XHJcbiAgICAgIG9zPU1hdGhVdGlscy5yazQodGhpcy5keS5iaW5kKHtnOiB0aGlzLnAuZ30pLCAwLCBkdCwgb3MpO1xyXG4gICAgICB0Kz1kdDtcclxuICAgIH1cclxuICAgIHJldHVybiBvcztcclxuICB9XHJcblxyXG4gIGNhbGNUaW1lVG8odGFyZ2V0KSB7XHJcbiAgICBsZXQgdD0wLCBkdD10aGlzLnAuZHQsIG9zID0gdGhpcy5vcztcclxuICAgIHdoaWxlKE1hdGguYWJzKG9zWzFdLXRhcmdldCk+MWUtNCkge1xyXG4gICAgICBjb25zdCBub3M9TWF0aFV0aWxzLnJrNCh0aGlzLmR5LmJpbmQoe2c6IHRoaXMucC5nfSksIDAsIGR0LCBvcyk7XHJcbiAgICAgIGlmKG5vc1swXTwwICYmIG5vc1sxXTx0YXJnZXQgfHwgbm9zWzBdPjAgJiYgbm9zWzFdPnRhcmdldCkge1xyXG4gICAgICAgIGR0Lz0yO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIG9zID0gbm9zO1xyXG4gICAgICAgIHQrPWR0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShUKSB7XHJcbiAgICB0aGlzLm9zID0gdGhpcy5pbnRlZ3JhdGUoVCk7XHJcblxyXG4gICAgdGhpcy50Kz1UXHJcbiAgICBpZih0aGlzLnQ+PXRoaXMucC51cGRhdGVJbnRlcnZhbCkge1xyXG4gICAgICB0aGlzLnQgPSAwO1xyXG4gICAgICBjb25zdCByID0gMC4wNipNYXRoLm1pbih0aGlzLmMud2lkdGgsIHRoaXMuYy5oZWlnaHQpLFxyXG4gICAgICAgICAgICBhID0gdGhpcy5vc1sxXSxcclxuICAgICAgICAgICAgeDAgPSAwLjUqdGhpcy5jLndpZHRoLFxyXG4gICAgICAgICAgICB5MCA9IDAuNSp0aGlzLmMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBjdHggPSB0aGlzLmN0eDtcclxuXHJcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jLndpZHRoLCB0aGlzLmMuaGVpZ2h0KTtcclxuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gR3JhcGhVdGlscy5jb2xvcjJSZ2JhKHRoaXMucC5jb2xvciwxKTtcclxuICAgICAgY3R4LnJlY3QoMCwgMCwgdGhpcy5jLndpZHRoLCB0aGlzLmMuaGVpZ2h0KTtcclxuICAgICAgY3R4LmZpbGwoKTtcclxuXHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4LnNoYWRvd0JsdXIgPSA1MDtcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYShHcmFwaFV0aWxzLmludmVyc2VDb2xvcih0aGlzLnAuY29sb3IsMC45KSxNYXRoLmFicyh0aGlzLm9zWzBdLzYuMzYpKTtcclxuICAgICAgY3R4LnNoYWRvd0NvbG9yID0gR3JhcGhVdGlscy5jb2xvcjJSZ2JhKEdyYXBoVXRpbHMuaW52ZXJzZUNvbG9yKHRoaXMucC5jb2xvciwxKSwwLjkpO1xyXG4gICAgICBjdHguc2hhZG93T2Zmc2V0WCA9IDA7XHJcbiAgICAgIGN0eC5zaGFkb3dPZmZzZXRZID0gMDtcclxuICAgICAgY3R4LmZvbnQ9J2JvbGQgJytNYXRoLnJvdW5kKDAuMjUqcikrJ3B4IEFyaWFsJztcclxuICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XHJcbiAgICAgIGN0eC5maWxsVGV4dCh0cignTG9hZGluZy4uLicpLHgwLHkwKTtcclxuXHJcbiAgICAgIGNvbnN0IHBzID0gMTAsIGRhPTIqTWF0aC5QSS9wczsvLzIuNSpfci9yXHJcbiAgICAgIGN0eC5zaGFkb3dDb2xvciA9IEdyYXBoVXRpbHMuY29sb3IyUmdiYShHcmFwaFV0aWxzLmludmVyc2VDb2xvcih0aGlzLnAuY29sb3IsMSksMC43KTtcclxuICAgICAgZm9yKGxldCBpPTAsIF9hPWEsIF9yPTAuMipyOyBpPHBzOyArK2ksIF9yKj0wLjksIF9hKz1kYSkge1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gR3JhcGhVdGlscy5jb2xvcjJSZ2JhKEdyYXBoVXRpbHMuaW52ZXJzZUNvbG9yKHRoaXMucC5jb2xvciwocHMtaSkvcHMpLDAuNyoocHMtaSkvcHMpO1xyXG4gICAgICAgIGNvbnN0IGN4PXgwK3IqTWF0aC5jb3MoX2EpLCBjeT15MC1yKk1hdGguc2luKF9hKSwgbng9eDArcipNYXRoLmNvcyhfYStkYSksIG55PXkwLXIqTWF0aC5zaW4oX2ErZGEpO1xyXG4gICAgICAgIGN0eC5zaGFkb3dPZmZzZXRYID0gMC4yKihueC1jeCk7XHJcbiAgICAgICAgY3R4LnNoYWRvd09mZnNldFkgPSAwLjIqKG55LWN5KTtcclxuICAgICAgICBjdHguYXJjKGN4LCBjeSwgX3IsIDAsIE1hdGguUEkqMiwgMSk7XHJcbiAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgfVxyXG4gICAgICBpZih0aGlzLm9uQ2hhbmdlKSB7XHJcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmMsIHRoaXMucC5jb2xvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEltYWdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuYztcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLmMud2lkdGggPSAwO1xyXG4gICAgdGhpcy5jLmhlaWdodCA9IDA7XHJcbiAgICBkZWxldGUgdGhpcy5jdHg7XHJcbiAgICBkZWxldGUgdGhpcy5jO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlU3ByaXRlKG4pIHtcclxuICAgIGNvbnN0IGMgPSAkKCc8Y2FudmFzIHdpZHRoPVwiJyt0aGlzLmMud2lkdGgqbisnXCIgaGVpZ2h0PVwiJyt0aGlzLmMuaGVpZ2h0KydcIj48L2NhbnZhcz4nKVswXSwgY3R4ID0gYy5nZXRDb250ZXh0KCcyZCcpLFxyXG4gICAgdCA9IHRoaXMuY2FsY1RpbWVUbyh0aGlzLm9zWzFdK01hdGguc2lnbih0aGlzLm9zWzBdKSoyKk1hdGguUEkpLCBkdD10LyhuKzEpO1xyXG4gICAgY29uc3Qge3VwZGF0ZUludGVydmFsfSA9IHRoaXMucDtcclxuICAgIHRoaXMucC51cGRhdGVJbnRlcnZhbCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxuOyArK2kpIHtcclxuICAgICAgdGhpcy51cGRhdGUoZHQpO1xyXG4gICAgICBjdHguZHJhd0ltYWdlKHRoaXMuYywgaSp0aGlzLmMud2lkdGgsIDApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wLnVwZGF0ZUludGVydmFsID0gdXBkYXRlSW50ZXJ2YWw7XHJcbiAgICByZXR1cm4gYztcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQsIGNvbG9yKSB7XHJcbiAgICBjb25zdCBqQyA9ICQoJzxjYW52YXMgd2lkdGg9XCInK3dpZHRoKydcIiBoZWlnaHQ9XCInK2hlaWdodCsnXCI+PC9jYW52YXM+Jyk7XHJcbiAgICB0aGlzLmMgPSBqQ1swXTtcclxuICAgIHRoaXMucCA9IHtcclxuICAgICAgZzogOS44LFxyXG4gICAgICBkdDogMS82MCxcclxuICAgICAgY29sb3IsXHJcbiAgICAgIHVwZGF0ZUludGVydmFsOiAwLjI1XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jdHggPSB0aGlzLmMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIHRoaXMub3MgPSBbLTIsIE1hdGguUEkvMl07XHJcbiAgICB0aGlzLnQgPSB0aGlzLnAudXBkYXRlSW50ZXJ2YWw7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9Mb2FkaW5nQW5pbWF0aW9uLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0FuaW1hdGlvbi5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nQ29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpZXcsIHNob3dQcm9ncmVzcz10cnVlLCBsb2FkaW5nTXNnPXVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xyXG4gICAgdGhpcy5zaG93UHJvZ3Jlc3MgPSBzaG93UHJvZ3Jlc3M7XHJcbiAgICB0aGlzLmdldExvYWRpbmdNc2cgPSBsb2FkaW5nTXNnIHx8IExvYWRpbmdDb250cm9sbGVyLmRlZmF1bHRMb2FkaW5nTXNnO1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZGVmYXVsdExvYWRpbmdNc2cocHJvZ3Jlc3MpIHtcclxuICAgIHJldHVybiBbJ1BsZWFzZSB3YWl0Li4uIHRoZSBBcHBsaWNhdGlvbiBpcyBMb2FkaW5nOiAnLCBwcm9ncmVzcywgJyUnXS5qb2luKCcnKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLnNob3dQcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgdGhpcy51cGRhdGVWaWV3KCk7XHJcbiAgICBkZWxldGUgdGhpcy52aWV3O1xyXG4gIH1cclxuXHJcbiAgc2V0UHJvZ3Jlc3Modikge1xyXG4gICAgdGhpcy5wcm9ncmVzcyA9IHY7XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXcoKSB7XHJcbiAgICBpZih0aGlzLnZpZXcpIHtcclxuXHJcbiAgICAgIHRoaXMudmlldy5zZXRTdGF0ZSgnd2lkTG9hZGluZ1Byb2dyZXNzJywge1xyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2aXNpYmxlOiB0aGlzLnNob3dQcm9ncmVzcyxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd0eHRMb2FkaW5nUHJvZ3Jlc3MnLCB7XHJcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0TG9hZGluZ01zZyh0aGlzLnByb2dyZXNzKSxcclxuICAgICAgICB2aXNpYmxlOiB0cnVlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZm9yKGxldCBuYW1lIG9mIHRoaXMudmlldy5nZXRMaW5rcygpKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LnNldFN0YXRlKG5hbWUsIHtcclxuICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgYWN0aXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnZpZXcuc2V0U3RhdGUoJ2lucFBhZ2VzJywge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgdmFsdWU6ICcnXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCdpbnBQYWdlJywge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogJydcclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvTG9hZGluZ0NvbnRyb2xsZXIuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9Mb2FkaW5nQ29udHJvbGxlci5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBFdmVudENvbnZlcnRlciBmcm9tICcuL0V2ZW50Q29udmVydGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdXNlRXZlbnRDb252ZXJ0ZXIgZXh0ZW5kcyBFdmVudENvbnZlcnRlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHduZCwgZG9jLCBlbGVtZW50KSB7XHJcbiAgICBzdXBlcih3bmQsIGRvYyk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIGNvbnZlcnQ6IHRoaXMuY29udmVydC5iaW5kKHRoaXMpXHJcbiAgICB9O1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9uKCdtb3VzZW1vdmUgbW91c2Vkb3duIG1vdXNlb3ZlciBtb3VzZW91dCBjbGljaycsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgICAkKHRoaXMuZG9jKS5vbignbW91c2V1cCcsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgJCh0aGlzLmVsZW1lbnQpLm9mZignbW91c2Vtb3ZlIG1vdXNlZG93biBtb3VzZW92ZXIgbW91c2VvdXQgY2xpY2snLCB0aGlzLmJpbmRzLmNvbnZlcnQpO1xyXG4gICAgJCh0aGlzLmRvYykub2ZmKCdtb3VzZXVwJywgdGhpcy5iaW5kcy5jb252ZXJ0KTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvTW91c2VFdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL01vdXNlRXZlbnRDb252ZXJ0ZXIuanMiLCJpbXBvcnQge1RIUkVFfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IE1hdGhVdGlscyBmcm9tICcuL01hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPYmplY3QzRFdhdGNoZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2aXN1YWwsIGJvdW5kQm94Q2xiLCB0ZXN0U2NhbGU9dGhpcy50ZXN0U2NhbGUpIHtcclxuICAgIHRoaXMudmlzdWFsID0gdmlzdWFsO1xyXG4gICAgdGhpcy5ib3VuZEJveENsYiA9IGJvdW5kQm94Q2xiO1xyXG4gICAgdGhpcy50ZXN0U2NhbGUgPSB0ZXN0U2NhbGU7XHJcbiAgICB0aGlzLmNhbWVyYSA9IHZpc3VhbC5jYW1lcmE7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLnZpc3VhbC5lbGVtZW50O1xyXG4gICAgdGhpcy5lbGVtZW50U2l6ZSA9IHt3OiAxLCBoOiAxfTtcclxuICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IHRoaXMudmlzdWFsLnduZC5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XHJcbiAgICB0aGlzLm9yYml0ID0gdmlzdWFsLmdldE9yYml0KCk7XHJcbiAgICB0aGlzLnNjYWxlID0gMTtcclxuXHJcbiAgICB0aGlzLmVwcyA9IDFlLTQ7XHJcbiAgICB0aGlzLnYgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgdGhpcy5kdiA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcblxyXG4gICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgdmlzdWFsLmFkZFJlbmRlckNhbGxiYWNrKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xyXG5cclxuICAgIHRoaXMub3MgPSB7XHJcbiAgICAgIHZ4OiAwLFxyXG4gICAgICB2eTogMCxcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMFxyXG4gICAgfTtcclxuICAgIHRoaXMub3JiaXQudXBkYXRlKCk7XHJcbiAgICB0aGlzLmNhbWVyYS51cGRhdGVNYXRyaXhXb3JsZCgpO1xyXG4gICAgbGV0IGJveCA9IHRoaXMuY29tcHV0ZUNsaWVudEJvdW5kQm94KCksIGs9MS4xMTtcclxuICAgIHRoaXMubW92ZVBhbih7eDogLWsqYm94Lm1pZC54LCB5OiAtaypib3gubWlkLnl9KTtcclxuICB9XHJcblxyXG4gIG1vdmVQYW4oZHYpIHtcclxuICAgIHRoaXMub3JiaXQucGFuKGR2LngqdGhpcy52aXN1YWwud2lkdGgoKSwgLWR2LnkqdGhpcy52aXN1YWwuaGVpZ2h0KCkpO1xyXG4gIH1cclxuXHJcbiAgdlRvQ2FtZXJhKHYpIHtcclxuICAgIHYucHJvamVjdCh0aGlzLmNhbWVyYSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiAwLjUqdi54LFxyXG4gICAgICB5OiAwLjUqdi55XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29tcHV0ZUNsaWVudEJvdW5kQm94KCkge1xyXG4gICAgY29uc3QgYm94ID0gdGhpcy5ib3VuZEJveENsYigpLFxyXG4gICAgICB4cyA9IFtib3gubWluLngsIGJveC5tYXgueF0sXHJcbiAgICAgIHlzID0gWzAsIDBdLFxyXG4gICAgICB6cyA9IFtib3gubWluLnosIGJveC5tYXguel07XHJcblxyXG4gICAgY29uc3QgcHMgPSBbXSwgcmVzID0ge21heDoge30sIG1pbjoge319O1xyXG4gICAgZm9yKGxldCB4IG9mIHhzKSB7XHJcbiAgICAgIGZvcihsZXQgeSBvZiB5cykge1xyXG4gICAgICAgIGZvcihsZXQgeiBvZiB6cykge1xyXG4gICAgICAgICAgcHMucHVzaCh0aGlzLnZUb0NhbWVyYSh0aGlzLnYuc2V0KHgseSx6KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBzLnNvcnQoKHAxLCBwMik9PiBwMS54LXAyLngpO1xyXG4gICAgcmVzLm1pbi54ID0gcHNbMF0ueDtcclxuICAgIHJlcy5tYXgueCA9IHBzW3BzLmxlbmd0aC0xXS54O1xyXG4gICAgcHMuc29ydCgocDEsIHAyKT0+IHAxLnktcDIueSk7XHJcbiAgICByZXMubWluLnkgPSBwc1swXS55O1xyXG4gICAgcmVzLm1heC55ID0gcHNbcHMubGVuZ3RoLTFdLnk7XHJcblxyXG4gICAgcmVzLndpZHRoID0gcmVzLm1heC54LXJlcy5taW4ueDtcclxuICAgIHJlcy5oZWlnaHQgPSByZXMubWF4LnktcmVzLm1pbi55O1xyXG5cclxuICAgIHJlcy5taWQgPSB7XHJcbiAgICAgIHg6IDAuNSoocmVzLm1heC54K3Jlcy5taW4ueCksXHJcbiAgICAgIHk6IDAuNSoocmVzLm1heC55K3Jlcy5taW4ueSlcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG4gIHNldE9iamVjdChib3VuZEJveENsYikge1xyXG4gICAgdGhpcy5ib3VuZEJveENsYiA9IGJvdW5kQm94Q2xiO1xyXG4gIH1cclxuXHJcbiAgdGVzdFNjYWxlKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBjb21wdXRlQ29ycihLLCBtaW4sIG1heCkge1xyXG4gICAgbGV0IGNvcnIgPSAwO1xyXG4gICAgaWYoSzwxKSB7XHJcbiAgICAgIGlmKG1pbj4tMC41KSB7XHJcbiAgICAgICAgY29yciA9IC0wLjUtbWluO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYobWF4PDAuNSkge1xyXG4gICAgICAgIGNvcnIgPSAwLjUtbWF4O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYobWluPC0wLjUpIHtcclxuICAgICAgICBjb3JyID0gLTAuNS1taW47XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihtYXg+MC41KSB7XHJcbiAgICAgICAgY29yciA9IDAuNS1tYXg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjb3JyO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2NhbGUoKSB7XHJcbiAgICBjb25zdCBib3ggPSB0aGlzLmNvbXB1dGVDbGllbnRCb3VuZEJveCgpLFxyXG4gICAgICBLeCA9IHRoaXMuZWxlbWVudFNpemUudy9ib3gud2lkdGgsXHJcbiAgICAgIEt5ID0gdGhpcy5lbGVtZW50U2l6ZS5oL2JveC5oZWlnaHQ7XHJcbiAgICByZXR1cm4gMS9NYXRoLm1pbihLeCwgS3kpO1xyXG4gIH1cclxuXHJcbiAgY2VudGVyVmlldyhUKSB7XHJcbiAgICBsZXQgYm94ID0gdGhpcy5jb21wdXRlQ2xpZW50Qm91bmRCb3goKSxcclxuICAgICAgS3ggPSB0aGlzLmVsZW1lbnRTaXplLncvYm94LndpZHRoLFxyXG4gICAgICBLeSA9IHRoaXMuZWxlbWVudFNpemUuaC9ib3guaGVpZ2h0LFxyXG4gICAgICBLID0gTWF0aC5taW4oS3gsIEt5KTtcclxuXHJcbiAgICBpZih0aGlzLnRlc3RTY2FsZSgpICYmIE1hdGguYWJzKDEvSy10aGlzLnNjYWxlKT50aGlzLmVwcykge1xyXG4gICAgICBjb25zdCBzY2FsZSA9IDEvSyswLjIqKHRoaXMuc2NhbGUtMS9LKTtcclxuICAgICAgdGhpcy5vcmJpdC5zZXRTY2FsZSh0aGlzLm9yYml0LmdldFNjYWxlKCkvKEsqc2NhbGUpKTtcclxuICAgICAgdGhpcy5vcmJpdC51cGRhdGUoKTtcclxuICAgICAgdGhpcy5jYW1lcmEudXBkYXRlTWF0cml4V29ybGQoKTtcclxuICAgICAgYm94ID0gdGhpcy5jb21wdXRlQ2xpZW50Qm91bmRCb3goKTtcclxuICAgICAgICBLeCA9IHRoaXMuZWxlbWVudFNpemUudy9ib3gud2lkdGg7XHJcbiAgICAgICAgS3kgPSB0aGlzLmVsZW1lbnRTaXplLmgvYm94LmhlaWdodDtcclxuICAgICAgICBLID0gTWF0aC5taW4oS3gsIEt5KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkdiA9IHRoaXMuZHY7XHJcbiAgICBpZihLPjEtdGhpcy5lcHMpIHtcclxuICAgICAgZHYuc2V0KC1ib3gubWlkLngsIC1ib3gubWlkLnkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIGR2LnNldCh0aGlzLmNvbXB1dGVDb3JyKEt4LCBib3gubWluLngsIGJveC5tYXgueCksXHJcbiAgICAgICAgICAgICB0aGlzLmNvbXB1dGVDb3JyKEt5LCBib3gubWluLnksIGJveC5tYXgueSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKE1hdGguc3FydCh0aGlzLm9zLnZ4KnRoaXMub3MudngrdGhpcy5vcy52eSp0aGlzLm9zLnZ5KT4wLjAwMyB8fCBkdi5sZW5ndGgoKT4wLjAwMykge1xyXG4gICAgICBsZXQgZHQgPSAxLzYwLCB0PTAsIG9zID0ge1xyXG4gICAgICAgIC4uLnRoaXMub3MsXHJcbiAgICAgICAgeDogMCxcclxuICAgICAgICB5OiAwXHJcbiAgICAgIH07XHJcbiAgICAgIG9zLnRmID0gKHZ4LCB2eSwgeCwgeSk9PiAoe1xyXG4gICAgICAgIHg6IDc1Kihkdi54LXgpL01hdGgucG93KHRoaXMuZGV2aWNlUGl4ZWxSYXRpbywgMS4wKSxcclxuICAgICAgICB5OiA3NSooZHYueS15KS9NYXRoLnBvdyh0aGlzLmRldmljZVBpeGVsUmF0aW8sIDEuMClcclxuICAgICAgfSk7XHJcbiAgICAgIHdoaWxlKHQ8VCkge1xyXG4gICAgICAgIGlmKHQrZHQ+VCkge1xyXG4gICAgICAgICAgZHQgPSBULXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9zID0gdGhpcy5pbnRlZ3JhdGUob3MsIGR0KTtcclxuICAgICAgICB0ICs9IGR0O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMubW92ZVBhbihvcyk7XHJcbiAgICAgIHRoaXMub3MgPSBvcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGludGVncmF0ZShvcywgZHQpIHtcclxuICAgIGNvbnN0IFt2eCwgdnksIHgsIHldID0gTWF0aFV0aWxzLnJrNChcclxuICAgICAgdGhpcy5keS5iaW5kKG9zKSxcclxuICAgICAgMCxcclxuICAgICAgZHQsXHJcbiAgICAgIFtvcy52eCwgb3MudnksIG9zLngsIG9zLnldXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLi4ub3MsXHJcbiAgICAgIHZ4LCB2eSwgeCwgeVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGR5KHQsWSkge1xyXG4gICAgY29uc3QgW3Z4LCB2eSwgeCwgeV0gPSBZLCB2ZCA9IDE1LCB0ZiA9IHRoaXMudGYodngsIHZ5LCB4LCB5KTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgIHRmLngtdmQqdngsXHJcbiAgICAgIHRmLnktdmQqdnksXHJcbiAgICAgIHZ4LFxyXG4gICAgICB2eVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZShkdCkge1xyXG4gICAgaWYodGhpcy5lbmFibGVkICYmIHRoaXMuYm91bmRCb3hDbGIpIHtcclxuICAgICAgdGhpcy5jZW50ZXJWaWV3KGR0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL09iamVjdDNEV2F0Y2hlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL09iamVjdDNEV2F0Y2hlci5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JiaXQgZXh0ZW5kcyBUSFJFRS5FdmVudERpc3BhdGNoZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihvYmplY3QsIGRvbUVsZW1lbnQpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgXHR0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICBcdHRoaXMuZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcclxuXHJcbiAgXHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGlzIGNvbnRyb2xcclxuICBcdHRoaXMuZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gIFx0Ly8gXCJ0YXJnZXRcIiBzZXRzIHRoZSBsb2NhdGlvbiBvZiBmb2N1cywgd2hlcmUgdGhlIG9iamVjdCBvcmJpdHMgYXJvdW5kXHJcbiAgXHR0aGlzLnRhcmdldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblxyXG4gIFx0Ly8gSG93IGZhciB5b3UgY2FuIGRvbGx5IGluIGFuZCBvdXQoUGVyc3BlY3RpdmVDYW1lcmEgb25seSlcclxuICBcdHRoaXMubWluRGlzdGFuY2UgPSAwO1xyXG4gIFx0dGhpcy5tYXhEaXN0YW5jZSA9IEluZmluaXR5O1xyXG5cclxuICBcdC8vIEhvdyBmYXIgeW91IGNhbiB6b29tIGluIGFuZCBvdXQoT3J0aG9ncmFwaGljQ2FtZXJhIG9ubHkpXHJcbiAgXHR0aGlzLm1pblpvb20gPSAwO1xyXG4gIFx0dGhpcy5tYXhab29tID0gSW5maW5pdHk7XHJcblxyXG4gIFx0Ly8gSG93IGZhciB5b3UgY2FuIG9yYml0IHZlcnRpY2FsbHksIHVwcGVyIGFuZCBsb3dlciBsaW1pdHMuXHJcbiAgXHQvLyBSYW5nZSBpcyAwIHRvIE1hdGguUEkgcmFkaWFucy5cclxuICBcdHRoaXMubWluUG9sYXJBbmdsZSA9IDA7IC8vIHJhZGlhbnNcclxuICBcdHRoaXMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEk7IC8vIHJhZGlhbnNcclxuXHJcbiAgXHQvLyBIb3cgZmFyIHlvdSBjYW4gb3JiaXQgaG9yaXpvbnRhbGx5LCB1cHBlciBhbmQgbG93ZXIgbGltaXRzLlxyXG4gIFx0Ly8gSWYgc2V0LCBtdXN0IGJlIGEgc3ViLWludGVydmFsIG9mIHRoZSBpbnRlcnZhbCBbLU1hdGguUEksIE1hdGguUEkgXS5cclxuICBcdHRoaXMubWluQXppbXV0aEFuZ2xlID0gLUluZmluaXR5OyAvLyByYWRpYW5zXHJcbiAgXHR0aGlzLm1heEF6aW11dGhBbmdsZSA9IEluZmluaXR5OyAvLyByYWRpYW5zXHJcblxyXG4gIFx0Ly8gU2V0IHRvIHRydWUgdG8gZW5hYmxlIGRhbXBpbmcgKGluZXJ0aWEpXHJcbiAgXHQvLyBJZiBkYW1waW5nIGlzIGVuYWJsZWQsIHlvdSBtdXN0IGNhbGwgY29udHJvbHMudXBkYXRlKCkgaW4geW91ciBhbmltYXRpb24gbG9vcFxyXG4gIFx0dGhpcy5lbmFibGVEYW1waW5nID0gZmFsc2U7XHJcbiAgXHR0aGlzLmRhbXBpbmdGYWN0b3IgPSAwLjI1O1xyXG5cclxuICBcdC8vIFRoaXMgb3B0aW9uIGFjdHVhbGx5IGVuYWJsZXMgZG9sbHlpbmcgaW4gYW5kIG91dDsgbGVmdCBhcyBcInpvb21cIiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXHJcbiAgXHQvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB6b29taW5nXHJcbiAgXHR0aGlzLmVuYWJsZVpvb20gPSB0cnVlO1xyXG4gIFx0dGhpcy56b29tU3BlZWQgPSAxLjA7XHJcblxyXG4gIFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcm90YXRpbmdcclxuICBcdHRoaXMuZW5hYmxlUm90YXRlID0gdHJ1ZTtcclxuICBcdHRoaXMucm90YXRlU3BlZWQgPSAxLjA7XHJcblxyXG4gIFx0Ly8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgcGFubmluZ1xyXG4gIFx0dGhpcy5lbmFibGVQYW4gPSB0cnVlO1xyXG5cclxuICBcdC8vIFNldCB0byB0cnVlIHRvIGF1dG9tYXRpY2FsbHkgcm90YXRlIGFyb3VuZCB0aGUgdGFyZ2V0XHJcbiAgXHQvLyBJZiBhdXRvLXJvdGF0ZSBpcyBlbmFibGVkLCB5b3UgbXVzdCBjYWxsIGNvbnRyb2xzLnVwZGF0ZSgpIGluIHlvdXIgYW5pbWF0aW9uIGxvb3BcclxuICBcdHRoaXMuYXV0b1JvdGF0ZSA9IGZhbHNlO1xyXG4gIFx0dGhpcy5hdXRvUm90YXRlU3BlZWQgPSAyLjA7IC8vIDMwIHNlY29uZHMgcGVyIHJvdW5kIHdoZW4gZnBzIGlzIDYwXHJcblxyXG4gIFx0Ly8gZm9yIHJlc2V0XHJcbiAgXHR0aGlzLnRhcmdldDAgPSB0aGlzLnRhcmdldC5jbG9uZSgpO1xyXG4gIFx0dGhpcy5wb3NpdGlvbjAgPSB0aGlzLm9iamVjdC5wb3NpdGlvbi5jbG9uZSgpO1xyXG4gIFx0dGhpcy56b29tMCA9IHRoaXMub2JqZWN0Lnpvb207XHJcblxyXG4gIFx0Ly9cclxuICBcdC8vIHB1YmxpYyBtZXRob2RzXHJcbiAgXHQvL1xyXG4gIFx0dGhpcy5nZXRQb2xhckFuZ2xlID0gZnVuY3Rpb24gKCkge1xyXG4gIFx0XHRyZXR1cm4gc3BoZXJpY2FsLnBoaTtcclxuICBcdH07XHJcblxyXG4gIFx0dGhpcy5nZXRBemltdXRoYWxBbmdsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBcdFx0cmV0dXJuIHNwaGVyaWNhbC50aGV0YTtcclxuICBcdH07XHJcblxyXG4gIFx0dGhpcy5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICBcdFx0c2NvcGUudGFyZ2V0LmNvcHkoc2NvcGUudGFyZ2V0MCk7XHJcbiAgXHRcdHNjb3BlLm9iamVjdC5wb3NpdGlvbi5jb3B5KHNjb3BlLnBvc2l0aW9uMCk7XHJcbiAgXHRcdHNjb3BlLm9iamVjdC56b29tID0gc2NvcGUuem9vbTA7XHJcblxyXG4gIFx0XHRzY29wZS5vYmplY3QudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG4gIFx0XHRzY29wZS5kaXNwYXRjaEV2ZW50KGNoYW5nZUV2ZW50KTtcclxuXHJcbiAgXHRcdHNjb3BlLnVwZGF0ZSgpO1xyXG4gIFx0fTtcclxuXHJcbiAgICB0aGlzLnpvb21PdXQgPSBmdW5jdGlvbihzcGVlZD10aGlzLnpvb21TcGVlZCkge1xyXG4gICAgICBjb25zdCBfc3BlZWQgPSB0aGlzLnpvb21TcGVlZDtcclxuICAgICAgdGhpcy56b29tU3BlZWQgPSBzcGVlZDtcclxuICAgICAgZG9sbHlJbihnZXRab29tU2NhbGUoKSk7XHJcbiAgICAgIHRoaXMuem9vbVNwZWVkID0gX3NwZWVkO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnpvb21JbiA9IGZ1bmN0aW9uKHNwZWVkPXRoaXMuem9vbVNwZWVkKSB7XHJcbiAgICAgIGNvbnN0IF9zcGVlZCA9IHRoaXMuem9vbVNwZWVkO1xyXG4gICAgICB0aGlzLnpvb21TcGVlZCA9IHNwZWVkO1xyXG4gICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7XHJcbiAgICAgIHRoaXMuem9vbVNwZWVkID0gX3NwZWVkO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFNjYWxlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBzY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldFNjYWxlID0gZnVuY3Rpb24obmV3U2NhbGUpIHtcclxuICAgICAgc2NhbGUgPSBuZXdTY2FsZTtcclxuICAgIH1cclxuXHJcbiAgXHQvLyB0aGlzIG1ldGhvZCBpcyBleHBvc2VkLCBidXQgcGVyaGFwcyBpdCB3b3VsZCBiZSBiZXR0ZXIgaWYgd2UgY2FuIG1ha2UgaXQgcHJpdmF0ZS4uLlxyXG4gIFx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICBcdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHRcdC8vIHNvIGNhbWVyYS51cCBpcyB0aGUgb3JiaXQgYXhpc1xyXG4gIFx0XHR2YXIgcXVhdCA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCkuc2V0RnJvbVVuaXRWZWN0b3JzKG9iamVjdC51cCwgbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpO1xyXG4gIFx0XHR2YXIgcXVhdEludmVyc2UgPSBxdWF0LmNsb25lKCkuaW52ZXJzZSgpO1xyXG4gIFx0XHR2YXIgbGFzdFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICBcdFx0dmFyIGxhc3RRdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcclxuXHJcbiAgXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKCkge1xyXG4gIFx0XHRcdHZhciBwb3NpdGlvbiA9IHNjb3BlLm9iamVjdC5wb3NpdGlvbjtcclxuICBcdFx0XHRvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7XHJcbiAgXHRcdFx0Ly8gcm90YXRlIG9mZnNldCB0byBcInktYXhpcy1pcy11cFwiIHNwYWNlXHJcbiAgXHRcdFx0b2Zmc2V0LmFwcGx5UXVhdGVybmlvbihxdWF0KTtcclxuICBcdFx0XHQvLyBhbmdsZSBmcm9tIHotYXhpcyBhcm91bmQgeS1heGlzXHJcbiAgXHRcdFx0c3BoZXJpY2FsLnNldEZyb21WZWN0b3IzKG9mZnNldCk7XHJcbiAgXHRcdFx0aWYoc2NvcGUuYXV0b1JvdGF0ZSkge1xyXG4gIFx0XHRcdFx0cm90YXRlTGVmdChnZXRBdXRvUm90YXRpb25BbmdsZSgpKTtcclxuICBcdFx0XHR9XHJcbiAgXHRcdFx0c3BoZXJpY2FsLnRoZXRhICs9IHNwaGVyaWNhbERlbHRhLnRoZXRhO1xyXG4gIFx0XHRcdHNwaGVyaWNhbC5waGkgKz0gc3BoZXJpY2FsRGVsdGEucGhpO1xyXG4gIFx0XHRcdC8vIHJlc3RyaWN0IHRoZXRhIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcclxuICBcdFx0XHRzcGhlcmljYWwudGhldGEgPSBNYXRoLm1heChzY29wZS5taW5BemltdXRoQW5nbGUsIE1hdGgubWluKHNjb3BlLm1heEF6aW11dGhBbmdsZSwgc3BoZXJpY2FsLnRoZXRhKSk7XHJcbiAgXHRcdFx0Ly8gcmVzdHJpY3QgcGhpIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcclxuICBcdFx0XHRzcGhlcmljYWwucGhpID0gTWF0aC5tYXgoc2NvcGUubWluUG9sYXJBbmdsZSwgTWF0aC5taW4oc2NvcGUubWF4UG9sYXJBbmdsZSwgc3BoZXJpY2FsLnBoaSkpO1xyXG4gIFx0XHRcdHNwaGVyaWNhbC5tYWtlU2FmZSgpO1xyXG4gIFx0XHRcdHNwaGVyaWNhbC5yYWRpdXMgKj0gc2NhbGU7XHJcbiAgXHRcdFx0Ly8gcmVzdHJpY3QgcmFkaXVzIHRvIGJlIGJldHdlZW4gZGVzaXJlZCBsaW1pdHNcclxuICBcdFx0XHRzcGhlcmljYWwucmFkaXVzID0gTWF0aC5tYXgoc2NvcGUubWluRGlzdGFuY2UsIE1hdGgubWluKHNjb3BlLm1heERpc3RhbmNlLCBzcGhlcmljYWwucmFkaXVzKSk7XHJcbiAgXHRcdFx0Ly8gbW92ZSB0YXJnZXQgdG8gcGFubmVkIGxvY2F0aW9uXHJcbiAgXHRcdFx0c2NvcGUudGFyZ2V0LmFkZChwYW5PZmZzZXQpO1xyXG4gIFx0XHRcdG9mZnNldC5zZXRGcm9tU3BoZXJpY2FsKHNwaGVyaWNhbCk7XHJcbiAgXHRcdFx0Ly8gcm90YXRlIG9mZnNldCBiYWNrIHRvIFwiY2FtZXJhLXVwLXZlY3Rvci1pcy11cFwiIHNwYWNlXHJcbiAgXHRcdFx0b2Zmc2V0LmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSk7XHJcbiAgXHRcdFx0cG9zaXRpb24uY29weShzY29wZS50YXJnZXQpLmFkZChvZmZzZXQpO1xyXG4gIFx0XHRcdHNjb3BlLm9iamVjdC5sb29rQXQoc2NvcGUudGFyZ2V0KTtcclxuXHJcbiAgXHRcdFx0aWYoc2NvcGUuZW5hYmxlRGFtcGluZz09PXRydWUpIHtcclxuICBcdFx0XHRcdHNwaGVyaWNhbERlbHRhLnRoZXRhICo9KDEtc2NvcGUuZGFtcGluZ0ZhY3Rvcik7XHJcbiAgXHRcdFx0XHRzcGhlcmljYWxEZWx0YS5waGkgKj0oMS1zY29wZS5kYW1waW5nRmFjdG9yKTtcclxuICBcdFx0XHR9IGVsc2Uge1xyXG4gIFx0XHRcdFx0c3BoZXJpY2FsRGVsdGEuc2V0KDAsIDAsIDApO1xyXG4gIFx0XHRcdH1cclxuXHJcbiAgXHRcdFx0c2NhbGUgPSAxO1xyXG4gIFx0XHRcdHBhbk9mZnNldC5zZXQoMCwgMCwgMCk7XHJcblxyXG4gIFx0XHRcdC8vIHVwZGF0ZSBjb25kaXRpb24gaXM6XHJcbiAgXHRcdFx0Ly8gbWluKGNhbWVyYSBkaXNwbGFjZW1lbnQsIGNhbWVyYSByb3RhdGlvbiBpbiByYWRpYW5zKV4yID4gRVBTXHJcbiAgXHRcdFx0Ly8gdXNpbmcgc21hbGwtYW5nbGUgYXBwcm94aW1hdGlvbiBjb3MoeC8yKSA9IDEteF4yIC8gOFxyXG5cclxuICBcdFx0XHRpZih6b29tQ2hhbmdlZCB8fFxyXG4gIFx0XHRcdFx0bGFzdFBvc2l0aW9uLmRpc3RhbmNlVG9TcXVhcmVkKHNjb3BlLm9iamVjdC5wb3NpdGlvbikgPiBFUFMgfHxcclxuICBcdFx0XHRcdDggKigxLWxhc3RRdWF0ZXJuaW9uLmRvdChzY29wZS5vYmplY3QucXVhdGVybmlvbikpID4gRVBTKSB7XHJcblxyXG4gIFx0XHRcdFx0c2NvcGUuZGlzcGF0Y2hFdmVudChjaGFuZ2VFdmVudCk7XHJcblxyXG4gIFx0XHRcdFx0bGFzdFBvc2l0aW9uLmNvcHkoc2NvcGUub2JqZWN0LnBvc2l0aW9uKTtcclxuICBcdFx0XHRcdGxhc3RRdWF0ZXJuaW9uLmNvcHkoc2NvcGUub2JqZWN0LnF1YXRlcm5pb24pO1xyXG4gIFx0XHRcdFx0em9vbUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICBcdFx0XHR9XHJcbiAgXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG4gIFx0XHR9O1xyXG4gIFx0fSgpO1xyXG5cclxuICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gIFx0Ly9cclxuICBcdC8vIGludGVybmFsc1xyXG4gIFx0Ly9cclxuICBcdHZhciBzY29wZSA9IHRoaXM7XHJcbiAgXHR2YXIgY2hhbmdlRXZlbnQgPSB7IHR5cGU6ICdjaGFuZ2UnIH07XHJcbiAgXHR2YXIgRVBTID0gMWUtNjtcclxuICBcdC8vIGN1cnJlbnQgcG9zaXRpb24gaW4gc3BoZXJpY2FsIGNvb3JkaW5hdGVzXHJcbiAgXHR2YXIgc3BoZXJpY2FsID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xyXG4gIFx0dmFyIHNwaGVyaWNhbERlbHRhID0gbmV3IFRIUkVFLlNwaGVyaWNhbCgpO1xyXG5cclxuICBcdHZhciBzY2FsZSA9IDE7XHJcbiAgXHR2YXIgcGFuT2Zmc2V0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICBcdHZhciB6b29tQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICBcdGZ1bmN0aW9uIGdldEF1dG9Sb3RhdGlvbkFuZ2xlKCkge1xyXG4gIFx0XHRyZXR1cm4gMiAqIE1hdGguUEkgLyA2MCAvIDYwICogc2NvcGUuYXV0b1JvdGF0ZVNwZWVkO1xyXG4gIFx0fVxyXG5cclxuICBcdGZ1bmN0aW9uIGdldFpvb21TY2FsZSgpIHtcclxuICBcdFx0cmV0dXJuIE1hdGgucG93KDAuOTUsIHNjb3BlLnpvb21TcGVlZCk7XHJcbiAgXHR9XHJcblxyXG4gIFx0ZnVuY3Rpb24gcm90YXRlTGVmdChhbmdsZSkge1xyXG4gIFx0XHRzcGhlcmljYWxEZWx0YS50aGV0YSAtPSBhbmdsZTtcclxuICBcdH1cclxuXHJcbiAgXHRmdW5jdGlvbiByb3RhdGVVcChhbmdsZSkge1xyXG4gIFx0XHRzcGhlcmljYWxEZWx0YS5waGkgLT0gYW5nbGU7XHJcbiAgXHR9XHJcblxyXG4gIFx0dmFyIHBhbkxlZnQgPSBmdW5jdGlvbigpIHtcclxuICBcdFx0dmFyIHYgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gIFx0XHRyZXR1cm4gZnVuY3Rpb24gcGFuTGVmdChkaXN0YW5jZSwgb2JqZWN0TWF0cml4KSB7XHJcbiAgXHRcdFx0di5zZXRGcm9tTWF0cml4Q29sdW1uKG9iamVjdE1hdHJpeCwgMCk7IC8vIGdldCBYIGNvbHVtbiBvZiBvYmplY3RNYXRyaXhcclxuICBcdFx0XHR2Lm11bHRpcGx5U2NhbGFyKC0gZGlzdGFuY2UpO1xyXG4gIFx0XHRcdHBhbk9mZnNldC5hZGQodik7XHJcbiAgXHRcdH07XHJcbiAgXHR9KCk7XHJcblxyXG4gIFx0dmFyIHBhblVwID0gZnVuY3Rpb24oKSB7XHJcbiAgXHRcdHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICBcdFx0cmV0dXJuIGZ1bmN0aW9uIHBhblVwKGRpc3RhbmNlLCBvYmplY3RNYXRyaXgpIHtcclxuICBcdFx0XHR2LnNldEZyb21NYXRyaXhDb2x1bW4ob2JqZWN0TWF0cml4LCAxKTsgLy8gZ2V0IFkgY29sdW1uIG9mIG9iamVjdE1hdHJpeFxyXG4gIFx0XHRcdHYubXVsdGlwbHlTY2FsYXIoZGlzdGFuY2UpO1xyXG4gIFx0XHRcdHBhbk9mZnNldC5hZGQodik7XHJcbiAgXHRcdH07XHJcbiAgXHR9KCk7XHJcblxyXG4gIFx0Ly8gZGVsdGFYIGFuZCBkZWx0YVkgYXJlIGluIHBpeGVsczsgcmlnaHQgYW5kIGRvd24gYXJlIHBvc2l0aXZlXHJcbiAgXHRzY29wZS5wYW4gPSBmdW5jdGlvbigpIHtcclxuICBcdFx0dmFyIG9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgXHRcdHJldHVybiBmdW5jdGlvbiBwYW4oZGVsdGFYLCBkZWx0YVkpIHtcclxuICBcdFx0XHR2YXIgZWxlbWVudCA9IHNjb3BlLmRvbUVsZW1lbnQ7XHJcbiAgXHRcdFx0aWYoc2NvcGUub2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpIHtcclxuICBcdFx0XHRcdC8vIHBlcnNwZWN0aXZlXHJcbiAgXHRcdFx0XHR2YXIgcG9zaXRpb24gPSBzY29wZS5vYmplY3QucG9zaXRpb247XHJcbiAgXHRcdFx0XHRvZmZzZXQuY29weShwb3NpdGlvbikuc3ViKHNjb3BlLnRhcmdldCk7XHJcbiAgXHRcdFx0XHR2YXIgdGFyZ2V0RGlzdGFuY2UgPSBvZmZzZXQubGVuZ3RoKCk7XHJcbiAgXHRcdFx0XHQvLyBoYWxmIG9mIHRoZSBmb3YgaXMgY2VudGVyIHRvIHRvcCBvZiBzY3JlZW5cclxuICBcdFx0XHRcdHRhcmdldERpc3RhbmNlICo9IE1hdGgudGFuKChzY29wZS5vYmplY3QuZm92IC8gMikgKiBNYXRoLlBJIC8gMTgwLjApO1xyXG4gIFx0XHRcdFx0Ly8gd2UgYWN0dWFsbHkgZG9uJ3QgdXNlIHNjcmVlbldpZHRoLCBzaW5jZSBwZXJzcGVjdGl2ZSBjYW1lcmEgaXMgZml4ZWQgdG8gc2NyZWVuIGhlaWdodFxyXG4gIFx0XHRcdFx0cGFuTGVmdCgyICogZGVsdGFYICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7XHJcbiAgXHRcdFx0XHRwYW5VcCgyICogZGVsdGFZICogdGFyZ2V0RGlzdGFuY2UgLyBlbGVtZW50LmNsaWVudEhlaWdodCwgc2NvcGUub2JqZWN0Lm1hdHJpeCk7XHJcbiAgXHRcdFx0fSBlbHNlIGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gIFx0XHRcdFx0Ly8gb3J0aG9ncmFwaGljXHJcbiAgXHRcdFx0XHRwYW5MZWZ0KGRlbHRhWCAqKHNjb3BlLm9iamVjdC5yaWdodC1zY29wZS5vYmplY3QubGVmdCkgLyBzY29wZS5vYmplY3Quem9vbSAvIGVsZW1lbnQuY2xpZW50V2lkdGgsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xyXG4gIFx0XHRcdFx0cGFuVXAoZGVsdGFZICooc2NvcGUub2JqZWN0LnRvcC1zY29wZS5vYmplY3QuYm90dG9tKSAvIHNjb3BlLm9iamVjdC56b29tIC8gZWxlbWVudC5jbGllbnRIZWlnaHQsIHNjb3BlLm9iamVjdC5tYXRyaXgpO1xyXG4gIFx0XHRcdH0gZWxzZSB7XHJcbiAgXHRcdFx0XHQvLyBjYW1lcmEgbmVpdGhlciBvcnRob2dyYXBoaWMgbm9yIHBlcnNwZWN0aXZlXHJcbiAgXHRcdFx0XHRjb25zb2xlLndhcm4oJ1dBUk5JTkc6IE9yYml0Q29udHJvbHMuanMgZW5jb3VudGVyZWQgYW4gdW5rbm93biBjYW1lcmEgdHlwZS1wYW4gZGlzYWJsZWQuJyk7XHJcbiAgXHRcdFx0XHRzY29wZS5lbmFibGVQYW4gPSBmYWxzZTtcclxuICBcdFx0XHR9XHJcbiAgXHRcdH07XHJcbiAgXHR9KCk7XHJcblxyXG4gIFx0ZnVuY3Rpb24gZG9sbHlJbihkb2xseVNjYWxlKSB7XHJcbiAgICAgIGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSB7XHJcbiAgXHRcdFx0c2NhbGUgLz0gZG9sbHlTY2FsZTtcclxuICBcdFx0fSBlbHNlIGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gIFx0XHRcdHNjb3BlLm9iamVjdC56b29tID0gTWF0aC5tYXgoc2NvcGUubWluWm9vbSwgTWF0aC5taW4oc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gKiBkb2xseVNjYWxlKSk7XHJcbiAgXHRcdFx0c2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICBcdFx0XHR6b29tQ2hhbmdlZCA9IHRydWU7XHJcbiAgXHRcdH0gZWxzZSB7XHJcbiAgXHRcdFx0Y29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUtZG9sbHkvem9vbSBkaXNhYmxlZC4nKTtcclxuICBcdFx0XHRzY29wZS5lbmFibGVab29tID0gZmFsc2U7XHJcbiAgXHRcdH1cclxuICBcdH1cclxuXHJcbiAgXHRmdW5jdGlvbiBkb2xseU91dChkb2xseVNjYWxlKSB7XHJcbiAgICAgIGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSB7XHJcbiAgXHRcdFx0c2NhbGUgKj0gZG9sbHlTY2FsZTtcclxuICBcdFx0fSBlbHNlIGlmKHNjb3BlLm9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gIFx0XHRcdHNjb3BlLm9iamVjdC56b29tID0gTWF0aC5tYXgoc2NvcGUubWluWm9vbSwgTWF0aC5taW4oc2NvcGUubWF4Wm9vbSwgc2NvcGUub2JqZWN0Lnpvb20gLyBkb2xseVNjYWxlKSk7XHJcbiAgXHRcdFx0c2NvcGUub2JqZWN0LnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICBcdFx0XHR6b29tQ2hhbmdlZCA9IHRydWU7XHJcbiAgXHRcdH0gZWxzZSB7XHJcbiAgXHRcdFx0Y29uc29sZS53YXJuKCdXQVJOSU5HOiBPcmJpdENvbnRyb2xzLmpzIGVuY291bnRlcmVkIGFuIHVua25vd24gY2FtZXJhIHR5cGUtZG9sbHkvem9vbSBkaXNhYmxlZC4nKTtcclxuICBcdFx0XHRzY29wZS5lbmFibGVab29tID0gZmFsc2U7XHJcbiAgXHRcdH1cclxuICBcdH1cclxuXHJcbiAgICAvKiBBY3Rpb25zICovXHJcblxyXG4gICAgZnVuY3Rpb24gcm90YXRlKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgIGlmKHNjb3BlLmVuYWJsZWQgJiYgc2NvcGUuZW5hYmxlUm90YXRlICYmIGRhdGEuc3RhdGU9PT0nbW92ZScpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IHNjb3BlLmRvbUVsZW1lbnQ7XHJcbiAgICAgICAgLy8gcm90YXRpbmcgYWNyb3NzIHdob2xlIHNjcmVlbiBnb2VzIDM2MCBkZWdyZWVzIGFyb3VuZFxyXG4gICAgICAgIHJvdGF0ZUxlZnQoMiAqIE1hdGguUEkgKiBkYXRhLmR4IC8gZWxlbWVudC5jbGllbnRXaWR0aCAqIHNjb3BlLnJvdGF0ZVNwZWVkKTtcclxuICAgICAgICAvLyByb3RhdGluZyB1cCBhbmQgZG93biBhbG9uZyB3aG9sZSBzY3JlZW4gYXR0ZW1wdHMgdG8gZ28gMzYwLCBidXQgbGltaXRlZCB0byAxODBcclxuICAgICAgICByb3RhdGVVcCgyICogTWF0aC5QSSAqIGRhdGEuZHkgLyBlbGVtZW50LmNsaWVudEhlaWdodCAqIHNjb3BlLnJvdGF0ZVNwZWVkKTtcclxuICAgICAgICBzY29wZS51cGRhdGUoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBhbihldmVudCwgZGF0YSkge1xyXG4gICAgICBpZihzY29wZS5lbmFibGVkICYmIHNjb3BlLmVuYWJsZVBhbiAmJiBkYXRhLnN0YXRlPT09J21vdmUnKSB7XHJcbiAgICAgICAgc2NvcGUucGFuKGRhdGEuZHgsIGRhdGEuZHkpO1xyXG4gICAgICAgIHNjb3BlLnVwZGF0ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb2Zmc2V0RG9sbHkoZXZlbnQsIGRhdGEpIHtcclxuICAgICAgaWYoc2NvcGUuZW5hYmxlZCAmJiBzY29wZS5lbmFibGVab29tICYmIGRhdGEuc3RhdGU9PT0nbW92ZScpIHtcclxuICAgICAgICBpZihkYXRhLmR5PjApIHtcclxuICAgICAgICAgIGRvbGx5SW4oZ2V0Wm9vbVNjYWxlKCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZihkYXRhLmR5PDApIHtcclxuICAgICAgICAgIGRvbGx5T3V0KGdldFpvb21TY2FsZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2NvcGUudXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB3aGVlbERvbGx5KGV2ZW50KSB7XHJcbiAgICAgIGlmKHNjb3BlLmVuYWJsZWQgJiYgc2NvcGUuZW5hYmxlWm9vbSkge1xyXG4gICAgICAgIGlmKGV2ZW50LmRlbHRhWT4wKSB7XHJcbiAgICAgICAgICBkb2xseU91dChnZXRab29tU2NhbGUoKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmKGV2ZW50LmRlbHRhWTwwKSB7XHJcbiAgICAgICAgICBkb2xseUluKGdldFpvb21TY2FsZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2NvcGUudXBkYXRlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFjdGlvbnMgPSB7XHJcbiAgICAgIHJvdGF0ZSxcclxuICAgICAgcGFuLFxyXG4gICAgICBvZmZzZXREb2xseSxcclxuICAgICAgd2hlZWxEb2xseVxyXG4gICAgfVxyXG5cclxuICBcdC8vIGZvcmNlIGFuIHVwZGF0ZSBhdCBzdGFydFxyXG4gIFx0dGhpcy51cGRhdGUoKTtcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL09yYml0LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvT3JiaXQuanMiLCJpbXBvcnQgeyR9IGZyb20gJy4uL2xpYnMnO1xyXG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlJztcclxuaW1wb3J0IFBkZiBmcm9tICcuL1BkZic7XHJcbmltcG9ydCBCYXNlTWF0aFV0aWxzIGZyb20gJy4vQmFzZU1hdGhVdGlscyc7XHJcbmltcG9ydCBDdXN0b21FdmVudENvbnZlcnRlciBmcm9tICcuL0N1c3RvbUV2ZW50Q29udmVydGVyJztcclxuaW1wb3J0IFBvbHlUYXJnZXQgZnJvbSAnLi90YXJnZXRzL1BvbHlUYXJnZXQnO1xyXG5cclxuaW1wb3J0IEZpbmRlciBmcm9tICcuL0ZpbmRlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQZGZJbWFnZSBleHRlbmRzIEltYWdlQmFzZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yLCBwZGYsIG4pIHtcclxuICAgIHN1cGVyKGNvbnRleHQsIHdpZHRoLCBoZWlnaHQsIGNvbG9yKTtcclxuXHJcbiAgICB0aGlzLnF1ZXJ5ID0gJyc7XHJcbiAgICB0aGlzLm4gPSBuO1xyXG4gICAgdGhpcy5wZGYgPSBwZGY7XHJcbiAgICB0aGlzLnYgPSB7eDogMCwgeTogMCwgejogMCwgc2V0OiBmdW5jdGlvbih4LHkseikge1xyXG4gICAgICB0aGlzLng9eDsgdGhpcy55PXk7IHRoaXMuej16O1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sIHRyYW5zZm9ybTogZnVuY3Rpb24obSkge1xyXG4gICAgICBjb25zdCB4PW0ubVswXVswXSp0aGlzLngrbS5tWzFdWzBdKnRoaXMueSttLm1bMl1bMF0qdGhpcy56LFxyXG4gICAgICAgICAgICB5PW0ubVswXVsxXSp0aGlzLngrbS5tWzFdWzFdKnRoaXMueSttLm1bMl1bMV0qdGhpcy56LFxyXG4gICAgICAgICAgICB6PW0ubVswXVsyXSp0aGlzLngrbS5tWzBdWzJdKnRoaXMueSttLm1bMl1bMF0qdGhpcy56O1xyXG4gICAgICB0aGlzLng9eDtcclxuICAgICAgdGhpcy55PXk7XHJcbiAgICAgIHRoaXMuej16O1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH19O1xyXG4gICAgdGhpcy5tID0ge206IFtbMSwwLDBdLFswLDEsMF0sWzAsMCwxXV0sIHNldDogZnVuY3Rpb24obTAwLG0wMSxtMDIsbTEwLG0xMSxtMTIsbTIwLG0yMSxtMjIpIHtcclxuICAgICAgdGhpcy5tPVtbbTAwLG0wMSxtMDJdLFttMTAsbTExLG0xMl0sW20yMCxtMjEsbTIyXV07XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfX07XHJcblxyXG4gICAgdGhpcy5zdGFydFJlbmRlciA9ICgpPT4ge1xyXG4gICAgICB0aGlzLnBkZi5nZXRIYW5kbGVyKHRoaXMucmVuZGVyLmJpbmQodGhpcykpO1xyXG4gICAgfTtcclxuICAgIFByb21pc2UucmVzb2x2ZSgpLlxyXG4gICAgICB0aGVuKCgpPT4gdGhpcy5wZGYuZ2V0SGFuZGxlcih0aGlzLmluaXQuYmluZCh0aGlzKSkpO1xyXG4gIH1cclxuXHJcbiAgc2V0UXVlcnkocXVlcnkpIHtcclxuICAgIHRoaXMucXVlcnkgPSBxdWVyeS50cmltKCk7XHJcbiAgICBpZih0aGlzLnRleHRDb250ZW50KSB7XHJcbiAgICAgIHRoaXMuc2V0SGl0cyh0aGlzLnRleHRDb250ZW50KTtcclxuICAgICAgLy8gdGhpcy5maW5pc2hMb2FkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWN0U2l6ZShyKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogclsyXS1yWzBdLFxyXG4gICAgICBoZWlnaHQ6IHJbM10tclsxXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVBvbHkobSwgcCwgcykge1xyXG4gICAgY29uc3QgcG9seSA9IFtdLCB2ID0gdGhpcy52O1xyXG4gICAgdi5zZXQocC54LCBwLnksIDEpLnRyYW5zZm9ybShtKTtcclxuICAgIHBvbHkucHVzaCh7eDogdi54LCB5OiB2Lnl9KTtcclxuICAgIHYuc2V0KHAueCwgcC55K3MuaGVpZ2h0LCAxKS50cmFuc2Zvcm0obSk7XHJcbiAgICBwb2x5LnB1c2goe3g6IHYueCwgeTogdi55fSk7XHJcbiAgICB2LnNldChwLngrcy53aWR0aCwgcC55K3MuaGVpZ2h0LCAxKS50cmFuc2Zvcm0obSk7XHJcbiAgICBwb2x5LnB1c2goe3g6IHYueCwgeTogdi55fSk7XHJcbiAgICB2LnNldChwLngrcy53aWR0aCwgcC55LCAxKS50cmFuc2Zvcm0obSk7XHJcbiAgICBwb2x5LnB1c2goe3g6IHYueCwgeTogdi55fSk7XHJcbiAgICByZXR1cm4gcG9seTtcclxuICB9XHJcblxyXG4gIGdldFNpbXVsYXRlZERvYygpIHtcclxuICAgIHJldHVybiB0aGlzLnBhZ2U7XHJcbiAgfVxyXG5cclxuICBzaW11bGF0ZShlLCBkb2MsIHgsIHkpIHtcclxuICAgIGlmKHRoaXMuZXZlbnRDb252ZXJ0ZXIpIHtcclxuICAgICAgdGhpcy5ldmVudENvbnZlcnRlci5jb252ZXJ0KGUsIHtkb2MsIHgsIHl9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEFubm90YXRpb25zKGFubm9zKSB7XHJcbiAgICBjb25zdCB0ID0gdGhpcy52aWV3cG9ydC50cmFuc2Zvcm0sXHJcbiAgICAgIHRhcmdldHMgPSBbXTtcclxuICAgIHRoaXMubS5zZXQoXHJcbiAgICAgIHRbMF0sdFsxXSwwLFxyXG4gICAgICB0WzJdLHRbM10sMCxcclxuICAgICAgdFs0XSx0WzVdLDEpO1xyXG5cclxuICAgIGZvcihsZXQgYW5ubyBvZiBhbm5vcykge1xyXG4gICAgICBpZiAoYW5uby5zdWJ0eXBlPT09J0xpbmsnKSB7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IGFubm8ucmVjdCxcclxuICAgICAgICAgIGFQb3MgPSB7XHJcbiAgICAgICAgICAgIHg6IHJlY3RbMF0sXHJcbiAgICAgICAgICAgIHk6IHJlY3RbMV1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBhU3ogPSB0aGlzLnJlY3RTaXplKHJlY3QpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBQb2x5VGFyZ2V0KHRoaXMuY3JlYXRlUG9seSh0aGlzLm0sIGFQb3MsIGFTeikubWFwKChwKT0+ICh7eDogcC54L3RoaXMudmlld3BvcnQud2lkdGgsIHk6IDEtcC55L3RoaXMudmlld3BvcnQuaGVpZ2h0fSkpKTtcclxuICAgICAgICB0YXJnZXQuYW5ubyA9IGFubm87XHJcbiAgICAgICAgdGFyZ2V0LmNhbGxiYWNrID0gdGhpcy5hbm5vQ2xiLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGFyZ2V0cy5wdXNoKHRhcmdldCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKHRhcmdldHMubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRDb252ZXJ0ZXIgPSBuZXcgQ3VzdG9tRXZlbnRDb252ZXJ0ZXIodGhpcy53bmQsIHRoaXMuZG9jLCBQb2x5VGFyZ2V0LnRlc3QsIHRoaXMucGFnZSk7XHJcbiAgICAgIGZvcihsZXQgdGFyZ2V0IG9mIHRhcmdldHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50Q29udmVydGVyLmFkZEN1c3RvbSh0YXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRIaXRzKHRleHRDb250ZW50KSB7XHJcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdGV4dENvbnRlbnQ7XHJcbiAgICBpZih0aGlzLnF1ZXJ5IT09JycpIHtcclxuICAgICAgdGhpcy5maW5kZXIgPSBuZXcgRmluZGVyKHRleHRDb250ZW50Lml0ZW1zLm1hcCgoaXRlbSk9PiBpdGVtLnN0ciksIHRoaXMucXVlcnksIHtjb250ZXh0czogZmFsc2V9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlckhpdHMoKSB7XHJcbiAgICBpZih0aGlzLmZpbmRlcikge1xyXG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5wYWdlLnZpZXcsXHJcbiAgICAgICAgdGVzdFN6ID0gJCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdmlzaWJpbGl0eTogaGlkZGVuO1wiPjwvZGl2PicpLmFwcGVuZFRvKCdib2R5JyksIHRleHREaXYgPSB0ZXN0U3pbMF0sXHJcbiAgICAgICAgYmFzZU9mZnNldCA9IHRlc3RTei5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICBmb3IobGV0IGhpdCBvZiB0aGlzLmZpbmRlci5nZXRIaXRzKCkpIHtcclxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnRleHRDb250ZW50Lml0ZW1zW2hpdC5pbmRleF0sXHJcbiAgICAgICAgICAgICAgICB0ID0gUERGSlMuVXRpbC50cmFuc2Zvcm0odGhpcy52aWV3cG9ydC50cmFuc2Zvcm0sIGl0ZW0udHJhbnNmb3JtKSxcclxuICAgICAgICAgICAgICAgIHN0eWxlID0gdGhpcy50ZXh0Q29udGVudC5zdHlsZXNbaXRlbS5mb250TmFtZV0sXHJcbiAgICAgICAgICAgICAgICBhbmdsZSA9IE1hdGguYXRhbjIodFsxXSwgdFswXSkrKHN0eWxlLnZlcnRpY2FsPyBNYXRoLlBJIC8gMjogMCksXHJcbiAgICAgICAgICAgICAgICBmb250SGVpZ2h0ID0gTWF0aC5zcXJ0KCh0WzJdICogdFsyXSkgKyAodFszXSAqIHRbM10pKSxcclxuICAgICAgICAgICAgICAgIGZvbnRBc2NlbnQgPSBzdHlsZS5hc2NlbnQ/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmFzY2VudCAqIGZvbnRIZWlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdHlsZS5kZXNjZW50PyAoMSArIHN0eWxlLmRlc2NlbnQpICogZm9udEhlaWdodDogZm9udEhlaWdodCk7XHJcbiAgICAgICAgICB0ZXN0U3ouaHRtbChpdGVtLnN0ci5zdWJzdHIoMCwgaGl0Lm9mZnNldCkrJzxzcGFuPicraXRlbS5zdHIuc3Vic3RyKGhpdC5vZmZzZXQsIGhpdC5sZW5ndGgpKyc8L3NwYW4+JytpdGVtLnN0ci5zdWJzdHIoaGl0Lm9mZnNldCtoaXQubGVuZ3RoKSk7XHJcblxyXG4gICAgICAgICAgdGV4dERpdi5zdHlsZS5mb250U2l6ZSA9IGZvbnRIZWlnaHQrJ3B4JztcclxuICAgICAgICAgIHRleHREaXYuc3R5bGUuZm9udEZhbWlseSA9IHN0eWxlLmZvbnRGYW1pbHk7XHJcblxyXG4gICAgICAgICAgY29uc3QgdGVzdFNwYW4gPSB0ZXN0U3ouZmluZCgnc3BhbicpLFxyXG4gICAgICAgICAgICAgIGl3aWR0aCA9IHN0eWxlLnZlcnRpY2FsPyBpdGVtLmhlaWdodCp0aGlzLnZpZXdwb3J0LnNjYWxlOiBpdGVtLndpZHRoKnRoaXMudmlld3BvcnQuc2NhbGUsXHJcbiAgICAgICAgICAgICAgd2lkdGggPSB0ZXN0U3oud2lkdGgoKSxcclxuICAgICAgICAgICAgICByZWxhdGl2ZU9mZnNldCA9ICh0ZXN0U3Bhbi5vZmZzZXQoKS5sZWZ0LWJhc2VPZmZzZXQpL3dpZHRoO1xyXG4gICAgICAgICAgdGhpcy5tLnNldChcclxuICAgICAgICAgICAgMSwwLDAsXHJcbiAgICAgICAgICAgIDAsMSwwLFxyXG4gICAgICAgICAgICB0WzRdK2ZvbnRBc2NlbnQqTWF0aC5zaW4oYW5nbGUpLHRbNV0tZm9udEFzY2VudCpNYXRoLmNvcyhhbmdsZSksMSk7XHJcbiAgICAgICAgICBsZXQgcG9seSA9IHRoaXMuY3JlYXRlUG9seSh0aGlzLm0sIHt4OiByZWxhdGl2ZU9mZnNldCppd2lkdGgsIHk6IDB9LCB7d2lkdGg6IGl3aWR0aCp0ZXN0U3Bhbi53aWR0aCgpL3dpZHRoLCBoZWlnaHQ6IHRlc3RTcGFuLmhlaWdodCgpfSk7XHJcbiAgICAgICAgICBwb2x5ID0gcG9seS5tYXAoKHApPT4gKHt4OiBwLngvdGhpcy52aWV3cG9ydC53aWR0aCwgeTogMS1wLnkvdGhpcy52aWV3cG9ydC5oZWlnaHR9KSk7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlckhpdChwb2x5KTtcclxuICAgICAgfVxyXG4gICAgICB0ZXN0U3oucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhbm5vQ2xiKGUsIGRhdGEpIHtcclxuICAgIGlmKHRoaXMuY29udGV4dC5kaXNwYXRjaEV2ZW50KSB7XHJcbiAgICAgIHRoaXMuY29udGV4dC5kaXNwYXRjaEV2ZW50KHtcclxuICAgICAgICB0eXBlOiAncGRmQW5ub3RhdGlvbicsXHJcbiAgICAgICAgZXZlbnQ6IGUsXHJcbiAgICAgICAgYW5ub3RhdGlvbjogZGF0YS50YXJnZXQuYW5ub1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNhbGNWaWV3cG9ydCgpIHtcclxuICAgIGNvbnN0IHNjYWxlID0gQmFzZU1hdGhVdGlscy5jYWxjU2NhbGUodGhpcy5zaXplLndpZHRoLCB0aGlzLnNpemUuaGVpZ2h0LCB0aGlzLnJlc1csIHRoaXMucmVzSCk7XHJcbiAgICBpZighdGhpcy52aWV3cG9ydCB8fCBNYXRoLmFicyh0aGlzLnZpZXdwb3J0LnNjYWxlLXNjYWxlKT4xZS00KSB7XHJcbiAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLnBhZ2UuZ2V0Vmlld3BvcnQoc2NhbGUpO1xyXG4gICAgICBpZih0aGlzLnR5cGUhPT0nZnVsbCcpIHtcclxuICAgICAgICBpZih0aGlzLnR5cGU9PT0ncmlnaHQnKSB7XHJcbiAgICAgICAgICB0aGlzLnZpZXdwb3J0Lm9mZnNldFggKz0gMC41KnRoaXMudmlld3BvcnQud2lkdGg7XHJcbiAgICAgICAgICB0aGlzLnZpZXdwb3J0LnRyYW5zZm9ybVs0XSAtPSAwLjUqdGhpcy52aWV3cG9ydC53aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52aWV3cG9ydC53aWR0aCAvPSAyO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVzVyA9IHRoaXMud2lkdGggPSB0aGlzLnZpZXdwb3J0LndpZHRoO1xyXG4gICAgICB0aGlzLnJlc0ggPSB0aGlzLmhlaWdodCA9IHRoaXMudmlld3BvcnQuaGVpZ2h0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMudHlwZSA9IHRoaXMucGRmLmdldFBhZ2VUeXBlKHRoaXMubik7XHJcbiAgICB0aGlzLnBkZi5nZXRQYWdlKHRoaXMubikuXHJcbiAgICAgIHRoZW4oKHBhZ2UpPT4ge1xyXG4gICAgICAgIHRoaXMucGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgdGhpcy5zaXplID0gUGRmLmdldFBhZ2VTaXplKHBhZ2UpO1xyXG4gICAgICAgIGlmKHRoaXMudHlwZSE9PSdmdWxsJykge1xyXG4gICAgICAgICAgdGhpcy5zaXplLndpZHRoIC89IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhZ2UuZ2V0QW5ub3RhdGlvbnMoKS5cclxuICAgICAgICAgIHRoZW4odGhpcy5zZXRBbm5vdGF0aW9ucy5iaW5kKHRoaXMpKTtcclxuICAgICAgICBwYWdlLmdldFRleHRDb250ZW50KCkuXHJcbiAgICAgICAgICB0aGVuKHRoaXMuc2V0SGl0cy5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmNhbGNWaWV3cG9ydCgpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgICB9KS5cclxuICAgICAgY2F0Y2goKGUpPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBsb2FkIFBERiBwYWdlOiAnKyh0aGlzLm4rMSkpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFJlc29sdXRpb24ocmVzKSB7XHJcbiAgICBzdXBlci5zZXRSZXNvbHV0aW9uKHJlcyk7XHJcbiAgICBpZih0aGlzLnBhZ2UpIHtcclxuICAgICAgdGhpcy5jYWxjVmlld3BvcnQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcihoYW5kbGVyKSB7XHJcbiAgICBpZih0aGlzLnBhZ2UpIHtcclxuICAgICAgdGhpcy5wYWdlLnJlbmRlcih7XHJcbiAgICAgICAgY2FudmFzQ29udGV4dDogdGhpcy5wdXNoQ3R4KCksXHJcbiAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnRcclxuICAgICAgfSkuXHJcbiAgICAgIHRoZW4oKCk9PiB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJIaXRzKCk7XHJcbiAgICAgICAgdGhpcy5wb3BDdHgoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmRlckJsYW5rUGFnZSgpO1xyXG4gICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvUGRmSW1hZ2UuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9QZGZJbWFnZS5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2gge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHBhZ2VzKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMucGFnZXMgPSBwYWdlcztcclxuICAgIHRoaXMucHJldlJlc3VsdHMgPSBbXTtcclxuICAgIGNvbnRhaW5lci5odG1sKGBcclxuICAgICAgPGRpdiBjbGFzcz1cInNlYXJjaFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJxdWVyeVwiPlxyXG4gICAgICAgICAgPGlucHV0IGNsYXNzPVwiaW5wUXVlcnlcIiB0eXBlPVwidGV4dFwiIG1heGxlbmd0aD1cIjMwXCIgdmFsdWU9XCJcIiAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHRzXCI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXR1c1wiPlxyXG5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgKTtcclxuICAgIHRoaXMucXVlcnkgPSBjb250YWluZXIuZmluZCgnLnF1ZXJ5IGlucHV0Jyk7XHJcbiAgICB0aGlzLnJlc3VsdHMgPSBjb250YWluZXIuZmluZCgnLnJlc3VsdHMnKTtcclxuICAgIHRoaXMuc3RhdHVzID0gY29udGFpbmVyLmZpbmQoJy5zdGF0dXMnKTtcclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBuYXZpZ2F0ZTogdGhpcy5uYXZpZ2F0ZS5iaW5kKHRoaXMpLFxyXG4gICAgICBkb1F1ZXJ5OiB0aGlzLmRvUXVlcnkuYmluZCh0aGlzKVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnF1ZXJ5Lm9uKCdrZXlkb3duJywgdGhpcy5iaW5kcy5kb1F1ZXJ5KTtcclxuICAgIHRoaXMucmVzdWx0cy5vbignY2xpY2snLCB0aGlzLmJpbmRzLm5hdmlnYXRlKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICB0aGlzLnJlc3VsdHMub2ZmKCdjbGljaycsIHRoaXMuYmluZHMubmF2aWdhdGUpO1xyXG4gICAgdGhpcy5xdWVyeS5vZmYoJ2tleWRvd24nLCB0aGlzLmJpbmRzLmRvUXVlcnkpO1xyXG4gIH1cclxuXHJcbiAgbmF2aWdhdGUoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYodGhpcy5vbk5hdmlnYXRlIT09dW5kZWZpbmVkKSB7XHJcbiAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgaWYoIXRhcmdldC5oYXNDbGFzcygncmVzdWx0JykpIHtcclxuICAgICAgICBjb25zdCB0ID0gdGFyZ2V0LmZpbmQoJy5yZXN1bHQnKTtcclxuICAgICAgICBpZih0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgdGFyZ2V0ID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB3aGlsZSh0YXJnZXQubGVuZ3RoICYmICF0YXJnZXQuaGFzQ2xhc3MoJ3Jlc3VsdCcpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9ICQodGFyZ2V0WzBdLnBhcmVudE5vZGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zdCBwYWdlID0gdGFyZ2V0LmF0dHIoJ2RhdGEnKTtcclxuICAgICAgaWYocGFnZSE9PXVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZShwYXJzZUludChwYWdlKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRvUXVlcnkoKSB7XHJcbiAgICBpZih0aGlzLm9uUXVlcnkpIHtcclxuICAgICAgY29uc3QgcXVlcnlTdGFtcCA9IHRoaXMucXVlcnlTdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCk9PiB7XHJcbiAgICAgICAgaWYocXVlcnlTdGFtcCA9PT0gdGhpcy5xdWVyeVN0YW1wKSB7XHJcbiAgICAgICAgICB0aGlzLm9uUXVlcnkodGhpcy5xdWVyeVswXS52YWx1ZS50cmltKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRSZXN1bHRzKHJlc3VsdHMsIGxhc3RQYWdlKSB7XHJcbiAgICBpZih0aGlzLnByZXZSZXN1bHRzLmxlbmd0aCAmJiByZXN1bHRzWzBdIT09dGhpcy5wcmV2UmVzdWx0c1swXSkge1xyXG4gICAgICB0aGlzLnByZXZSZXN1bHRzID0gW107XHJcbiAgICAgIHRoaXMucmVzdWx0cy5odG1sKCcnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGh0bWxzID0gW107XHJcbiAgICBmb3IobGV0IGk9dGhpcy5wcmV2UmVzdWx0cy5sZW5ndGg7IGk8cmVzdWx0cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSByZXN1bHRzW2ldO1xyXG4gICAgICBodG1scy5wdXNoKCc8ZGl2IGNsYXNzPVwicmVzdWx0XCIgZGF0YT1cIicrcmVzdWx0LnBhZ2UrJ1wiPicpO1xyXG4gICAgICAgIGh0bWxzLnB1c2goJzxhIGhyZWY9XCIjXCI+Jyk7XHJcbiAgICAgICAgICBodG1scy5wdXNoKCc8ZGl2PicrcmVzdWx0LmNvbnRleHRzLmpvaW4oJzwvZGl2PjxkaXY+JykrJzwvZGl2PicpO1xyXG4gICAgICAgIGh0bWxzLnB1c2goJzwvYT4nKTtcclxuICAgICAgaHRtbHMucHVzaCgnPC9kaXY+Jyk7XHJcbiAgICB9XHJcbiAgICAkKGh0bWxzLmpvaW4oJycpKS5hcHBlbmRUbyh0aGlzLnJlc3VsdHMpO1xyXG4gICAgdGhpcy5wcmV2UmVzdWx0cyA9IFsuLi5yZXN1bHRzXTtcclxuICAgIGlmKGxhc3RQYWdlPT09dW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc3RhdHVzLmh0bWwoJycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuc3RhdHVzLmh0bWwobGFzdFBhZ2UrJyBvZiAnK3RoaXMucGFnZXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvU2VhcmNoLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvU2VhcmNoLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEltYWdlQmFzZSBmcm9tICcuL0ltYWdlQmFzZSc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXRpY0ltYWdlIGV4dGVuZHMgSW1hZ2VCYXNlIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29sb3IsIHNyYykge1xyXG4gICAgc3VwZXIoY29udGV4dCwgd2lkdGgsIGhlaWdodCwgY29sb3IpO1xyXG5cclxuICAgIHRoaXMuYmluZHMgPSB7fVxyXG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgdGhpcy5pbWFnZS5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnO1xyXG4gICAgdGhpcy5iaW5kcy5pbWFnZUxvYWQgPSAoKT0+IHtcclxuICAgICAgdGhpcy53aWR0aCA9IHRoaXMuaW1hZ2Uud2lkdGg7XHJcbiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5pbWFnZS5oZWlnaHQ7XHJcbiAgICAgIHRoaXMuc3RhcnRSZW5kZXIgPSAoKT0+IHtcclxuICAgICAgICB0aGlzLnJlbmRlckltYWdlKHRoaXMuaW1hZ2UpO1xyXG4gICAgICAgIHRoaXMuZmluaXNoUmVuZGVyKCk7XHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMuZmluaXNoTG9hZCgpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYmluZHMuaW1hZ2VFcnJvciA9ICgpPT4ge1xyXG4gICAgICB0aGlzLnN0YXJ0UmVuZGVyID0gKCk9PiB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJOb3RGb3VuZFBhZ2UoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaFJlbmRlcigpO1xyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLmZpbmlzaExvYWQoKTtcclxuICAgIH07XHJcbiAgICAkKHRoaXMuaW1hZ2UpLm9uKCdsb2FkJywgdGhpcy5iaW5kcy5pbWFnZUxvYWQpLm9uKCdlcnJvcicsIHRoaXMuYmluZHMuaW1hZ2VFcnJvcik7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9IFV0aWxzLm5vcm1hbGl6ZVVybChzcmMpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgICQodGhpcy5pbWFnZSkub2ZmKCdsb2FkJywgdGhpcy5iaW5kcy5pbWFnZUxvYWQpLm9mZignZXJyb3InLCB0aGlzLmJpbmRzLmltYWdlRXJyb3IpO1xyXG4gICAgdGhpcy5pbWFnZS5zcmMgPSAnJztcclxuICAgIGRlbGV0ZSB0aGlzLmltYWdlO1xyXG4gICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvU3RhdGljSW1hZ2UuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9TdGF0aWNJbWFnZS5qcyIsImltcG9ydCB7VEhSRUV9IGZyb20gJy4uL2xpYnMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0dXJlQW5pbWF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGltZywgdGlsZXNIb3JpeiwgdGlsZXNWZXJ0LCBudW1UaWxlcywgdGlsZURpc3BEdXJhdGlvbikge1xyXG5cclxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVEhSRUUuVGV4dHVyZSgpO1xyXG4gICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5MaW5lYXJGaWx0ZXI7XHJcbiAgICB0ZXh0dXJlLmltYWdlID0gaW1nO1xyXG4gICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gIFx0Ly8gbm90ZTogdGV4dHVyZSBwYXNzZWQgYnkgcmVmZXJlbmNlLCB3aWxsIGJlIHVwZGF0ZWQgYnkgdGhlIHVwZGF0ZSBmdW5jdGlvbi5cclxuICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgXHR0aGlzLnRpbGVzSG9yaXpvbnRhbCA9IHRpbGVzSG9yaXo7XHJcbiAgXHR0aGlzLnRpbGVzVmVydGljYWwgPSB0aWxlc1ZlcnQ7XHJcbiAgXHQvLyBob3cgbWFueSBpbWFnZXMgZG9lcyB0aGlzIHNwcml0ZXNoZWV0IGNvbnRhaW4/XHJcbiAgXHQvLyAgdXN1YWxseSBlcXVhbHMgdGlsZXNIb3JpeiAqIHRpbGVzVmVydCwgYnV0IG5vdCBuZWNlc3NhcmlseSxcclxuICBcdC8vICBpZiB0aGVyZSBhdCBibGFuayB0aWxlcyBhdCB0aGUgYm90dG9tIG9mIHRoZSBzcHJpdGVzaGVldC5cclxuICBcdHRoaXMubnVtYmVyT2ZUaWxlcyA9IG51bVRpbGVzO1xyXG4gIFx0dGV4dHVyZS5yZXBlYXQuc2V0KDEvdGhpcy50aWxlc0hvcml6b250YWwsIDEvdGhpcy50aWxlc1ZlcnRpY2FsKTtcclxuXHJcbiAgXHQvLyBob3cgbG9uZyBzaG91bGQgZWFjaCBpbWFnZSBiZSBkaXNwbGF5ZWQ/XHJcbiAgXHR0aGlzLnRpbGVEaXNwbGF5RHVyYXRpb24gPSB0aWxlRGlzcER1cmF0aW9uO1xyXG5cclxuICBcdC8vIGhvdyBsb25nIGhhcyB0aGUgY3VycmVudCBpbWFnZSBiZWVuIGRpc3BsYXllZD9cclxuICBcdHRoaXMuY3VycmVudERpc3BsYXlUaW1lID0gMDtcclxuXHJcbiAgXHQvLyB3aGljaCBpbWFnZSBpcyBjdXJyZW50bHkgYmVpbmcgZGlzcGxheWVkP1xyXG4gIFx0dGhpcy5jdXJyZW50VGlsZSA9IDA7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUobWlsbGlTZWMpIHtcclxuICAgIHRoaXMuY3VycmVudERpc3BsYXlUaW1lICs9IG1pbGxpU2VjO1xyXG4gICAgd2hpbGUodGhpcy5jdXJyZW50RGlzcGxheVRpbWUgPiB0aGlzLnRpbGVEaXNwbGF5RHVyYXRpb24pIHtcclxuICAgICAgdGhpcy5jdXJyZW50RGlzcGxheVRpbWUgLT0gdGhpcy50aWxlRGlzcGxheUR1cmF0aW9uO1xyXG4gICAgICArK3RoaXMuY3VycmVudFRpbGU7XHJcbiAgICAgIGlmKHRoaXMuY3VycmVudFRpbGUgPT0gdGhpcy5udW1iZXJPZlRpbGVzKVxyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbGUgPSAwO1xyXG4gICAgICB2YXIgY3VycmVudENvbHVtbiA9IHRoaXMuY3VycmVudFRpbGUldGhpcy50aWxlc0hvcml6b250YWw7XHJcbiAgICAgIHRoaXMudGV4dHVyZS5vZmZzZXQueCA9IGN1cnJlbnRDb2x1bW4vdGhpcy50aWxlc0hvcml6b250YWw7XHJcbiAgICAgIHZhciBjdXJyZW50Um93ID0gTWF0aC5mbG9vcih0aGlzLmN1cnJlbnRUaWxlL3RoaXMudGlsZXNIb3Jpem9udGFsKTtcclxuICAgICAgdGhpcy50ZXh0dXJlLm9mZnNldC55ID0gY3VycmVudFJvdy90aGlzLnRpbGVzVmVydGljYWw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgY29uc3QgaW1nID0gdGhpcy50ZXh0dXJlLmltYWdlO1xyXG4gICAgaW1nLmhlaWdodCA9IGltZy53aWR0aCA9IDA7XHJcbiAgICB0aGlzLnRleHR1cmUuZGlzcG9zZSgpO1xyXG4gIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9UZXh0dXJlQW5pbWF0b3IuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9UZXh0dXJlQW5pbWF0b3IuanMiLCJpbXBvcnQge1RIUkVFLCAkfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQgTW91c2VFdmVudENvbnZlcnRlciBmcm9tICcuL01vdXNlRXZlbnRDb252ZXJ0ZXInO1xyXG5pbXBvcnQgVGhyZWVFdmVudENvbnZlcnRlciBmcm9tICcuL1RocmVlRXZlbnRDb252ZXJ0ZXInO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRocmVlTW91c2VFdmVudENvbnZlcnRlciBleHRlbmRzIE1vdXNlRXZlbnRDb252ZXJ0ZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYywgdmlzdWFsV29ybGQsIHRlc3QpIHtcclxuICAgIHN1cGVyKHduZCwgZG9jLCB2aXN1YWxXb3JsZC5lbGVtZW50KTtcclxuICAgIFV0aWxzLmV4dGVuZHModGhpcywgbmV3IFRocmVlRXZlbnRDb252ZXJ0ZXIodmlzdWFsV29ybGQsIHRlc3QpKTtcclxuICB9XHJcblxyXG4gIGdldENhbGxiYWNrKG9iamVjdCkge1xyXG4gICAgcmV0dXJuIG9iamVjdC5vYmplY3QudXNlckRhdGEubW91c2VDYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHNldENvb3Jkc0Zyb21FdmVudChlKSB7XHJcbiAgICBjb25zdCBqRWxlbWVudCA9ICQodGhpcy5lbGVtZW50KTtcclxuICAgIGNvbnN0IG9mZnNldCA9IGpFbGVtZW50Lm9mZnNldCgpO1xyXG4gICAgdGhpcy5jb29yZHMueCA9ICgoZS5wYWdlWC1vZmZzZXQubGVmdCkvakVsZW1lbnQud2lkdGgoKSkqMi0xO1xyXG4gICAgdGhpcy5jb29yZHMueSA9IC0oKGUucGFnZVktb2Zmc2V0LnRvcCkvakVsZW1lbnQuaGVpZ2h0KCkpKjIrMTtcclxuICAgIHJldHVybiB0aGlzLmNvb3JkcztcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVGhyZWVNb3VzZUV2ZW50Q29udmVydGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGhyZWVNb3VzZUV2ZW50Q29udmVydGVyLmpzIiwiaW1wb3J0IHtUSFJFRSwgJH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzJztcclxuaW1wb3J0IFRvdWNoRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9Ub3VjaEV2ZW50Q29udmVydGVyJztcclxuaW1wb3J0IFRocmVlRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9UaHJlZUV2ZW50Q29udmVydGVyJztcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIgZXh0ZW5kcyBUb3VjaEV2ZW50Q29udmVydGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iod25kLCBkb2MsIHZpc3VhbFdvcmxkLCB0ZXN0KSB7XHJcbiAgICBzdXBlcih3bmQsIGRvYywgdmlzdWFsV29ybGQuZWxlbWVudCk7XHJcbiAgICBVdGlscy5leHRlbmRzKHRoaXMsIG5ldyBUaHJlZUV2ZW50Q29udmVydGVyKHZpc3VhbFdvcmxkLCB0ZXN0KSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYWxsYmFjayhvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3Qub2JqZWN0LnVzZXJEYXRhLnRvdWNoQ2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRDb29yZHNGcm9tRXZlbnQoZSkge1xyXG4gICAgY29uc3QgakVsZW1lbnQgPSAkKHRoaXMuZWxlbWVudCksIG9mZnNldCA9IGpFbGVtZW50Lm9mZnNldCgpLFxyXG4gICAgICB0b3VjaGVzID0gZS50b3VjaGVzIHx8IGUub3JpZ2luYWxFdmVudC50b3VjaGVzLCB0b3VjaCA9IHRvdWNoZXMubGVuZ3RoPyB0b3VjaGVzWzBdOiAodGhpcy5sYXN0VG91Y2hlcyB8fCBbe3BhZ2VYOiAwLCBwYWdlWTogMH1dKVswXSxcclxuICAgICAgcGFnZVggPSB0b3VjaC5wYWdlWCwgcGFnZVkgPSB0b3VjaC5wYWdlWTtcclxuICAgIHRoaXMubGFzdFRvdWNoZXMgPSB0b3VjaGVzLmxlbmd0aD8gdG91Y2hlczogdGhpcy5sYXN0VG91Y2hlcztcclxuICAgIHRoaXMuY29vcmRzLnggPSAoKHBhZ2VYLW9mZnNldC5sZWZ0KS9qRWxlbWVudC53aWR0aCgpKSoyLTE7XHJcbiAgICB0aGlzLmNvb3Jkcy55ID0gLSgocGFnZVktb2Zmc2V0LnRvcCkvakVsZW1lbnQuaGVpZ2h0KCkpKjIrMTtcclxuICAgIHJldHVybiB0aGlzLmNvb3JkcztcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyLmpzIiwiaW1wb3J0IHskfSBmcm9tICcuLi9saWJzJztcclxuaW1wb3J0IEltYWdlRmFjdG9yeSBmcm9tICcuL0ltYWdlRmFjdG9yeSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaHVtYm5haWxzIHtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dCwgY29udGFpbmVyLCB0aHVtYm5haWxzQ2xiLCBzaXplLCBwcm9wcz17a1d0b0g6IDIxMC8yOTd9KSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMucCA9IHByb3BzO1xyXG4gICAgdGhpcy50aHVtYm5haWxzQ2xiID0gdGh1bWJuYWlsc0NsYjtcclxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICB0aGlzLmNhbnZhcyA9ICQoJzxjYW52YXM+JylbMF07XHJcbiAgICB0aGlzLmltYWdlRmFjdG9yeSA9IG5ldyBJbWFnZUZhY3Rvcnkoe1xyXG4gICAgICAuLi5jb250ZXh0LFxyXG4gICAgICByZW5kZXJDYW52YXM6IHRoaXMuY2FudmFzLFxyXG4gICAgICByZW5kZXJDYW52YXNDdHg6IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJylcclxuICAgIH0pO1xyXG4gICAgdGhpcy50aHVtYm5haWxzID0gW107XHJcbiAgICBmb3IobGV0IGk9MDsgaTxzaXplOyArK2kpIHtcclxuICAgICAgY29uc3QgaW5mbyA9IHRoaXMudGh1bWJuYWlsc0NsYihpKTtcclxuICAgICAgdGhpcy50aHVtYm5haWxzLnB1c2goe1xyXG4gICAgICAgIC4uLmluZm8sXHJcbiAgICAgICAgaW5kZXg6IGksXHJcbiAgICAgICAgbG9hZGVkOiBpbmZvLnR5cGU9PT0ndGh1bWJuYWlsLWltYWdlJyxcclxuICAgICAgICBoZWFkaW5nOiBudWxsLFxyXG4gICAgICAgIHRodW1ibmFpbDogbnVsbCxcclxuICAgICAgICB0aXRsZTogaW5mby50aXRsZSB8fCBpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIHVwZGF0ZTogdGhpcy51cGRhdGUuYmluZCh0aGlzKSxcclxuICAgICAgbmF2aWdhdGU6IChlKT0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYodGhpcy5vbk5hdmlnYXRlKSB7XHJcbiAgICAgICAgICBsZXQgbm9kZSA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgd2hpbGUobm9kZSAmJiAhbm9kZS5kYXRhVGh1bWJuYWlsKSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLm9uTmF2aWdhdGUobm9kZS5kYXRhVGh1bWJuYWlsLmluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmNvbnRhaW5lci5vbignc2Nyb2xsJywgdGhpcy5iaW5kcy51cGRhdGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2l6ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLnNpemU7XHJcbiAgfVxyXG5cclxuICBzZXRFbmFibGUoZW5hYmxlKSB7XHJcbiAgICB0aGlzLmVuYWJsZSA9IGVuYWJsZTtcclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5jb250YWluZXIuZmluZCgnYScpLm9mZignY2xpY2snLCB0aGlzLmJpbmRzLm5hdmlnYXRlKTtcclxuICAgIHRoaXMuY29udGFpbmVyLm9mZignc2Nyb2xsJywgdGhpcy5iaW5kcy51cGRhdGUpO1xyXG4gICAgdGhpcy5jb250YWluZXIuaHRtbCgnJyk7XHJcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy53aWR0aCA9IDA7XHJcbiAgICBkZWxldGUgdGhpcy5jYW52YXM7XHJcbiAgfVxyXG5cclxuICBsb2FkKHRodW1ibmFpbCkge1xyXG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSB0aGlzLmltYWdlRmFjdG9yeS5idWlsZCh0aHVtYm5haWwsIHRodW1ibmFpbC5udW1iZXI9PT11bmRlZmluZWQ/IHRodW1ibmFpbC5pbmRleDogdGh1bWJuYWlsLm51bWJlciwgdGhpcy5wLmtXdG9IKjMwMCwgMzAwKTtcclxuICAgIHdyYXBwZXIub25DaGFuZ2UgPSAoY2FudmFzKT0+IHtcclxuICAgICAgdGhpcy5zZXRJbWFnZSh0aHVtYm5haWwsIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKTtcclxuICAgICAgdGh1bWJuYWlsLmxvYWRlZCA9IHRydWU7XHJcbiAgICAgIHdyYXBwZXIuZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKT0+IHRoaXMudXBkYXRlKCkpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldEFjdGl2ZSgpIHtcclxuICAgIGNvbnN0IGZpcnN0ID0gdGhpcy5jb250YWluZXIuc2Nyb2xsVG9wKCksIGxhc3QgPSBmaXJzdCArIHRoaXMuY29udGFpbmVyLmhlaWdodCgpLCByZXMgPSBbXTtcclxuICAgIGZvcihsZXQgdGh1bWJuYWlsIG9mIHRoaXMudGh1bWJuYWlscykge1xyXG4gICAgICBpZihNYXRoLm1heCh0aHVtYm5haWwuZmlyc3QsIGZpcnN0KTxNYXRoLm1pbih0aHVtYm5haWwubGFzdCwgbGFzdCkpIHtcclxuICAgICAgICByZXMucHVzaCh0aHVtYm5haWwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgaWYoIXRoaXMubG9hZGluZyAmJiB0aGlzLmNhbnZhcyAmJiB0aGlzLmVuYWJsZSkge1xyXG4gICAgICBpZighdGhpcy5idWlsdCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmUoKTtcclxuICAgICAgZm9yKGxldCB0aHVtYm5haWwgb2YgYWN0aXZlKSB7XHJcbiAgICAgICAgaWYoIXRodW1ibmFpbC5sb2FkZWQpIHtcclxuICAgICAgICAgIHRoaXMubG9hZCh0aHVtYm5haWwpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRJbWFnZSh0aHVtYm5haWwsIGltZykge1xyXG4gICAgdGh1bWJuYWlsLmltZyA9IGltZztcclxuICAgIHRodW1ibmFpbC50aHVtYm5haWwuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgWyd1cmwoXFwnJywgaW1nLCdcXCcpJ10uam9pbignJykpO1xyXG4gICAgdGh1bWJuYWlsLnRodW1ibmFpbC5yZW1vdmVDbGFzcygnbG9hZGluZycpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgZWxlbWVudHMgPSBbJzxkaXYgY2xhc3M9XCJ0aHVtYm5haWxzXCI+J11cclxuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuc2l6ZTsgKytpKSB7XHJcbiAgICAgIGVsZW1lbnRzLnB1c2goWyc8ZGl2IGNsYXNzPVwiaXRlbVwiPjxhIGhyZWY9XCIjXCI+PGRpdiBjbGFzcz1cInRodW1ibmFpbCBsb2FkaW5nXCI+PC9kaXY+PC9hPjxkaXYgY2xhc3M9XCJoZWFkaW5nXCI+PGEgaHJlZj1cIiNcIiB0aXRsZT1cIicsIGkrMSwnXCI+JywgaSsxLCAnPC9hPjwvZGl2PjwvZGl2PiddLmpvaW4oJycpKTtcclxuICAgIH1cclxuICAgIGVsZW1lbnRzLnB1c2goJzwvZGl2PicpO1xyXG4gICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGVsZW1lbnRzLmpvaW4oJycpKTtcclxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5jb250YWluZXIuZmluZCgnLml0ZW0nKSwgYmFzZSA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy50aHVtYm5haWxzJykub2Zmc2V0KCkudG9wO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8aXRlbXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY29uc3QgaXRlbSA9ICQoaXRlbXNbaV0pO1xyXG4gICAgICB0aGlzLnRodW1ibmFpbHNbaV0uaGVhZGluZyA9IGl0ZW0uZmluZCgnLmhlYWRpbmcnKTtcclxuICAgICAgdGhpcy50aHVtYm5haWxzW2ldLnRodW1ibmFpbCA9IGl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgICB0aGlzLnRodW1ibmFpbHNbaV0uZmlyc3QgPSBpdGVtLm9mZnNldCgpLnRvcC1iYXNlO1xyXG4gICAgICB0aGlzLnRodW1ibmFpbHNbaV0ubGFzdCA9IHRoaXMudGh1bWJuYWlsc1tpXS5maXJzdCtpdGVtLmhlaWdodCgpO1xyXG4gICAgICBpZih0aGlzLnRodW1ibmFpbHNbaV0ubG9hZGVkKSB7XHJcbiAgICAgICAgdGhpcy5zZXRJbWFnZSh0aGlzLnRodW1ibmFpbHNbaV0sIHRoaXMudGh1bWJuYWlsc1tpXS5zcmMpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGFzID0gaXRlbS5maW5kKCdhJyk7XHJcbiAgICAgIGZvcihsZXQgaj0wOyBqPGFzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgY29uc3QgYSA9IGFzW2pdO1xyXG4gICAgICAgIGEuZGF0YVRodW1ibmFpbCA9IHRoaXMudGh1bWJuYWlsc1tpXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jb250YWluZXIuZmluZCgnYScpLm9uKCdjbGljaycsIHRoaXMuYmluZHMubmF2aWdhdGUpO1xyXG4gICAgdGhpcy5idWlsdCA9IHRydWU7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9UaHVtYm5haWxzLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvVGh1bWJuYWlscy5qcyIsImltcG9ydCB7JH0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBFdmVudENvbnZlcnRlciBmcm9tICcuL0V2ZW50Q29udmVydGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRvdWNoQ29udmVydGVyIGV4dGVuZHMgRXZlbnRDb252ZXJ0ZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYywgZWxlbWVudCkge1xyXG4gICAgc3VwZXIod25kLCBkb2MpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBjb252ZXJ0OiB0aGlzLmNvbnZlcnQuYmluZCh0aGlzKVxyXG4gICAgfTtcclxuICAgICQodGhpcy5lbGVtZW50KS5vbigndG91Y2hzdGFydCB0b3VjaG1vdmUnLCB0aGlzLmJpbmRzLmNvbnZlcnQpO1xyXG4gICAgJCh0aGlzLmRvYykub24oJ3RvdWNoZW5kJywgdGhpcy5iaW5kcy5jb252ZXJ0KTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICAkKHRoaXMuZWxlbWVudCkub2ZmKCd0b3VjaHN0YXJ0IHRvdWNobW92ZScsIHRoaXMuYmluZHMuY29udmVydCk7XHJcbiAgICAkKHRoaXMuZG9jKS5vZmYoJ3RvdWNoZW5kJywgdGhpcy5iaW5kcy5jb252ZXJ0KTtcclxuICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvVG91Y2hFdmVudENvbnZlcnRlci5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1RvdWNoRXZlbnRDb252ZXJ0ZXIuanMiLCJpbXBvcnQgeyQsIHRyfSBmcm9tICcuLi9saWJzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXcge1xyXG5cclxuICBzdGF0aWMgbGlua1N0YXRlSGFuZGxlcnMgPSB7XHJcbiAgICB2aXNpYmxlOiAoY3RybCwgdmFsdWUpPT4gVmlldy5jbGFzc1Byb3BlcnR5KGN0cmwsICdoaWRkZW4nLCAhdmFsdWUpLFxyXG4gICAgYWN0aXZlOiAoY3RybCwgdmFsdWUpPT4gVmlldy5jbGFzc1Byb3BlcnR5KGN0cmwsICdhY3RpdmUnLCB2YWx1ZSksXHJcbiAgICBlbmFibGU6IChjdHJsLCB2YWx1ZSk9PiBWaWV3LmNsYXNzUHJvcGVydHkoY3RybCwgJ2Rpc2FibGVkJywgIXZhbHVlKVxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyB3aWRnZXRTdGF0ZUhhbmRsZXJzID0ge1xyXG4gICAgdmlzaWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnaGlkZGVuJywgIXZhbHVlKSxcclxuICAgIGFjdGl2ZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnYWN0aXZlJywgdmFsdWUpLFxyXG4gICAgZW5hYmxlOiAoY3RybCwgdmFsdWUpPT4gVmlldy5jbGFzc1Byb3BlcnR5KGN0cmwsICdkaXNhYmxlZCcsICF2YWx1ZSlcclxuICB9O1xyXG5cclxuICBzdGF0aWMgaW5wdXRTdGF0ZUhhbmRsZXJzID0ge1xyXG4gICAgdmlzaWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnaGlkZGVuJywgIXZhbHVlKSxcclxuICAgIHZhbHVlOiAoY3RybCwgdmFsdWUpPT4gY3RybFswXS52YWx1ZSA9IHZhbHVlLFxyXG4gICAgZW5hYmxlOiAoY3RybCwgdmFsdWUpPT4gVmlldy5hdHRyaWJ1dGVQcm9wZXJ0eShjdHJsLCAnZGlzYWJsZWQnLCAhdmFsdWUpXHJcbiAgfTtcclxuXHJcbiAgc3RhdGljIHRleHRTdGF0ZUhhbmRsZXJzID0ge1xyXG4gICAgdmlzaWJsZTogKGN0cmwsIHZhbHVlKT0+IFZpZXcuY2xhc3NQcm9wZXJ0eShjdHJsLCAnaGlkZGVuJywgIXZhbHVlKSxcclxuICAgIHZhbHVlOiAoY3RybCwgdmFsdWUpPT4gY3RybC50ZXh0KHZhbHVlKVxyXG4gIH07XHJcblxyXG4gIHN0YXRpYyBjbGFzc1Byb3BlcnR5KGN0cmwsIGNsYXNzTmFtZSwgdmFsdWUpIHtcclxuICAgIGlmKHZhbHVlKSB7XHJcbiAgICAgIGN0cmwuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjdHJsLnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXR0cmlidXRlUHJvcGVydHkoY3RybCwgYXR0cmlidXRlTmFtZSwgdmFsdWUpIHtcclxuICAgIGlmKHZhbHVlKSB7XHJcbiAgICAgIGN0cmwuYXR0cihhdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgY3RybC5yZW1vdmVBdHRyKGF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNhbGxIYW5kbGVycyhoYW5kbGVycywgaWQsIGUsIGRhdGEpIHtcclxuICAgIGZvcihsZXQgaGFuZGxlciBvZiBoYW5kbGVycykge1xyXG4gICAgICBpZihoYW5kbGVyW2lkXSkge1xyXG4gICAgICAgIGhhbmRsZXJbaWRdKGUsIGRhdGEpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoaGFuZGxlci5oYW5kbGVEZWZhdWx0KSB7XHJcbiAgICAgICAgaGFuZGxlci5oYW5kbGVEZWZhdWx0KGlkLCBlLCBkYXRhKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhbmRsZUV2ZW50KGlkLCBnZXRIYW5kbGVycywgZSwgZGF0YSkge1xyXG4gICAgVmlldy5jYWxsSGFuZGxlcnMoZ2V0SGFuZGxlcnMoaWQpLCBpZCwgZSwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaGFuZGxlTGlua0V2ZW50KGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmKCF0aGlzLmN0cmwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgVmlldy5oYW5kbGVFdmVudCh0aGlzLmlkLCB0aGlzLmdldEhhbmRsZXJzLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBoYW5kbGVJbnB1dEV2ZW50KGUpIHtcclxuICAgIFZpZXcuaGFuZGxlRXZlbnQodGhpcy5pZCwgdGhpcy5nZXRIYW5kbGVycywgZSwgZS50YXJnZXQudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGhhbmRsZUZvcm1FdmVudChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBWaWV3LmhhbmRsZUV2ZW50KHRoaXMuaWQsIHRoaXMuZ2V0SGFuZGxlcnMsIGUpO1xyXG4gIH1cclxuXHJcbiAgLy8gdmlydHVhbCBmdW5jdGlvbnMge1xyXG4gIGdldExpbmtzKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRXaWRnZXRzKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dHMoKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFRleHRzKCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcblxyXG4gIGdldEhhbmRsZXJzKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVycztcclxuICB9XHJcbiAgLy8gfVxyXG5cclxuICBjYWxsTGF0ZXIoaGFuZGxlcnMsIGlkLCBlLCBkYXRhLCBtcykge1xyXG4gICAgdGhpcy5wZW5kaW5nc1tpZF0gPSB7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS5nZXRUaW1lKClcclxuICAgIH07XHJcbiAgICBzZXRUaW1lb3V0KCgpPT4ge1xyXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgcGVuZGluZyA9IHRoaXMucGVuZGluZ3NbaWRdO1xyXG4gICAgICBpZihwZW5kaW5nICYmIHRpbWVzdGFtcC1wZW5kaW5nLnRpbWVzdGFtcD49bXMpIHtcclxuICAgICAgICBWaWV3LmNhbGxIYW5kbGVycyhoYW5kbGVycywgaWQsIGUsIGRhdGEpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnBlbmRpbmdzW2lkXTtcclxuICAgICAgfVxyXG4gICAgfSwgbXMpO1xyXG4gIH1cclxuXHJcbiAgLy8gbG9hZEZpbGVzKHVybHMsIHJlYWR5LCBmYWlsdXJlKSB7XHJcbiAgLy8gICBsZXQgZG9uZSA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gIC8vICAgZm9yKGxldCB1cmwgb2YgdXJscykge1xyXG4gIC8vICAgICBkb25lID0gZG9uZS50aGVuKCgpPT4ge1xyXG4gIC8vICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+IHtcclxuICAvLyAgICAgICAgICQuZ2V0KHVybCwgKHJlcyk9PiB7XHJcbiAgLy8gICAgICAgICAgIHJlYWR5KHJlcywgdXJsKTtcclxuICAvLyAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gIC8vICAgICAgICAgfSkuZmFpbCgocmVzKT0+IHtcclxuICAvLyAgICAgICAgICAgaWYoZmFpbHVyZSAmJiBmYWlsdXJlKHJlcywgdXJsKSkge1xyXG4gIC8vICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAvLyAgICAgICAgICAgfVxyXG4gIC8vICAgICAgICAgICBlbHNlIHtcclxuICAvLyAgICAgICAgICAgICByZWplY3QocmVzKTtcclxuICAvLyAgICAgICAgICAgfVxyXG4gIC8vICAgICAgICAgfSk7XHJcbiAgLy8gICAgICAgfSk7XHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgfVxyXG4gIC8vICAgcmV0dXJuIGRvbmU7XHJcbiAgLy8gfVxyXG5cclxuICBsb2FkRmlsZXModXJscywgZmlsZXMpIHtcclxuICAgIGNvbnN0IHRhc2tzID0gW107XHJcbiAgICBmb3IobGV0IG5hbWUgb2YgT2JqZWN0LmtleXModXJscykpIHtcclxuICAgICAgZmlsZXNbbmFtZV0gPSBbXTtcclxuICAgICAgZm9yKGxldCB1cmwgb2YgdXJsc1tuYW1lXSkge1xyXG4gICAgICAgIHRhc2tzLnB1c2goXHJcbiAgICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+IHtcclxuICAgICAgICAgICAgJC5nZXQodXJsLCAoZGF0YSk9PiB7XHJcbiAgICAgICAgICAgICAgZmlsZXNbbmFtZV0ucHVzaCh7dXJsLCBkYXRhfSk7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KS5mYWlsKChyZXMpPT4ge1xyXG4gICAgICAgICAgICAgIHJlamVjdChyZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcclxuICB9XHJcblxyXG4gIHVybFJlc29sdmVyKGJhc2VVcmwsIHVybCkge1xyXG4gICAgdXJsID0gdXJsLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcclxuICAgIGlmKHVybC5jaGFyQXQoMCkhPT0nLycpIHtcclxuICAgICAgYmFzZVVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xyXG4gICAgICBjb25zdCBwID0gYmFzZVVybC5sYXN0SW5kZXhPZignLycpO1xyXG4gICAgICB1cmwgPSAofnA/IGJhc2VVcmwuc3Vic3RyKDAsIHArMSk6ICcnKSt1cmw7XHJcblxyXG4gICAgICBjb25zdCBwYXJ0cyA9IHVybC5zcGxpdCgnLycpO1xyXG4gICAgICB1cmwgPSBbXTtcclxuICAgICAgZm9yKGxldCBwYXJ0IG9mIHBhcnRzKSB7XHJcbiAgICAgICAgaWYocGFydD09PScuJykge1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHBhcnQ9PT0nLi4nKSB7XHJcbiAgICAgICAgICBpZih1cmwubGVuZ3RoICYmICEodXJsLmxlbmd0aD09PTEgJiYgdXJsWzBdPT09JycpKSB7XHJcbiAgICAgICAgICAgIHVybC5wb3AoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB1cmwucHVzaChwYXJ0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdXJsID0gdXJsLmpvaW4oJy8nKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXJsO1xyXG4gIH1cclxuXHJcbiAgb2JqVG9BdHRyc1N0cihvKSB7XHJcbiAgICBjb25zdCByZXMgPSBbXTtcclxuICAgIGZvcihsZXQgbmFtZSBvZiBPYmplY3Qua2V5cyhvKSkge1xyXG4gICAgICByZXMucHVzaChbbmFtZSwgJz1cIicsIG9bbmFtZV0sICdcIiddLmpvaW4oJycpKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXMuam9pbignICcpO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tJZnJhbWVTaXplKCkge1xyXG4gICAgaWYodGhpcy5mcmFtZSkge1xyXG4gICAgICBpZihNYXRoLmFicyh0aGlzLmZyYW1lLndpZHRoLXRoaXMucGFyZW50Q29udGFpbmVyLndpZHRoKCkpPjEgfHwgTWF0aC5hYnModGhpcy5mcmFtZS5oZWlnaHQtdGhpcy5wYXJlbnRDb250YWluZXIuaGVpZ2h0KCkpPjEpIHtcclxuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XHJcbiAgICAgIH1cclxuICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrSWZyYW1lU2l6ZS5iaW5kKHRoaXMpLCAyNTApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25SZXNpemUoKSB7XHJcbiAgICB0aGlzLmZyYW1lLndpZHRoID0gdGhpcy5wYXJlbnRDb250YWluZXIud2lkdGgoKTtcclxuICAgIHRoaXMuZnJhbWUuaGVpZ2h0ID0gdGhpcy5wYXJlbnRDb250YWluZXIuaGVpZ2h0KCk7XHJcbiAgfVxyXG5cclxuICB0cmFuc2xhdGUoaHRtbCkge1xyXG4gICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvPFxcJHRyPiguKik8XFwvXFwkdHI+L2dpLCAoczAsczEpPT4gdHIoczEpKTtcclxuICB9XHJcblxyXG4gIGZpcmVMaW5rc09uTG9hZEV2ZW50KCkge1xyXG4gICAgaWYodGhpcy50ZW1wbGF0ZU9iamVjdCAmJiB0aGlzLnRlbXBsYXRlT2JqZWN0LmxpbmtMb2FkZWQpIHtcclxuICAgICAgbGV0IGxvYWRlZCA9IHRydWU7XHJcbiAgICAgIGZvcihsZXQgakxpbmsgb2YgdGhpcy5qTGlua3MpIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gakxpbmtbMF07XHJcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgaW1nLm9uZXJyb3IgPSAoKT0+IHRoaXMudGVtcGxhdGVPYmplY3QubGlua0xvYWRlZChsaW5rKTtcclxuICAgICAgICBpbWcuc3JjID0gbGluay5ocmVmO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJlbnRDb250YWluZXIsIG9uTG9hZCwgdGVtcGxhdGU9e30pIHtcclxuICAgIHRoaXMucGVuZGluZ3MgPSB7fTtcclxuICAgIHRoaXMuYmluZHMgPSB7XHJcbiAgICAgIG9uUmVzaXplOiB0aGlzLm9uUmVzaXplLmJpbmQodGhpcylcclxuICAgIH07XHJcbiAgICB0aGlzLnBhcmVudENvbnRhaW5lciA9ICQocGFyZW50Q29udGFpbmVyKTtcclxuICAgIHRoaXMuaXNJT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtO1xyXG4gICAgdGhpcy5wYXJlbnRDb250YWluZXIuaHRtbCgnPGlmcmFtZSBzdHlsZT1cImJvcmRlcjogMDsnKyh0aGlzLmlzSU9TPyAnJzogJyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlJykrJ1wiIHNjcm9sbGluZz1cIm5vXCI+PC9pZnJhbWU+Jyk7XHJcblxyXG4gICAgdGhpcy5mcmFtZSA9IHRoaXMucGFyZW50Q29udGFpbmVyLmZpbmQoJ2lmcmFtZScpWzBdO1xyXG4gICAgaWYodGhpcy5mcmFtZS5jb250ZW50V2luZG93LnN0b3ApIHtcclxuICAgICAgdGhpcy5mcmFtZS5jb250ZW50V2luZG93LnN0b3AoKTtcclxuICAgIH1cclxuICAgIGlmKHRoaXMuaXNJT1MpIHtcclxuICAgICAgJCh0aGlzLnBhcmVudENvbnRhaW5lclswXS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KS5vbigncmVzaXplJywgdGhpcy5iaW5kcy5vblJlc2l6ZSk7XHJcbiAgICAgIHRoaXMub25SZXNpemUoKTtcclxuICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrSWZyYW1lU2l6ZS5iaW5kKHRoaXMpLCAyNTApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY29udGFpbmVyID0gJCh0aGlzLmZyYW1lLmNvbnRlbnREb2N1bWVudC5ib2R5KTtcclxuICAgIHRoaXMuY29udGFpbmVyLmNzcygnbWFyZ2luJywgJzAnKTtcclxuICAgIHRoaXMuaGVhZCA9ICQodGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQuaGVhZCk7XHJcbiAgICB0aGlzLm9uTG9hZCA9IG9uTG9hZDtcclxuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcclxuXHJcbiAgICBjb25zdCBzY3JpcHQgPSB0ZW1wbGF0ZS5odG1sPyB0ZW1wbGF0ZS5zY3JpcHQ6IHRoaXMuZ2V0VGVtcGxhdGUoKS5zY3JpcHQ7XHJcbiAgICBjb25zdCB1cmxzID0ge1xyXG4gICAgICBzdHlsZXM6IHRlbXBsYXRlLnN0eWxlcyB8fCB0aGlzLmdldFRlbXBsYXRlKCkuc3R5bGVzLFxyXG4gICAgICBodG1sOiBbdGVtcGxhdGUuaHRtbCB8fCB0aGlzLmdldFRlbXBsYXRlKCkuaHRtbF0sXHJcbiAgICAgIHNjcmlwdDogc2NyaXB0PyBbc2NyaXB0XTogW11cclxuICAgIH0sIGZpbGVzID0ge30sIGxpbmtzID0gdGVtcGxhdGUubGlua3MgfHwgdGhpcy5nZXRUZW1wbGF0ZSgpLmxpbmtzO1xyXG5cclxuICAgIHRoaXMubG9hZEZpbGVzKHVybHMsIGZpbGVzKS50aGVuKCgpPT4ge1xyXG4gICAgICBmb3IobGV0IHN0eWxlIG9mIGZpbGVzLnN0eWxlcykge1xyXG4gICAgICAgIGxldCB0ZXh0Q3NzID0gc3R5bGUuZGF0YSwgdXJsID0gc3R5bGUudXJsO1xyXG4gICAgICAgIHRleHRDc3MgPSB0ZXh0Q3NzLnJlcGxhY2UoL3VybFxcKFsnXCJdKC4qPylbXCInXVxcKS9nLCAociwgcjEpPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIFsndXJsKCcsIHRoaXMudXJsUmVzb2x2ZXIodXJsLCByMSksICcpJ10uam9pbignJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChgPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPiR7dGV4dENzc308L3N0eWxlPmApLmFwcGVuZFRvKHRoaXMuaGVhZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY29udGFpbmVyLmh0bWwodGhpcy50cmFuc2xhdGUoZmlsZXMuaHRtbFswXS5kYXRhKSk7XHJcblxyXG4gICAgICB0aGlzLmpMaW5rcyA9IFtdO1xyXG4gICAgICBmb3IobGV0IGxpbmsgb2YgbGlua3MpIHtcclxuICAgICAgICB0aGlzLmpMaW5rcy5wdXNoKCQoWyc8bGluayAnLCB0aGlzLm9ialRvQXR0cnNTdHIobGluayksICc+J10uam9pbignJykpLmFwcGVuZFRvKHRoaXMuaGVhZCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihmaWxlcy5zY3JpcHRbMF0pIHtcclxuICAgICAgICBjb25zdCBpbml0ID0gZXZhbChmaWxlcy5zY3JpcHRbMF0uZGF0YSk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZU9iamVjdCA9IGluaXQodGhpcy5jb250YWluZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVPYmplY3QgPSB7fTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5saW5rQ29udHJvbHMgPSB7fTtcclxuICAgICAgZm9yKGxldCBpZCBvZiB0aGlzLmdldExpbmtzKCkpIHtcclxuICAgICAgICB0aGlzLmxpbmtDb250cm9sc1tpZF0gPSB0aGlzLmNvbnRhaW5lci5maW5kKCcuJytpZCk7XHJcbiAgICAgICAgdGhpcy5iaW5kc1tpZF0gPSBWaWV3LmhhbmRsZUxpbmtFdmVudC5iaW5kKHtnZXRIYW5kbGVyczogdGhpcy5nZXRIYW5kbGVycy5iaW5kKHRoaXMpLCBpZCwgY3RybDogdGhpcy5saW5rQ29udHJvbHNbaWRdfSk7XHJcbiAgICAgICAgdGhpcy5saW5rQ29udHJvbHNbaWRdLm9uKCdjbGljaycsIHRoaXMuYmluZHNbaWRdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy53aWRnZXRDb250cm9scyA9IHt9O1xyXG4gICAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0V2lkZ2V0cygpKSB7XHJcbiAgICAgICAgdGhpcy53aWRnZXRDb250cm9sc1tpZF0gPSB0aGlzLmNvbnRhaW5lci5maW5kKCcuJytpZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuaW5wdXRDb250cm9scyA9IHt9O1xyXG4gICAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0SW5wdXRzKCkpIHtcclxuICAgICAgICB0aGlzLmlucHV0Q29udHJvbHNbaWRdID0gdGhpcy5jb250YWluZXIuZmluZCgnLicraWQpO1xyXG4gICAgICAgIHRoaXMuYmluZHNbaWRdID0gVmlldy5oYW5kbGVJbnB1dEV2ZW50LmJpbmQoe2dldEhhbmRsZXJzOiB0aGlzLmdldEhhbmRsZXJzLmJpbmQodGhpcyksIGlkLCBjdHJsOiB0aGlzLmlucHV0Q29udHJvbHNbaWRdfSk7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRyb2xzW2lkXS5vbigna2V5dXAnLCB0aGlzLmJpbmRzW2lkXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZm9ybUNvbnRyb2xzID0ge307XHJcbiAgICAgIGZvcihsZXQgaWQgb2YgdGhpcy5nZXRGb3JtcygpKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbHNbaWRdID0gdGhpcy5jb250YWluZXIuZmluZCgnLicraWQpO1xyXG4gICAgICAgIHRoaXMuYmluZHNbaWRdID0gVmlldy5oYW5kbGVGb3JtRXZlbnQuYmluZCh7Z2V0SGFuZGxlcnM6IHRoaXMuZ2V0SGFuZGxlcnMuYmluZCh0aGlzKSwgaWQsIGN0cmw6IHRoaXMuZm9ybUNvbnRyb2xzW2lkXX0pO1xyXG4gICAgICAgIHRoaXMuZm9ybUNvbnRyb2xzW2lkXS5vbignc3VibWl0JywgdGhpcy5iaW5kc1tpZF0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRleHRDb250cm9scyA9IHt9O1xyXG4gICAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0VGV4dHMoKSkge1xyXG4gICAgICAgIHRoaXMudGV4dENvbnRyb2xzW2lkXSA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy4nK2lkKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zdGF0ZVNldHRlcnMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWFwOiB0aGlzLmxpbmtDb250cm9scyxcclxuICAgICAgICAgIHNldHRlcjogdGhpcy5zZXRMaW5rQ29udHJvbFN0YXRlLmJpbmQodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG1hcDogdGhpcy53aWRnZXRDb250cm9scyxcclxuICAgICAgICAgIHNldHRlcjogdGhpcy5zZXRXaWRnZXRDb250cm9sU3RhdGUuYmluZCh0aGlzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWFwOiB0aGlzLmlucHV0Q29udHJvbHMsXHJcbiAgICAgICAgICBzZXR0ZXI6IHRoaXMuc2V0SW5wdXRDb250cm9sU3RhdGUuYmluZCh0aGlzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbWFwOiB0aGlzLnRleHRDb250cm9scyxcclxuICAgICAgICAgIHNldHRlcjogdGhpcy5zZXRUZXh0Q29udHJvbFN0YXRlLmJpbmQodGhpcylcclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICB0aGlzLmluaXRWaWV3KCk7XHJcblxyXG4gICAgICBpZih0aGlzLm9uTG9hZCkge1xyXG4gICAgICAgIHRoaXMub25Mb2FkKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZmlyZUxpbmtzT25Mb2FkRXZlbnQoKTtcclxuICAgIH0pLlxyXG4gICAgY2F0Y2goKHJlcyk9PiBjb25zb2xlLmVycm9yKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGRlbGV0ZSB0aGlzLnRleHRDb250cm9scztcclxuICAgIGZvcihsZXQgaWQgb2YgdGhpcy5nZXRMaW5rcygpKSB7XHJcbiAgICAgIHRoaXMubGlua0NvbnRyb2xzW2lkXS5vZmYoJ2NsaWNrJywgdGhpcy5iaW5kc1tpZF0pO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIHRoaXMubGlua0NvbnRyb2xzO1xyXG4gICAgZGVsZXRlIHRoaXMud2lkZ2V0Q29udHJvbHM7XHJcbiAgICBmb3IobGV0IGlkIG9mIHRoaXMuZ2V0SW5wdXRzKCkpIHtcclxuICAgICAgdGhpcy5pbnB1dENvbnRyb2xzW2lkXS5vZmYoJ2tleXVwJywgdGhpcy5iaW5kc1tpZF0pO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIHRoaXMuaW5wdXRDb250cm9scztcclxuICAgIGZvcihsZXQgaWQgb2YgdGhpcy5nZXRGb3JtcygpKSB7XHJcbiAgICAgIHRoaXMuZm9ybUNvbnRyb2xzW2lkXS5vZmYoJ3N1Ym1pdCcsIHRoaXMuYmluZHNbaWRdKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSB0aGlzLmZvcm1Db250cm9scztcclxuXHJcbiAgICAhdGhpcy50ZW1wbGF0ZU9iamVjdC5kaXNwb3NlIHx8IHRoaXMudGVtcGxhdGVPYmplY3QuZGlzcG9zZSgpO1xyXG4gICAgZGVsZXRlIHRoaXMudGVtcGxhdGVPYmplY3Q7XHJcblxyXG4gICAgaWYodGhpcy5pc0lPUykge1xyXG4gICAgICAkKHRoaXMucGFyZW50Q29udGFpbmVyWzBdLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpLm9mZigncmVzaXplJywgdGhpcy5iaW5kcy5vblJlc2l6ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhcmVudENvbnRhaW5lci5odG1sKCcnKTtcclxuICAgIGRlbGV0ZSB0aGlzLmZyYW1lO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29udGFpbmVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyWzBdO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGFyZW50Q29udGFpbmVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGFyZW50Q29udGFpbmVyWzBdO1xyXG4gIH1cclxuXHJcbiAgYWRkSGFuZGxlcihoYW5kbGVyKSB7XHJcbiAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICBpbml0VmlldygpIHtcclxuXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0Q29udHJvbFN0YXRlKGN0cmwsIGRlZmF1bHRzLCBzdGF0ZSwgc3RhdGVIYW5kbGVycykge1xyXG4gICAgaWYoY3RybCkge1xyXG4gICAgICBjb25zdCBzdCA9IHtcclxuICAgICAgICAuLi5kZWZhdWx0cyxcclxuICAgICAgICAuLi5zdGF0ZVxyXG4gICAgICB9O1xyXG4gICAgICBmb3IobGV0IG5hbWUgaW4gc3QpIHtcclxuICAgICAgICBpZihzdC5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBzdGF0ZUhhbmRsZXJzW25hbWVdKSB7XHJcbiAgICAgICAgICBzdGF0ZUhhbmRsZXJzW25hbWVdKGN0cmwsIHN0W25hbWVdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldExpbmtDb250cm9sU3RhdGUoaWQsIHN0YXRlKSB7XHJcbiAgICBWaWV3LnNldENvbnRyb2xTdGF0ZShcclxuICAgICAgdGhpcy5saW5rQ29udHJvbHNbaWRdLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICBhY3RpdmU6IGZhbHNlLFxyXG4gICAgICAgIGVuYWJsZTogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBzdGF0ZSxcclxuICAgICAgVmlldy5saW5rU3RhdGVIYW5kbGVyc1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldFdpZGdldENvbnRyb2xTdGF0ZShpZCwgc3RhdGUpIHtcclxuICAgIFZpZXcuc2V0Q29udHJvbFN0YXRlKFxyXG4gICAgICB0aGlzLndpZGdldENvbnRyb2xzW2lkXSxcclxuICAgICAge1xyXG4gICAgICAgIHZpc2libGU6IHRydWUsXHJcbiAgICAgICAgYWN0aXZlOiBmYWxzZSxcclxuICAgICAgICBlbmFibGU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgc3RhdGUsXHJcbiAgICAgIFZpZXcud2lkZ2V0U3RhdGVIYW5kbGVyc1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNldElucHV0Q29udHJvbFN0YXRlKGlkLCBzdGF0ZSkge1xyXG4gICAgVmlldy5zZXRDb250cm9sU3RhdGUoXHJcbiAgICAgIHRoaXMuaW5wdXRDb250cm9sc1tpZF0sXHJcbiAgICAgIHtcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICB2YWx1ZTogJydcclxuICAgICAgfSxcclxuICAgICAgc3RhdGUsXHJcbiAgICAgIFZpZXcuaW5wdXRTdGF0ZUhhbmRsZXJzXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2V0VGV4dENvbnRyb2xTdGF0ZShpZCwgc3RhdGUpIHtcclxuICAgIFZpZXcuc2V0Q29udHJvbFN0YXRlKFxyXG4gICAgICB0aGlzLnRleHRDb250cm9sc1tpZF0sXHJcbiAgICAgIHtcclxuICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiAnJ1xyXG4gICAgICB9LFxyXG4gICAgICBzdGF0ZSxcclxuICAgICAgVmlldy50ZXh0U3RhdGVIYW5kbGVyc1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIG9uSXRlbVN0YXRlQ2hhbmdlZCgpIHtcclxuXHJcbiAgfVxyXG5cclxuICBzZXRTdGF0ZShpZCwgc3RhdGUpIHtcclxuICAgIGZvcihsZXQgaXRlbSBvZiB0aGlzLnN0YXRlU2V0dGVycykge1xyXG4gICAgICBpZihpdGVtLm1hcFtpZF0pIHtcclxuICAgICAgICBpdGVtLnNldHRlcihpZCwgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMub25JdGVtU3RhdGVDaGFuZ2VkKGlkLCBzdGF0ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL1ZpZXcuanNcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9jb21tb24vY2xhc3Nlcy9WaWV3LmpzIiwiaW1wb3J0IHskLCBUSFJFRX0gZnJvbSAnLi4vbGlicyc7XHJcbmltcG9ydCBPcmJpdCBmcm9tICcuL09yYml0JztcclxuaW1wb3J0IFRocmVlTW91c2VFdmVudENvbnZlcnRlciBmcm9tICcuL1RocmVlTW91c2VFdmVudENvbnZlcnRlcic7XHJcbmltcG9ydCBUaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXIgZnJvbSAnLi9UaHJlZVRvdWNoRXZlbnRDb252ZXJ0ZXInO1xyXG5pbXBvcnQgRHJhZyBmcm9tICcuL0RyYWcnO1xyXG5pbXBvcnQgQ1NTM0RSZW5kZXJlciBmcm9tICcuL0NTUzNEUmVuZGVyZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlzdWFsV29ybGQgZXh0ZW5kcyBUSFJFRS5FdmVudERpc3BhdGNoZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3bmQsIGRvYywgY29udGFpbmVyLCB1c2VIZWxwZXJzPWZhbHNlKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy53bmQgPSB3bmQ7XHJcbiAgICB0aGlzLmRvYyA9IGRvYztcclxuICAgIHRoaXMuakNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIHRoaXMucmVuZGVyQ2FsbGJhY2tzID0gW107XHJcblxyXG4gICAgdGhpcy5jbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpO1xyXG5cclxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xyXG5cclxuICAgIHRoaXMuc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuICAgIHRoaXMuY3NzU2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcclxuXHJcbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgzMCwgdGhpcy53aWR0aCgpL3RoaXMuaGVpZ2h0KCksIDAuMiwgMjAwMCk7XHJcbiAgICBjb25zdCBzY2FsZSA9IDE7XHJcblxyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueCA9IDA7XHJcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi55ID0gNS41KnNjYWxlO1xyXG4gICAgdGhpcy5jYW1lcmEucG9zaXRpb24ueiA9IDA7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHthbHBoYTogdHJ1ZSwgYW50aWFsaWFzOiB0cnVlfSk7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoMHgwMDAwMDAsIDApO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHRoaXMud25kLmRldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHRoaXMud2lkdGgoKSwgdGhpcy5oZWlnaHQoKSk7XHJcblxyXG4gICAgdGhpcy5qQ29udGFpbmVyLmFwcGVuZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG5cclxuICAgIHRoaXMuY3NzUmVuZGVyZXJcdD0gbmV3IENTUzNEUmVuZGVyZXIoKTtcclxuICAgIHRoaXMuY3NzUmVuZGVyZXIuc2V0U2l6ZSh0aGlzLndpZHRoKCksIHRoaXMuaGVpZ2h0KCkpO1xyXG4gICAgJCh0aGlzLmNzc1JlbmRlcmVyLmRvbUVsZW1lbnQpLmNzcyh7XHJcbiAgXHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gIFx0XHR0b3A6IDAsXHJcbiAgXHRcdG1hcmdpbjogMCxcclxuICBcdFx0cGFkZGluZzogMFxyXG5cdCAgfSk7XHJcbiAgICB0aGlzLmpDb250YWluZXIuYXBwZW5kKHRoaXMuY3NzUmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jc3NSZW5kZXJlci5kb21FbGVtZW50O1xyXG5cclxuXHJcblxyXG4gICAgdGhpcy5jb250cm9scyA9IG5ldyBPcmJpdCh0aGlzLmNhbWVyYSwgdGhpcy5lbGVtZW50KTtcclxuICAgIHRoaXMuY29udHJvbHMudGFyZ2V0LnkgPSAwLjU7XHJcblxyXG4gICAgY29uc3QgY3NzU2NlbmUgPSAkKHRoaXMuY3NzUmVuZGVyZXIuZG9tRWxlbWVudCkuZmluZCgnZGl2JyksIHRtcFZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpPT4ge1xyXG4gICAgICB0aGlzLmNhbWVyYS5nZXRXb3JsZERpcmVjdGlvbih0bXBWZWN0b3IpO1xyXG4gICAgICBjc3NTY2VuZS5jc3MoJ2Rpc3BsYXknLCB0bXBWZWN0b3IueS10aGlzLmNhbWVyYS5wb3NpdGlvbi55PjA/ICdub25lJzogJ2Jsb2NrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRleHR1cmVMb2FkZXIgPSBuZXcgVEhSRUUuVGV4dHVyZUxvYWRlcigpO1xyXG5cclxuICAgIHRoaXMuc2NlbmUuYWRkKG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhEMEQwRDApKTsvLzB4QzBDMEMwXHJcblxyXG4gICAgdGhpcy5saWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4NDA0MDQwLCAxKTtcclxuICAgIHRoaXMubGlnaHQucG9zaXRpb24uc2V0KDAsIDYqc2NhbGUsIDApO1xyXG4gICAgdGhpcy5saWdodC5jYXN0U2hhZG93ID0gZmFsc2U7XHJcbiAgICAvLyBjb25zdCBkID0gMjAqc2NhbGU7XHJcbiAgICAvLyB0aGlzLmxpZ2h0LnNoYWRvdy5jYW1lcmEubGVmdCA9IC1kO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cuY2FtZXJhLnJpZ2h0ID0gZDtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93LmNhbWVyYS50b3AgPSBkO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cuY2FtZXJhLmJvdHRvbSA9IC1kO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cuY2FtZXJhLm5lYXIgPSAxKnNjYWxlO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cuY2FtZXJhLmZhciA9IDI1KnNjYWxlO1xyXG4gICAgLy8gdGhpcy5saWdodC5zaGFkb3cubWFwU2l6ZS54ID0gMTAyNDtcclxuICAgIC8vIHRoaXMubGlnaHQuc2hhZG93Lm1hcFNpemUueSA9IDEwMjQ7XHJcbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmxpZ2h0KTtcclxuXHJcbiAgICBpZih1c2VIZWxwZXJzKSB7XHJcbiAgICAgIHRoaXMuc2NlbmUuYWRkKG5ldyBUSFJFRS5BeGlzSGVscGVyKDUpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJpbmRzID0ge1xyXG4gICAgICBvbldpbmRvd1Jlc2l6ZTogdGhpcy5vbldpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpLFxyXG4gICAgICBhbmltYXRlOiB0aGlzLmFuaW1hdGUuYmluZCh0aGlzKVxyXG4gICAgfTtcclxuXHJcbiAgICAkKHRoaXMud25kKS5vbigncmVzaXplJywgdGhpcy5iaW5kcy5vbldpbmRvd1Jlc2l6ZSk7XHJcblxyXG4gICAgdGhpcy5tb3VzZUV2ZW50cyA9IG5ldyBUaHJlZU1vdXNlRXZlbnRDb252ZXJ0ZXIodGhpcy53bmQsIHRoaXMuZG9jLCB0aGlzKTtcclxuICAgIHRoaXMudG91Y2hFdmVudHMgPSBuZXcgVGhyZWVUb3VjaEV2ZW50Q29udmVydGVyKHRoaXMud25kLCB0aGlzLmRvYywgdGhpcyk7XHJcbiAgICBjb25zdCBmaWx0ZXJEYXRhID0ge3R5cGU6ICdtb3VzZW1vdmUnfTtcclxuICAgIHRoaXMubW91c2VFdmVudHMuZmlsdGVyID0gKGVsZW1lbnQsIGUpPT4ge1xyXG4gICAgICBjb25zdCB0eXBlcyA9IFsnbW91c2VlbnRlcicsICdtb3VzZW92ZXInLCAnbW91c2VsZWF2ZScsICdtb3VzZW91dCddLCBjb250YWlucyA9IChwLCBjKT0+IHA9PT1jIHx8ICQuY29udGFpbnMocCwgYyk7XHJcbiAgICAgIGlmKGUudHlwZT09PSdtb3VzZW1vdmUnKSB7XHJcbiAgICAgICAgZmlsdGVyRGF0YS5wYWdlWCA9IGUucGFnZVg7XHJcbiAgICAgICAgZmlsdGVyRGF0YS5wYWdlWSA9IGUucGFnZVk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGUucmVsYXRlZFRhcmdldCAmJiB+dHlwZXMuaW5kZXhPZihlLnR5cGUpICYmIGNvbnRhaW5zKGVsZW1lbnQsIGUudGFyZ2V0KSAmJiBjb250YWlucyhlbGVtZW50LCBlLnJlbGF0ZWRUYXJnZXQpPyB7Li4uZSwgLi4uZmlsdGVyRGF0YX06IGU7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5kcmFnID0gbmV3IERyYWcodGhpcy53bmQsIHRoaXMuZG9jLCB0aGlzKTtcclxuXHJcbiAgICB0aGlzLmFuaW1hdGUoKTtcclxuICB9XHJcblxyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICBkZWxldGUgdGhpcy5iaW5kcy5hbmltYXRlO1xyXG4gICAgJCh0aGlzLnduZCkub2ZmKCdyZXNpemUnLCB0aGlzLmJpbmRzLm9uV2luZG93UmVzaXplKTtcclxuICAgIHRoaXMubW91c2VFdmVudHMuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy50b3VjaEV2ZW50cy5kaXNwb3NlKCk7XHJcbiAgICB0aGlzLmRyYWcuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5jb250cm9scy5kaXNwb3NlKCk7XHJcbiAgfVxyXG5cclxuICB3aWR0aCgpIHtcclxuICAgIHJldHVybiB0aGlzLmpDb250YWluZXIud2lkdGgoKTtcclxuICB9XHJcblxyXG4gIGhlaWdodCgpIHtcclxuICAgIHJldHVybiB0aGlzLmpDb250YWluZXIuaGVpZ2h0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFeHRyYUxpZ2h0aW5nKHYpIHtcclxuICAgIHRoaXMubGlnaHQuaW50ZW5zaXR5ID0gdjtcclxuICB9XHJcblxyXG4gIGdldE9yYml0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XHJcbiAgfVxyXG5cclxuICBzZXRDb250cm9sc1N0YXRlKHN0YXRlKSB7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmVuYWJsZWQgPSBzdGF0ZTtcclxuICB9XHJcblxyXG4gIGdldENvbnRyb2xzU3RhdGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb250cm9scy5lbmFibGVkO1xyXG4gIH1cclxuXHJcbiAgb25XaW5kb3dSZXNpemUoKSB7XHJcbiAgICBjb25zdCB1cGRhdGVDYW1lcmEgPSAoY2FtZXJhKT0+IHtcclxuICAgICAgY2FtZXJhLmFzcGVjdCA9IHRoaXMud2lkdGgoKS90aGlzLmhlaWdodCgpO1xyXG4gICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZVJlbmRlcmVyID0gKHJlbmRlcmVyKT0+IHtcclxuICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh0aGlzLndpZHRoKCksIHRoaXMuaGVpZ2h0KCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB1cGRhdGVDYW1lcmEodGhpcy5jYW1lcmEpO1xyXG4gICAgdXBkYXRlUmVuZGVyZXIodGhpcy5yZW5kZXJlcik7XHJcbiAgICB1cGRhdGVSZW5kZXJlcih0aGlzLmNzc1JlbmRlcmVyKTtcclxuXHJcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoe3R5cGU6ICdyZXNpemUnfSk7XHJcbiAgfVxyXG5cclxuICBhZGRPYmplY3Qob2JqZWN0KSB7XHJcbiAgICB0aGlzLnNjZW5lLmFkZChvYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgYWRkQ3NzT2JqZWN0KG9iamVjdCkge1xyXG4gICAgdGhpcy5jc3NTY2VuZS5hZGQob2JqZWN0KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNzc09iamVjdChvYmplY3QpIHtcclxuICAgIHRoaXMuY3NzU2NlbmUucmVtb3ZlKG9iamVjdCk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVPYmplY3Qob2JqZWN0KSB7XHJcbiAgICB0aGlzLnNjZW5lLnJlbW92ZShvYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgYW5pbWF0ZSgpIHtcclxuICAgIGlmKHRoaXMuYmluZHMuYW5pbWF0ZSkge1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5iaW5kcy5hbmltYXRlKTtcclxuICAgIH1cclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBhZGRSZW5kZXJDYWxsYmFjayhjbGIpIHtcclxuICAgIHRoaXMucmVuZGVyQ2FsbGJhY2tzLnB1c2goY2xiKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVJlbmRlckNhbGxiYWNrKGNsYikge1xyXG4gICAgY29uc3QgaSA9IHRoaXMucmVuZGVyQ2FsbGJhY2tzLmluZGV4T2YoY2xiKTtcclxuICAgIGlmKH5pKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyQ2FsbGJhY2tzLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGRlbHRhVGltZSA9IHRoaXMuY2xvY2suZ2V0RGVsdGEoKTtcclxuICAgIHRoaXMuY29udHJvbHMudXBkYXRlKGRlbHRhVGltZSk7XHJcbiAgICBmb3IobGV0IGNsYiBvZiB0aGlzLnJlbmRlckNhbGxiYWNrcykge1xyXG4gICAgICBjbGIoZGVsdGFUaW1lKTtcclxuICAgIH1cclxuICAgIHRoaXMuY3NzUmVuZGVyZXIucmVuZGVyKHRoaXMuY3NzU2NlbmUsIHRoaXMuY2FtZXJhKTtcclxuICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcclxuICB9XHJcblxyXG4gIHByb2Nlc3NHZW9tZXRyeShidWZHZW9tZXRyeSwgbWVzaCkge1xyXG4gICAgbWVzaC5nZW9tZXRyeSA9IGJ1Zkdlb21ldHJ5O1xyXG4gICAgLy8gT2J0YWluIGEgR2VvbWV0cnlcclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkdlb21ldHJ5KCkuZnJvbUJ1ZmZlckdlb21ldHJ5KGJ1Zkdlb21ldHJ5KTtcclxuICAgIC8vIE1lcmdlIHRoZSB2ZXJ0aWNlcyBzbyB0aGUgdHJpYW5nbGUgc291cCBpcyBjb252ZXJ0ZWQgdG8gaW5kZXhlZCB0cmlhbmdsZXNcclxuICAgIGdlb21ldHJ5Lm1lcmdlVmVydGljZXMoKTtcclxuICAgIC8vIENvbnZlcnQgYWdhaW4gdG8gQnVmZmVyR2VvbWV0cnksIGluZGV4ZWRcclxuICAgIGNvbnN0IGluZGV4ZWRCdWZmZXJHZW9tID0gdGhpcy5jcmVhdGVJbmRleGVkQnVmZmVyR2VvbWV0cnlGcm9tR2VvbWV0cnkoZ2VvbWV0cnkpO1xyXG4gICAgLy8gQ3JlYXRlIGluZGV4IGFycmF5cyBtYXBwaW5nIHRoZSBpbmRleGVkIHZlcnRpY2VzIHRvIGJ1Zkdlb21ldHJ5IHZlcnRpY2VzXHJcbiAgICByZXR1cm4gdGhpcy5tYXBJbmRpY2VzKGJ1Zkdlb21ldHJ5LCBpbmRleGVkQnVmZmVyR2VvbSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVJbmRleGVkQnVmZmVyR2VvbWV0cnlGcm9tR2VvbWV0cnkoZ2VvbWV0cnkpIHtcclxuICAgIGNvbnN0IG51bVZlcnRpY2VzID0gZ2VvbWV0cnkudmVydGljZXMubGVuZ3RoO1xyXG4gICAgY29uc3QgbnVtRmFjZXMgPSBnZW9tZXRyeS5mYWNlcy5sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgYnVmZmVyR2VvbSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xyXG4gICAgY29uc3QgdmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KG51bVZlcnRpY2VzICogMyk7XHJcbiAgICBjb25zdCBpbmRpY2VzID0gbmV3IChudW1GYWNlcyAqIDMgPiA2NTUzNSA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKG51bUZhY2VzICogMyk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzOyBpKyspIHtcclxuICAgICAgY29uc3QgcCA9IGdlb21ldHJ5LnZlcnRpY2VzW2ldO1xyXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xyXG4gICAgICB2ZXJ0aWNlc1tpM10gPSBwLng7XHJcbiAgICAgIHZlcnRpY2VzW2kzICsgMV0gPSBwLnk7XHJcbiAgICAgIHZlcnRpY2VzW2kzICsgMl0gPSBwLno7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bUZhY2VzOyBpKyspIHtcclxuICAgICAgY29uc3QgZiA9IGdlb21ldHJ5LmZhY2VzW2ldO1xyXG4gICAgICBjb25zdCBpMyA9IGkgKiAzO1xyXG4gICAgICBpbmRpY2VzW2kzXSA9IGYuYTtcclxuICAgICAgaW5kaWNlc1tpMyArIDFdID0gZi5iO1xyXG4gICAgICBpbmRpY2VzW2kzICsgMl0gPSBmLmM7XHJcbiAgICB9XHJcblxyXG4gICAgYnVmZmVyR2VvbS5zZXRJbmRleChuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGluZGljZXMsIDEpKTtcclxuICAgIGJ1ZmZlckdlb20uYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUodmVydGljZXMsIDMpKTtcclxuXHJcbiAgICByZXR1cm4gYnVmZmVyR2VvbTtcclxuICB9XHJcblxyXG4gIGlzRXF1YWwoeDEsIHkxLCB6MSwgeDIsIHkyLCB6Mikge1xyXG4gICAgY29uc3QgZGVsdGEgPSAwLjAwMDAwMTtcclxuICAgIHJldHVybiBNYXRoLmFicyh4MiAtIHgxKSA8IGRlbHRhICYmXHJcbiAgICBNYXRoLmFicyh5MiAtIHkxKSA8IGRlbHRhICYmXHJcbiAgICBNYXRoLmFicyh6MiAtIHoxKSA8IGRlbHRhO1xyXG4gIH1cclxuXHJcbiAgbWFwSW5kaWNlcyhidWZHZW9tZXRyeSwgaW5kZXhlZEJ1ZmZlckdlb20pIHtcclxuICAgIC8vIENyZWF0ZXMgbWFwcGVkVmVydGljZXMsIG1hcHBlZEluZGljZXMgYW5kIG1hcHBlZEFzc29jaWF0aW9uIGluIGJ1Zkdlb21ldHJ5XHJcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IGJ1Zkdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcbiAgICBjb25zdCBpZHhWZXJ0aWNlcyA9IGluZGV4ZWRCdWZmZXJHZW9tLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcbiAgICBjb25zdCBpbmRpY2VzID0gaW5kZXhlZEJ1ZmZlckdlb20uaW5kZXguYXJyYXk7XHJcblxyXG4gICAgY29uc3QgbnVtSWR4VmVydGljZXMgPSBpZHhWZXJ0aWNlcy5sZW5ndGggLyAzO1xyXG4gICAgY29uc3QgbnVtVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGggLyAzO1xyXG5cclxuICAgIGJ1Zkdlb21ldHJ5Lm1hcHBlZFZlcnRpY2VzID0gaWR4VmVydGljZXM7XHJcbiAgICBidWZHZW9tZXRyeS5tYXBwZWRJbmRpY2VzID0gaW5kaWNlcztcclxuICAgIGJ1Zkdlb21ldHJ5Lm1hcHBlZEFzc29jaWF0aW9uID0gW107XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bUlkeFZlcnRpY2VzOyBpKyspIHtcclxuICAgICAgY29uc3QgYXNzb2NpYXRpb24gPSBbXTtcclxuICAgICAgYnVmR2VvbWV0cnkubWFwcGVkQXNzb2NpYXRpb24ucHVzaChhc3NvY2lhdGlvbik7XHJcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XHJcbiAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBudW1WZXJ0aWNlczsgaisrKSB7XHJcbiAgICAgICAgY29uc3QgajMgPSBqICogMztcclxuICAgICAgICBpZiAodGhpcy5pc0VxdWFsKGlkeFZlcnRpY2VzW2kzXSwgaWR4VmVydGljZXNbaTMgKyAxXSwgaWR4VmVydGljZXNbaTMgKyAyXSxcclxuICAgICAgICB2ZXJ0aWNlc1tqM10sIHZlcnRpY2VzW2ozICsgMV0sIHZlcnRpY2VzW2ozICsgMl0pKSB7XHJcbiAgICAgICAgICBhc3NvY2lhdGlvbi5wdXNoKGozKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7dmVydGljZXM6IGJ1Zkdlb21ldHJ5Lm1hcHBlZFZlcnRpY2VzLCBpbmRpY2VzOiBidWZHZW9tZXRyeS5tYXBwZWRJbmRpY2VzfTtcclxuICB9XHJcblxyXG4gIG9uZU5vZGVQb3NpdGlvbkNhbGxiYWNrKHAsIHEpIHtcclxuICAgIHRoaXMucG9zaXRpb24uc2V0KHAueCwgcC55LCBwLnopO1xyXG4gICAgdGhpcy5xdWF0ZXJuaW9uLnNldChxLngsIHEueSwgcS56LCBxLncpO1xyXG4gIH1cclxuXHJcbiAgbXVsdHlOb2RlUG9zaXRpb25DYWxsYmFjayhub2RlLCBwLCBuKSB7XHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XHJcbiAgICBjb25zdCB2b2x1bWVQb3NpdGlvbnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgY29uc3Qgdm9sdW1lTm9ybWFscyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLmFycmF5O1xyXG4gICAgY29uc3QgYXNzb2NWZXJ0ZXggPSBnZW9tZXRyeS5tYXBwZWRBc3NvY2lhdGlvbltub2RlXTtcclxuXHJcbiAgICBmb3IobGV0IGsgPSAwOyBrIDwgYXNzb2NWZXJ0ZXgubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICBsZXQgaW5kZXhWZXJ0ZXggPSBhc3NvY1ZlcnRleFtrXTtcclxuICAgICAgICB2b2x1bWVQb3NpdGlvbnNbaW5kZXhWZXJ0ZXhdID0gcC54O1xyXG4gICAgICAgIHZvbHVtZU5vcm1hbHNbaW5kZXhWZXJ0ZXhdID0gbi54O1xyXG4gICAgICAgICsraW5kZXhWZXJ0ZXg7XHJcbiAgICAgICAgdm9sdW1lUG9zaXRpb25zW2luZGV4VmVydGV4XSA9IHAueTtcclxuICAgICAgICB2b2x1bWVOb3JtYWxzW2luZGV4VmVydGV4XSA9IG4ueTtcclxuICAgICAgICArK2luZGV4VmVydGV4O1xyXG4gICAgICAgIHZvbHVtZVBvc2l0aW9uc1tpbmRleFZlcnRleF0gPSBwLno7XHJcbiAgICAgICAgdm9sdW1lTm9ybWFsc1tpbmRleFZlcnRleF0gPSBuLno7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtdWx0eU5vZGVQb3NpdGlvblBvc3RDYWxsYmFjaygpIHtcclxuICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTtcclxuICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgcGF0aFBvc2l0aW9uQ2FsbGJhY2sobm9kZSwgcCkge1xyXG4gICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG5cdFx0bGV0IGkgPSAzICogbm9kZTtcclxuXHRcdHBvc2l0aW9uc1tpKytdID0gcC54O1xyXG5cdFx0cG9zaXRpb25zW2krK10gPSBwLnk7XHJcblx0XHRwb3NpdGlvbnNbaV0gPSBwLno7XHJcbiAgfVxyXG5cclxuICBwYXRoUG9zaXRpb25Qb3N0Q2FsbGJhY2soKSB7XHJcbiAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XHJcbiAgICBnZW9tZXRyeS5jb21wdXRlVmVydGV4Tm9ybWFscygpO1xyXG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9WaXN1YWxXb3JsZC5qc1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL2NvbW1vbi9jbGFzc2VzL1Zpc3VhbFdvcmxkLmpzIiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi9Db250cm9sbGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuXHJcbiAgY29uc3RydWN0b3Iodmlldykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHRvZ2xlKCkge1xyXG4gICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICAgIHRoaXMuZmlyZUNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgaGlkZSgpIHtcclxuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5maXJlQ2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBmaXJlQ2hhbmdlKCkge1xyXG4gICAgaWYodGhpcy5vbkNoYW5nZSkge1xyXG4gICAgICB0aGlzLm9uQ2hhbmdlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXcoKSB7XHJcbiAgICBpZih0aGlzLnZpZXcpIHtcclxuICAgICAgdGhpcy52aWV3LnNldFN0YXRlKCd3aWRGbG9hdFduZCcsIHtcclxuICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgdmlzaWJsZTogdGhpcy52aXNpYmxlLFxyXG4gICAgICAgIGFjdGl2ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi8uLi9jb21tb24vY2xhc3Nlcy9XaWRnZXRDb250cm9sbGVyLmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvV2lkZ2V0Q29udHJvbGxlci5qcyIsImltcG9ydCBUYXJnZXQgZnJvbSAnLi9UYXJnZXQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2lyY2xlVGFyZ2V0IGV4dGVuZHMgVGFyZ2V0IHtcclxuXHJcbiAgY29uc3RydWN0b3IoeCwgeSwgcikge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMucCA9IHtcclxuICAgICAgeCxcclxuICAgICAgeSxcclxuICAgICAgclxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHRlc3RJbnRlcnNlY3Rpb24oZSwgZGF0YSkge1xyXG4gICAgbGV0IHJlcztcclxuICAgIGNvbnN0IHt4LCB5fSA9IGRhdGEsIHAgPSB0aGlzLnA7XHJcbiAgICBpZigoeC1wLngpKih4LXAueCkrKHktcC55KSooeS1wLnkpPD1wLnIqcC5yKSB7XHJcbiAgICAgIHJlcyA9IHtcclxuICAgICAgICB0YXJnZXQ6IHRoaXMsXHJcbiAgICAgICAgZGF0YVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuLy4uL2NvbW1vbi9jbGFzc2VzL3RhcmdldHMvQ2lyY2xlVGFyZ2V0LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9DaXJjbGVUYXJnZXQuanMiLCJpbXBvcnQgVGFyZ2V0IGZyb20gJy4vVGFyZ2V0JztcclxuaW1wb3J0IEJhc2VNYXRoVXRpbHMgZnJvbSAnLi4vQmFzZU1hdGhVdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb2x5VGFyZ2V0IGV4dGVuZHMgVGFyZ2V0IHtcclxuXHJcbiAgY29uc3RydWN0b3IocG9seSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMucG9seSA9IHBvbHk7XHJcbiAgfVxyXG5cclxuICB0ZXN0SW50ZXJzZWN0aW9uKGUsIHApIHtcclxuICAgIHJldHVybiBCYXNlTWF0aFV0aWxzLmlzSW5zaWRlUG9seSh0aGlzLnBvbHksIHApPyB7XHJcbiAgICAgIHRhcmdldDogdGhpcyxcclxuICAgICAgZGF0YTogcFxyXG4gICAgfTogdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vLi4vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9Qb2x5VGFyZ2V0LmpzXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2s6Ly8vY29tbW9uL2NsYXNzZXMvdGFyZ2V0cy9Qb2x5VGFyZ2V0LmpzIiwiLy8gc3RhdHMuanMgLSBodHRwOi8vZ2l0aHViLmNvbS9tcmRvb2Ivc3RhdHMuanNcbihmdW5jdGlvbihmLGUpe1wib2JqZWN0XCI9PT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOmYuU3RhdHM9ZSgpfSkodGhpcyxmdW5jdGlvbigpe3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShhKXtjLmFwcGVuZENoaWxkKGEuZG9tKTtyZXR1cm4gYX1mdW5jdGlvbiB1KGEpe2Zvcih2YXIgZD0wO2Q8Yy5jaGlsZHJlbi5sZW5ndGg7ZCsrKWMuY2hpbGRyZW5bZF0uc3R5bGUuZGlzcGxheT1kPT09YT9cImJsb2NrXCI6XCJub25lXCI7bD1hfXZhciBsPTAsYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Muc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5OjAuOTt6LWluZGV4OjEwMDAwXCI7Yy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7XG51KCsrbCVjLmNoaWxkcmVuLmxlbmd0aCl9LCExKTt2YXIgaz0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpLGc9ayxhPTAscj1lKG5ldyBmLlBhbmVsKFwiRlBTXCIsXCIjMGZmXCIsXCIjMDAyXCIpKSxoPWUobmV3IGYuUGFuZWwoXCJNU1wiLFwiIzBmMFwiLFwiIzAyMFwiKSk7aWYoc2VsZi5wZXJmb3JtYW5jZSYmc2VsZi5wZXJmb3JtYW5jZS5tZW1vcnkpdmFyIHQ9ZShuZXcgZi5QYW5lbChcIk1CXCIsXCIjZjA4XCIsXCIjMjAxXCIpKTt1KDApO3JldHVybntSRVZJU0lPTjoxNixkb206YyxhZGRQYW5lbDplLHNob3dQYW5lbDp1LGJlZ2luOmZ1bmN0aW9uKCl7az0ocGVyZm9ybWFuY2V8fERhdGUpLm5vdygpfSxlbmQ6ZnVuY3Rpb24oKXthKys7dmFyIGM9KHBlcmZvcm1hbmNlfHxEYXRlKS5ub3coKTtoLnVwZGF0ZShjLWssMjAwKTtpZihjPmcrMUUzJiYoci51cGRhdGUoMUUzKmEvKGMtZyksMTAwKSxnPWMsYT0wLHQpKXt2YXIgZD1wZXJmb3JtYW5jZS5tZW1vcnk7dC51cGRhdGUoZC51c2VkSlNIZWFwU2l6ZS9cbjEwNDg1NzYsZC5qc0hlYXBTaXplTGltaXQvMTA0ODU3Nil9cmV0dXJuIGN9LHVwZGF0ZTpmdW5jdGlvbigpe2s9dGhpcy5lbmQoKX0sZG9tRWxlbWVudDpjLHNldE1vZGU6dX19O2YuUGFuZWw9ZnVuY3Rpb24oZSxmLGwpe3ZhciBjPUluZmluaXR5LGs9MCxnPU1hdGgucm91bmQsYT1nKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxyPTgwKmEsaD00OCphLHQ9MyphLHY9MiphLGQ9MyphLG09MTUqYSxuPTc0KmEscD0zMCphLHE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtxLndpZHRoPXI7cS5oZWlnaHQ9aDtxLnN0eWxlLmNzc1RleHQ9XCJ3aWR0aDo4MHB4O2hlaWdodDo0OHB4XCI7dmFyIGI9cS5nZXRDb250ZXh0KFwiMmRcIik7Yi5mb250PVwiYm9sZCBcIis5KmErXCJweCBIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZlwiO2IudGV4dEJhc2VsaW5lPVwidG9wXCI7Yi5maWxsU3R5bGU9bDtiLmZpbGxSZWN0KDAsMCxyLGgpO2IuZmlsbFN0eWxlPWY7Yi5maWxsVGV4dChlLHQsdik7XG5iLmZpbGxSZWN0KGQsbSxuLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQsbSxuLHApO3JldHVybntkb206cSx1cGRhdGU6ZnVuY3Rpb24oaCx3KXtjPU1hdGgubWluKGMsaCk7az1NYXRoLm1heChrLGgpO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0xO2IuZmlsbFJlY3QoMCwwLHIsbSk7Yi5maWxsU3R5bGU9ZjtiLmZpbGxUZXh0KGcoaCkrXCIgXCIrZStcIiAoXCIrZyhjKStcIi1cIitnKGspK1wiKVwiLHQsdik7Yi5kcmF3SW1hZ2UocSxkK2EsbSxuLWEscCxkLG0sbi1hLHApO2IuZmlsbFJlY3QoZCtuLWEsbSxhLHApO2IuZmlsbFN0eWxlPWw7Yi5nbG9iYWxBbHBoYT0uOTtiLmZpbGxSZWN0KGQrbi1hLG0sYSxnKCgxLWgvdykqcCkpfX19O3JldHVybiBmfSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vc3RhdHMuanMvYnVpbGQvc3RhdHMubWluLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjazovLy9+L3N0YXRzLmpzL2J1aWxkL3N0YXRzLm1pbi5qcyIsIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciBkZWZpbmUgPSBmYWxzZTtcblxuLyohXG4gKiBqUXVlcnkgTW91c2V3aGVlbCAzLjEuMTNcbiAqXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlMgc3R5bGUgZm9yIEJyb3dzZXJpZnlcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIHRvRml4ICA9IFsnd2hlZWwnLCAnbW91c2V3aGVlbCcsICdET01Nb3VzZVNjcm9sbCcsICdNb3pNb3VzZVBpeGVsU2Nyb2xsJ10sXG4gICAgICAgIHRvQmluZCA9ICggJ29ud2hlZWwnIGluIGRvY3VtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+PSA5ICkgP1xuICAgICAgICAgICAgICAgICAgICBbJ3doZWVsJ10gOiBbJ21vdXNld2hlZWwnLCAnRG9tTW91c2VTY3JvbGwnLCAnTW96TW91c2VQaXhlbFNjcm9sbCddLFxuICAgICAgICBzbGljZSAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG4gICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQsIGxvd2VzdERlbHRhO1xuXG4gICAgaWYgKCAkLmV2ZW50LmZpeEhvb2tzICkge1xuICAgICAgICBmb3IgKCB2YXIgaSA9IHRvRml4Lmxlbmd0aDsgaTsgKSB7XG4gICAgICAgICAgICAkLmV2ZW50LmZpeEhvb2tzWyB0b0ZpeFstLWldIF0gPSAkLmV2ZW50Lm1vdXNlSG9va3M7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0ge1xuICAgICAgICB2ZXJzaW9uOiAnMy4xLjEyJyxcblxuICAgICAgICBzZXR1cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRvQmluZC5sZW5ndGg7IGk7ICkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIHRvQmluZFstLWldLCBoYW5kbGVyLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBoYW5kbGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGxpbmUgaGVpZ2h0IGFuZCBwYWdlIGhlaWdodCBmb3IgdGhpcyBwYXJ0aWN1bGFyIGVsZW1lbnRcbiAgICAgICAgICAgICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcsIHNwZWNpYWwuZ2V0TGluZUhlaWdodCh0aGlzKSk7XG4gICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnLCBzcGVjaWFsLmdldFBhZ2VIZWlnaHQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gdG9CaW5kLmxlbmd0aDsgaTsgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggdG9CaW5kWy0taV0sIGhhbmRsZXIsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubW91c2V3aGVlbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgZGF0YSB3ZSBhZGRlZCB0byB0aGUgZWxlbWVudFxuICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Jyk7XG4gICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMaW5lSGVpZ2h0OiBmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgICAgICB2YXIgJGVsZW0gPSAkKGVsZW0pLFxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkZWxlbVsnb2Zmc2V0UGFyZW50JyBpbiAkLmZuID8gJ29mZnNldFBhcmVudCcgOiAncGFyZW50J10oKTtcbiAgICAgICAgICAgIGlmICghJHBhcmVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gJCgnYm9keScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KCRwYXJlbnQuY3NzKCdmb250U2l6ZScpLCAxMCkgfHwgcGFyc2VJbnQoJGVsZW0uY3NzKCdmb250U2l6ZScpLCAxMCkgfHwgMTY7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0UGFnZUhlaWdodDogZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuICQoZWxlbSkuaGVpZ2h0KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGFkanVzdE9sZERlbHRhczogdHJ1ZSwgLy8gc2VlIHNob3VsZEFkanVzdE9sZERlbHRhcygpIGJlbG93XG4gICAgICAgICAgICBub3JtYWxpemVPZmZzZXQ6IHRydWUgIC8vIGNhbGxzIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmb3IgZWFjaCBldmVudFxuICAgICAgICB9XG4gICAgfTtcblxuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgbW91c2V3aGVlbDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHJldHVybiBmbiA/IHRoaXMuYmluZCgnbW91c2V3aGVlbCcsIGZuKSA6IHRoaXMudHJpZ2dlcignbW91c2V3aGVlbCcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVubW91c2V3aGVlbDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuYmluZCgnbW91c2V3aGVlbCcsIGZuKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbiAgICBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHZhciBvcmdFdmVudCAgID0gZXZlbnQgfHwgd2luZG93LmV2ZW50LFxuICAgICAgICAgICAgYXJncyAgICAgICA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcbiAgICAgICAgICAgIGRlbHRhICAgICAgPSAwLFxuICAgICAgICAgICAgZGVsdGFYICAgICA9IDAsXG4gICAgICAgICAgICBkZWx0YVkgICAgID0gMCxcbiAgICAgICAgICAgIGFic0RlbHRhICAgPSAwLFxuICAgICAgICAgICAgb2Zmc2V0WCAgICA9IDAsXG4gICAgICAgICAgICBvZmZzZXRZICAgID0gMDtcbiAgICAgICAgZXZlbnQgPSAkLmV2ZW50LmZpeChvcmdFdmVudCk7XG4gICAgICAgIGV2ZW50LnR5cGUgPSAnbW91c2V3aGVlbCc7XG5cbiAgICAgICAgLy8gT2xkIHNjaG9vbCBzY3JvbGx3aGVlbCBkZWx0YVxuICAgICAgICBpZiAoICdkZXRhaWwnICAgICAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LmRldGFpbCAqIC0xOyAgICAgIH1cbiAgICAgICAgaWYgKCAnd2hlZWxEZWx0YScgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhOyAgICAgICB9XG4gICAgICAgIGlmICggJ3doZWVsRGVsdGFZJyBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YVk7ICAgICAgfVxuICAgICAgICBpZiAoICd3aGVlbERlbHRhWCcgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWCA9IG9yZ0V2ZW50LndoZWVsRGVsdGFYICogLTE7IH1cblxuICAgICAgICAvLyBGaXJlZm94IDwgMTcgaG9yaXpvbnRhbCBzY3JvbGxpbmcgcmVsYXRlZCB0byBET01Nb3VzZVNjcm9sbCBldmVudFxuICAgICAgICBpZiAoICdheGlzJyBpbiBvcmdFdmVudCAmJiBvcmdFdmVudC5heGlzID09PSBvcmdFdmVudC5IT1JJWk9OVEFMX0FYSVMgKSB7XG4gICAgICAgICAgICBkZWx0YVggPSBkZWx0YVkgKiAtMTtcbiAgICAgICAgICAgIGRlbHRhWSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgZGVsdGEgdG8gYmUgZGVsdGFZIG9yIGRlbHRhWCBpZiBkZWx0YVkgaXMgMCBmb3IgYmFja3dhcmRzIGNvbXBhdGFiaWxpdGl5XG4gICAgICAgIGRlbHRhID0gZGVsdGFZID09PSAwID8gZGVsdGFYIDogZGVsdGFZO1xuXG4gICAgICAgIC8vIE5ldyBzY2hvb2wgd2hlZWwgZGVsdGEgKHdoZWVsIGV2ZW50KVxuICAgICAgICBpZiAoICdkZWx0YVknIGluIG9yZ0V2ZW50ICkge1xuICAgICAgICAgICAgZGVsdGFZID0gb3JnRXZlbnQuZGVsdGFZICogLTE7XG4gICAgICAgICAgICBkZWx0YSAgPSBkZWx0YVk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCAnZGVsdGFYJyBpbiBvcmdFdmVudCApIHtcbiAgICAgICAgICAgIGRlbHRhWCA9IG9yZ0V2ZW50LmRlbHRhWDtcbiAgICAgICAgICAgIGlmICggZGVsdGFZID09PSAwICkgeyBkZWx0YSAgPSBkZWx0YVggKiAtMTsgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm8gY2hhbmdlIGFjdHVhbGx5IGhhcHBlbmVkLCBubyByZWFzb24gdG8gZ28gYW55IGZ1cnRoZXJcbiAgICAgICAgaWYgKCBkZWx0YVkgPT09IDAgJiYgZGVsdGFYID09PSAwICkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBOZWVkIHRvIGNvbnZlcnQgbGluZXMgYW5kIHBhZ2VzIHRvIHBpeGVscyBpZiB3ZSBhcmVuJ3QgYWxyZWFkeSBpbiBwaXhlbHNcbiAgICAgICAgLy8gVGhlcmUgYXJlIHRocmVlIGRlbHRhIG1vZGVzOlxuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDAgaXMgYnkgcGl4ZWxzLCBub3RoaW5nIHRvIGRvXG4gICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMSBpcyBieSBsaW5lc1xuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDIgaXMgYnkgcGFnZXNcbiAgICAgICAgaWYgKCBvcmdFdmVudC5kZWx0YU1vZGUgPT09IDEgKSB7XG4gICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9ICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xuICAgICAgICAgICAgZGVsdGEgICo9IGxpbmVIZWlnaHQ7XG4gICAgICAgICAgICBkZWx0YVkgKj0gbGluZUhlaWdodDtcbiAgICAgICAgICAgIGRlbHRhWCAqPSBsaW5lSGVpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKCBvcmdFdmVudC5kZWx0YU1vZGUgPT09IDIgKSB7XG4gICAgICAgICAgICB2YXIgcGFnZUhlaWdodCA9ICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1wYWdlLWhlaWdodCcpO1xuICAgICAgICAgICAgZGVsdGEgICo9IHBhZ2VIZWlnaHQ7XG4gICAgICAgICAgICBkZWx0YVkgKj0gcGFnZUhlaWdodDtcbiAgICAgICAgICAgIGRlbHRhWCAqPSBwYWdlSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RvcmUgbG93ZXN0IGFic29sdXRlIGRlbHRhIHRvIG5vcm1hbGl6ZSB0aGUgZGVsdGEgdmFsdWVzXG4gICAgICAgIGFic0RlbHRhID0gTWF0aC5tYXgoIE1hdGguYWJzKGRlbHRhWSksIE1hdGguYWJzKGRlbHRhWCkgKTtcblxuICAgICAgICBpZiAoICFsb3dlc3REZWx0YSB8fCBhYnNEZWx0YSA8IGxvd2VzdERlbHRhICkge1xuICAgICAgICAgICAgbG93ZXN0RGVsdGEgPSBhYnNEZWx0YTtcblxuICAgICAgICAgICAgLy8gQWRqdXN0IG9sZGVyIGRlbHRhcyBpZiBuZWNlc3NhcnlcbiAgICAgICAgICAgIGlmICggc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkgKSB7XG4gICAgICAgICAgICAgICAgbG93ZXN0RGVsdGEgLz0gNDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGp1c3Qgb2xkZXIgZGVsdGFzIGlmIG5lY2Vzc2FyeVxuICAgICAgICBpZiAoIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpICkge1xuICAgICAgICAgICAgLy8gRGl2aWRlIGFsbCB0aGUgdGhpbmdzIGJ5IDQwIVxuICAgICAgICAgICAgZGVsdGEgIC89IDQwO1xuICAgICAgICAgICAgZGVsdGFYIC89IDQwO1xuICAgICAgICAgICAgZGVsdGFZIC89IDQwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IGEgd2hvbGUsIG5vcm1hbGl6ZWQgdmFsdWUgZm9yIHRoZSBkZWx0YXNcbiAgICAgICAgZGVsdGEgID0gTWF0aFsgZGVsdGEgID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGEgIC8gbG93ZXN0RGVsdGEpO1xuICAgICAgICBkZWx0YVggPSBNYXRoWyBkZWx0YVggPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YVggLyBsb3dlc3REZWx0YSk7XG4gICAgICAgIGRlbHRhWSA9IE1hdGhbIGRlbHRhWSA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhWSAvIGxvd2VzdERlbHRhKTtcblxuICAgICAgICAvLyBOb3JtYWxpc2Ugb2Zmc2V0WCBhbmQgb2Zmc2V0WSBwcm9wZXJ0aWVzXG4gICAgICAgIGlmICggc3BlY2lhbC5zZXR0aW5ncy5ub3JtYWxpemVPZmZzZXQgJiYgdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QgKSB7XG4gICAgICAgICAgICB2YXIgYm91bmRpbmdSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQ7XG4gICAgICAgICAgICBvZmZzZXRZID0gZXZlbnQuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC50b3A7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgaW5mb3JtYXRpb24gdG8gdGhlIGV2ZW50IG9iamVjdFxuICAgICAgICBldmVudC5kZWx0YVggPSBkZWx0YVg7XG4gICAgICAgIGV2ZW50LmRlbHRhWSA9IGRlbHRhWTtcbiAgICAgICAgZXZlbnQuZGVsdGFGYWN0b3IgPSBsb3dlc3REZWx0YTtcbiAgICAgICAgZXZlbnQub2Zmc2V0WCA9IG9mZnNldFg7XG4gICAgICAgIGV2ZW50Lm9mZnNldFkgPSBvZmZzZXRZO1xuICAgICAgICAvLyBHbyBhaGVhZCBhbmQgc2V0IGRlbHRhTW9kZSB0byAwIHNpbmNlIHdlIGNvbnZlcnRlZCB0byBwaXhlbHNcbiAgICAgICAgLy8gQWx0aG91Z2ggdGhpcyBpcyBhIGxpdHRsZSBvZGQgc2luY2Ugd2Ugb3ZlcndyaXRlIHRoZSBkZWx0YVgvWVxuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggbm9ybWFsaXplZCBkZWx0YXMuXG4gICAgICAgIGV2ZW50LmRlbHRhTW9kZSA9IDA7XG5cbiAgICAgICAgLy8gQWRkIGV2ZW50IGFuZCBkZWx0YSB0byB0aGUgZnJvbnQgb2YgdGhlIGFyZ3VtZW50c1xuICAgICAgICBhcmdzLnVuc2hpZnQoZXZlbnQsIGRlbHRhLCBkZWx0YVgsIGRlbHRhWSk7XG5cbiAgICAgICAgLy8gQ2xlYXJvdXQgbG93ZXN0RGVsdGEgYWZ0ZXIgc29tZXRpbWUgdG8gYmV0dGVyXG4gICAgICAgIC8vIGhhbmRsZSBtdWx0aXBsZSBkZXZpY2UgdHlwZXMgdGhhdCBnaXZlIGRpZmZlcmVudFxuICAgICAgICAvLyBhIGRpZmZlcmVudCBsb3dlc3REZWx0YVxuICAgICAgICAvLyBFeDogdHJhY2twYWQgPSAzIGFuZCBtb3VzZSB3aGVlbCA9IDEyMFxuICAgICAgICBpZiAobnVsbExvd2VzdERlbHRhVGltZW91dCkgeyBjbGVhclRpbWVvdXQobnVsbExvd2VzdERlbHRhVGltZW91dCk7IH1cbiAgICAgICAgbnVsbExvd2VzdERlbHRhVGltZW91dCA9IHNldFRpbWVvdXQobnVsbExvd2VzdERlbHRhLCAyMDApO1xuXG4gICAgICAgIHJldHVybiAoJC5ldmVudC5kaXNwYXRjaCB8fCAkLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbnVsbExvd2VzdERlbHRhKCkge1xuICAgICAgICBsb3dlc3REZWx0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkge1xuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIG9sZGVyIGV2ZW50IGFuZCB0aGUgZGVsdGEgaXMgZGl2aXNhYmxlIGJ5IDEyMCxcbiAgICAgICAgLy8gdGhlbiB3ZSBhcmUgYXNzdW1pbmcgdGhhdCB0aGUgYnJvd3NlciBpcyB0cmVhdGluZyB0aGlzIGFzIGFuXG4gICAgICAgIC8vIG9sZGVyIG1vdXNlIHdoZWVsIGV2ZW50IGFuZCB0aGF0IHdlIHNob3VsZCBkaXZpZGUgdGhlIGRlbHRhc1xuICAgICAgICAvLyBieSA0MCB0byB0cnkgYW5kIGdldCBhIG1vcmUgdXNhYmxlIGRlbHRhRmFjdG9yLlxuICAgICAgICAvLyBTaWRlIG5vdGUsIHRoaXMgYWN0dWFsbHkgaW1wYWN0cyB0aGUgcmVwb3J0ZWQgc2Nyb2xsIGRpc3RhbmNlXG4gICAgICAgIC8vIGluIG9sZGVyIGJyb3dzZXJzIGFuZCBjYW4gY2F1c2Ugc2Nyb2xsaW5nIHRvIGJlIHNsb3dlciB0aGFuIG5hdGl2ZS5cbiAgICAgICAgLy8gVHVybiB0aGlzIG9mZiBieSBzZXR0aW5nICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyB0byBmYWxzZS5cbiAgICAgICAgcmV0dXJuIHNwZWNpYWwuc2V0dGluZ3MuYWRqdXN0T2xkRGVsdGFzICYmIG9yZ0V2ZW50LnR5cGUgPT09ICdtb3VzZXdoZWVsJyAmJiBhYnNEZWx0YSAlIDEyMCA9PT0gMDtcbiAgICB9XG5cbn0pKTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vY29tbW9uL34vaW1wb3J0cy1sb2FkZXI/ZGVmaW5lPT5mYWxzZSEuL34vanF1ZXJ5LW1vdXNld2hlZWwvanF1ZXJ5Lm1vdXNld2hlZWwuanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrOi8vL34vanF1ZXJ5LW1vdXNld2hlZWwvanF1ZXJ5Lm1vdXNld2hlZWwuanMiLCJjb25zdCBfJCA9IEdMT0JBTF9MSUJTLmpRdWVyeT8gd2luZG93LmpRdWVyeTogcmVxdWlyZSgnanF1ZXJ5JyksXHJcbiAgICAgIF9odG1sMmNhbnZhcyA9IEdMT0JBTF9MSUJTLmh0bWwyY2FudmFzPyB3aW5kb3cuaHRtbDJjYW52YXM6IHJlcXVpcmUoJ2h0bWwyY2FudmFzJyksXHJcbiAgICAgIF9USFJFRSA9IEdMT0JBTF9MSUJTLlRIUkVFPyB3aW5kb3cuVEhSRUU6IHJlcXVpcmUoJ3RocmVlJyksXHJcbiAgICAgIF9QREZKUyA9IEdMT0JBTF9MSUJTLlBERkpTPyB3aW5kb3cuUERGSlM6IHJlcXVpcmUoJ3BkZmpzJyk7XHJcblxyXG5leHBvcnQge1xyXG4gIF8kIGFzICQsXHJcbiAgX2h0bWwyY2FudmFzIGFzIGh0bWwyY2FudmFzLFxyXG4gIF9USFJFRSBhcyBUSFJFRSxcclxuICBfUERGSlMgYXMgUERGSlNcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2xpYnMuanMiXSwic291cmNlUm9vdCI6IiJ9
